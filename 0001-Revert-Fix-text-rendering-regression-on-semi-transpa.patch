From d0ed9b07eb928c7d037b3fadb7423c87d7b798b0 Mon Sep 17 00:00:00 2001
From: Fabian Vogt <fabian@ritter-vogt.de>
Date: Wed, 25 Dec 2019 18:54:40 +0100
Subject: [PATCH 1/3] Revert "Fix text-rendering regression on semi-transparent
 background on Linux"

This reverts commit c0adcf0f226e247c1f2f515cd33d7945573e96a5.
---
 src/gui/painting/qdrawhelper.cpp | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/src/gui/painting/qdrawhelper.cpp b/src/gui/painting/qdrawhelper.cpp
index e8d129d047..e5f752b94e 100644
--- a/src/gui/painting/qdrawhelper.cpp
+++ b/src/gui/painting/qdrawhelper.cpp
@@ -6044,11 +6044,11 @@ static inline void alphargbblend_argb32(quint32 *dst, uint coverage, const QRgba
         // nothing
     } else if (coverage == 0xffffffff && qAlpha(src) == 255) {
         blend_pixel(*dst, src);
+    } else if (!colorProfile) {
+        *dst = rgbBlend(*dst, src, coverage);
     } else if (*dst < 0xff000000) {
         // Give up and do a naive gray alphablend. Needed to deal with ARGB32 and invalid ARGB32_premultiplied, see QTBUG-60571
         blend_pixel(*dst, src, qRgbAvg(coverage));
-    } else if (!colorProfile) {
-        *dst = rgbBlend(*dst, src, coverage);
     } else if (srcLinear.isOpaque()) {
         rgbBlendPixel(dst, coverage, srcLinear, colorProfile);
     } else {
-- 
2.23.0

