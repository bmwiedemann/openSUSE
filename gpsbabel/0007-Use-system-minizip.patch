From 504065f4b55e9817e4d09da8dc16067c512a7e99 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Ralf=20Cors=C3=A9pius?= <corsepiu@fedoraproject.org>
Date: Sun, 3 Jan 2016 16:05:20 +0100
Subject: [PATCH 7/7] Use system minizip.

---
 Makefile.in            | 5 ++---
 src/core/ziparchive.cc | 2 +-
 src/core/ziparchive.h  | 2 +-
 3 files changed, 4 insertions(+), 5 deletions(-)

Index: gpsbabel-1.5.3/Makefile.in
===================================================================
--- gpsbabel-1.5.3.orig/Makefile.in
+++ gpsbabel-1.5.3/Makefile.in
@@ -102,8 +102,7 @@ JEEPS=jeeps/gpsapp.o jeeps/gpscom.o \
 
 SHAPE=-lshp
 
-MINIZIP=zlib/contrib/minizip/zip.o \
-	zlib/contrib/minizip/ioapi.o
+MINIZIP=-lminizip
 
 ZLIB=-lz
 
@@ -116,7 +115,7 @@ LIBOBJS = queue.o route.o waypt.o filter
 	  src/core/xmlstreamwriter.o \
 	  src/core/usasciicodec.o\
 	  src/core/ziparchive.o \
-	  $(GARMIN) $(JEEPS) @ZLIB@ $(FMTS) $(FILTERS)
+	  $(GARMIN) $(JEEPS) @ZLIB@ $(MINIZIP) $(FMTS) $(FILTERS)
 OBJS = main.o globals.o $(LIBOBJS) @FILEINFO@
 
 DEPFILES = $(OBJS:.o=.d)
Index: gpsbabel-1.5.3/src/core/ziparchive.cc
===================================================================
--- gpsbabel-1.5.3.orig/src/core/ziparchive.cc
+++ gpsbabel-1.5.3/src/core/ziparchive.cc
@@ -23,7 +23,7 @@
 
 #include "defs.h"
 #include "src/core/logging.h"
-#include "zlib/contrib/minizip/zip.h"
+#include <minizip/zip.h>
 
 #include <QtCore/QFile>
 #include <QtCore/QDebug>
Index: gpsbabel-1.5.3/src/core/ziparchive.h
===================================================================
--- gpsbabel-1.5.3.orig/src/core/ziparchive.h
+++ gpsbabel-1.5.3/src/core/ziparchive.h
@@ -21,7 +21,7 @@
 
 #include <QtCore/QString>
 #include <QtCore/QStringList>
-#include "zlib/contrib/minizip/zip.h"
+#include <minizip/zip.h>
 
 class  ZipArchive
 {
