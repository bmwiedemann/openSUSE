From 2d92ee5b01a0069cc33debdcb3c29dc817c2d6f3 Mon Sep 17 00:00:00 2001
From: Halla Rempt <halla@valdyas.org>
Date: Wed, 10 Mar 2021 12:49:34 +0100
Subject: [PATCH] Use opengl es on Arm Linux

BUG:421136
(cherry picked from commit c91d020b244f012e09203c14d80d8e8774362a57)
---
 libs/ui/CMakeLists.txt | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/libs/ui/CMakeLists.txt b/libs/ui/CMakeLists.txt
index 87bea6e30e..4876489b8e 100644
--- a/libs/ui/CMakeLists.txt
+++ b/libs/ui/CMakeLists.txt
@@ -7,7 +7,7 @@ include_directories(SYSTEM
     ${OCIO_INCLUDE_DIR}
 )
 
-if (ANDROID)
+if (ANDROID OR (CMAKE_SYSTEM_PROCESSOR MATCHES "^(aarch64.*|AARCH64.*|arm64.*|ARM64.*)" AND NOT APPLE))
     add_definitions(-DQT_OPENGL_ES_3)
     add_definitions(-DHAS_ONLY_OPENGL_ES)
     include_directories (${Qt5AndroidExtras_INCLUDE_DIRS})
-- 
2.30.1

