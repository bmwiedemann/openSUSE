Index: sh-1.12.14/test.py
===================================================================
--- sh-1.12.14.orig/test.py
+++ sh-1.12.14/test.py
@@ -1374,10 +1374,9 @@ for i in range(5):
         self.assertTrue("4" not in stdout)
 
     def test_general_signal(self):
-        import signal
         from signal import SIGINT
 
-        py = create_tmp_test("""
+        py = create_tmp_test(r"""
 import sys
 import os
 import time
@@ -1386,7 +1385,7 @@ import signal
 def sig_handler(sig, frame):
     print(10)
     exit(0)
-    
+
 signal.signal(signal.SIGINT, sig_handler)
 
 for i in range(5):
@@ -1403,7 +1402,7 @@ for i in range(5):
                 process.signal(SIGINT)
                 return True
 
-        p = python(py.name, _out=agg, _tee=True)
+        p = python('-u', py.name, _out=agg, _tee=True)
         p.wait()
 
         self.assertEqual(p.process.exit_code, 0)
