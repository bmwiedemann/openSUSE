From f8557851f5e43f991aaeecd5bcbb9597d65b2005 Mon Sep 17 00:00:00 2001
From: Laurent Montel <montel@kde.org>
Date: Wed, 3 Feb 2021 07:36:08 +0100
Subject: [PATCH 1/2] Fix Bug 431218 - mail viewer loads external fonts even
 with external refs disabled

BUG: 431218
FIXED-IN: 5.16.3
---
 .../loadexternalreferencesurlinterceptor.cpp                    | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/messageviewer/src/viewer/webengine/loadexternalreferencesurlinterceptor/loadexternalreferencesurlinterceptor.cpp b/messageviewer/src/viewer/webengine/loadexternalreferencesurlinterceptor/loadexternalreferencesurlinterceptor.cpp
index 1eca13729c..a7a49fcb6c 100644
--- a/messageviewer/src/viewer/webengine/loadexternalreferencesurlinterceptor/loadexternalreferencesurlinterceptor.cpp
+++ b/messageviewer/src/viewer/webengine/loadexternalreferencesurlinterceptor/loadexternalreferencesurlinterceptor.cpp
@@ -33,6 +33,8 @@ bool LoadExternalReferencesUrlInterceptor::interceptRequest(QWebEngineUrlRequest
             && !info.requestUrl().isLocalFile()
             && (scheme != QLatin1String("cid"))) {
             return true;
+        } else if (info.resourceType() == QWebEngineUrlRequestInfo::ResourceTypeFontResource) {
+            return true;
         }
     }
     return false;
-- 
2.30.0

