From 7525dcc085d0453209bd7c321adac9c54487afa6 Mon Sep 17 00:00:00 2001
From: Fabian Vogt <fabian@ritter-vogt.de>
Date: Thu, 14 Mar 2019 10:30:14 +0100
Subject: [PATCH 1/3] Revert "Blacklist nouveau and llvmpipe for
 multithreading"

This reverts commit 96f6cab22cab252cbe7a98bbeadde95497e0bd75.
---
 .../xcb_glx/qglxintegration.cpp                | 18 ------------------
 1 file changed, 18 deletions(-)

diff --git a/src/plugins/platforms/xcb/gl_integrations/xcb_glx/qglxintegration.cpp b/src/plugins/platforms/xcb/gl_integrations/xcb_glx/qglxintegration.cpp
index 476de6d1e5..d42a33c22b 100644
--- a/src/plugins/platforms/xcb/gl_integrations/xcb_glx/qglxintegration.cpp
+++ b/src/plugins/platforms/xcb/gl_integrations/xcb_glx/qglxintegration.cpp
@@ -652,12 +652,6 @@ static const char *qglx_threadedgl_blacklist_renderer[] = {
     0
 };
 
-static const char *qglx_threadedgl_blacklist_vendor[] = {
-    "llvmpipe",                             // QTCREATORBUG-10666
-    "nouveau",                              // https://bugs.freedesktop.org/show_bug.cgi?id=91632
-    nullptr
-};
-
 void QGLXContext::queryDummyContext()
 {
     if (m_queriedDummyContext)
@@ -716,18 +710,6 @@ void QGLXContext::queryDummyContext()
             }
         }
     }
-    if (const char *vendor = (const char *) glGetString(GL_VENDOR)) {
-        for (int i = 0; qglx_threadedgl_blacklist_vendor[i]; ++i) {
-            if (strstr(vendor, qglx_threadedgl_blacklist_vendor[i]) != 0) {
-                qCDebug(lcQpaGl).nospace() << "Multithreaded OpenGL disabled: "
-                                              "blacklisted vendor \""
-                                           << qglx_threadedgl_blacklist_vendor[i]
-                                           << "\"";
-                m_supportsThreading = false;
-                break;
-            }
-        }
-    }
 
     if (glxvendor && m_supportsThreading) {
         // Blacklist Mesa drivers due to QTCREATORBUG-10875 (crash in creator),
-- 
2.20.1

