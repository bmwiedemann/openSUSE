Index: keepassx-2.0.2/src/autotype/x11/CMakeLists.txt
===================================================================
--- keepassx-2.0.2.orig/src/autotype/x11/CMakeLists.txt
+++ keepassx-2.0.2/src/autotype/x11/CMakeLists.txt
@@ -11,7 +11,13 @@ set(autotype_X11_MOC
 qt4_wrap_cpp(autotype_X11_SOURCES ${autotype_X11_MOC})
 
 add_library(keepassx-autotype-x11 MODULE ${autotype_X11_SOURCES})
-target_link_libraries(keepassx-autotype-x11 ${QT_QTCORE_LIBRARY} ${QT_QTGUI_LIBRARY} ${X11_X11_LIB} ${X11_Xi_LIB} ${X11_XTest_LIB})
+target_link_libraries(keepassx-autotype-x11
+	keepassx_core
+	${QT_QTCORE_LIBRARY}
+	${QT_QTGUI_LIBRARY}
+	${X11_X11_LIB}
+	${X11_Xi_LIB}
+	${X11_XTest_LIB})
 install(TARGETS keepassx-autotype-x11
         BUNDLE DESTINATION . COMPONENT Runtime
         LIBRARY DESTINATION ${PLUGIN_INSTALL_DIR} COMPONENT Runtime)
Index: keepassx-2.0.2/src/autotype/test/CMakeLists.txt
===================================================================
--- keepassx-2.0.2.orig/src/autotype/test/CMakeLists.txt
+++ keepassx-2.0.2/src/autotype/test/CMakeLists.txt
@@ -9,4 +9,8 @@ set(autotype_test_MOC
 qt4_wrap_cpp(autotype_test_SOURCES ${autotype_test_MOC})
 
 add_library(keepassx-autotype-test MODULE ${autotype_test_SOURCES})
-target_link_libraries(keepassx-autotype-test testautotype ${QT_QTCORE_LIBRARY} ${QT_QTGUI_LIBRARY})
+target_link_libraries(keepassx-autotype-test
+	testautotype
+	keepassx_core
+	${QT_QTCORE_LIBRARY}
+	${QT_QTGUI_LIBRARY})
