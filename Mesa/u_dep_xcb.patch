Index: mesa-19.1.0/meson.build
===================================================================
--- mesa-19.1.0.orig/meson.build	2019-06-11 17:12:50.000000000 +0200
+++ mesa-19.1.0/meson.build	2019-06-11 22:28:12.967838857 +0200
@@ -1414,10 +1414,12 @@ if with_platform_x11
     dep_x11_xcb = dependency('x11-xcb')
   endif
   if with_any_vk or with_egl or (with_glx == 'dri' and with_dri_platform == 'drm')
+    dep_x11_xcb = dependency('x11-xcb')
     dep_xcb_dri2 = dependency('xcb-dri2', version : '>= 1.8')
 
     if with_dri3
       pre_args += '-DHAVE_DRI3'
+      dep_xcb = dependency('xcb')
       dep_xcb_dri3 = dependency('xcb-dri3')
       dep_xcb_present = dependency('xcb-present')
       # until xcb-dri3 has been around long enough to make a hard-dependency:
Index: mesa-19.1.0/src/loader/meson.build
===================================================================
--- mesa-19.1.0.orig/src/loader/meson.build	2019-06-11 17:12:51.000000000 +0200
+++ mesa-19.1.0/src/loader/meson.build	2019-06-11 22:28:12.967838857 +0200
@@ -28,6 +28,7 @@ if with_platform_x11 and with_dri3
     include_directories : [inc_include, inc_src],
     dependencies : [
       dep_libdrm, dep_xcb_dri3, dep_xcb_present, dep_xcb_sync, dep_xshmfence,
+      dep_xcb,
     ],
     build_by_default : false,
   )
