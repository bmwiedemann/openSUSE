diff --git a/src/gui/owncloudgui.cpp b/src/gui/owncloudgui.cpp
index a56dc44..c586118 100644
--- a/src/gui/owncloudgui.cpp
+++ b/src/gui/owncloudgui.cpp
@@ -509,9 +509,12 @@ void ownCloudGui::setupContextMenu()
         || desktopSession.contains("plasma")
         || desktopSession.contains("kde");
     QObject *platformMenu = reinterpret_cast<QObject *>(_tray->contextMenu()->platformMenu());
-    if (isKde && platformMenu && platformMenu->metaObject()->className() == QLatin1String("QDBusPlatformMenu")) {
-        _workaroundManualVisibility = true;
-        _workaroundNoAboutToShowUpdate = true;
+    if (platformMenu) {
+        const QString className = platformMenu->metaObject()->className();
+        if (isKde && className == QLatin1String("SystemTrayMenu") ) { // QLatin1String("QDBusPlatformMenu")) {
+            _workaroundManualVisibility = true;
+            _workaroundNoAboutToShowUpdate = true;
+        }
     }
 #endif
 
