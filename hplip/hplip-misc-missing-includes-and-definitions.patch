Only in hplip-3.18.12/: Makefile.am.orig
diff -ur hplip-3.18.12-orig/protocol/discovery/mdns.c hplip-3.18.12/protocol/discovery/mdns.c
--- hplip-3.18.12-orig/protocol/discovery/mdns.c	2018-12-08 14:56:48.794408994 +0100
+++ hplip-3.18.12/protocol/discovery/mdns.c	2018-12-08 14:56:28.785871912 +0100
@@ -37,6 +37,7 @@
 #include <arpa/inet.h>
 #include "mdns.h"
 #include <unistd.h>
+#include <ctype.h>
 
 /* Convert "www.google.com" to "3www6google3com". */
 static int mdns_convert_name_to_dns(const char *name, int name_size, char *dns_name)
diff -ur hplip-3.18.12-orig/protocol/discovery/mdns.h hplip-3.18.12/protocol/discovery/mdns.h
--- hplip-3.18.12-orig/protocol/discovery/mdns.h	2018-12-03 08:08:49.000000000 +0100
+++ hplip-3.18.12/protocol/discovery/mdns.h	2018-12-08 14:56:28.785871912 +0100
@@ -100,5 +100,6 @@
 static void  mdns_rr_cleanup(DNS_RECORD *rr);
 static DNS_RECORD *mdns_read_responses(int udp_socket, int mode);
 static unsigned char* mdns_readMDL(unsigned char *p, unsigned char *normalized_mdl, int len);
+int mdns_probe_nw_scanners(char* uris_buf, int buf_size, int *count);
 #endif // _DISCOVERY_MDNS_H
 
diff -ur hplip-3.18.12-orig/scan/sane/hpaio.c hplip-3.18.12/scan/sane/hpaio.c
--- hplip-3.18.12-orig/scan/sane/hpaio.c	2018-12-03 08:10:22.000000000 +0100
+++ hplip-3.18.12/scan/sane/hpaio.c	2018-12-08 14:58:23.952963358 +0100
@@ -45,6 +45,7 @@
 #include "sclpml.h"
 #include "escl.h"
 #include "io.h"
+#include "mdns.h"
 #include "orblitei.h"
 
 
Only in hplip-3.18.12/scan/sane: hpaio.c.orig
Only in hplip-3.18.12/scan/sane: hpaio.c.rej
diff -ur hplip-3.18.12-orig/scan/sane/http.c hplip-3.18.12/scan/sane/http.c
--- hplip-3.18.12-orig/scan/sane/http.c	2018-12-03 08:10:22.000000000 +0100
+++ hplip-3.18.12/scan/sane/http.c	2018-12-08 14:56:28.789872019 +0100
@@ -33,6 +33,7 @@
 
 #include <stdio.h>
 #include <stdlib.h>
+#include <unistd.h>
 #include <string.h>
 #include <syslog.h>
 #include <ctype.h>
