From 66b400d63b8d7b921b83250a8b9a09e9a1eb6732 Mon Sep 17 00:00:00 2001
From: Philip Withnall <pwithnall@endlessos.org>
Date: Fri, 10 Feb 2023 01:03:42 +0000
Subject: [PATCH] gs-plugin-job-list-apps: Fix a leak of the GsAppQuery

Signed-off-by: Philip Withnall <pwithnall@endlessos.org>
---
 lib/gs-plugin-job-list-apps.c | 1 +
 1 file changed, 1 insertion(+)

diff --git a/lib/gs-plugin-job-list-apps.c b/lib/gs-plugin-job-list-apps.c
index a556387e5..56a4e14be 100644
--- a/lib/gs-plugin-job-list-apps.c
+++ b/lib/gs-plugin-job-list-apps.c
@@ -84,6 +84,7 @@ gs_plugin_job_list_apps_dispose (GObject *object)
 	g_assert (self->n_pending_ops == 0);
 
 	g_clear_object (&self->result_list);
+	g_clear_object (&self->query);
 
 	G_OBJECT_CLASS (gs_plugin_job_list_apps_parent_class)->dispose (object);
 }
-- 
GitLab

