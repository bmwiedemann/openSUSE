From 2c28932c6266cbeddbe49d7aa6ca8d70d125e96f Mon Sep 17 00:00:00 2001
From: John Factotum <50942278+johnfactotum@users.noreply.github.com>
Date: Sat, 20 Mar 2021 22:52:23 +0800
Subject: [PATCH] Don't write to construct only property after construction

Fixes #689
---
 src/window.js | 8 +++++++-
 1 file changed, 7 insertions(+), 1 deletion(-)

diff --git a/src/window.js b/src/window.js
index 824781b..464edc0 100644
--- a/src/window.js
+++ b/src/window.js
@@ -1022,8 +1022,14 @@ var Window = GObject.registerClass({
         this.loading = true
         this._setTitle(_('Foliate'))
     }
+    get file() {
+        return this._file || null
+    }
+    set file(file) {
+        this._file = file
+    }
     open(file) {
-        this.file = file
+        this._file = file
         this._epub.open(file)
     }
     _connectEpub() {
