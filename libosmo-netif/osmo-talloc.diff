diff --git a/configure.ac b/configure.ac
index 66ec57f..2b714b7 100644
--- a/configure.ac
+++ b/configure.ac
@@ -98,6 +98,7 @@ AC_SEARCH_LIBS([sctp_send], [sctp], [
 	AC_MSG_ERROR([sctp_send not found in searched libs])])
 LIBS=$old_LIBS
 
+PKG_CHECK_MODULES([TALLOC], [talloc])
 AC_CHECK_HEADERS(dahdi/user.h,,AC_MSG_WARN(DAHDI input driver will not be built))
 
 found_pcap=yes
diff --git a/examples/Makefile.am b/examples/Makefile.am
index 4125243..8780fba 100644
--- a/examples/Makefile.am
+++ b/examples/Makefile.am
@@ -1,5 +1,5 @@
 AM_CPPFLAGS = -I$(top_srcdir)/include
-AM_CFLAGS=-Wall -g $(LIBOSMOCORE_CFLAGS) $(LIBOSMOGSM_CFLAGS) $(LIBOSMOABIS_CFLAGS) $(COVERAGE_CFLAGS)
+AM_CFLAGS=-Wall -g $(LIBOSMOCORE_CFLAGS) $(LIBOSMOGSM_CFLAGS) $(LIBOSMOABIS_CFLAGS) $(COVERAGE_CFLAGS) $(TALLOC_CFLAGS)
 AM_LDFLAGS = $(COVERAGE_LDFLAGS)
 
 noinst_PROGRAMS = ipa-stream-client		\
@@ -21,54 +21,54 @@ noinst_HEADERS = udp-test.h
 
 ipa_stream_client_SOURCES = ipa-stream-client.c
 ipa_stream_client_LDADD = $(top_builddir)/src/libosmonetif.la \
-			  $(LIBOSMOCORE_LIBS) $(LIBOSMOGSM_LIBS)
+			  $(LIBOSMOCORE_LIBS) $(LIBOSMOGSM_LIBS) $(TALLOC_LIBS)
 
 ipa_stream_server_SOURCES = ipa-stream-server.c
 ipa_stream_server_LDADD = $(top_builddir)/src/libosmonetif.la \
-			  $(LIBOSMOCORE_LIBS) $(LIBOSMOGSM_LIBS)
+			  $(LIBOSMOCORE_LIBS) $(LIBOSMOGSM_LIBS) $(TALLOC_LIBS)
 
 lapd_over_datagram_user_SOURCES = lapd-over-datagram-user.c
 lapd_over_datagram_user_LDADD = $(top_builddir)/src/libosmonetif.la \
 				  $(LIBOSMOCORE_LIBS) $(LIBOSMOGSM_LIBS) \
-				  $(LIBOSMOABIS_LIBS)
+				  $(LIBOSMOABIS_LIBS) $(TALLOC_LIBS)
 
 lapd_over_datagram_network_SOURCES = lapd-over-datagram-network.c
 lapd_over_datagram_network_LDADD = $(top_builddir)/src/libosmonetif.la \
 				  $(LIBOSMOCORE_LIBS) $(LIBOSMOGSM_LIBS) \
-				  $(LIBOSMOABIS_LIBS)
+				  $(LIBOSMOABIS_LIBS) $(TALLOC_LIBS)
 
 stream_client_SOURCES = stream-client.c
 stream_client_LDADD = $(top_builddir)/src/libosmonetif.la \
-		      $(LIBOSMOCORE_LIBS) $(LIBOSMOGSM_LIBS)
+		      $(LIBOSMOCORE_LIBS) $(LIBOSMOGSM_LIBS) $(TALLOC_LIBS)
 
 stream_server_SOURCES = stream-server.c
 stream_server_LDADD = $(top_builddir)/src/libosmonetif.la \
-		      $(LIBOSMOCORE_LIBS) $(LIBOSMOGSM_LIBS)
+		      $(LIBOSMOCORE_LIBS) $(LIBOSMOGSM_LIBS) $(TALLOC_LIBS)
 
 rs232_read_SOURCES = rs232-read.c
-rs232_read_LDADD = $(top_builddir)/src/libosmonetif.la $(LIBOSMOCORE_LIBS) $(LIBOSMOGSM_LIBS)
+rs232_read_LDADD = $(top_builddir)/src/libosmonetif.la $(LIBOSMOCORE_LIBS) $(LIBOSMOGSM_LIBS) $(TALLOC_LIBS)
 
 rs232_write_SOURCES = rs232-write.c
-rs232_write_LDADD = $(top_builddir)/src/libosmonetif.la $(LIBOSMOCORE_LIBS) $(LIBOSMOGSM_LIBS)
+rs232_write_LDADD = $(top_builddir)/src/libosmonetif.la $(LIBOSMOCORE_LIBS) $(LIBOSMOGSM_LIBS) $(TALLOC_LIBS)
 
 rtp_udp_test_client_SOURCES = rtp-udp-test-client.c
 rtp_udp_test_client_LDADD = $(top_builddir)/src/libosmonetif.la \
-			    $(LIBOSMOCORE_LIBS) $(LIBOSMOGSM_LIBS)
+			    $(LIBOSMOCORE_LIBS) $(LIBOSMOGSM_LIBS) $(TALLOC_LIBS)
 
 rtp_udp_test_server_SOURCES = rtp-udp-test-server.c
 rtp_udp_test_server_LDADD = $(top_builddir)/src/libosmonetif.la \
-			    $(LIBOSMOCORE_LIBS) $(LIBOSMOGSM_LIBS)
+			    $(LIBOSMOCORE_LIBS) $(LIBOSMOGSM_LIBS) $(TALLOC_LIBS)
 
 udp_test_client_SOURCES = udp-test-client.c
-udp_test_client_LDADD = $(top_builddir)/src/libosmonetif.la $(LIBOSMOCORE_LIBS) $(LIBOSMOGSM_LIBS)
+udp_test_client_LDADD = $(top_builddir)/src/libosmonetif.la $(LIBOSMOCORE_LIBS) $(LIBOSMOGSM_LIBS) $(TALLOC_LIBS)
 
 udp_test_server_SOURCES = udp-test-server.c
-udp_test_server_LDADD = $(top_builddir)/src/libosmonetif.la $(LIBOSMOCORE_LIBS) $(LIBOSMOGSM_LIBS)
+udp_test_server_LDADD = $(top_builddir)/src/libosmonetif.la $(LIBOSMOCORE_LIBS) $(LIBOSMOGSM_LIBS) $(TALLOC_LIBS)
 
 osmux_test_input_SOURCES = osmux-test-input.c
 osmux_test_input_LDADD = $(top_builddir)/src/libosmonetif.la \
-			 $(LIBOSMOCORE_LIBS) $(LIBOSMOGSM_LIBS)
+			 $(LIBOSMOCORE_LIBS) $(LIBOSMOGSM_LIBS) $(TALLOC_LIBS)
 
 osmux_test_output_SOURCES = osmux-test-output.c
 osmux_test_output_LDADD = $(top_builddir)/src/libosmonetif.la \
-			  $(LIBOSMOCORE_LIBS) $(LIBOSMOGSM_LIBS)
+			  $(LIBOSMOCORE_LIBS) $(LIBOSMOGSM_LIBS) $(TALLOC_LIBS)
diff --git a/src/Makefile.am b/src/Makefile.am
index d92d0f6..aa3e521 100644
--- a/src/Makefile.am
+++ b/src/Makefile.am
@@ -3,7 +3,7 @@
 LIBVERSION=6:1:0
 
 AM_CPPFLAGS = -I$(top_srcdir)/include -I$(top_builddir)
-AM_CFLAGS= -fPIC -Wall $(LIBOSMOCORE_CFLAGS) $(LIBOSMOGSM_CFLAGS) $(LIBOSMOABIS_CFLAGS) $(COVERAGE_CFLAGS) $(LIBSCTP_CFLAGS)
+AM_CFLAGS= -fPIC -Wall $(LIBOSMOCORE_CFLAGS) $(LIBOSMOGSM_CFLAGS) $(LIBOSMOABIS_CFLAGS) $(COVERAGE_CFLAGS) $(LIBSCTP_CFLAGS) $(TALLOC_LIBS)
 AM_LDFLAGS = $(COVERAGE_LDFLAGS)
 
 lib_LTLIBRARIES = libosmonetif.la
