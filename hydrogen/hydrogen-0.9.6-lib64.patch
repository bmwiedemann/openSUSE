Index: hydrogen-1.0.0-beta1/src/core/CMakeLists.txt
===================================================================
--- hydrogen-1.0.0-beta1.orig/src/core/CMakeLists.txt	2018-03-14 12:03:22.000000000 +0200
+++ hydrogen-1.0.0-beta1/src/core/CMakeLists.txt	2019-04-07 15:15:44.037816201 +0200
@@ -5,7 +5,7 @@ FILE(GLOB_RECURSE hydrogen_INCLUDES incl
 FILE(GLOB_RECURSE hydrogen_SOURCES src/*.cpp src/*.cc src/*.c)
 LIST(APPEND hydrogen_INCLUDES ${CMAKE_CURRENT_BINARY_DIR}/include/hydrogen/config.h)
 
-ADD_LIBRARY( hydrogen-core-${VERSION} ${H2CORE_LIBRARY_TYPE} ${hydrogen_SOURCES})
+ADD_LIBRARY( hydrogen-core ${H2CORE_LIBRARY_TYPE} ${hydrogen_SOURCES})
 INCLUDE_DIRECTORIES( include
     ${CMAKE_SOURCE_DIR}/include                 # regular headers
     ${CMAKE_CURRENT_BINARY_DIR}/include         # generated config.h
@@ -26,7 +26,7 @@ INCLUDE_DIRECTORIES( include
     ${RUBBERBAND_INCLUDE_DIRS}
 )
 
-TARGET_LINK_LIBRARIES(hydrogen-core-${VERSION}
+TARGET_LINK_LIBRARIES(hydrogen-core
     ${LIBTAR_LIBRARIES}
     ${LIBARCHIVE_LIBRARIES}
     ${LIBSNDFILE_LIBRARIES}
@@ -48,20 +48,27 @@ TARGET_LINK_LIBRARIES(hydrogen-core-${VE
     ${OSC_LIBRARIES}
 )
 
-TARGET_LINK_LIBRARIES(hydrogen-core-${VERSION}
+TARGET_LINK_LIBRARIES(hydrogen-core
 	Qt5::Core
 	Qt5::Xml
 	Qt5::XmlPatterns
 )
 
-#SET_TARGET_PROPERTIES(hydrogen-core-${VERSION} PROPERTIES PUBLIC_HEADER   "${hydrogen_INCLUDES}" )
+SET_TARGET_PROPERTIES(hydrogen-core PROPERTIES SOVERSION ${H2CORE_LIBRARY_SONAME})
 
-INSTALL(TARGETS hydrogen-core-${VERSION}
-    LIBRARY DESTINATION "lib${LIB_SUFFIX}"
-    ARCHIVE DESTINATION "lib${LIB_SUFFIX}"
+# SOVERSION ${coreversion} LINK_FLAGS '-Wl,-soname=libhydrogen-core.so.${soversion}"
+
+if(H2CORE_LIBRARY_TYPE STREQUAL SHARED)
+    INSTALL(TARGETS hydrogen-core
+    LIBRARY DESTINATION ${CMAKE_CURRENT_LIBRARY_DIR})
+    elseif(H2CORE_LIBRARY_TYPE STREQUAL STATIC)
+INSTALL(TARGETS hydrogen-core
+    ARCHIVE DESTINATION lib)
+    endif(H2CORE_LIBRARY_TYPE STREQUAL SHARED)
+    #
     # do not copy directory hierarchy
     #PUBLIC_HEADER DESTINATION include/hydrogen
-)
+
 
 IF(NOT APPLE AND NOT WIN32)
     INSTALL(DIRECTORY include DESTINATION "${CMAKE_INSTALL_PREFIX}" FILES_MATCHING PATTERN "*.h" PATTERN ".svn" EXCLUDE)
Index: hydrogen-1.0.0-beta1/src/gui/CMakeLists.txt
===================================================================
--- hydrogen-1.0.0-beta1.orig/src/gui/CMakeLists.txt	2018-03-14 12:03:22.000000000 +0200
+++ hydrogen-1.0.0-beta1/src/gui/CMakeLists.txt	2019-04-07 15:17:18.029435707 +0200
@@ -51,10 +51,10 @@ ENDIF()
 ADD_EXECUTABLE(hydrogen WIN32 MACOSX_BUNDLE ${hydrogen_SRCS} ${hydrogen_MOC} ${hydrogen_UIS_H} ${CMAKE_SOURCE_DIR}/windows/icon.rc)
 
 TARGET_LINK_LIBRARIES(hydrogen
-	hydrogen-core-${VERSION}
+	hydrogen-core
 	Qt5::Widgets
 )
 qt5_use_modules(hydrogen Widgets)
-ADD_DEPENDENCIES(hydrogen hydrogen-core-${VERSION})
+ADD_DEPENDENCIES(hydrogen hydrogen-core)
 
 INSTALL(TARGETS hydrogen RUNTIME DESTINATION bin BUNDLE DESTINATION bin )
Index: hydrogen-1.0.0-beta1/src/player/CMakeLists.txt
===================================================================
--- hydrogen-1.0.0-beta1.orig/src/player/CMakeLists.txt	2018-03-14 12:03:22.000000000 +0200
+++ hydrogen-1.0.0-beta1/src/player/CMakeLists.txt	2019-04-07 15:27:27.705029162 +0200
@@ -10,10 +10,10 @@ INCLUDE_DIRECTORIES(
 ADD_EXECUTABLE(h2player WIN32 MACOSX_BUNDLE ${h2player_SRCS} )
 
 TARGET_LINK_LIBRARIES(h2player
-	hydrogen-core-${VERSION}
+	hydrogen-core
 	Qt5::Widgets
 	)
 
-ADD_DEPENDENCIES(h2player hydrogen-core-${VERSION})
+ADD_DEPENDENCIES(h2player hydrogen-core)
 
 INSTALL(TARGETS h2player RUNTIME DESTINATION bin BUNDLE DESTINATION bin )
Index: hydrogen-1.0.0-beta1/src/cli/CMakeLists.txt
===================================================================
--- hydrogen-1.0.0-beta1.orig/src/cli/CMakeLists.txt	2018-03-14 12:03:22.000000000 +0200
+++ hydrogen-1.0.0-beta1/src/cli/CMakeLists.txt	2019-04-07 15:21:32.515260232 +0200
@@ -12,12 +12,12 @@ INCLUDE_DIRECTORIES(
 ADD_EXECUTABLE(h2cli WIN32 MACOSX_BUNDLE ${h2cli_SRCS} )
 
 TARGET_LINK_LIBRARIES(h2cli
-	hydrogen-core-${VERSION}
+	hydrogen-core
 	Qt5::Widgets
 	${LASH_LIBRARIES}
 	${OSC_LIBRARIES}
 	)
 
-ADD_DEPENDENCIES(h2cli hydrogen-core-${VERSION})
+ADD_DEPENDENCIES(h2cli hydrogen-core)
 
 INSTALL(TARGETS h2cli RUNTIME DESTINATION bin BUNDLE DESTINATION bin )
Index: hydrogen-1.0.0-beta1/src/tests/CMakeLists.txt
===================================================================
--- hydrogen-1.0.0-beta1.orig/src/tests/CMakeLists.txt	2018-03-14 12:03:22.000000000 +0200
+++ hydrogen-1.0.0-beta1/src/tests/CMakeLists.txt	2019-04-07 15:25:14.043840330 +0200
@@ -12,10 +12,10 @@ link_directories()
 add_executable(tests ${TESTS_SRCS})
 
 target_link_libraries(tests
-	hydrogen-core-${VERSION}
+	hydrogen-core
 	${CPPUNIT_LIBRARIES}
 	Qt5::Core
 )
 
-add_dependencies(tests hydrogen-core-${VERSION})
+add_dependencies(tests hydrogen-core)
 
Index: hydrogen-1.0.0-beta1/CMakeLists.txt
===================================================================
--- hydrogen-1.0.0-beta1.orig/CMakeLists.txt	2018-03-14 12:03:22.000000000 +0200
+++ hydrogen-1.0.0-beta1/CMakeLists.txt	2019-04-07 15:33:38.055450755 +0200
@@ -98,7 +98,7 @@ ELSE()
 ENDIF()
 
 IF(WANT_SHARED)
-    SET(H2CORE_LIBRARY_TYPE SHARED)
+    SET(H2CORE_LIBRARY_SONAME ${coreversion}.${soage}.${sorevision})
 ELSE()
     SET(H2CORE_LIBRARY_TYPE STATIC)
 ENDIF()
