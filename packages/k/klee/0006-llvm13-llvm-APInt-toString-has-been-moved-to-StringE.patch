From: Lukas Zaoral <lzaoral@redhat.com>
Date: Tue, 24 Aug 2021 13:59:33 +0200
Subject: llvm13: llvm::APInt::toString has been moved to StringExtras.h
Patch-mainline: no
References: llvm 13

See: https://reviews.llvm.org/D103888
Signed-off-by: Jiri Slaby <jirislaby@gmail.com>
---
 lib/Expr/Expr.cpp | 7 +++++++
 1 file changed, 7 insertions(+)

diff --git a/lib/Expr/Expr.cpp b/lib/Expr/Expr.cpp
index db05e8423d67..2b9eab0dbc37 100644
--- a/lib/Expr/Expr.cpp
+++ b/lib/Expr/Expr.cpp
@@ -17,6 +17,9 @@
 #include "klee/Support/IntEvaluation.h"
 
 #include "llvm/ADT/Hashing.h"
+#if LLVM_VERSION_CODE >= LLVM_VERSION(13, 0)
+#include "llvm/ADT/StringExtras.h"
+#endif
 #include "llvm/Support/CommandLine.h"
 #include "llvm/Support/raw_ostream.h"
 
@@ -366,7 +369,11 @@ void ConstantExpr::toMemory(void *address) {
 }
 
 void ConstantExpr::toString(std::string &Res, unsigned radix) const {
+#if LLVM_VERSION_CODE >= LLVM_VERSION(13, 0)
+  Res = llvm::toString(value, radix, false);
+#else
   Res = value.toString(radix, false);
+#endif
 }
 
 ref<ConstantExpr> ConstantExpr::Concat(const ref<ConstantExpr> &RHS) {
-- 
2.33.1

