-------------------------------------------------------------------
Fri Jun 19 15:01:38 UTC 2020 - Ralf Haferkamp <rhafer@suse.com>

- Update to 1.11.1:
  agent:
    * device: Do not allow container access to the nvdimm rootfs
  osbuilder:
    * image-builder: disable reflink

-------------------------------------------------------------------
Thu May 28 16:13:31 UTC 2020 - Ralf Haferkamp <rhafer@suse.com>

- Update to 1.11.0:
  agent:
    * protocols: fix client unit tests for go 1.13
    * agent: signal from keyboard must not be fatal
    * agent: fix epoll fd left in the kata-agent when exec process
    * agent: add configurable container pipe size cmdline option
    * agent: add kernel cmdline parameter to enable or disable cgroups v2
    * agent: support pmem/nvdimm hotplug
    * agent: parse kernel command line as soon as possible
    * agent: Remove dev from pciDeviceMap when device is unplugged
    * build: Add support to strip the agent golang binary
    * agent: don't receive signals from stdin
    * protocols: client: Add timeout for hybrid vsock handshake
    * mount: Use "virtiofs" instead of "virtio_fs"
    * agent-client: include log in agent client
    * FC: Add new vsock connection handshake
    * build: Update CentOS version for the Dockerfile
    * ipv6: Add flag IFA_F_NODAD for ipv6 address.
    * ipv6: Add support for ipv6
    * Revert: client.go: HybridVSockDialer: Change Read EOT to recv peek
    * Revert: client.go: HybridVSockDialer: Check return size n of unix.Recvfrom
    * Revert: client.go: HybridVSockDialer: Close dup fd after receive packet
    * test: change import path for NetworkInterface
    * vendor: Update vendoring for libcontainer.
    * agent: Fix mem-hotplug on x86 when ARCH_MEMORY_PROBE is set
    * vendor: update golang/sys
    * client.go: HybridVSockDialer: Close dup fd after receive packet
  osbuilder:
    * tests: deleting when tests failed
    * image_builder: Force mount_dir to be created in $TMPDIR
    * scripts: set a default path to the yq binary
    * rust-agent: Separate the build up of rust-agent and go-agent
    * rootfs: remove RUST_SRC_PATH
    * rootfs: Don't overwrite /sbin/init if it already exists
    * initrd-builder: Don't error if run as non-root
    * image-builder: Add NSDAX_BIN for passing in compiled nsdax tool
    * image_builder: Reduce the boundary mb for reducing image size on arm64
    * rootfs-builder: build rust agent using osbuilder
    * image-builder: make docker runtime configurable
    * image_builder: Remove nsdax binary after its usage
- removed patch agent_memory-hotplug-probe.patch (merged upstream)

-------------------------------------------------------------------
Mon Jan 27 17:44:14 UTC 2020 - Ralf Haferkamp <rhafer@suse.com>

- kata-agent: add patch agent_memory-hotplug-probe.patch to address
  memory hotplug issue when running with SUSE kernel 
  (https://github.com/kata-containers/agent/issues/712)

-------------------------------------------------------------------
Mon Jan 20 15:39:58 UTC 2020 - Ralf Haferkamp <rhafer@suse.com>

- Update to 1.10.0:
  agent:
    - client.go: HybridVSockDialer: Check return size n of
      unix.Recvfrom
    - client.go: HybridVSockDialer: Change Read EOT to recv peek
    - agent: get current cpuset from /sys/devices/system/cpu/online
    - config: add option to control hotplug timeout of block
      devices
    - agent: firecracker: support debugging console
    - agent: fix pause bin on musl
    - docs: Add enable services and installation steps for TRACING.md
    - docs: Add missing steps at TRACING.md
    - tracing: Wrapper for tracing functions
    - tracing: Generate an alias for opentracing.Span
    - network: ensure parent directories exist
    - Revert "client: remove the parameter of 'enableYamux'"
    - client: remove the parameter of 'enableYamux'
    - vendor: update libcontainer to 1.0.0-rc9
  osbuilder:
    - make: use `cd` instead of '--directory' option of `cpio`

-------------------------------------------------------------------
Fri Dec 13 14:30:18 UTC 2019 - Ralf Haferkamp <rhafer@suse.com>

- Update to 1.9.3 tarballs, this is just a version bump without
  any code changes.

-------------------------------------------------------------------
Wed Dec  4 17:10:33 UTC 2019 - Ralf Haferkamp <rhafer@suse.com>

- Update to 1.9.2 tarballs, this is just a version bump without
  any code changes.
- Add more missing virtio kernel modules to initrd to fix
  issues with SLE15-SP1

-------------------------------------------------------------------
Thu Nov 14 16:15:48 UTC 2019 - Ralf Haferkamp <rhafer@suse.com>

- Update to 1.9.1 tarballs, this is just a version bump without
  any code changes.

-------------------------------------------------------------------
Tue Nov  5 13:37:18 UTC 2019 - Ralf Haferkamp <rhafer@suse.com>

- Different to Tumbleweed the kvmsmall kernel flavor on Leap 
  (and SLE) 15.1 doesn't statically include most of the virtio
  features. So add them to the initrd on these distros.

-------------------------------------------------------------------
Thu Oct 24 15:17:17 UTC 2019 - Ralf Haferkamp <rhafer@suse.com>

- Update to 1.9.0 tarballs, this is just a version bump without
  any code changes.

-------------------------------------------------------------------
Mon Oct 21 14:10:04 UTC 2019 - Ralf Haferkamp <rhafer@suse.com>

- Update to 1.9.0~rc0:
  agent:
    - firecracker: send logs to a vsock port
    - network: Setup DNS for sandbox
    - protocols/client: support hybrid vsocks
    - Fix incorrect script reference in TRACING.md
  osbuilder:
    - osbuilder: Add USE_PODMAN as an alternate for USE_DOCKER
    - README: Update how to use DEBUG variable
    - Fix yq
    - initrd_builder: Create empty resolv.conf in rootfs
    - rootfs: update fedora to 29 for arm64.
- Fix config for set-version source-service to set version based
  on the osbuilder filename. The previously used
  "katacontainers-image-initrd" caused the service to fail.

-------------------------------------------------------------------
Wed Sep 25 11:42:06 UTC 2019 - Marco Vedovati <mvedovati@suse.com>

- Update package version to 1.9.0~alpha2:
  agent 1.9.0~alpha2:
    *mount: ensure local directory storage types have the correct permissions
    *device: fix the issue of failed waiting on device appeared in /dev
    *network: While updating routes, do not delete routes with proto "kernel"
    *agent: add support for loading kernel modules
    *revert: agent: sandbox_pause should get arguments from proc
    *agent: sandbox_pause should get arguments from proc
    *s390x: add virtio-blk-ccw support
    *agent: make NoPivotRoot config depend on / fs type
    *make: install depends on $(TARGET)
    *device: Allow uevent handler to be stopped
    *mount: Improve error message
    *memory: Add extra check for memory file

-------------------------------------------------------------------
Tue Sep  3 17:05:15 UTC 2019 - Marco Vedovati <mvedovati@suse.com>

- Add support for non x86_64 archs, by using the default kernel flavor instead
  of kvmsmall
- Require golang >= 1.12
- Update package summary and description
- Set the list of exclusive archs (x86_64, aarch64, ppc64le, s390x)

-------------------------------------------------------------------
Fri Aug 30 11:27:06 UTC 2019 - Marco Vedovati <mvedovati@suse.com>

- Vendor in vmlinuz from kernel-kvmsmall to avoid dependency on that package
  and the side effect linked to installing a VM kernel on the host

-------------------------------------------------------------------
Thu Aug  8 14:31:08 UTC 2019 - Marco Vedovati <mvedovati@suse.com>

- Have this package directly depend on kernel-kvmsmall. 

-------------------------------------------------------------------
Mon Aug  5 16:51:17 UTC 2019 - Marco Vedovati <mvedovati@suse.com>

- Include kernel version in initrd image name, and symlink it to the generic
  image name. This allows the katacontainers package to retrieve the correct
  kernel version to use
- Rename kata-osbuilder tarball to osbuilder

-------------------------------------------------------------------
Wed Jul 31 07:23:24 UTC 2019 - Marco Vedovati <mvedovati@suse.com>

- Initial package creation version 1.9.0~alpha0
