From 590074281e8463128ac92ed2640405cd05b10cb1 Mon Sep 17 00:00:00 2001
From: Christian Hesse <mail@eworm.de>
Date: Wed, 14 Aug 2024 09:58:16 +0200
Subject: [PATCH] testsuite: fix path for test-user

... as this just does not find its paths.

Closes: https://github.com/kmod-project/kmod/issues/69
Fixes: 9d1fb31 ("libkmod, depmod, modprobe: Make directory for kernel modules configurable")
Signed-off-by: Christian Hesse <mail@eworm.de>
Signed-off-by: Lucas De Marchi <lucas.de.marchi@gmail.com>
---
 testsuite/test-user.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/testsuite/test-user.c b/testsuite/test-user.c
index 97a4747..0db48c3 100644
--- a/testsuite/test-user.c
+++ b/testsuite/test-user.c
@@ -16,7 +16,7 @@
 #include "testsuite.h"
 
 #define TEST_USER_ROOTFS TESTSUITE_ROOTFS "test-user/"
-#define TEST_USER_KERNEL_DIR TEST_USER_ROOTFS "lib/modules/4.4.4/"
+#define TEST_USER_KERNEL_DIR TEST_USER_ROOTFS MODULE_DIRECTORY "/4.4.4/"
 
 static const char *const test_user_config_paths[] = {
 	TEST_USER_ROOTFS "etc/modprobe.d",
-- 
2.46.0

