From c81e5793496f52713e6eef037d1f412b9113fcbc Mon Sep 17 00:00:00 2001
From: Tobias Leupold <tl@stonemx.de>
Date: Tue, 30 May 2023 12:36:18 +0200
Subject: [PATCH 3/3] Use Exifdatum::toInt64 instead of toUint32

---
 DB/FileInfo.cpp                 | 2 +-
 lib/kpaexif/DatabaseElement.cpp | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/DB/FileInfo.cpp b/DB/FileInfo.cpp
index ca18ddc2..8b4e275c 100644
--- a/DB/FileInfo.cpp
+++ b/DB/FileInfo.cpp
@@ -84,7 +84,7 @@ void DB::FileInfo::parseEXIV2(const DB::FileName &fileName)
         int orientation = 0;
         if (datum.count() > 0) {
 #if EXIV2_TEST_VERSION(0, 28, 0)
-            orientation = datum.toUint32();
+            orientation = datum.toInt64();
 #else
             orientation = datum.toLong();
 #endif
diff --git a/lib/kpaexif/DatabaseElement.cpp b/lib/kpaexif/DatabaseElement.cpp
index e218bb5e..3d5d56cf 100644
--- a/lib/kpaexif/DatabaseElement.cpp
+++ b/lib/kpaexif/DatabaseElement.cpp
@@ -80,7 +80,7 @@ QVariant Exif::IntExifElement::valueFromExif(Exiv2::ExifData &data) const
 {
     if (data[m_tag].count() > 0) {
 #if EXIV2_TEST_VERSION(0, 28, 0)
-        return QVariant((int) data[m_tag].toUint32());
+        return QVariant((int) data[m_tag].toInt64());
 #else
         return QVariant((int) data[m_tag].toLong());
 #endif
-- 
2.41.0

