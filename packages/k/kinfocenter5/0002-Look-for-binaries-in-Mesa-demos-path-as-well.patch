From 63940ad9bb5eb3bd8c0eefcf20c4b14d68f9c5c2 Mon Sep 17 00:00:00 2001
From: Fabian Vogt <fabian@ritter-vogt.de>
Date: Tue, 8 Feb 2022 19:06:23 +0100
Subject: [PATCH 2/2] Look for binaries in Mesa-demos path as well

eglinfo is not in $PATH (yet, boo#1195695)
---
 src/CommandOutputContext.cpp | 7 +++++++
 1 file changed, 7 insertions(+)

diff --git a/src/CommandOutputContext.cpp b/src/CommandOutputContext.cpp
index ec3cd3d..96e11ce 100644
--- a/src/CommandOutputContext.cpp
+++ b/src/CommandOutputContext.cpp
@@ -25,6 +25,13 @@ CommandOutputContext::CommandOutputContext(const QString &executable, const QStr
             QStandardPaths::findExecutable(m_executableName, {QStringLiteral("/usr/local/sbin"), QStringLiteral("/usr/sbin"), QStringLiteral("/sbin")});
     }
 
+    // boo#1195695
+    if (m_executablePath.isEmpty()) {
+        m_executablePath =
+            QStandardPaths::findExecutable(m_executableName,
+                                           {QStringLiteral("/usr/lib64/mesa-demos/egl/opengl"), QStringLiteral("/usr/lib/mesa-demos/egl/opengl")});
+    }
+
     metaObject()->invokeMethod(this, &CommandOutputContext::load);
 }
 
-- 
2.33.1

