From 847c1dbed6b422211285fb19d7fd07d8112349ff Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Ivan=20=C4=8Cuki=C4=87?= <ivan.cukic@kde.org>
Date: Wed, 14 Oct 2020 10:43:01 +0200
Subject: [PATCH] Fix a dangling reference to the list of database files

CCBUG: 427650
---
 src/service/plugins/sqlite/Database.cpp | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

diff --git a/src/service/plugins/sqlite/Database.cpp b/src/service/plugins/sqlite/Database.cpp
index 3fd877e..ac9a8d1 100644
--- a/src/service/plugins/sqlite/Database.cpp
+++ b/src/service/plugins/sqlite/Database.cpp
@@ -26,6 +26,7 @@
 // System
 #include <cmath>
 #include <memory>
+#include <array>
 
 // Local
 #include "DebugResources.h"
@@ -91,7 +92,7 @@ void ResourcesDatabaseInitializer::initDatabase(bool retryOnFail)
         = QStandardPaths::writableLocation(QStandardPaths::GenericDataLocation)
           + QStringLiteral("/kactivitymanagerd/resources/working-backup/");
 
-    const QStringList databaseFiles{"database", "database-wal", "database-shm"};
+    static const std::array<QString, 3> databaseFiles{"database", "database-wal", "database-shm"};
 
     {
         QDir dir;
-- 
GitLab

