From fcbdb690586dfdb2ba7628bb4b73d93cd67097cf Mon Sep 17 00:00:00 2001
From: Henrique Dias <hacdias@gmail.com>
Date: Mon, 4 Dec 2023 15:28:20 +0100
Subject: [PATCH] fuse: fix ipfs path parsing

---
 fuse/readonly/readonly_unix.go | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/fuse/readonly/readonly_unix.go b/fuse/readonly/readonly_unix.go
index 9dca9c1a9b2..32be8b1238f 100644
--- a/fuse/readonly/readonly_unix.go
+++ b/fuse/readonly/readonly_unix.go
@@ -62,7 +62,7 @@ func (s *Root) Lookup(ctx context.Context, name string) (fs.Node, error) {
 		return nil, syscall.Errno(syscall.ENOENT)
 	}
 
-	p, err := path.NewPath(name)
+	p, err := path.NewPath("/ipfs/" + name)
 	if err != nil {
 		log.Debugf("fuse failed to parse path: %q: %s", name, err)
 		return nil, syscall.Errno(syscall.ENOENT)
