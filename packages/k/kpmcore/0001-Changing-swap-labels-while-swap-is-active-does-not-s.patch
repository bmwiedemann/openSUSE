From 08d2e3dc2ce14b81b5973fe84c67a87ea022b4b1 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Andrius=20=C5=A0tikonas?= <andrius@stikonas.eu>
Date: Sat, 15 Jan 2022 23:14:49 +0000
Subject: [PATCH] Changing swap labels while swap is active does not seem to
 work anymore.

---
 src/fs/linuxswap.cpp | 6 ------
 src/fs/linuxswap.h   | 4 ----
 2 files changed, 10 deletions(-)

diff --git a/src/fs/linuxswap.cpp b/src/fs/linuxswap.cpp
index 553dc7e..0ad5f23 100644
--- a/src/fs/linuxswap.cpp
+++ b/src/fs/linuxswap.cpp
@@ -122,12 +122,6 @@ bool linuxswap::writeLabel(Report& report, const QString& deviceNode, const QStr
     return cmd.run(-1) && cmd.exitCode() == 0;
 }
 
-bool linuxswap::writeLabelOnline(Report& report, const QString& deviceNode, const QString& mountPoint, const QString& newLabel)
-{
-    Q_UNUSED(mountPoint)
-    return writeLabel(report, deviceNode, newLabel);
-}
-
 QString linuxswap::mountTitle() const
 {
     return xi18nc("@title:menu", "Activate swap");
diff --git a/src/fs/linuxswap.h b/src/fs/linuxswap.h
index c6aceeb..48d8607 100644
--- a/src/fs/linuxswap.h
+++ b/src/fs/linuxswap.h
@@ -40,7 +40,6 @@ public:
     bool create(Report& report, const QString& deviceNode) override;
     bool resize(Report& report, const QString& deviceNode, qint64 length) const override;
     bool writeLabel(Report& report, const QString& deviceNode, const QString& newLabel) override;
-    bool writeLabelOnline(Report& report, const QString& deviceNode, const QString& mountPoint, const QString& newLabel) override;
     bool copy(Report& report, const QString& targetDeviceNode, const QString& sourceDeviceNode) const override;
     bool updateUUID(Report& report, const QString& deviceNode) const override;
     qint64 readUsedCapacity(const QString& deviceNode) const override;
@@ -76,9 +75,6 @@ public:
     CommandSupportType supportSetLabel() const override {
         return m_SetLabel;
     }
-    CommandSupportType supportSetLabelOnline() const override {
-        return m_SetLabel;
-    }
     CommandSupportType supportUpdateUUID() const override {
         return m_UpdateUUID;
     }
-- 
2.35.1

