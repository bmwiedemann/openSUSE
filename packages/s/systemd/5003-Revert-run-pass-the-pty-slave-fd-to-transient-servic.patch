From 51f4a0be4895bedbde9b23339a5953d965411334 Mon Sep 17 00:00:00 2001
From: Franck Bui <fbui@suse.com>
Date: Thu, 6 Jun 2024 15:15:56 +0200
Subject: [PATCH 5003/5003] Revert "run: pass the pty slave fd to transient
 service"

This reverts commit 182b80bede28ef6e9c0d0edd34c56a467d22dee5.
---
 src/run/run.c | 12 +++---------
 1 file changed, 3 insertions(+), 9 deletions(-)

diff --git a/src/run/run.c b/src/run/run.c
index 14cc9f9514..4c4a76638d 100644
--- a/src/run/run.c
+++ b/src/run/run.c
@@ -808,17 +808,11 @@ static int transient_service_set_properties(sd_bus_message *m, const char *pty_p
         }
 
         if (pty_path) {
-                _cleanup_close_ int pty_slave = -EBADF;
-
-                pty_slave = open_terminal(pty_path, O_RDWR|O_NOCTTY|O_CLOEXEC);
-                if (pty_slave < 0)
-                        return pty_slave;
-
                 r = sd_bus_message_append(m,
                                           "(sv)(sv)(sv)(sv)",
-                                          "StandardInputFileDescriptor", "h", pty_slave,
-                                          "StandardOutputFileDescriptor", "h", pty_slave,
-                                          "StandardErrorFileDescriptor", "h", pty_slave,
+                                          "StandardInput", "s", "tty",
+                                          "StandardOutput", "s", "tty",
+                                          "StandardError", "s", "tty",
                                           "TTYPath", "s", pty_path);
                 if (r < 0)
                         return bus_log_create_error(r);
-- 
2.35.3

