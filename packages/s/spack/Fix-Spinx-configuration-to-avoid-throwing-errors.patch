From: Egbert Eich <eich@suse.com>
Date: Wed Nov 10 16:30:14 2021 +0100
Subject: Fix Spinx configuration to avoid throwing errors
Patch-mainline: Not yet
Git-repo: https://github.com/spack/spack
Git-commit: f8be4e346441f8d33b760ddfdc5fad360edf055d
References: 

- Ignore certain variables
- Don't attempt downloading ntersphinx inventory

Signed-off-by: Egbert Eich <eich@suse.com>
Signed-off-by: Egbert Eich <eich@suse.de>
---
 lib/spack/docs/conf.py | 24 +++++++++++++++++++++++-
 1 file changed, 23 insertions(+), 1 deletion(-)
diff --git a/lib/spack/docs/conf.py b/lib/spack/docs/conf.py
index 2b58223e1d..95888cf5d4 100644
--- a/lib/spack/docs/conf.py
+++ b/lib/spack/docs/conf.py
@@ -179,6 +179,28 @@ def setup(sphinx):
     ('py:class', '_frozen_importlib_external.SourceFileLoader'),
     # Spack classes that are private and we don't want to expose
     ('py:class', 'spack.provider_index._IndexBase'),
+    ('py:class', 'datetime.datetime'),
+    ('py:class', 'argparse.ArgumentParser'),
+    ('py:class', 'argparse.RawTextHelpFormatter'),
+    ('py:class', 'argparse.Namespace'),
+    ('py:class', 'argparse.Action'),
+    ('py:class', 'ast.NodeVisitor'),
+    ('py:class', 'ast.NodeTransformer'),
+    ('py:class', 'ast.AST'),
+    ('py:class', 'collections.abc.MutableMapping'),
+    ('py:class', 'collections.abc.Sequence'),
+    ('py:class', 'collections.abc.Mapping'),
+    ('py:class', 'html.parser.HTMLParser'),
+    ('py:class', 'typing.IO'),
+    ('py:class', 'urllib.request.HTTPSHandler'),
+    ('py:obj', 'typing.Callable'),
+    ('py:obj', 'typing.IO'),
+    ('py:obj', 'bool'),
+    ('py:obj', 'dict'),
+    ('py:obj', 'int'),
+    ('py:obj', 'list'),
+    ('py:obj', 're'),
+    ('py:obj', 'str')
 ]
 
 # The reST default role (used for this markup: `text`) to use for all documents.
@@ -381,5 +403,5 @@ class SpackStyle(DefaultStyle):
 
 # sphinx.ext.intersphinx
 intersphinx_mapping = {
-    "python": ("https://docs.python.org/3", None),
+    "python": ("https://docs.python.org/3", "objects.inv"),
 }
