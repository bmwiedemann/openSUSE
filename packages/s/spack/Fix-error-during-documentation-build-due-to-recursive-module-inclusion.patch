From dc83f5aa199bd7a393f32f53611e069d7475ccfc Mon Sep 17 00:00:00 2001
From: Egbert Eich <eich@suse.com>
Date: Thu, 7 Apr 2022 20:25:46 +0200
Subject: [PATCH] Fix error during documentation build due to recursive module
 inclusion

Signed-off-by: Egbert Eich <eich@suse.com>
Signed-off-by: Egbert Eich <eich@suse.de>
---
 lib/spack/spack/environment/environment.py | 4 ++++
 1 file changed, 4 insertions(+)

diff --git a/lib/spack/spack/environment/environment.py b/lib/spack/spack/environment/environment.py
index f0598e5a83..76f50ff69c 100644
--- a/lib/spack/spack/environment/environment.py
+++ b/lib/spack/spack/environment/environment.py
@@ -36,6 +36,10 @@
 import spack.subprocess_context
 import spack.traverse
 import spack.user_environment as uenv
+try:
+    import spack.user_environment as uenv
+except AttributeError:
+    pass
 import spack.util.cpus
 import spack.util.environment
 import spack.util.hash
-- 
2.35.3

