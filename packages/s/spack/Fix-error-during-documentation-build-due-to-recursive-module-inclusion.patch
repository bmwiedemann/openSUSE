From c24349cb54442da8e49fd40a299453e56b404a90 Mon Sep 17 00:00:00 2001
From: Egbert Eich <eich@suse.com>
Date: Thu, 7 Apr 2022 20:25:46 +0200
Subject: [PATCH] Fix error during documentation build due to recursive module
 inclusion

Signed-off-by: Egbert Eich <eich@suse.com>
Signed-off-by: Egbert Eich <eich@suse.de>
---
 lib/spack/spack/environment/environment.py | 4 ++++
 1 file changed, 4 insertions(+)

diff --git a/lib/spack/spack/environment/environment.py b/lib/spack/spack/environment/environment.py
index a4312df6dc..10bfbd2a4d 100644
--- a/lib/spack/spack/environment/environment.py
+++ b/lib/spack/spack/environment/environment.py
@@ -41,6 +41,10 @@
 import spack.subprocess_context
 import spack.traverse
 import spack.user_environment as uenv
+try:
+    import spack.user_environment as uenv
+except AttributeError:
+    pass
 import spack.util.cpus
 import spack.util.environment
 import spack.util.hash
-- 
2.40.1

