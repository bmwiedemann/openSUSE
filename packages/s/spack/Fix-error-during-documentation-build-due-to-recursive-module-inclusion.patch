From c24349cb54442da8e49fd40a299453e56b404a90 Mon Sep 17 00:00:00 2001
From: Egbert Eich <eich@suse.com>
Date: Thu, 7 Apr 2022 20:25:46 +0200
Subject: [PATCH] Fix error during documentation build due to recursive module
 inclusion

Signed-off-by: Egbert Eich <eich@suse.com>
Signed-off-by: Egbert Eich <eich@suse.de>
---
 lib/spack/spack/environment/environment.py | 4 ++++
 1 file changed, 4 insertions(+)

Index: spack-0.20.3/lib/spack/spack/environment/environment.py
===================================================================
--- spack-0.20.3.orig/lib/spack/spack/environment/environment.py
+++ spack-0.20.3/lib/spack/spack/environment/environment.py
@@ -40,6 +40,10 @@ import spack.stage
 import spack.store
 import spack.subprocess_context
 import spack.user_environment as uenv
+try:
+    import spack.user_environment as uenv
+except AttributeError:
+    pass
 import spack.util.cpus
 import spack.util.environment
 import spack.util.hash
