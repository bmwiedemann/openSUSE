From 4b996fec980a124c362f47258a2fd2574db38337 Mon Sep 17 00:00:00 2001
From: jghali <jghali@11d20701-8431-0410-a711-e3c959e3b870>
Date: Tue, 7 Dec 2021 22:40:23 +0000
Subject: [PATCH] #16697: Avoid modifying container while iterating it

git-svn-id: svn://scribus.net/trunk/Scribus@24777 11d20701-8431-0410-a711-e3c959e3b870
---
 scribus/langmgr.cpp | 7 +++----
 1 file changed, 3 insertions(+), 4 deletions(-)

diff --git a/scribus/langmgr.cpp b/scribus/langmgr.cpp
index 4baff80ee..0e006e565 100644
--- a/scribus/langmgr.cpp
+++ b/scribus/langmgr.cpp
@@ -20,6 +20,7 @@ for which a new license (GPL+exception) is in place.
  ***************************************************************************/
  
 #include <iostream>
+
 #include <QDebug>
 #include <QDir>
 #include <QFile>
@@ -1030,16 +1031,14 @@ void LanguageManager::findSpellingDictionarySets(QStringList &dictionaryPaths, Q
 		QDir dictLocation(dictionaryPaths.at(i));
 		QStringList dictFilters("*.dic");
 		QStringList dictList(dictLocation.entryList(dictFilters, QDir::Files, QDir::Name));
-		dictList.replaceInStrings(".dic","");
+		dictList.replaceInStrings(".dic", "");
+		dictList.removeDuplicates();
 
 		//Ensure we have aff+dic file pairs, remove any hyphenation dictionaries from the list
 		for (const QString& dictName : qAsConst(dictList))
 		{
 			if (!QFile::exists(dictionaryPaths.at(i) + dictName + ".aff"))
-			{
-				dictList.removeAll(dictName);
 				continue;
-			}
 				
 			if (dictionaryMap.contains(dictName))
 				continue;
-- 
2.34.1

