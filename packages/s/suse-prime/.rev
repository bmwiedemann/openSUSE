<revisionlist>
  <revision rev="1" vrev="1">
    <srcmd5>528ab20ae84008c3ad6cde4708361d1d</srcmd5>
    <version>0.2</version>
    <time>1542124800</time>
    <user>dimstar_suse</user>
    <comment>GPU (nvidia/intel) selection for NVIDIA optimus laptops

A collection of shell scripts that makes it possible to use the
NVIDIA GPU on a Optimus Laptop. The switching is similar to
the feature provided by the nvidia-prime package in Ubuntu.

Latest changes:
- changed Requires: nvidia_driver to Recommends in order to receive
  more acceptance for integration into (open)SUSE
- added Supplements: nvidia_driver:&lt;intel_PCI_ID&gt;, so package gets
  selected as well when nvidia driver packages are selected on an
  Optimus system
- added proper and valid Group tag</comment>
    <requestid>648440</requestid>
  </revision>
  <revision rev="2" vrev="2">
    <srcmd5>9cf90ea339a2a34f821e276460e3b44c</srcmd5>
    <version>0.2</version>
    <time>1547130210</time>
    <user>dimstar_suse</user>
    <comment>- U_Fixed-syntax-error-and-handled-not-yet-existing-conf.patch
  * Fixed syntax error and handled not yet existing configurations

- U_adding-query-switch.patch
  * adding &quot;query&quot; switch (boo#1121246)
  * removing line from xorg-nvidia.conf, which is not needed
    anymore and prevents use of external displays</comment>
    <requestid>664115</requestid>
  </revision>
  <revision rev="3" vrev="1">
    <srcmd5>bac21f4369659fc822475e28f992373b</srcmd5>
    <version>0.3</version>
    <time>1547211948</time>
    <user>dimstar_suse</user>
    <comment>- Update to release 0.3
  * added &quot;query&quot; switch: use 'prime-select query' to check which
    GPU you're currently using
  * removed UseDisplayDevice option from xorg-nvidia.conf which is
    not needed anymore and prevents use of external displays
- supersedes patches
  * U_Fixed-syntax-error-and-handled-not-yet-existing-conf.patch
  * U_adding-query-switch.patch</comment>
    <requestid>664399</requestid>
  </revision>
  <revision rev="4" vrev="2">
    <srcmd5>8eddd2269f711fb8ecc412baf7ec429d</srcmd5>
    <version>0.3</version>
    <time>1547540207</time>
    <user>dimstar_suse</user>
    <comment>- U_prime-select.sh-bail-out-if-nvidia-xconfig-fails-use.patch 
  * 'nvidia-xconfig --query-gpu-info' may easily fail due to missing
    NVIDIA kernel modules or alike. Therefore bail out in this case
    with exit 1.
  * There could be more than one NVIDIA card/GPU in the system. Use
    the first detected one for X configuration in that case.</comment>
    <requestid>664721</requestid>
  </revision>
  <revision rev="5" vrev="1">
    <srcmd5>553a922c364ec989625aa0d2f68bea68</srcmd5>
    <version>0.5</version>
    <time>1548537909</time>
    <user>dimstar_suse</user>
    <comment>- fixed URLs in specfile (project location changed on github) 

- Update to release 0.5
  * Add various improvements to the original script (by @bubbleguuum)
    1. add bbswitch support to power off NVIDIA card if not in use.
    This is important to save battery when running on Intel and
    to decrease cpu temperature significantly.
    This support is optional, it requires user to make some
    manual modifications to his system using detailed documentation.
    2. add Intel Open Source driver support (xf86-video-intel)
    via new intel2 command-line option.
    This driver has some additional features that users may want.
    3. add the proper BusID for Intel in xorg configuration.
    Without this, Xorg fails to start on some laptops.
    4. fix (via modified xorg-nvidia.conf) for external monitor
    not enumerated by xrandr with the nvidia config.
    On Optimus laptop, the dGPU is usually responsible of managing
    external video ports, including connections via Thunderbolt 3.
  * get-current option for prime-select script
    Show valid options for prime-select script, if driver has not
     been configured yet
- supersedes the following patches
  * 0002-fix-README.patch
  * U_prime-select.sh-bail-out-if-nvidia-xconfig-fails-use.patch
  * 0004-xorg-nvidia.conf-refix-config.patch
  * 0003-prime-select-Show-valid-options-if-driver-has-not-be.patch
  * 0001-Add-various-improvements-to-the-original-script.patch
- %preun: cleanup before uninstalling the package completely by
  using prime-select's 'unset' option

- 0001-Add-various-improvements-to-the-original-script.patch
  * Add various improvements to the original script
    1. add bbswitch support to power off NVIDIA card if not in use.
       This is important to save battery when running on Intel and
       to decrease cpu temperature significantly.
       This support is optional, it requires user to make some
       manual modifications to his system using detailed documentation.
    2. add Intel Open Source driver support (xf86-video-intel)
       via new intel2 command-line option.
       This driver has some additional features that users may want.
    3. add the proper BusID for Intel in xorg configuration.
       Without this, Xorg fails to start on some laptops.
    4. fix (via modified xorg-nvidia.conf) for external monitor
       not enumerated by xrandr with the nvidia config.
       On Optimus laptop, the dGPU is usually responsible of managing
       external video ports, including connections via Thunderbolt 3.
- 0002-fix-README.patch
  * fix README
- 0003-prime-select-Show-valid-options-if-driver-has-not-be.patch
  * prime-select: Show valid options, if driver has not been
    configured yet.
- 0004-xorg-nvidia.conf-refix-config.patch
  * xorg-nvidia.conf: refix config</comment>
    <requestid>668820</requestid>
  </revision>
  <revision rev="6" vrev="1">
    <srcmd5>73c482ff2ea323ede0bea1071e349d52</srcmd5>
    <version>0.6.5</version>
    <time>1553635983</time>
    <user>dimstar_suse</user>
    <comment></comment>
    <requestid>688196</requestid>
  </revision>
  <revision rev="7" vrev="1">
    <srcmd5>626a5a33ff4fa32977ece87f36139113</srcmd5>
    <version>0.6.8</version>
    <time>1554276472</time>
    <user>dimstar_suse</user>
    <comment></comment>
    <requestid>690570</requestid>
  </revision>
  <revision rev="8" vrev="2">
    <srcmd5>553a922c364ec989625aa0d2f68bea68</srcmd5>
    <version>0.5</version>
    <time>1554749647</time>
    <user>dimstar_suse</user>
    <comment>revert to version 0.5, boo#1131748</comment>
    <requestid>692307</requestid>
  </revision>
  <revision rev="9" vrev="3">
    <srcmd5>738bb032e1d5351e98f5262da5000e80</srcmd5>
    <version>0.5</version>
    <time>1558532448</time>
    <user>dimstar_suse</user>
    <comment>- U_Corrected-DPI-value-in-xorg-nvidia.conf.patch
  * Corrected DPI value in xorg-nvidia.conf (boo#1130723)</comment>
    <requestid>704686</requestid>
  </revision>
  <revision rev="10" vrev="1">
    <srcmd5>c4d2cc942ad6219904e50d870e251d4d</srcmd5>
    <version>0.7</version>
    <time>1570104623</time>
    <user>dimstar_suse</user>
    <comment>- Update to version 0.7.0
  * no changes to 0.6.14 and the patches on top of that we had
    before ...
- supersedes patches:
  * 0001-Implement-and-document-PRIME-Render-Offload-and-Dyna.patch
  * 0002-Fix-NVIDIA-PRIME-Render-Offload.patch
  * 0003-prime-select.sh-mention-PRIME-Render-Offload-in-usag.patch

- 0001-Implement-and-document-PRIME-Render-Offload-and-Dyna.patch
  0002-Fix-NVIDIA-PRIME-Render-Offload.patch
- 0003-prime-select.sh-mention-PRIME-Render-Offload-in-usag.patch 
  * adds support for NVIDIA PRIME Render Offload of 435.xx/G05 driver
- add new config files (modprobe.d/dracut.d/udev.d) to package;
  regenerate initrd during installation and also during update of
  nvidia G05 KMP

- Update to version 0.6.14
  * changes since 0.6.11
    + fix Plasma scaling for laptop panel when changing driver; 
      see comment in function update_kdeglobals for details
    + fixed issues when switching with Xorg started with
      startx/xinit (multi-user.target)
    + fixed issues when switching from console
    + replaced usage of runlevel command by use of systemctl to
      determine current target. runlevel did not always
    + returns a defined runlevel and caused a bash error (on first
      script run)
    + made grepping for xinit process more strict
    + fixed issue where 'prime-select user_logout_waiter'
      execution would not exit for a while after switching
    + Fix check for existing NVIDIA GPU

- renamed package to suse-prime-beta 

- exit successfully from pre/post/preun/postun scripts in order to
  prevent build fails ...

- Update to version 0.6.11
  * Allow to work without service
    + work without bbswitch if prime-select.service is not installed (for
      suse-prime package)
    + cleaned up script usage, only displays relevant commands
    + service, boot and next-boot commands are not available if running without
      service
    + handle the case when booting with nvidia config but no nvidia card is available
      (disabled in BIOS) by forcing intel. Only works if service is running
    + replaced shell commands using backquotes with more modern $() for consistency
    + when appropriate, changed nvidia =&gt; NVIDIA for consistency
    + reindented script with emacs for consistency
    + minor updates to README
  * Add 30s timeout to service to make sure system boots if service doesnt work. 

- Update to version 0.6.9
  * Resolved issue with plymouth (it hangs during boot)
  * Updated readme 

- Repair broken suse-prime-bbswitch package

- Update to version 0.6.8
  * Big Update (changes in systemd services)
    + prime-boot-selector service deprecated, all features are
      now handled with one only service.
    + used journalctl to check if system is booting or if
      &quot;logout-switch&quot; is needed
    + no more multiple service enable/disable needed during
      switch, prime-select service is enabled everytime
    + removed all &quot;prime-boot-selector&quot; references in logging
      and help command
    + boot_status file has now only two states (S &gt; wait for
      switching, N &gt; not waiting)
    + changed systemd call from &quot;prime-select apply_current&quot;
      to &quot;prime-select systemd_call&quot;
    + updated README

- Update to version 0.6.7
  * Corrected DPI value in xorg-nvidia.conf (boo#1130723)

- Update to version 0.6.6
  * Add logging to journal as well 

- Split power support into separate package suse-prime-bbswitch
  which don't need manual work

- Update to version 0.6.5
  * augmented README
  * do not mention &quot;intel&quot; driver issue with kwin since it is obsolete
  * improved &quot;intel&quot; xorg config to work properly with compositors

- Update to version 0.6.4
  * added support for xdm and kdm
  * removed useless &quot;sudo&quot; in journalctl calls

- Update to version 0.6.3
  * Best DM support (lightdm added) 

- Update to version 0.6.2
  - fixes all known issues with GDM, runlevel 3 and manually-started
    x sessions
    * Xorg logfile comparision no longer necessary, let's use
      journalctl to check user logout
    * other DM(s) than sddm/gdm will be implemented in the future

- Update to version 0.6.1
  * mainly bugfixes
- supersedes 0001-Resolved-multiple-unexistent-file-error.patch

- Update to version 0.6
  * new systemd service file prime-boot-selector in addition to prime-select
    + Service prime-select chooses with whatever driver was previously set by user.
    + Service prime-boot-selector sets all things during boot [MUST BE ENABLED]
  * new prime-select command options
    + prime-select boot intel|intel2|nvidia|last
    + prime-select next-boot intel|intel2|nvidia|abort
    + prime-select service check|disable|restore
- 0001-Resolved-multiple-unexistent-file-error.patch (post 0.6)
  * Resolved multiple unexistent file errors
  * Resolved a big issue in switch command if prime_logfile doesn't exist,
    file check added
  * Added non existent file handling in various parts of script (next-boot,
    log-view, unset, current_check) Those issues manifested themselves
    after a fresh installation, because some config files still were not
    present
- supersedes U_Corrected-DPI-value-in-xorg-nvidia.conf.patch</comment>
    <requestid>734774</requestid>
  </revision>
  <revision rev="11" vrev="1">
    <srcmd5>85fd21275b326098eb9360f5fd5a4bda</srcmd5>
    <version>0.7.1</version>
    <time>1570180920</time>
    <user>dimstar_suse</user>
    <comment>- Update to version 0.7.1
  * xorg-nvidia.conf: Added option AllowExternalGpus to allow
    eGPUs by default</comment>
    <requestid>734793</requestid>
  </revision>
  <revision rev="12" vrev="2">
    <srcmd5>8de2cdad1f2a98b23ea9d88374dacae8</srcmd5>
    <version>0.7.1</version>
    <time>1570198020</time>
    <user>dimstar_suse</user>
    <comment>- replace /sbin/mkinitrd with %regenerate_initrd_posttrans</comment>
    <requestid>734949</requestid>
  </revision>
  <revision rev="13" vrev="3">
    <srcmd5>f91d2cc8f614c932250141f542daf040</srcmd5>
    <version>0.7.1</version>
    <time>1570448768</time>
    <user>dimstar_suse</user>
    <comment></comment>
    <requestid>735308</requestid>
  </revision>
  <revision rev="14" vrev="1">
    <srcmd5>dc8b760dbaa3ed84f4c57a2d02390687</srcmd5>
    <version>0.7.2</version>
    <time>1570557596</time>
    <user>dimstar_suse</user>
    <comment>- Update to version 0.7.2 with various improvements and fixes
  * Full support to nvidia prime offloading without service or
    with bbswitch with service disabled
  * Distinction between &quot;service disabled&quot; (bbswitch package)
    and &quot;service not installed&quot;
  * Fixed bug with bbswitch and service enabled that returns i
    &quot;PCI BusID of NVIDIA card could not be detected&quot;
  * Now when NVIDIA is OFF, intel xorg config file has ai
    commented &quot;nvidia prime offloading&quot; section
  * Mention that offloading needs service disabled
  * Corrected intentation in some sections
- supersedes the following patches:
  * 0001-Removed-exit-1-error-from-common-set-intel-because-d.patch
  * 0002-Various-improvements-and-fixes.patch
  * 0003-Merged-commit-https-github.com-openSUSE-SUSEPrime-pu.patch

- 0001-Removed-exit-1-error-from-common-set-intel-because-d.patch,
  * Removed &quot;exit 1&quot; error from &quot;common set intel&quot; because during
    boot and nvidia card off by default in bbswitch (load_state=0)
    crashes service
- 0002-Various-improvements-and-fixes.patch
  * Various improvements and fixes
    + Full support to nvidia prime offloading without service or with
      bbswitch with service disabled
    + Distinction between &quot;service disabled&quot; (bbswitch package) and
      &quot;service not installed&quot;
    + Fixed bug with bbswitch and service enabled that returns
      &quot;PCI BusID of NVIDIA card could not be detected&quot;
    + Now when NVIDIA is OFF, intel xorg config file has a commented
      &quot;nvidia prime offloading&quot; section
    + Mention that offloading needs service disabled
    + Corrected intentation in some sections
- 0003-Merged-commit-https-github.com-openSUSE-SUSEPrime-pu.patch
  * supersedes 0001-Fix-intel-configs-if-no-NVIDIA-kernel-module-is-avai.patch

- fix build on distributions, where %{?regenerate_initrd_post}
  doesn't exist yet
- %preun: 'prime-select unset' is supposed to fail during 
  package installation test during build, therefore don't
  let it fail via adding &quot;|| true&quot; to the command

- 0001-Fix-intel-configs-if-no-NVIDIA-kernel-module-is-avai.patch
  * Move additional nvidia X device section needed for NVIDIA's Prime
    Render Offload mode to an extra xorg.conf.d snippet. Add this only
    to intel X configs, if NVIDIA's PCI BusId can be detected.
- add xorg-nvidia-prime-render-offload.conf X snippet to /etc/prime</comment>
    <requestid>736082</requestid>
  </revision>
  <revision rev="15" vrev="1">
    <srcmd5>d51652e841a89070c789413d0e59305c</srcmd5>
    <version>0.7.3</version>
    <time>1574104332</time>
    <user>dimstar_suse</user>
    <comment>- this release also includes support for NVIDIA's PRIME render
  offloading (jsc#SLE-9068)

- Update to version 0.7.3
  * Restore previous configuration if nvidia reconfiguration fails
  * Set the right panel variables for LVDS displays (issue#26)</comment>
    <requestid>749323</requestid>
  </revision>
  <revision rev="16" vrev="2">
    <srcmd5>79d8acc2630fcc819e9603dc79bce2e7</srcmd5>
    <version>0.7.3</version>
    <time>1574242065</time>
    <user>dimstar_suse</user>
    <comment>- only package suse-prime-bbswitch on openSUSE, since bbswitch
  kernel module package is not available on sle</comment>
    <requestid>749522</requestid>
  </revision>
</revisionlist>
