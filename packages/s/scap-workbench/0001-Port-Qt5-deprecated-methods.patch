From 93441ecc2f2bd3647e005ff8293909a0540b40fd Mon Sep 17 00:00:00 2001
From: Christophe Giboudeaux <christophe@krop.fr>
Date: Wed, 25 Mar 2020 15:41:22 +0100
Subject: [PATCH] Port Qt5 deprecated methods

QSet::toList() is deprecated
QSet::fromList() is deprecated
---
 src/SaveAsRPMDialog.cpp | 2 +-
 src/TailoringWindow.cpp | 6 +++++-
 2 files changed, 6 insertions(+), 2 deletions(-)

diff --git a/src/SaveAsRPMDialog.cpp b/src/SaveAsRPMDialog.cpp
index 611d15f..e8d0564 100644
--- a/src/SaveAsRPMDialog.cpp
+++ b/src/SaveAsRPMDialog.cpp
@@ -86,7 +86,7 @@ void SaveAsRPMDialog::slotFinished(int result)
     closure.remove(mScanningSession->getOpenedFilePath());
     QList<QString> closureOrdered;
     closureOrdered.append(mScanningSession->getOpenedFilePath());
-    closureOrdered.append(closure.toList());
+    closureOrdered.append(closure.values());
 
     const QDir cwd = ScanningSession::getCommonAncestorDirectory(closure);
 
diff --git a/src/TailoringWindow.cpp b/src/TailoringWindow.cpp
index 212416c..5a3677a 100644
--- a/src/TailoringWindow.cpp
+++ b/src/TailoringWindow.cpp
@@ -645,7 +645,11 @@ QString TailoringWindow::getQSettingsKey() const
 void TailoringWindow::deserializeCollapsedItems()
 {
     const QStringList list = mQSettings->value(getQSettingsKey()).toStringList();
+#if QT_VERSION >= QT_VERSION_CHECK(5, 14, 0)
+    mCollapsedItemIds = QSet<QString>(list.begin(), list.end());
+#else
     mCollapsedItemIds = QSet<QString>::fromList(list);
+#endif
 }
 
 void TailoringWindow::serializeCollapsedItems()
@@ -657,7 +661,7 @@ void TailoringWindow::serializeCollapsedItems()
     }
     else
     {
-        mQSettings->setValue(getQSettingsKey(), QVariant(mCollapsedItemIds.toList()));
+        mQSettings->setValue(getQSettingsKey(), QVariant(mCollapsedItemIds.values()));
         mQSettings->setValue(getQSettingsKey() + "_lastUsed", QVariant(QDateTime::currentDateTime()));
     }
 }
-- 
2.25.1

