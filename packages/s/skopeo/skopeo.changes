-------------------------------------------------------------------
Wed Jul 29 12:32:52 UTC 2020 - Sascha Grunert <sgrunert@suse.com>

- Update to skopeo v1.1.1:
  * Run htpasswd from our build-container instead of registry:2
  * Vendor golang.org/x/text@v0.3.3

-------------------------------------------------------------------
Wed Jun 24 13:17:30 UTC 2020 - Ralf Haferkamp <rhafer@suse.com>

- Update to skopeo v1.1.0:
  * Add Skopeo Stable Image Dockerfile for Quay
  * Add tags to support regular expressions in yaml conf
  * Add tags to support regular expressions without breaking the
    old ones in yaml conf
  * Add upstream and testing container images
  * Add upstream and testing container images
  * Bump github.com/containers/storage from 1.20.1 to 1.20.2
  * Bump github.com/stretchr/testify from 1.6.0 to 1.6.1
  * Clarify control flow when handling the tags list
  * Clarify imagesToCopy control flow
  * Correct a typo in docs/skopeo-sync.1.md
  * Don't use path.Join to form repository names
  * Drop redundant fmt.Sprintf inside erorrs.Wrapf/Errorf
  * Fix error handling on invalid regex
  * Fix the recently added example in the man page.
  * Inline isTagSpecified into its only caller
  * Only create a SystemContext once per registry
  * Remove the repoReference parameter of imagesToCopyFromRepo
  * Share the logrus.WithFields settings over the loop bodies
  * Use MatchString instead of Match with a manual conversion
  * Use a reference.Named, not types.ImageReference, in
    imagesToCopyFromRepo
  * Use a separate field for the "sync images with tag
    matching regex" feature
  * Use reference.Tagged to extract the tag from a reference
  * Work with a reference.Named, not strings, in
    imagesToCopyFromRegistry

-------------------------------------------------------------------
Thu May 21 12:43:35 UTC 2020 - Paolo Stivanin <info@paolostivanin.com>

- Update to skopeo v1.0.0:
* Add skopeo Login from c/common
* Add skopeo login&logout
* Add Security Policy
* Add tests for using signatures with mirrors
* Update c/image for containers/image#912
* Use cobra in skopeo
* Update containers/image to v5.4.4
* Bump github.com/containers/storage from 1.18.2 to 1.19.0
* v0.11.2 containers/common

-------------------------------------------------------------------
Tue Apr 14 07:25:44 UTC 2020 - Sascha Grunert <sgrunert@suse.com>

- Update to skopeo v0.2.0:
  - Update on #834: force runc only when cgroupsv1
  - Update docs/skopeo.1.md
  - Add example with repository
  - Skopeo should support for BigFilesTemporaryDir (SystemContext)
  - Use fully-qualified image names
  - Add support for REGISTRY_AUTH_FILE
  - Partial image encryption support
  - Remove the list_tags integration test since it does not cover
    much not already tested by the upstream container/images repo
    or local unit tests
  - Updates based on code review to simplify logic and tests
  - Fix inconsistency in manpage example for list-tags
  - Adds "list-tags" command to list tags with no known tag
    required

-------------------------------------------------------------------
Wed Mar  4 14:09:21 UTC 2020 - Ralf Haferkamp <rhafer@suse.com>

- Removed patches that were merged upstream:
  - 0002-Add-set-of-image-options-used-only-for-docker-transp.patch
  - bsc1115165-0001-Introduce-the-sync-command.patch
  - CVE-2019-10214.patch
- Update to skopeo v0.1.41 (bsc#1165715):
  - Bump github.com/containers/image/v5 from 5.2.0 to 5.2.1
  - Bump gopkg.in/yaml.v2 from 2.2.7 to 2.2.8
  - Bump github.com/containers/common from 0.0.7 to 0.1.4
  - Remove the reference to openshift/api
  - vendor github.com/containers/image/v5@v5.2.0
  - Manually update buildah to v1.13.1
  - add specific authfile options to copy (and sync) command.
  - Bump github.com/containers/buildah from 1.11.6 to 1.12.0
  - Add context to --encryption-key / --decryption-key processing
    failures
  - Bump github.com/containers/storage from 1.15.2 to 1.15.3
  - Bump github.com/containers/buildah from 1.11.5 to 1.11.6
  - remove direct reference on c/image/storage
  - Makefile: set GOBIN
  - Bump gopkg.in/yaml.v2 from 2.2.2 to 2.2.7
  - Bump github.com/containers/storage from 1.15.1 to 1.15.2
  - Introduce the sync command
  - openshift cluster: remove .docker directory on teardown
  - Bump github.com/containers/storage from 1.14.0 to 1.15.1
  - document installation via apk on alpine
  - Fix typos in doc for image encryption
  - Image encryption/decryption support in skopeo
  - make vendor-in-container
  - Bump github.com/containers/buildah from 1.11.4 to 1.11.5
  - Travis: use go v1.13
  - Use a Windows Nano Server image instead of Server Core for
    multi-arch testing
  - Increase test timeout to 15 minutes
  - Run the test-system container without --net=host
  - Mount /run/systemd/journal/socket into test-system containers
  - Don't unnecessarily filter out vendor from (go list ./...)
    output
  - Use -mod=vendor in (go {list,test,vet})
  - Bump github.com/containers/buildah from 1.8.4 to 1.11.4
  - Bump github.com/urfave/cli from 1.20.0 to 1.22.1
  - skopeo: drop support for ostree
  - Don't critically fail on a 403 when listing tags
  - Revert "Temporarily work around auth.json location confusion"
  - Remove references to atomic
  - Remove references to storage.conf
  - Dockerfile: use golang-github-cpuguy83-go-md2man
  - bump version to v0.1.41-dev
  - systemtest: inspect container image different from current
    platform arch
- Changes in v0.1.40:
  - vendor containers/image v5.0.0
  - copy: add a --all/-a flag
  - System tests: various fixes
  - Temporarily work around auth.json location confusion
  - systemtest: copy: docker->storage->oci-archive
  - systemtest/010-inspect.bats: require only PATH
  - systemtest: add simple env test in inspect.bats
  - bash completion: add comments to keep scattered options in sync
  - bash completion: use read -r instead of disabling SC2207
  - bash completion: support --opt arg completion
  - bash-completion: use replacement instead of sed
  - bash completion: disable shellcheck SC2207
  - bash completion: double-quote to avoid re-splitting
  - bash completions: use bash replacement instead of sed
  - bash completion: remove unused variable
  - bash-completions: split decl and assignment to avoid masking
    retvals
  - bash completion: double-quote fixes
  - bash completion: hard-set PROG=skopeo
  - bash completion: remove unused variable
  - bash completion: use `||` instead of `-o`
  - bash completion: rm eval on assigned variable
  - copy: add --dest-compress-format and --dest-compress-level
  - flag: add optionalIntValue
  - Makefile: use go proxy
  - inspect --raw: skip the NewImage() step
  - update OCI image-spec to
    775207bd45b6cb8153ce218cc59351799217451f
  - inspect.go: inspect env variables
  - ostree: use both image and & storage buildtags

-------------------------------------------------------------------
Mon Sep  2 12:02:44 UTC 2019 - Sascha Grunert <sgrunert@suse.com>

- Add patch for CVE-2019-10214. bsc#1144065
  + CVE-2019-10214.patch

-------------------------------------------------------------------
Wed Aug  7 08:02:58 UTC 2019 - Marco Vedovati <mvedovati@suse.com>

- Update to skopeo v0.1.39 (bsc#1159530):
    - inspect: add a --config flag
    - Add --no-creds flag to skopeo inspect
    - Add --quiet option to skopeo copy
    - New progress bars
    - Parallel Pulls and Pushes for major speed improvements
    - containers/image moved to a new progress-bar library to fix various
      issues related to overlapping bars and redundant entries.
    - enforce blocking of registries
    - Allow storage-multiple-manifests
    - When copying images and the output is not a tty (e.g., when piping to a
      file) print single lines instead of using progress bars. This avoids
      long and hard to parse output
    - man pages: add --dest-oci-accept-uncompressed-layers
    - completions:
      - Introduce transports completions
      - Fix bash completions when a option requires a argument
      - Use only spaces in indent
       - Fix completions with a global option
      - add --dest-oci-accept-uncompressed-layers

- Update bsc1115165-0001-Introduce-the-sync-command.patch and add
  0002-Add-set-of-image-options-used-only-for-docker-transp.patch
  required by the updated sync patch.

-------------------------------------------------------------------
Tue Nov 27 10:51:19 UTC 2018 - Marco Vedovati <mvedovati@suse.com>

- Disable ostree repository types for SLE, as this feature requires libostree
  that is not yet available in the Server Application module where skopeo is
  located.

-------------------------------------------------------------------
Thu Nov 15 17:22:15 UTC 2018 - Marco Vedovati <mvedovati@suse.com>

- Update to skopeo v0.1.32:
  * Add command time out support
  * Updates to vendored libraries

- Add a patch that implements the `skopeo sync` command, generated from the
  upstream PR: https://github.com/containers/skopeo/pull/524
  Fix bsc#1115165
  + bsc1115165-0001-Introduce-the-sync-command.patch

- Update project location from 'projectatomic' to 'containers'

-------------------------------------------------------------------
Mon Jul 30 05:39:38 UTC 2018 - vrothberg@suse.com

- Update to skopeo v0.1.31:
  * Fix compilation on i586

-------------------------------------------------------------------
Wed Jun 13 13:02:47 UTC 2018 - dcassany@suse.com

- Make use of %license macro

-------------------------------------------------------------------
Tue May 22 06:54:22 UTC 2018 - vrothberg@suse.com

- Update to skopeo v0.1.30:
  * skopeo-copy: docker-archive: multitag support
  * Updates to vendored libraries

-------------------------------------------------------------------
Tue Mar 27 12:14:12 UTC 2018 - vrothberg@suse.com

- Run spec-cleaner on skopeo.spec

- Enable ostree support on Tumbleweed, Leap 15 and SLE 15

- Enable support for containers/storage, which is especially useful to further
  support Podman and cri-o.

- Update to skopeo v0.1.28:
  * vendor: bump containers/image and containers/image
  * Cleanup skopeo man page and README.md
  * Use credentials from authfile for skopeo commands
  * Update to a newer containers/storage master
  * Add global --override-arch and --override-os options

-------------------------------------------------------------------
Mon Feb 12 08:42:04 UTC 2018 - vrothberg@suse.com

- Add requirement on libcontainers-common, which now provides the
  /etc/containers/policy.json config.

-------------------------------------------------------------------
Thu Feb  1 16:58:04 CET 2018 - ro@suse.de

- do not build on s390, only on s390x (no go on s390)

-------------------------------------------------------------------
Mon Nov 20 07:34:18 UTC 2017 - asarai@suse.com

- Update to skopeo v0.1.26. This includes a fix for CVE-2017-14992.
- Disable containers/storage integration by default (through
  containers_image_storage_stub), as it is very dodgy and not widely used.

-------------------------------------------------------------------
Sat Oct 21 23:19:37 UTC 2017 - asarai@suse.com

- Update to skopeo v0.1.24. Upstream changelog:
  * Improvements to macOS builds: A make binary-local should work without extra options.
  * make install on macOS now installs to /usr/local
  * The destination in docker-archive: now can be a pipe.
  * When building with containers_image_openpgp, signatures with PGP v3 signature packets are accepted.
  * Unreadable /etc/docker/certs.d now only logs a warning instead of aborting the operation.
  * oci-layout: naming semantics changes:
    * A full range of org.opencontainers.image.ref.name values is now accepted
    * A name must be specified for oci-layout: destinations (it does not default to latest any more).
    * For oci-layout: sources, a name is now optional if the image index contains exactly one image (instead of using the image with the latest name).
    * Policy configuration identities of oci-layout: images now consist only of the directory name, to avoid the ambiguity created by the unspecified annotation values above.
  * ~/.docker/config.json credential helpers (configured in credHelpers) are now supported.
  * Annotations are now preserved when copying and compressing OCI images.
  * New transport oci-archive:, works exactly like oci-layout:, but works on tarballs instead of extracted directories.
  * When copying images, skopeo always asks for the same image schema, and optionally converts the image itself to make it acceptable to the destination, instead of asking for a schema dependent on the destinations’ capabilities (relying on the source to convert the image).
  * Improved installation instructions.
  * ostree: image names can now contain colons (e.g. port specifications)
  * skopeo now does not declare support for manifest lists, so that the source registry provides a single image. This allows skopeo copy to copy various images recently published to Docker Hub. (More complete support for manifest lists will come in the future.)
  * The containers-storage: backend has been updated, incl. support for the override_kernel_checks option.
  * Improved the output of progress bars in skopeo copy.
  * Fixed fetching blobs with external URLs in images served by docker/distribution registries.
  * OCI images now support reading blobs with external URLs, ands storing information about such blobs without copying the contents.
  * Writing ostree: images creates a docker.digest annotation.
  * docker/distribution registry credentials are now read from $XDG_RUNTIME_DIR/containers/auth.json before trying ~/.docker/config.json and ~/.dockercfg.
  * skopeo inspect no longer crashes on images where the config blob does not contain a container configuration.

-------------------------------------------------------------------
Wed Sep  6 15:45:16 UTC 2017 - asarai@suse.com

- Add -buildmode=pie to fix bugs building on ppc64le.

-------------------------------------------------------------------
Sat Jul 22 16:25:08 UTC 2017 - asarai@suse.com

- Update to skopeo v0.1.23. This supports OCI v1, as well as a variety of new
  transports such as docker-archive and ostree.
- Disable ostree builds by default with %bcond_with, as only Tumbleweed has
  libostree and we need skopeo for KIWI.

-------------------------------------------------------------------
Fri Apr 14 11:45:09 UTC 2017 - asarai@suse.com

- Update to skopeo 0.1.19, which supports 1.0.0-rc4 of the image-spec as well
  as all of our patches have been merged upstream.
  - 0001-docker-split-tarfile-code-from-docker-daemon-code.patch
  - 0002-docker-add-docker-archive-transport.patch
  - 0003-squashme-docker-tarfile-make-tagging-work-properly.patch
  - 0004-squashme-docker-archive-handle-mtrmac-s-comments.patch
  - 0005-squashme-docker-archive-correctly-handle-tagging.patch
  - 0006-copy-move-compression-to-separate-pkg.patch
  - 0007-docker-daemon-decompress-blobs-transparently-in-GetB.patch
  - oci-remove-MIME-type-autodetection.patch

-------------------------------------------------------------------
Wed Feb 15 12:34:35 UTC 2017 - asarai@suse.com

- Add further patches to handle OCI <-> Docker translation properly. This is
  necessary for KIWI integration. https://github.com/containers/image/pull/237
  + oci-remove-MIME-type-autodetection.patch

-------------------------------------------------------------------
Tue Feb  7 14:51:48 UTC 2017 - asarai@suse.com

- Add buildtags to handle the Docker-like buildtags such as
  libdm_no_deferred_remove and exclude_graphdriver_aufs.

-------------------------------------------------------------------
Tue Feb  7 12:05:11 UTC 2017 - asarai@suse.com

- Add patches for docker-archive transport.
  + 0001-docker-split-tarfile-code-from-docker-daemon-code.patch
  + 0002-docker-add-docker-archive-transport.patch
  + 0003-squashme-docker-tarfile-make-tagging-work-properly.patch
  + 0004-squashme-docker-archive-handle-mtrmac-s-comments.patch
  + 0005-squashme-docker-archive-correctly-handle-tagging.patch
  + 0006-copy-move-compression-to-separate-pkg.patch
  + 0007-docker-daemon-decompress-blobs-transparently-in-GetB.patch

-------------------------------------------------------------------
Tue Feb  7 08:49:54 UTC 2017 - asarai@suse.com

- Bump to skopeo v0.1.18. Many updates to containers/image, and fixes to the
  Docker v2s2 schema conversion.

-------------------------------------------------------------------
Tue Dec 13 22:45:22 UTC 2016 - asarai@suse.com

- Bump to skopeo v0.1.17. This version includes many, many fixes to OCI image
  handling as well as adding features such as the docker-daemon: transport.
  There are also several UX fixes to how passwords are managed.

-------------------------------------------------------------------
Thu Dec  8 11:00:01 UTC 2016 - asarai@suse.com

- Bump to v0.1.16+r54 (a865c07818ed914e2602205be6e9d67debc1d660). This is
  necessary so that we don't need to do major backporting of containers/image.
  skopeo intends to bump themselves to v0.1.17 in the coming week so this is
  just a temporary measure.
- Removed patches no longer needed.
  - oci-fix-mediatypes.patch

-------------------------------------------------------------------
Fri Nov 11 03:04:14 UTC 2016 - asarai@suse.com

- Backport OCI mediatype fixes. https://github.com/projectatomic/skopeo/pull/221
  + oci-fix-mediatypes.patch

-------------------------------------------------------------------
Fri Nov 11 02:40:15 UTC 2016 - asarai@suse.com

- Initial import of skopeo v0.1.16.
