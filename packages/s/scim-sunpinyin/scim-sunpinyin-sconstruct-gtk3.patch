diff --git a/SConstruct b/SConstruct
index 7739300..3d23028 100644
--- a/SConstruct
+++ b/SConstruct
@@ -94,6 +94,9 @@ conf = Configure(env, custom_tests={'CheckPKGConfig' : CheckPKGConfig,
                                     'CheckPKG' : CheckPKG })
 
 def DoConfigure():
+
+    gtk_version = 0
+
     if GetOption('clean'):
         return
 
@@ -106,11 +109,22 @@ def DoConfigure():
     if not conf.CheckPKG('sunpinyin-2.0'):
         Exit(1)
 
-    if not conf.CheckPKG('gtk+-2.0'):
-        Exit(1)
+    if conf.CheckPKG('gtk+-2.0'):
+        gtk_version=2
     
+    if conf.CheckPKG('gtk+-3.0'):
+        gtk_version=3
+
+    if not gtk_version:
+        Exit(1)
+
     env = conf.Finish()
-    env.ParseConfig('pkg-config scim sunpinyin-2.0 gtk+-2.0 --libs --cflags')
+    if (gtk_version == 2):
+        env.ParseConfig('pkg-config scim sunpinyin-2.0 gtk+-2.0 --libs --cflags')
+    elif (gtk_version == 3):
+        env.ParseConfig('pkg-config scim sunpinyin-2.0 gtk+-3.0 --libs --cflags')
+    else:
+        Exit(1)
 
 DoConfigure()
 
