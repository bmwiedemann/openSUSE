From e5be32fb6ec28e88a2e0e898b447fe4492a71704 Mon Sep 17 00:00:00 2001
From: Jens Georg <mail@jensge.org>
Date: Sat, 16 Mar 2019 19:31:13 +0100
Subject: [PATCH] Make fatal-warnings an option

---
 meson.build       | 10 +++++++++-
 meson_options.txt |  3 ++-
 2 files changed, 11 insertions(+), 2 deletions(-)

diff --git a/meson.build b/meson.build
index 04cf0a57..d590cc7c 100644
--- a/meson.build
+++ b/meson.build
@@ -25,10 +25,18 @@ add_global_arguments(['--target-glib=2.40',
                       '--vapidir=@0@'.format(join_paths(meson.current_source_dir(),
                         'vapi')),
                       '--enable-checking',
-                      '--fatal-warnings',
                       '--enable-experimental',
                       '--enable-deprecated'], language : 'vala')
 
+if get_option('fatal_warnings')
+    add_global_arguments(
+        [
+            '--fatal-warnings'
+        ],
+        language : 'vala'
+    )
+endif
+
 gitver = run_command(find_program('git-hash'))
 if gitver.returncode() == 0
   add_global_arguments(['-D_GIT_VERSION="@0@"'.format(gitver.stdout().strip())],
diff --git a/meson_options.txt b/meson_options.txt
index 3c81a5cd..f0649cad 100644
--- a/meson_options.txt
+++ b/meson_options.txt
@@ -6,4 +6,5 @@ option('measure', type: 'string', value : '', description : 'Enable various timi
 option('dupe-detection', type: 'boolean', value : 'true', description: 'Disable duplicate checks')
 option('udev', type: 'boolean', value : 'true', description: 'Enable or disable udev support')
 option('install-apport-hook', type : 'boolean', value : 'true', description: 'Enable Ubuntu apport hook')
-option('face-detection', type:'boolean', value:false)
+option('face-detection', type:'boolean', value:false, description: 'Enable face detection and recognition features')
+option('fatal_warnings', type:'boolean', value:false)
-- 
2.26.2

