Subject: [PATCH] [FEAT VS2010] genprotimg: require argument for 'ramdisk' and 'parmfile' options
From: Marc Hartmayer <mhartmay@linux.ibm.com>

Summary:     genprotimg: add host-key document verification
Description: Add host-key document verification support to genprotimg. This
             ensures that a host-key document is genuine and provided by
             IBM. For this the user must provide the IBM Z signing key, the
             intermediate CA certificate (signed by the root CA used) so a
             chain of trust starting from the host-key document and ending in
             the root CA can be established.
Upstream-ID: 895a88b2f8d775e45ab1251f0b4bb275efd44a64
Problem-ID:  VS2010

Upstream-Description:

             genprotimg: require argument for 'ramdisk' and 'parmfile' options

             A argument is required for the optional options 'ramdisk' and
             'parmfile'.

             Fixes: 65b9fc442c1a ("genprotimg: introduce new tool for the creation of PV images")
             Reviewed-by: Bjoern Walk <bwalk@linux.ibm.com>
             Signed-off-by: Marc Hartmayer <mhartmay@linux.ibm.com>
             Signed-off-by: Jan Hoeppner <hoeppner@linux.ibm.com>


Signed-off-by: Marc Hartmayer <mhartmay@linux.ibm.com>
Index: s390-tools-service/genprotimg/src/pv/pv_args.c
===================================================================
--- s390-tools-service.orig/genprotimg/src/pv/pv_args.c
+++ s390-tools-service/genprotimg/src/pv/pv_args.c
@@ -227,7 +227,7 @@ gint pv_args_parse_options(PvArgs *args,
 		  .arg_description = _("IMAGE") },
 		{ .long_name = "ramdisk",
 		  .short_name = 'r',
-		  .flags = G_OPTION_FLAG_OPTIONAL_ARG | G_OPTION_FLAG_FILENAME,
+		  .flags = G_OPTION_FLAG_FILENAME,
 		  .arg = G_OPTION_ARG_CALLBACK,
 		  .arg_data = cb_add_component,
 		  .description = _("Use RAMDISK as the initial RAM disk\n" INDENT
@@ -235,7 +235,7 @@ gint pv_args_parse_options(PvArgs *args,
 		  .arg_description = _("RAMDISK") },
 		{ .long_name = "parmfile",
 		  .short_name = 'p',
-		  .flags = G_OPTION_FLAG_OPTIONAL_ARG | G_OPTION_FLAG_FILENAME,
+		  .flags = G_OPTION_FLAG_FILENAME,
 		  .arg = G_OPTION_ARG_CALLBACK,
 		  .arg_data = cb_add_component,
 		  .description = _("Use the kernel parameters stored in PARMFILE\n" INDENT
