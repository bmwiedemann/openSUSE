Subject: [PATCH] [FEAT VS1804] zipl: remove libc.h include in s390.h
From: Marc Hartmayer <mhartmay@linux.ibm.com>

Summary:     genprotimg: Introduce new tool for the creation of PV images
Description: genprotimg takes a kernel, host-key documents, optionally an
             initrd, optionally a file with the kernel command line, and it
             generates a single, loadable image file. The image consists of a
             concatenation of a plain text boot loader, the encrypted
             components for kernel, initrd, and cmdline, and the
             integrity-protected PV header, containing metadata necessary for
             running the guest in PV mode. It's possible to use this image file
             as a kernel for zIPL or for a direct kernel boot using QEMU.
Upstream-ID: f454c6825f5087cf671d0dfbe96f7f3d148569d6
Problem-ID:  VS1804

Upstream-Description:

             zipl: remove libc.h include in s390.h

             This allows the use of s390.h in combination with other libc
             implementations than our minimal libc, e.g. with glibc.

             Reviewed-by: Philipp Rudo <prudo@linux.ibm.com>
             Reviewed-by: Stefan Haberland <sth@linux.ibm.com>
             Signed-off-by: Marc Hartmayer <mhartmay@linux.ibm.com>
             Signed-off-by: Jan HÃ¶ppner <hoeppner@linux.ibm.com>


Signed-off-by: Marc Hartmayer <mhartmay@linux.ibm.com>
---
 zipl/boot/s390.h        |    1 -
 zipl/boot/sclp.c        |    1 +
 zipl/boot/sclp_stage3.c |    1 +
 zipl/boot/stage2dump.c  |    1 +
 4 files changed, 3 insertions(+), 1 deletion(-)

--- a/zipl/boot/s390.h
+++ b/zipl/boot/s390.h
@@ -12,7 +12,6 @@
 #define S390_H
 
 #include "lib/zt_common.h"
-#include "libc.h"
 #include "boot/sigp.h"
 
 
--- a/zipl/boot/sclp.c
+++ b/zipl/boot/sclp.c
@@ -9,6 +9,7 @@
  * it under the terms of the MIT license. See LICENSE for details.
  */
 
+#include "libc.h"
 #include "error.h"
 #include "s390.h"
 #include "sclp.h"
--- a/zipl/boot/sclp_stage3.c
+++ b/zipl/boot/sclp_stage3.c
@@ -9,6 +9,7 @@
  * it under the terms of the MIT license. See LICENSE for details.
  */
 
+#include "libc.h"
 #include "sclp.h"
 #include "sclp_stage3.h"
 
--- a/zipl/boot/stage2dump.c
+++ b/zipl/boot/stage2dump.c
@@ -13,6 +13,7 @@
 
 #include "lib/zt_common.h"
 
+#include "libc.h"
 #include "error.h"
 #include "sclp.h"
 #include "stage2dump.h"
