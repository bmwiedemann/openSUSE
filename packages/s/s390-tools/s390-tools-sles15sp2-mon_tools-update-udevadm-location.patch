From 2215ba672e2f1e69b21b8b852db566b87df7adf7 Mon Sep 17 00:00:00 2001
From: Gerald Schaefer <gerald.schaefer@de.ibm.com>
Date: Mon, 6 Jul 2020 13:30:40 +0200
Subject: [PATCH] mon_tools: update udevadm location
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

Modern distributions do not provide the symlink /sbin/udevadm any more.
Use /usr/bin/udevadm instead for the example init script / systemd units.
Note that those are meant for example purpose and would need to be adjusted
by distributions, so no extra effort is taken to determine the actual
location of udevadm.

Signed-off-by: Gerald Schaefer <gerald.schaefer@de.ibm.com>
Signed-off-by: Jan HÃ¶ppner <hoeppner@linux.ibm.com>
---
 etc/init.d/mon_statd           | 2 +-
 systemd/mon_fsstatd.service.in | 2 +-
 systemd/mon_procd.service.in   | 2 +-
 3 files changed, 3 insertions(+), 3 deletions(-)

diff --git a/etc/init.d/mon_statd b/etc/init.d/mon_statd
index 90bd565..68f6d91 100755
--- a/etc/init.d/mon_statd
+++ b/etc/init.d/mon_statd
@@ -31,7 +31,7 @@ if [ -f $CONFIG_FILE ]; then
 	. $CONFIG_FILE
 fi
 
-UDEVSETTLE=/sbin/udevadm
+UDEVSETTLE=/usr/bin/udevadm
 if [ ! -e $UDEVSETTLE ]
 then
 	UDEVSETTLE=/sbin/udevsettle
diff --git a/systemd/mon_fsstatd.service.in b/systemd/mon_fsstatd.service.in
index 8620d3b..cdba480 100644
--- a/systemd/mon_fsstatd.service.in
+++ b/systemd/mon_fsstatd.service.in
@@ -29,7 +29,7 @@ EnvironmentFile=@sysconf_path@/sysconfig/mon_fsstatd
 #Environment=FSSTAT_INTERVAL=30
 
 ExecStartPre=-/sbin/modprobe monwriter
-ExecStartPre=/sbin/udevadm settle --timeout=10
+ExecStartPre=/usr/bin/udevadm settle --timeout=10
 ExecStart=@usrsbin_path@/mon_fsstatd -i $FSSTAT_INTERVAL
 ExecReload=/bin/kill -HUP $MAINPID
 KillMode=process
diff --git a/systemd/mon_procd.service.in b/systemd/mon_procd.service.in
index 512e584..1c5b3f4 100644
--- a/systemd/mon_procd.service.in
+++ b/systemd/mon_procd.service.in
@@ -29,7 +29,7 @@ EnvironmentFile=@sysconf_path@/sysconfig/mon_procd
 #Environment=PROC_INTERVAL=30
 
 ExecStartPre=-/sbin/modprobe monwriter
-ExecStartPre=/sbin/udevadm settle --timeout=10
+ExecStartPre=/usr/bin/udevadm settle --timeout=10
 ExecStart=@usrsbin_path@/mon_procd -i $PROC_INTERVAL
 ExecReload=/bin/kill -HUP $MAINPID
 KillMode=process
-- 
2.26.2

