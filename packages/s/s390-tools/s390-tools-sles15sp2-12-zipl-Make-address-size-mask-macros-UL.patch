Subject: [PATCH] [FEAT VS1804] zipl: Make address/size/mask macros UL
From: Marc Hartmayer <mhartmay@linux.ibm.com>

Summary:     genprotimg: Introduce new tool for the creation of PV images
Description: genprotimg takes a kernel, host-key documents, optionally an
             initrd, optionally a file with the kernel command line, and it
             generates a single, loadable image file. The image consists of a
             concatenation of a plain text boot loader, the encrypted
             components for kernel, initrd, and cmdline, and the
             integrity-protected PV header, containing metadata necessary for
             running the guest in PV mode. It's possible to use this image file
             as a kernel for zIPL or for a direct kernel boot using QEMU.
Upstream-ID: ea14f5471c6fbc9a8a407aa33324db39082b4689
Problem-ID:  VS1804

Upstream-Description:

             zipl: Make address/size/mask macros UL

             While at it also fix some white space damages.

             Signed-off-by: Philipp Rudo <prudo@linux.ibm.com>
             Reviewed-by: Stefan Haberland <sth@linux.ibm.com>
             Signed-off-by: Jan HÃ¶ppner <hoeppner@linux.ibm.com>


Signed-off-by: Marc Hartmayer <mhartmay@linux.ibm.com>
---
 zipl/boot/stage3.h  |   18 +++++++++---------
 zipl/include/zipl.h |   36 ++++++++++++++++++------------------
 2 files changed, 27 insertions(+), 27 deletions(-)

--- a/zipl/boot/stage3.h
+++ b/zipl/boot/stage3.h
@@ -15,12 +15,12 @@
 #include "libc.h"
 #include "s390.h"
 
-#define IPL_DEVICE		 0x10404
-#define INITRD_START		 0x10408
-#define INITRD_SIZE		 0x10410
-#define OLDMEM_BASE		 0x10418
-#define OLDMEM_SIZE		 0x10420
-#define COMMAND_LINE		 0x10480
+#define IPL_DEVICE		 0x10404UL
+#define INITRD_START		 0x10408UL
+#define INITRD_SIZE		 0x10410UL
+#define OLDMEM_BASE		 0x10418UL
+#define OLDMEM_SIZE		 0x10420UL
+#define COMMAND_LINE		 0x10480UL
 #define COMMAND_LINE_SIZE	 896
 #define COMMAND_LINE_EXTRA       0xE000
 
@@ -30,11 +30,11 @@
 #define IPL_FLAG_SECURE		 0x40
 
 #define DEFAULT_IMAGE_ADDR	 0x10000
-#define DEFAULT_PSW_LOAD	 0x0008000080010000L
-#define PSW_ADDR_MASK		 0x000000007FFFFFFFL
+#define DEFAULT_PSW_LOAD	 0x0008000080010000UL
+#define PSW_ADDR_MASK		 0x000000007FFFFFFFUL
 #define KERNEL_HEADER_SIZE	 65536
 
-#define UNSPECIFIED_ADDRESS		-1ULL
+#define UNSPECIFIED_ADDRESS		-1UL
 
 
 /* IPL Parameter List header */
--- a/zipl/include/zipl.h
+++ b/zipl/include/zipl.h
@@ -19,27 +19,27 @@
 #define ZIPL_MAGIC_SIZE			4
 #define DISK_LAYOUT_ID			0x00000001
 
-#define ZIPL_STAGE2_LOAD_ADDRESS        0x2000
-#define ZIPL_STAGE3_ENTRY_ADDRESS	0xa000LL
-#define DEFAULT_IMAGE_ADDRESS		0x10000LL
-#define KDUMP_IMAGE_ADDRESS		0x10010LL
-#define DEFAULT_STAGE3_ADDRESS          0xa000LL
-#define DEFAULT_STAGE3_PARAMS_ADDRESS	0x9000LL
-#define MINIMUM_ADDRESS 		0x10000LL
-#define ADDRESS_LIMIT 			0x80000000LL
+#define ZIPL_STAGE2_LOAD_ADDRESS	0x2000UL
+#define ZIPL_STAGE3_ENTRY_ADDRESS	0xa000UL
+#define DEFAULT_IMAGE_ADDRESS		0x10000UL
+#define KDUMP_IMAGE_ADDRESS		0x10010UL
+#define DEFAULT_STAGE3_ADDRESS		0xa000UL
+#define DEFAULT_STAGE3_PARAMS_ADDRESS	0x9000UL
+#define MINIMUM_ADDRESS			0x10000UL
+#define ADDRESS_LIMIT			0x80000000UL
 #define ADDRESS_LIMIT_KDUMP		0x2000000UL /* HSA size: 32 MiB */
-#define UNSPECIFIED_ADDRESS		-1ULL
-#define MAXIMUM_PARMLINE_SIZE 		0x380
-#define MAXIMUM_PHYSICAL_BLOCKSIZE 	0x1000
+#define UNSPECIFIED_ADDRESS		-1UL
+#define MAXIMUM_PARMLINE_SIZE		0x380UL
+#define MAXIMUM_PHYSICAL_BLOCKSIZE	0x1000UL
 
-#define STAGE3_HEAP_SIZE		0x4000
-#define STAGE3_HEAP_ADDRESS		0x2000
-#define STAGE3_STACK_SIZE		0x1000
-#define STAGE3_STACK_ADDRESS		0xF000
+#define STAGE3_HEAP_SIZE		0x4000UL
+#define STAGE3_HEAP_ADDRESS		0x2000UL
+#define STAGE3_STACK_SIZE		0x1000UL
+#define STAGE3_STACK_ADDRESS		0xF000UL
 
-#define PSW_ADDRESS_MASK		0x000000007fffffffLL
-#define PSW_LOAD                        0x0008000080000000LL
-#define PSW_DISABLED_WAIT               0x000a000000000000LL
+#define PSW_ADDRESS_MASK		0x000000007fffffffUL
+#define PSW_LOAD			0x0008000080000000UL
+#define PSW_DISABLED_WAIT		0x000a000000000000UL
 
 #define BOOTMAP_FILENAME		"bootmap"
 #define BOOTMAP_TEMPLATE_FILENAME	"bootmap_temp.XXXXXX"
