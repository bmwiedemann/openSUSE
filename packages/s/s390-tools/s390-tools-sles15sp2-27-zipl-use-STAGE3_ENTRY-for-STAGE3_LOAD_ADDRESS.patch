Subject: [PATCH] [FEAT VS1804] zipl: use STAGE3_ENTRY for STAGE3_LOAD_ADDRESS
From: Marc Hartmayer <mhartmay@linux.ibm.com>

Summary:     genprotimg: Introduce new tool for the creation of PV images
Description: genprotimg takes a kernel, host-key documents, optionally an
             initrd, optionally a file with the kernel command line, and it
             generates a single, loadable image file. The image consists of a
             concatenation of a plain text boot loader, the encrypted
             components for kernel, initrd, and cmdline, and the
             integrity-protected PV header, containing metadata necessary for
             running the guest in PV mode. It's possible to use this image file
             as a kernel for zIPL or for a direct kernel boot using QEMU.
Upstream-ID: c07104dbc734ec6e55accf1bd2091b251f312ed8
Problem-ID:  VS1804

Upstream-Description:

             zipl: use STAGE3_ENTRY for STAGE3_LOAD_ADDRESS

             Use STAGE3_ENTRY for STAGE3_LOAD_ADDRESS as they have the same value
             and this makes it more clear that the load address of stage3 is also
             its entry point.

             Reviewed-by: Stefan Haberland <sth@linux.ibm.com>
             Reviewed-by: Philipp Rudo <prudo@linux.ibm.com>
             Signed-off-by: Marc Hartmayer <mhartmay@linux.ibm.com>
             Signed-off-by: Jan HÃ¶ppner <hoeppner@linux.ibm.com>


Signed-off-by: Marc Hartmayer <mhartmay@linux.ibm.com>
---
 zipl/include/zipl.h |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

--- a/zipl/include/zipl.h
+++ b/zipl/include/zipl.h
@@ -23,7 +23,7 @@
 #define STAGE3_ENTRY			0xa000UL
 
 #define STAGE2_LOAD_ADDRESS		0x2000UL
-#define STAGE3_LOAD_ADDRESS		0xa000UL
+#define STAGE3_LOAD_ADDRESS		STAGE3_ENTRY
 #define IMAGE_LOAD_ADDRESS		IMAGE_ENTRY
 
 #define ADDRESS_LIMIT			0x80000000UL
