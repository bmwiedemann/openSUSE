--- syslog-ng-3.35.1/modules/java/Makefile.am	2021-11-15 11:06:24.000000000 +0100
+++ syslog-ng-3.35.1/modules/java/Makefile.am	2022-03-08 12:59:15.986822666 +0100
@@ -55,8 +55,7 @@
 $(SYSLOG_NG_CORE_LIBS_DIR) $(SYSLOG_NG_CORE_CLASSES_DIR) $(SYSLOG_NG_CORE_PACKAGE_DIR) $(JAVA_BUILDDIR):
 	mkdir -p $@
 
-$(JAVA_HEADER_FILES): $(JAVA_BUILDDIR)/org_syslog_ng_%.h: $(SYSLOG_NG_CORE_PACKAGE_DIR)/%.class
-	$(AM_V_GEN)$(JAVAH) -classpath  $(SYSLOG_NG_CORE_CLASSES_DIR) -d $(JAVA_BUILDDIR) org.syslog_ng.$*
+$(JAVA_HEADER_FILES): $(JAVA_CLASS_FILES)
 
 all-local: java-binaries java-headers
 
@@ -147,7 +146,7 @@
 # this needs to come after .SECONDEXPANSION
 
 $(JAVA_CLASS_FILES): $(SYSLOG_NG_CORE_PACKAGE_DIR)/%.class: $(SYSLOG_NG_CORE_SRC_DIR)/%.java $(SYSLOG_NG_CORE_CLASSES_DIR) $$($$*_CLASS_DEPS)
-	$(AM_V_GEN)$(JAVAC) -classpath  $(SYSLOG_NG_CORE_CLASSES_DIR) -d $(SYSLOG_NG_CORE_CLASSES_DIR) $<
+	$(AM_V_GEN)$(JAVAC) -classpath  $(SYSLOG_NG_CORE_CLASSES_DIR) -d $(SYSLOG_NG_CORE_CLASSES_DIR) -h $(JAVA_BUILDDIR) $<
 
 endif
 
