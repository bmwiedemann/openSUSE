From 1f13645c66b8307bcecf9e87fb45db2c0e88a1a8 Mon Sep 17 00:00:00 2001
From: Paul Bignier <paul.bignier@scilab-enterprises.com>
Date: Fri, 10 Feb 2017 14:54:11 +0100
Subject: [PATCH 1/1] Xcos java: minor cleanup

Change-Id: Ibd88d95fe2a8a9f37969e08d76c7e3f53e660f69
---
 .../modules/xcos/actions/ExportAllAction.java      |    1 -
 .../xcos/block/actions/CodeGenerationAction.java   |    1 -
 .../modules/xcos/graph/ScicosParameters.java       |    1 -
 .../org/scilab/modules/xcos/palette/Palette.java   |    2 --
 4 files changed, 5 deletions(-)

Index: scilab-6.1.0/modules/xcos/src/java/org/scilab/modules/xcos/BrowserView.java
===================================================================
--- scilab-6.1.0.orig/modules/xcos/src/java/org/scilab/modules/xcos/BrowserView.java
+++ scilab-6.1.0/modules/xcos/src/java/org/scilab/modules/xcos/BrowserView.java
@@ -21,6 +21,7 @@ import java.util.LinkedList;
 import javax.swing.SwingUtilities;
 import javax.swing.tree.DefaultMutableTreeNode;
 import javax.swing.tree.DefaultTreeModel;
+import javax.swing.tree.TreeNode;
 
 import org.scilab.modules.xcos.explorer.BrowserTreeNodeData;
 
@@ -257,8 +258,8 @@ public class BrowserView extends View {
         final DefaultMutableTreeNode root = (DefaultMutableTreeNode) model.getRoot();
 
         DefaultMutableTreeNode node;
-        for (Enumeration<DefaultMutableTreeNode> e = root.depthFirstEnumeration(); e.hasMoreElements();) {
-            node = e.nextElement();
+        for (Enumeration<TreeNode> e = root.depthFirstEnumeration(); e.hasMoreElements();) {
+            node = (DefaultMutableTreeNode) e.nextElement();
             BrowserTreeNodeData data = (BrowserTreeNodeData) node.getUserObject();
             if (data.getId() == uid) {
                 return node;
Index: scilab-6.1.0/modules/xcos/src/java/org/scilab/modules/xcos/palette/model/Palette.java
===================================================================
--- scilab-6.1.0.orig/modules/xcos/src/java/org/scilab/modules/xcos/palette/model/Palette.java
+++ scilab-6.1.0/modules/xcos/src/java/org/scilab/modules/xcos/palette/model/Palette.java
@@ -58,7 +58,7 @@ public abstract class Palette extends Pa
      * @see javax.swing.tree.TreeNode#children()
      */
     @Override
-    public Enumeration<Object> children() {
+    public Enumeration<? extends TreeNode> children() {
         return null;
     }
 
Index: scilab-6.1.0/modules/xcos/src/java/org/scilab/modules/xcos/block/actions/SuperblockMaskCustomizeAction.java
===================================================================
--- scilab-6.1.0.orig/modules/xcos/src/java/org/scilab/modules/xcos/block/actions/SuperblockMaskCustomizeAction.java
+++ scilab-6.1.0/modules/xcos/src/java/org/scilab/modules/xcos/block/actions/SuperblockMaskCustomizeAction.java
@@ -22,6 +22,7 @@ import java.awt.event.ActionListener;
 import java.util.Arrays;
 import java.util.Iterator;
 import java.util.List;
+import java.util.Vector;
 import java.util.Map;
 import java.util.Set;
 import java.util.logging.Level;
@@ -755,12 +756,14 @@ public final class SuperblockMaskCustomi
                  * it
                  */
                 @SuppressWarnings("unchecked")
-                final List < List<? >> data = model.getDataVector();
+                final Vector<Vector> data = model.getDataVector();
 
                 /* Inverting data */
-                List<?> tmp = data.get(row2);
-                data.set(row2, data.get(row1));
-                data.set(row1, tmp);
+                Vector tmp = data.get(row2);
+                model.removeRow(row2);
+                model.insertRow(row2, data.get(row1));
+                model.removeRow(row1);
+                model.insertRow(row1, tmp);
             }
         }
     }
