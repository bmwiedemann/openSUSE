From 3edc8036dbf3c7cdf0e460a913ae294c87ae90dc Mon Sep 17 00:00:00 2001
From: Vitaly <vitaly@easycoding.org>
Date: Thu, 7 Aug 2025 22:38:29 +0200
Subject: [PATCH] Run tests in the order they are declared in the source file.
 (#3451)

Fixes an issue with running tests in random order in Catch2 3.9.0+.
---
 tests/CMakeLists.txt | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/tests/CMakeLists.txt b/tests/CMakeLists.txt
index 457504c31..5ba2a106a 100644
--- a/tests/CMakeLists.txt
+++ b/tests/CMakeLists.txt
@@ -75,7 +75,7 @@ function(spdlog_prepare_test test_target spdlog_lib)
     elseif(SPDLOG_SANITIZE_THREAD)
         spdlog_enable_thread_sanitizer(${test_target})
     endif()
-    add_test(NAME ${test_target} COMMAND ${test_target})
+    add_test(NAME ${test_target} COMMAND ${test_target} --order decl)
     set_tests_properties(${test_target} PROPERTIES RUN_SERIAL ON)
 endfunction()
 
