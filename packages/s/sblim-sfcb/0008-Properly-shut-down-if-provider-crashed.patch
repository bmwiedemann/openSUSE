From c4db7466c4f1c037b3aaf8bd777359812f53c884 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Klaus=20K=C3=A4mpf?= <kkaempf@suse.de>
Date: Fri, 15 Nov 2013 12:56:04 -0500
Subject: [PATCH 08/29] Properly shut down if provider crashed

---
 sfcBroker.c | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

diff --git a/sfcBroker.c b/sfcBroker.c
index ca043c9fa01c..4fb2e0aa9e97 100644
--- a/sfcBroker.c
+++ b/sfcBroker.c
@@ -262,7 +262,9 @@ stopBroker(void *p)
       if (stopNextProc()) {
         pthread_cond_timedwait(&sdCnd, &sdMtx, &waitTime);
       }
-      // else providersStopped=1;
+      else {
+        providersStopped=1;
+      }
       pthread_mutex_unlock(&sdMtx);
     }
     if (providersStopped)
-- 
2.23.0

