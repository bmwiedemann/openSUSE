-------------------------------------------------------------------
Mon Dec 12 23:03:50 UTC 2022 - Callum Farmer <gmbr3@opensuse.org>

- Move dbus-1 system.d conf file to /usr (bsc#1206348)

-------------------------------------------------------------------
Tue Oct 25 13:06:32 UTC 2022 - Fabian Vogt <fabian@ritter-vogt.de>

- Add patch to avoid launching xdg-desktop-portal by accident:
  * 0001-disable-automatic-portal-launching.patch

-------------------------------------------------------------------
Fri Mar 18 13:00:36 UTC 2022 - Andrew Hibberson <alerts2@hib.by>

- Add patch to retry starting the display server (boo#1196228)
  * 0004-Retry-starting-the-display-server.patch

-------------------------------------------------------------------
Mon Feb 21 11:28:24 UTC 2022 - Fabian Vogt <fabian@ritter-vogt.de>

- Handle the case of %_distconfdir not being /usr/etc (boo#1196228,
  currently only possible due to a misconfiguration in SLE, bsc#1195679)

-------------------------------------------------------------------
Sat Jul 17 15:20:33 UTC 2021 - Fabian Vogt <fabian@ritter-vogt.de>

- Update patch to include security fix from upstream PR:
  * 0001-Redesign-Xauth-handling.patch

-------------------------------------------------------------------
Wed Jun  2 20:42:52 UTC 2021 - Callum Farmer <gmbr3@opensuse.org>

- Change to systemd-sysusers
- Remove old SUSE RPM constructs

-------------------------------------------------------------------
Tue Mar  9 07:48:19 UTC 2021 - Fabian Vogt <fabian@ritter-vogt.de>

- Add patch to reintroduce /etc/profile reading if fish is shell:
  * 0001-Add-fish-etc-profile-and-HOME-.profile-sourcing-1331.patch

-------------------------------------------------------------------
Thu Nov  5 04:35:27 UTC 2020 - Luiz Angelo Daros de Luca <luizluca@tre-sc.jus.br>

- Use pam derived username (fix sssd with multiple domains and local groups)
  * 0001-Use-PAM-s-username.patch

-------------------------------------------------------------------
Wed Nov  4 19:13:40 UTC 2020 - Fabian Vogt <fabian@ritter-vogt.de>

- Revert switch to %service_del_postun_without_restart for Leap

-------------------------------------------------------------------
Tue Nov  3 17:01:05 UTC 2020 - Fabian Vogt <fabian@ritter-vogt.de>

- Update to 0.19.0:
  * Don't disable authentication in --test-mode
  * Fix X not having access control on startup
    (fixes CVE-2020-28049, bsc#1177201)
  * Don't fill UserModel if theme does not require it
  * Set re-use session option by default
  * Avoid adjusting active auth sessions
  * Cleanup sessions on exit
  * Don't abort on failure to start the display server
  * Custom default font
  * Limit systemd service restarts
  * Typo fixes
  * Fix graphical glitches on NVIDIA after VT switching
  * Rewind password database
  * Memory allocation fixes
  * FreeBSD fixes
  * Use C++ scoping for handling buffer deletion
  * Allow to configure the QML installation directory
  * Port connects
  * Keep string termination characters in utmp entries
  * Look for available display for test mode
  * Interlingue translation
  * Remove chVt() from declarations
  * Rewind password db before scanning it (again) for available users
  * Session reuse: Only consider "online" sessions
  * Use modern connects
  * Update translations
- Drop patches, now upstream:
  * 0001-Destroy-the-QLocalServer-in-Auth-on-shutdown.patch
  * 0001-FreeBSD-Split-implementation-of-VT-switching.patch
  * 0003-Move-VT-setup-to-sddm-helper.patch
  * 0001-Don-t-disable-authentication-in-test-mode.patch
  * 0001-Session-reuse-Only-consider-online-sessions.patch
  * 0001-Support-both-X11-XDisplay-Wayland-and-WaylandDisplay.patch
  * 0006-Don-t-fill-UserModel-if-theme-does-not-require-it.patch
  * 0001-Revert-Adds-sourcing-of-etc-profile-to-fish.patch
  * 0001-FreeBSD-Link-to-libutil.patch
  * 0002-Only-allocate-VTs-for-seat0.patch
- Refresh patches:
  * 0001-Remove-suffix-for-Wayland-session.patch
  * 0001-Redesign-Xauth-handling.patch
  * 0001-Set-XAUTHLOCALHOSTNAME-in-sessions.patch
  * proper_pam.diff
  * 0001-Read-the-DISPLAYMANAGER_AUTOLOGIN-value-from-sysconf.patch
  * 0001-Systemd-service-unit-Use-tty7-by-default.patch

-------------------------------------------------------------------
Tue Nov  3 14:15:55 UTC 2020 - Franck Bui <fbui@suse.com>

- Replace  '%service_del_postun -n' with '%service_del_postun_without_restart'

  '-n' is deprecated and will be removed in the future.

-------------------------------------------------------------------
Tue Nov  3 11:03:07 UTC 2020 - Fabian Vogt <fabian@ritter-vogt.de>

- Patches to fix X not having access control on startup
  (boo#1177201, CVE-2020-28049):
 * Add 0001-Don-t-disable-authentication-in-test-mode.patch
 * Modify 0001-Redesign-Xauth-handling.patch

-------------------------------------------------------------------
Sat Oct 24 12:16:43 UTC 2020 - Fabian Vogt <fabian@ritter-vogt.de>

- Add patch to set XAUTHLOCALHOSTNAME again (boo#1177835):
  * 0001-Set-XAUTHLOCALHOSTNAME-in-sessions.patch

-------------------------------------------------------------------
Sat Oct  3 11:09:12 UTC 2020 - Callum Farmer <callumjfarmer13@gmail.com>

- Change paths from /etc to /usr/etc for UsrEtc Move (boo#1177195)

-------------------------------------------------------------------
Tue Jul  7 09:52:20 UTC 2020 - Callum Farmer <callumjfarmer13@gmail.com>

- Fixes for %_libexecdir changing to /usr/libexec

-------------------------------------------------------------------
Sat Jul  4 12:29:26 UTC 2020 - Fabian Vogt <fabian@ritter-vogt.de>

- Use pending upstream solution for hostname changes:
  * Add 0001-Redesign-Xauth-handling.patch
  * Drop sddm-relaxed-auth.patch
  * A known issue with the redesigned Xauth handling is that it
    leaks the tiny xauth file in XDG_RUNTIME_DIR on session end.
    It's on a temporary tmpfs mount though and so shouldn't cause
    any visible issues.
- Add patches to fix FD leak:
  * 0001-FreeBSD-Link-to-libutil.patch
  * 0001-FreeBSD-Split-implementation-of-VT-switching.patch
  * 0002-Only-allocate-VTs-for-seat0.patch
  * 0003-Move-VT-setup-to-sddm-helper.patch

-------------------------------------------------------------------
Mon Apr 20 15:00:06 UTC 2020 - Callum Farmer <callumjfarmer13@gmail.com>

- Update to version 0.18.1
  + Fix crashes when creating a user session
  + 0001-Use-C-scoping-for-handling-buffer-deletion.patch no longer required

-------------------------------------------------------------------
Wed Mar 11 11:55:20 UTC 2020 - Fabian Vogt <fabian@ritter-vogt.de>

- Don't add sddm to the video group, it's not necessary (see later
  comments on boo#1165987)

-------------------------------------------------------------------
Fri Mar  6 10:33:37 UTC 2020 - Dr. Werner Fink <werner@suse.de>

- Add user sddm to group video to allow e.g. to use devices for
  Nvidia X server (boo#1165987)
- Add (pre)requires for systemd macros, video group, the getent
  (currently in glibc), and the groupadd (currently in shadow)

-------------------------------------------------------------------
Sat Jan 25 23:13:48 UTC 2020 - Fabian Vogt <fabian@ritter-vogt.de>

- Do not restart sddm on upgrades (boo#1161826)

-------------------------------------------------------------------
Mon Oct 14 15:58:24 UTC 2019 - Stefan Brüns <stefan.bruens@rwth-aachen.de>

- Pickup UID_MIN/UID_MAX default values from the new %_distconfdir
  (/usr/etc/) default location for login.defs

-------------------------------------------------------------------
Mon Aug 19 16:29:26 UTC 2019 - Fabian Vogt <fabian@ritter-vogt.de>

- Add pam_keyinit to proper_pam.diff (boo#1081947)

-------------------------------------------------------------------
Mon Feb 18 08:00:42 UTC 2019 - Fabian Vogt <fabian@ritter-vogt.de>

- Add patch to fix reading garbage from getpwnam (boo#1125624):
  * 0001-Use-C-scoping-for-handling-buffer-deletion.patch

-------------------------------------------------------------------
Wed Jan  9 02:11:20 UTC 2019 - Jan Engelhardt <jengelh@inai.de>

- Do not ignore errors from useradd.

-------------------------------------------------------------------
Sun Jan  6 11:57:50 UTC 2019 - Fabian Vogt <fabian@ritter-vogt.de>

- Add the dirs created by systemd-tmpfiles as %ghost as well
- Use service macros and create rcsddm link for sddm.service

-------------------------------------------------------------------
Fri Jan  4 13:00:23 UTC 2019 - Fabian Vogt <fabian@ritter-vogt.de>

- Add patch to delete socket on shutdown:
  * 0001-Destroy-the-QLocalServer-in-Auth-on-shutdown.patch
- Move creation of runtime directories and cleanup of files on boot
  into sddm-tmpfiles.conf (boo#1116431)

-------------------------------------------------------------------
Wed Oct  3 17:21:43 UTC 2018 - fabian@ritter-vogt.de

- Remove 0001-Don-t-leak-VT-FDs-in-jumpToVt.patch as the FD leak
  worked around a race condition as a side effect

-------------------------------------------------------------------
Tue Oct  2 19:18:53 UTC 2018 - fabian@ritter-vogt.de

- Add patch to not leak tty FDs for wayland sessions:
  * 0001-Don-t-leak-VT-FDs-in-jumpToVt.patch

-------------------------------------------------------------------
Thu Sep 27 17:58:38 UTC 2018 - fabian@ritter-vogt.de

- Fix wayland session start if fish is used as shell:
  * 0001-Revert-Adds-sourcing-of-etc-profile-to-fish.patch

-------------------------------------------------------------------
Sun Sep 23 10:54:12 UTC 2018 - fabian@ritter-vogt.de

- Rewrite sddm-relaxed-auth.diff as sddm-relaxed-auth.patch:
  * Set XAUTHLOCALHOSTNAME only where necessary
  * Also set it for the Greeter session (boo#1091784)

-------------------------------------------------------------------
Tue Jul 31 14:53:47 UTC 2018 - fabian@ritter-vogt.de

- Add patch to not switch to "undead" sessions (boo#1102832):
  * 0001-Session-reuse-Only-consider-online-sessions.patch
- Reenable ReuseSession=true again

-------------------------------------------------------------------
Fri Jul 27 09:59:51 UTC 2018 - fabian@ritter-vogt.de

- Disable ReuseSession=true for now (boo#1102832, kde#391253)

-------------------------------------------------------------------
Wed Jul 18 11:16:05 UTC 2018 - fabian@ritter-vogt.de

- Update to 0.18.0:
  * Support theme supplied avatars
  * Compile against Qt 5.11
  * Fix platform detection for HighDPI
  * On close, switch VT to a running session if applicable
  * Better ConsoleKit support
  * Fix authentication when reusing existing sessions
  * Hide sessions with NoDisplay=true
  * Honor PAM's ambient supplemental groups
  * Cleanup socket destruction
  * Don't quit on SIGHUP
  * Updated translations
- Set EnableHiDPI=true by default (boo#1089932)
- Set ReuseSession=true by default (boo#979775)
- Drop patches, now upstream:
  * 0001-Don-t-add-session-files-with-NoDisplay-true-to-Sessi.patch
  * 0001-Don-t-quit-on-SIGHUP.patch
  * 0001-Fix-authentication-when-reusing-an-existing-session.patch
  * 0001-Fix-build-with-Qt-5.10-Use-QString-instead-of-QLatin.patch
  * 0001-Fix-build-with-Qt-5.11-1024.patch
  * 0001-Fix-platform-detection-for-EnableHiDPI.patch
  * 0001-Skip-theme-for-greeter-call-if-none-is-set.patch
  * 0001-Support-for-theme-supplied-default-avatars.patch
  * 0001-greeter-Use-Qt-command-line-parser.patch
  * 0002-Remove-trailing-spaces.patch
  * 0003-UserModel-optimize-filtering-out-duplicate-users-995.patch
  * 0004-UserModel-fix-filtering-out-duplicate-users-998.patch
  * 0005-UserModel-optimize-setting-of-default-user-icon-999.patch
  * 0007-Honor-PAMs-ambient-supplemental-groups.patch
- Refresh patches:
  * proper_pam.diff
  * 0001-Systemd-service-unit-Use-tty7-by-default.patch

-------------------------------------------------------------------
Mon Jul 16 15:08:57 UTC 2018 - fabian@ritter-vogt.de

- Add patch to fix fallback to embedded theme:
  * 0001-Skip-theme-for-greeter-call-if-none-is-set.patch
- Use %license
- Add patch to fix authentication when reusing an existing session
  (boo#1101450, CVE-2018-14345):
  * 0001-Fix-authentication-when-reusing-an-existing-session.patch

-------------------------------------------------------------------
Sat Jul  7 11:27:49 UTC 2018 - w01dnick@gmail.com

- Fix 0001-Support-both-X11-XDisplay-Wayland-and-WaylandDisplay.patch
  * Corrected section name for Wayland

-------------------------------------------------------------------
Tue Jul  3 07:26:24 UTC 2018 - fabian@ritter-vogt.de

- Remove patch as libxcb bug is fixed meanwhile (bsc#1099908):
  * 0001-Move-Xauthority-to-a-different-location-and-truncate.patch

-------------------------------------------------------------------
Mon Jul  2 20:53:55 UTC 2018 - luizluca@gmail.com

- Backport fix for pam_group from develop branch (boo#1105342):
 * 0007-Honor-PAMs-ambient-supplemental-groups.patch

-------------------------------------------------------------------
Mon May 14 08:12:49 UTC 2018 - fabian@ritter-vogt.de

- Add patch to not include sessions with NoDisplay=true in the list (boo#1086614):
  * 0001-Don-t-add-session-files-with-NoDisplay-true-to-Sessi.patch

-------------------------------------------------------------------
Wed May  9 19:15:48 UTC 2018 - fabian@ritter-vogt.de

- Amend patch to also canonicalize desktop session paths (boo#1092251):
  * 0003-Leave-duplicate-symlinks-out-of-the-SessionModel.patch
- Add patch to fix build with Qt 5.11:
  * 0001-Fix-build-with-Qt-5.11-1024.patch

-------------------------------------------------------------------
Mon Apr 23 06:55:16 UTC 2018 - fabian@ritter-vogt.de

- Add patch to show a username input field with too many users:
  * 0006-Don-t-fill-UserModel-if-theme-does-not-require-it.patch
- Backport related changes from develop branch:
  * 0001-Support-for-theme-supplied-default-avatars.patch
  * 0002-Remove-trailing-spaces.patch
  * 0003-UserModel-optimize-filtering-out-duplicate-users-995.patch
  * 0004-UserModel-fix-filtering-out-duplicate-users-998.patch
  * 0005-UserModel-optimize-setting-of-default-user-icon-999.patch

-------------------------------------------------------------------
Mon Apr 16 09:30:50 UTC 2018 - fabian@ritter-vogt.de

- Revert previous change, had the opposite effect for some reason

-------------------------------------------------------------------
Thu Apr 12 08:50:03 UTC 2018 - fabian@ritter-vogt.de

- Start the X server with -keeptty (boo#1089287)

-------------------------------------------------------------------
Sat Mar 24 13:55:06 UTC 2018 - fabian@ritter-vogt.de

- Don't add a suffix for wayland sessions anymore, for symmetry with
  gdm and lightdm:
  * 0001-Remove-suffix-for-Wayland-session.patch

-------------------------------------------------------------------
Thu Mar 22 08:56:30 UTC 2018 - fabian@ritter-vogt.de

- Add patch to fix build with Qt < 5.10:
  * 0001-Fix-build-with-Qt-5.10-Use-QString-instead-of-QLatin.patch

-------------------------------------------------------------------
Fri Mar  9 20:02:50 UTC 2018 - fabian@ritter-vogt.de

- Reorder patches for easier maintainability, needs refresh of:
  * 0001-Move-Xauthority-to-a-different-location-and-truncate.patch
  * 0001-Read-the-DISPLAYMANAGER_AUTOLOGIN-value-from-sysconf.patch
  * sddm-relaxed-auth.diff
- Replace 0001-Revert-Rename-XDisplay-and-WaylandDisplay-config-sec.patch
  with 0001-Support-both-X11-XDisplay-Wayland-and-WaylandDisplay.patch
- Add patches to fix setting EnableHiDPI in the configuration:
  * 0001-greeter-Use-Qt-command-line-parser.patch                                                                                                                                                                                                 
  * 0001-Fix-platform-detection-for-EnableHiDPI.patch

-------------------------------------------------------------------
Sat Mar  3 19:10:40 UTC 2018 - fabian@ritter-vogt.de

- Add patch to not quit on SIGHUP (boo#1080305):
  * 0001-Don-t-quit-on-SIGHUP.patch

-------------------------------------------------------------------
Fri Feb 23 12:16:48 UTC 2018 - alarrosa@suse.com

- Only use python-doctools when building for SLE12 since SLE15 has
  rst2man in python3-doctools.

-------------------------------------------------------------------
Thu Dec 14 08:20:25 UTC 2017 - fabian@ritter-vogt.de

- Update to 0.17.0:
  + Added possibility to change border width of ComboBox widget.
  + Added missing utmp/wtmp/btmp handling.
  + Make greeter see icons set by AccountsServices.
  - Fix sddm.conf man page syntax error and update.
  - Fix ComboBox widget.
  - Fix connection of PropertiesChanged event for LogindSeat.
  - Avoid race conditions with Xsetup.
  * Update de translation.
  * Update lt translation.
  * Update zh_TW translation.
  * Adjust order of components in the default PATH.
  * Set default input method to qtvirtualkeyboard.
- Update to 0.16.0:
  + Support non-latin characters in theme settings.
  + Support fish shell in Xsession and wayland-session.
  + Unlock GNOME keyring at login.
  + Configuration directory.
  - Make the default cursor themed.
  - Update date and time in elarun theme.
  - Fix theme metadata default values.
  - Fix session selection in elarun.
  - Do not truncate XAUTHORITY on login.
  - Make enabled property of Button functional.
  - Fix typos in documentation.
  * Re-use existing sessions.
  * Add ConsoleKit 2 support.
  * Stop assuming shadow(5) is always available.
  * Explicitely set XDG_SEAT when starting a user session.
  * Suppress errors when pam_elogind is not available.
  * Suppress errors when pam_systemd is not available.
  * Added possibility to change color of dropdown menu.
  * Add Hindi translation.
  * Completed Swedish translation.
  * Update French translation.
- Move to system configuration dirs, replace sddm.conf with
  00-general.conf and 10-theme.conf
- Refresh patches:
  * 0001-Revert-Rename-XDisplay-and-WaylandDisplay-config-sec.patch
  * proper_pam.diff
- Rename patches:
  * sysconfig-support.patch:
    0001-Read-the-DISPLAYMANAGER_AUTOLOGIN-value-from-sysconf.patch
  * create_pid_file.patch:
    0001-Write-the-daemon-s-PID-to-a-file-on-startup.patch
- Remove patches, now upstream:
  * 0001-Do-not-truncate-XAUTHORITY-file-on-login.patch

-------------------------------------------------------------------
Thu Nov 30 13:05:37 UTC 2017 - fabian@ritter-vogt.de

- Add patch to add back Xauthority truncation in a way that does
  not break ssh -X (boo#1043221, boo#1069498):
  * 0001-Move-Xauthority-to-a-different-location-and-truncate.patch

-------------------------------------------------------------------
Tue Nov 28 07:08:56 UTC 2017 - fabian@ritter-vogt.de

- Amend patch toremove elogind from sddm-greeter.pam:
  * proper_pam.diff

-------------------------------------------------------------------
Sat Oct 28 14:08:07 UTC 2017 - tschmidt@suse.com

- Add "Requires: xdm" because sddm.conf references the files
  '/etc/X11/xdm/Xsession' and '/etc/X11/xdm/Xsetup'

-------------------------------------------------------------------
Thu Oct 12 10:00:18 UTC 2017 - dimstar@opensuse.org

- Have update-alternatives handle Xinit's integration of the
  displaymanager, replacing /etc/sysconfig/displaymanager
  (boo#1053863).

-------------------------------------------------------------------
Fri Sep  1 18:28:00 UTC 2017 - fabian@ritter-vogt.de

- Update to 0.15.0:
  * Fix loading of some avatars
  * CONFIG: add option EnableHiDPI to allow opt out of auto scaling
  * Theme cursor
  * Support optional kwallet PAM opening
  * Autologin, used last used session if not explicitly set in config
  * Ignore session desktop files with hidden=true
  * Support elogind
  * Many new and improved translations
- Remove patches, now upstream:
  * 0001-Also-set-QT_IM_MODULE-in-non-testing-mode.patch
  * 0001-Also-theme-the-default-cursor-for-the-root-window.patch
  * 0001-Fix-display-of-user-avatars.-684.patch
  * 0001-Make-the-default-cursor-themed.patch
  * 0001-Parse-desktop-file-sections.patch
  * 0002-Add-a-config-option-to-enable-high-DPI-scaling-701.patch
  * 0002-Ignore-session-desktop-files-with-the-Hidden-propert.patch
  * 0003-elarun-Update-date-and-time.patch
  * 0004-Support-Non-Latin-characters-in-theme-settings-708.patch
  * 0005-Cleanup-dangling-pointer-in-SocketServer-725.patch
- Refresh patches:
  * 0001-Revert-Rename-XDisplay-and-WaylandDisplay-config-sec.patch
  * proper_pam.diff

-------------------------------------------------------------------
Mon Jul 10 19:30:11 UTC 2017 - fabian@ritter-vogt.de

- Replace patch with version merged upstream, to avoid potentially
  killing the X server:
  * 0001-Also-theme-the-default-cursor-for-the-root-window.patch

-------------------------------------------------------------------
Fri Jul  7 12:03:41 UTC 2017 - fabian@ritter-vogt.de

- Add patch to keep old entries in XAUTHORITY file (boo#1043221):
  * 0001-Do-not-truncate-XAUTHORITY-file-on-login.patch

-------------------------------------------------------------------
Fri May 19 08:08:55 UTC 2017 - fabian@ritter-vogt.de

- Also set the default last session in sysconfig-support.patch
  (replaces boo949903.patch)
- Adjust 0003-Leave-duplicate-symlinks-out-of-the-SessionModel.patch
  to also handle symlinks for the last session

-------------------------------------------------------------------
Thu May 18 09:56:47 UTC 2017 - fabian@ritter-vogt.de

- Replace patch with newer version:
  * 0001-Also-theme-the-default-cursor-for-the-root-window.patch

-------------------------------------------------------------------
Mon May 15 13:06:04 UTC 2017 - fvogt@suse.com

- Add upstream patches: 
  * 0001-Parse-desktop-file-sections.patch
  * 0002-Ignore-session-desktop-files-with-the-Hidden-propert.patch
- Add downstream patch:
  * 0003-Leave-duplicate-symlinks-out-of-the-SessionModel.patch
- Fix typo in sysconfig-support.patch (DYSPLAY -> DISPLAY)
- Use default.desktop as default autologin session file

-------------------------------------------------------------------
Mon May  8 19:30:55 UTC 2017 - fabian@ritter-vogt.de

- BuildRequire python-docutils instead of python3-docutils on SLE

-------------------------------------------------------------------
Fri May  5 21:29:14 UTC 2017 - fabian@ritter-vogt.de

- Add patch to fix the default X cursor appearing sometimes:
  * 0001-Also-theme-the-default-cursor-for-the-root-window.patch

-------------------------------------------------------------------
Tue Apr 25 15:30:17 UTC 2017 - fabian@ritter-vogt.de

- BuildRequire python3-docutils directly

-------------------------------------------------------------------
Sat Apr  1 19:24:40 UTC 2017 - fabian@ritter-vogt.de

- Use default tty (tty7) in systemd unit as specified in sddm.conf:
  * 0001-Systemd-service-unit-Use-tty7-by-default.patch
- Add patch from upstream to allow setting QT_IM_MODULE in sddm.conf:
  * 0001-Also-set-QT_IM_MODULE-in-non-testing-mode.patch

-------------------------------------------------------------------
Fri Mar 31 17:28:46 UTC 2017 - fabian@ritter-vogt.de

- Revert calling plymouth quit with --retain-splash. It is possible
  that this prevents logging in on tty1.

-------------------------------------------------------------------
Fri Mar 17 12:43:06 UTC 2017 - jengelh@inai.de

- Ensure neutrality of descriptions.

-------------------------------------------------------------------
Wed Mar  8 12:47:38 UTC 2017 - wbauer@tmo.at

- Call "plymouth quit --retain-splash" instead of "plymouth_quit"
  in the displaymanager script to hide the text mode login prompt
  during boot (the dedicated sddm.service does the same).
- Also, don't call xdm_reload_files, that just re-generates the xdm
  config files according to the sysconfig values and only makes
  sense for xdm.

-------------------------------------------------------------------
Sat Dec 17 20:53:58 UTC 2016 - fabian@ritter-vogt.de

- Fix typos in description

-------------------------------------------------------------------
Fri Nov 25 11:57:34 UTC 2016 - fabian@ritter-vogt.de

- Fix %post and %postun of branding subpackages

-------------------------------------------------------------------
Mon Nov 21 20:55:27 UTC 2016 - fabian@ritter-vogt.de

- Add various bugfixes from develop branch:
  * 0001-Fix-display-of-user-avatars.-684.patch
  * 0002-Add-a-config-option-to-enable-high-DPI-scaling-701.patch
  * 0003-elarun-Update-date-and-time.patch
  * 0004-Support-Non-Latin-characters-in-theme-settings-708.patch
  * 0005-Cleanup-dangling-pointer-in-SocketServer-725.patch

-------------------------------------------------------------------
Wed Oct  5 07:23:51 UTC 2016 - fabian@ritter-vogt.de

- Sync with KDE:Frameworks5:LTS, sort sddm.changes
- Remove 0001-Fall-back-to-regular-login-when-autologin-fails.patch

-------------------------------------------------------------------
Sat Sep 24 17:02:03 UTC 2016 - fabian@ritter-vogt.de

- Add 0001-Fall-back-to-regular-login-when-autologin-fails.patch
  to fix crash when autologin session not found (boo#1000917)

-------------------------------------------------------------------
Thu Sep 22 18:17:01 UTC 2016 - fabian@ritter-vogt.de

- Add 0001-Make-the-default-cursor-themed.patch to fix the default
  cursor appearance

-------------------------------------------------------------------
Wed Sep 21 17:48:23 UTC 2016 - fabian@ritter-vogt.de

- Provide sddm-lang

-------------------------------------------------------------------
Thu Sep 15 11:57:36 UTC 2016 - alarrosa@suse.com

- Use the new theme name, breeze-openSUSE, in sddm-branding-openSUSE
- Require the new sddm-theme-openSUSE package

-------------------------------------------------------------------
Mon Aug 29 07:03:56 UTC 2016 - fabian@ritter-vogt.de

- Update to 0.14.0:
  - http://hawaiios.org/news/2016/08/28/sddm-0.14.0
    + New sddm.conf option EnableAvatars (useful for slow filesystems)
    + New sddm.conf option UserAuthFile on the XDisplay section
      to change the default Xauthority file name and path.
    + New sddm.conf option SessionLogFile on XDisplay and WaylandDisplay
      sections to change the default user session log location.
    + ComboBox now exposes the arrow background color as
      "arrowColor" property.
    + New "style" theme configuration for QtQuick Controls 2.0.
    + Require Qt 5.6 or better.
    + Enable HiDPI support.
    + Refresh sessions list.
    + Always fallback to an embedded theme if no suitable theme is found.
    - Actually change Qt platform theme.
    - Switch to Wayland session vt only when authentication
      succeeds.
    - Close PAM session.
    - Delete PAM credentials after closing the session.
    * More theme-neutral default user and root avatars
    * REMOVED the "circles" theme. Remember to change it if you had it set!
    * REMOVED the "maui" theme as a standalone theme as it is now
      embedded in the greeter. Remember to change the theme to empty
      if you had it set to "maui".
    * Update Estonian translation.
    * Add Catalan translation from Robert Antoni Buj Gelonch.
    * Add Dutch translation from Eric Hameleers.
    * Add Slovak translation from Martin Minka.
    * Add Swedish translation from Kristoffer Grundström.
    * Add Ukrainian translation from Cherevan Andriy.
    * Add Indian flag from Sanjeev Premi.
- Refresh patches:
  - sddm-relaxed-auth.diff
  - sddm-service-handle-plymouth.patch
  - sysconfig-support.patch
- Remove upstream patches:
  - 0001-Add-a-config-option-to-enable-avatars.patch
  - 0002-Use-.face.icon-instead-of-default.face.icon-and-rena.patch
  - root.face.icon.png
  - default.face.icon.png
- Remove upstreamed patches:
  - add-count-property-to-UserModel.patch
  - add-threshold-to-disable-avatars.patch
  - specify-default-config-entries.patch
- Revert upstream config section name change (gh#sddm/sddm#680):
  - 0001-Revert-Rename-XDisplay-and-WaylandDisplay-config-sec.patch
- Use "Current=" instead of "Current=maui"

-------------------------------------------------------------------
Wed Jun  8 07:45:20 UTC 2016 - fbui@suse.com

- Fix build requirements on systemd (bsc#983167)
  Use pkgconfig() so we don't need to rely on package names. For the
  record, systemd.pc is now part of systemd main package.

-------------------------------------------------------------------
Fri Nov 20 15:00:22 UTC 2015 - alarrosa@suse.com

- Renamed config option and property from UsersThresholdToDisableAvatars
  to DisableAvatarsThreshold as proposed by upstream before accepting
  the patches.

-------------------------------------------------------------------
Wed Nov 11 14:34:21 UTC 2015 - alarrosa@suse.com

- Add patch add-count-property-to-UserModel.patch: Adds a property so
  sddm themes can access the number of users in the system
- Add patch specify-default-config-entries.patch: Stores which config
  values have been read from the config file or are just default values.
- Add patch add-threshold-to-disable-avatars.patch: Adds a config option
  and property named UsersThresholdToDisableAvatars, if the number of
  users in the system is greater than the threshold, use a default avatar
  for all users and disable avatar loading.
- These patches together with patches in plasma5-workspace fix bnc#953778

-------------------------------------------------------------------
Fri Nov  6 11:18:24 UTC 2015 - alarrosa@suse.com

- Update to 0.13.0:
  * Greeter inherits path environment variables from parent so that
    themes installed in non-standard paths will work.
  * Add ENABLE_PAM option to toggle PAM support at build time.
  * Allow overriding textColor in ComboBox.
  * Don't cast QByteArray to (char *).
  * Disable greeters from loading KDE's debug hander
    (fix CVE-2015-0856).
  * Fix multi-screen support for some setups.
  * Added Serbian translation.
  * Added Traditional Chinese translation.
  * Improved German translation.
  * Remove failsafe session entry.
  * Close the pipe fd passed to X server.
  * A few micro-optimizations.
- Removed patches already in this version:
    0001-always-create-window-for-each-screen.patch
    0002-screen-model-for-each-window.patch
    0001-Don-t-cast-QByteArray-to-char.patch
    0002-Disable-greeters-from-loading-KDE-s-debug-hander.patch
- Updated patches to apply cleanly:
    boo949903.patch
    sddm-relaxed-auth.diff
    sysconfig-support.patch
- Added patches from upstream to add a config option that can be
  used to disable the loading of user avatars (EnableAvatars):
    0001-Add-a-config-option-to-enable-avatars.patch
    0002-Use-.face.icon-instead-of-default.face.icon-and-rena.patch

-------------------------------------------------------------------
Sat Oct 24 19:50:45 UTC 2015 - tchvatal@suse.com

- Add upstream patches to fix multihead in some cases
  (also fixes boo#950293):
  * 0001-always-create-window-for-each-screen.patch
  * 0002-screen-model-for-each-window.patch

-------------------------------------------------------------------
Sun Oct 18 16:38:26 UTC 2015 - hrvoje.senjan@gmail.com

- openSUSE branding now needs to require plasma5-workspace-branding

-------------------------------------------------------------------
Thu Oct 15 17:21:21 UTC 2015 - hrvoje.senjan@gmail.com

- Added patches from upstream:
  0001-Don-t-cast-QByteArray-to-char.patch
  (https://github.com/sddm/sddm/issues/489)
  and 0002-Disable-greeters-from-loading-KDE-s-debug-hander.patch
  (boo#950491, CVE-2015-0856)

-------------------------------------------------------------------
Sun Oct 11 12:07:58 UTC 2015 - hrvoje.senjan@gmail.com

- Added boo949903.patch: Let sddm also default to plasma5 for last
  used session (boo#949903)

-------------------------------------------------------------------
Thu Sep 24 17:41:08 UTC 2015 - hrvoje.senjan@gmail.com

- Added shadow BuildRequires, it's needed to check UID_MIN & UID_MAX
  from /etc/login.defs

-------------------------------------------------------------------
Sat Sep 12 17:28:12 UTC 2015 - wbauer@tmo.at

- Change the theme to "maui" in the shipped sddm.conf,
  sddm-branding-openSUSE sets it to "breeze" on installation.
- Remove the superfluous requirement for "breeze". This is not
  needed even with the "breeze" theme, as it is actually part of
  plasma5-workspace which is required by sddm-branding-openSUSE
  anyway.
- sddm-branding-openSUSE should PreReq sddm, otherwise the config
  might not exist.
- Make the regexps for sed stricter to really only modify the theme
  setting when installing/uninstalling sddm-branding-openSUSE.
  Otherwise it would e.g. also replace CursorTheme=breeze_cursors
  with CursorTheme=maui_cursors...
  Also only modify the config on new installation, not during
  updates.

-------------------------------------------------------------------
Sun Sep  6 08:12:52 UTC 2015 - hrvoje.senjan@gmail.com

- Update to 0.12.0:
  * SDDM now depends on Qt >= 5.3
  * Display setup script is now killed if it hasn't finished
    within 30 seconds.
  * The Maldives non-free background has been replaced by a
    CC-BY-SA alternative
  * Wayland sessions support
  * New sddm.conf option XephyrPath
    (defaults to /usr/bin/Xephyr)
  * new sddm.conf option ServerArguments
    (defaults to -nolisten tcp)
  * new sddm.config option DisplayStopCommand (executes Xstop)
  * Assorted improvements to the default theme
  * Honor TryExec in Xsession desktop files
  * Fix session startup on zsh
  * Allow setting a custom DBUS_CONFIG_FILENAME at compile time
  * Allow SYSTEMD_SYSTEM_UNIT_DIR to be overridden at compile time
  * Allow QT_IMPORTS_DIR to be overridden at compile time
  * No longer hardcode min/max UIDs, allow setting
    UID_MIN and UID_MAX at compile time
  * Assorted FreeBSD fixes
  * Fix build warnings with Qt 5.5.
  * Enable QT_NO_CAST_FROM_ASCII
  * Added Arabic
  * Added Hungarian
  * Various i18n updates and improvements
  * Full right-to-left languages support.
- Drop sddm-wait-for-display-script.patch, merged upstream

-------------------------------------------------------------------
Wed Aug 26 07:45:11 UTC 2015 - herbert@graeber-clan.de

- Added patch from upstream sddm-wait-for-display-script.patch:
  avoid a black screen (boo#942815)

-------------------------------------------------------------------
Mon Jun  1 08:13:54 UTC 2015 - dimstar@opensuse.org

- Do not split out a -lang package: the translations are not in
  standard locations and having the -lang package confuses
  bundle-lang-kde, which can't move the files to the bundle, thus
  resulting in conflicting packages.

-------------------------------------------------------------------
Mon May 25 17:39:12 UTC 2015 - hrvoje.senjan@gmail.com

- Add sddm-service-handle-plymouth.patch -- sddm has some rudimentary
  support for plymouth handling, which only works with
  plymouth-quit.service (the servce is not enabled on openSUSE).
  For users of sddm.service, we need to issue plymouth quit command
  by hand in this case

-------------------------------------------------------------------
Mon May  4 18:41:58 UTC 2015 - hrvoje.senjan@gmail.com

- Add sysconfig-support.patch: Support DISPLAYMANAGER_AUTOLOGIN
  entry from /etc/sysconfig/displaymanager, the value overwrites
  any entry in sddm.conf/[Autologin]/User. Patch also defaults
  to plasma5.desktop as default autologin and last selected 
  sessions. This is controlled only by sddm.conf file.
- Mark sddm.conf as %config(noreplace)

-------------------------------------------------------------------
Wed Apr 29 22:18:05 UTC 2015 - hrvoje.senjan@gmail.com

- Added sddm-relaxed-auth.diff: Insert XAUTHLOCALHOSTNAME into
  users enviroment, so the session handles hostname changes with
  a single X instance/run
- Use breeze_cursors in openSUSE branding

-------------------------------------------------------------------
Mon Mar 16 19:37:11 UTC 2015 - hrvoje.senjan@gmail.com

- Drop conflict with lightdm, and move DBus configuration file,
  now that sddm is whitelisted
- Drop xdm (Build)Requires
- Install sddm-pam* directly, instead of messing with symlinking
- Add create_pid_file.patch: openSUSE's generic display-manager
  service doesn't know what to do without a pid file. drop the patch
  as soon as that sick dinosaur is killed
- Drop ommit_systemd_service.patch

-------------------------------------------------------------------
Wed Dec 10 20:54:35 UTC 2014 - hrvoje.senjan@gmail.com

- Add conflict with lightdm due to same DBus configuration file

-------------------------------------------------------------------
Mon Dec  8 21:01:17 UTC 2014 - hrvoje.senjan@gmail.com

- Update to 0.11.0
   * Reload the configuration every time we start a new session
   * Fix stderr redirection in the helper. Solving a memory leak
   * Set system locale in the greeter
   * Bail on chdir failure
   * Use QUuid for unique ID generation
   * Update lithuanian translations

-------------------------------------------------------------------
Tue Nov  4 22:49:15 UTC 2014 - hrvoje.senjan@gmail.com

- Create openSUSE and upstream branding packages, now only openSUSE
  branding depends on plasma5-workspace

-------------------------------------------------------------------
Fri Oct 17 17:06:49 UTC 2014 - hrvoje.senjan@gmail.com

- Update to 0.10.0:
   * BACKWARDS INCOMPATIBLE: Drop support for Qt 4.
   * BACKWARDS INCOMPATIBLE: SDDM now prioritizes loading sessions
     with a .desktop prefix
   * SECURITY: Never try to login as the sddm user (CVE-2014-7271)
   * SECURITY: Fix race condition in XAUTHORITY file generation
     (CVE-2014-7272)
   * SECURITY: XAUTHORITY file is no longer owned by root
   * New translation: Kazakh
   * Fixed password field initial focus state
   * When the default theme is not available, sddm now loads the
     first theme in alphabetical order
   * Fixed PAM environment variables being overridden
   * Fixed autologin with the passwd backend
   * Greeter themes can now specify their own icon and
     cursor themes.
   * Various bugfixes with SessionCommand/XSession support
   * Various bugfixes with test mode.
   * Various cleanups

-------------------------------------------------------------------
Thu Oct  9 00:57:48 UTC 2014 - hrvoje.senjan@gmail.com

- Update to 0.9.9~git20141009:
   * resolved CVE-2014-7272 and bnc#897788
   * Dropped support for Qt4
   * Flush any buffered data to the log file, this writes
     immediately all the log messages.
   * Don't override pam environment variables.
   * Set default icon theme from greeter theme configuration.
   * Set cursor theme according to greeter theme configuration.
- Drop 0001-Never-try-to-login-as-the-user-SDDM.patch,
  0001-Move-onAuthenticated-XAUTHORITY-generation-to-the-he.patch
  and 0001-Don-t-override-pam-environment-variables.patch: merged
  upstream

-------------------------------------------------------------------
Mon Oct  6 08:48:17 UTC 2014 - hrvoje.senjan@gmail.com

- Added 0001-Never-try-to-login-as-the-user-SDDM.patch and
  0001-Move-onAuthenticated-XAUTHORITY-generation-to-the-he.patch to
  resolve bnc#897788 and CVE-2014-7272
- Leave 0001-Move-onAuthenticated-XAUTHORITY-generation-to-the-he.patch
  disabled for the moment, as it completely breaks users login

-------------------------------------------------------------------
Sun Sep 21 19:48:53 UTC 2014 - hrvoje.senjan@gmail.com

- Make it build for 13.1: define /rundir if undefined
- 0001-Don-t-override-pam-environment-variables.patch: fixes
  https://github.com/sddm/sddm/issues/256

-------------------------------------------------------------------
Thu Aug 21 21:27:35 UTC 2014 - hrvoje.senjan@gmail.com

- Update to 0.9.0
   * Several systemd, logind and journald improvements. Note that
     systemd is not required to run SDDM.
   * The SDDM greeter now runs as its own user and group, instead
     of root.
   * Support for setting the keyboard layout from the greeter.
   * An "AutoUser" config key to configure automatic login.
   * A "NumLock" config key to configure NumLock state at boot.
   * Overhauled configuration file handling.
   * SDDM runs with the default configuration without /etc/sddm.conf
   * Initial (albeit not fully functional) Plymouth support.
   * Translations in 11 languages.
   * Several licensing and packaging improvements.
   * Better documentation, including man pages for sddm(1),
     sddm-greeter(1), sddm.conf(5) and sddm-state.conf(5).

-------------------------------------------------------------------
Fri Aug 23 21:20:06 UTC 2013 - hrvoje.senjan@gmail.com

- Update to latest snapshot
- Added pkgconfig(xcb-xkb) BuildRequires
- Dropped libupower-glib-devel BuildRequire
- Utilize systemd macros for sddm service
- Small spec cleanup
- Use sed instead of two patches

-------------------------------------------------------------------
Sun Mar 17 19:02:32 UTC 2013 - hrvoje.senjan@gmail.com

- Initial packaging of sddm, Lightweight QML-based display manager

