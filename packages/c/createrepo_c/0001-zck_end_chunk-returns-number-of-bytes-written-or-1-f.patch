From 19af36bcd4984359509deb95e2df83449ce471f6 Mon Sep 17 00:00:00 2001
From: Jonathan Dieter <jdieter@gmail.com>
Date: Sun, 6 Jan 2019 19:21:04 +0000
Subject: [PATCH 1/3] zck_end_chunk returns number of bytes written or -1 for
 error

Signed-off-by: Jonathan Dieter <jdieter@gmail.com>
---
 src/compression_wrapper.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/src/compression_wrapper.c b/src/compression_wrapper.c
index 43f213c..e5b58d2 100644
--- a/src/compression_wrapper.c
+++ b/src/compression_wrapper.c
@@ -880,7 +880,7 @@ cr_close(CR_FILE *cr_file, GError **err)
             zckCtx *zck = (zckCtx *) cr_file->FILE;
             ret = CRE_OK;
             if (cr_file->mode == CR_CW_MODE_WRITE) {
-                if(!zck_end_chunk(zck)) {
+                if(zck_end_chunk(zck) < 0) {
                     ret = CRE_ZCK;
                     g_set_error(err, ERR_DOMAIN, CRE_ZCK,
                         "Unable to end final chunk: %s", zck_get_error(zck));
-- 
2.20.1

