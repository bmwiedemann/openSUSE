--- ./createrepo/__init__.py.orig	2014-02-24 12:45:33.874203994 +0000
+++ ./createrepo/__init__.py	2014-02-24 12:45:42.527203978 +0000
@@ -87,6 +87,7 @@ class MetaDataConfig(object):
         self.file_patterns = ['.*bin\/.*', '^\/etc\/.*', '^\/usr\/lib\/sendmail$']
         self.dir_patterns = ['.*bin\/.*', '^\/etc\/.*']
         self.skip_symlinks = False
+        self.skip_symlinked_dirs = False
         self.pkglist = []
         self.database_only = False
         self.primaryfile = 'primary.xml'
@@ -299,6 +300,8 @@ class MetaDataGenerator:
         func(arg, top, names)
         for name in names:
             name = os.path.join(top, name)
+            if self.conf.skip_symlinked_dirs and os.path.islink(name):
+                continue
             if os.path.isdir(name):
                 self._os_path_walk(name, func, arg)
     def getFileList(self, directory, ext):
--- ./genpkgmetadata.py.orig	2014-01-28 12:28:48.000000000 +0000
+++ ./genpkgmetadata.py	2014-02-24 12:45:42.527203978 +0000
@@ -99,6 +99,8 @@ def parse_args(args, conf):
         help="<dir> = optional directory to output to")
     parser.add_option("-S", "--skip-symlinks", dest="skip_symlinks",
         default=False, action="store_true", help="ignore symlinks of packages")
+    parser.add_option("--skip-symlinked-dirs", dest="skip_symlinked_dirs",
+        default=False, action="store_true", help="ignore symlinked directories")
     parser.add_option("--changelog-limit", dest="changelog_limit",
         default=None, help="only import the last N changelog entries")
     parser.add_option("--unique-md-filenames", dest="unique_md_filenames",
