Index: carla-2.4.0/source/backend/utils/Makefile
===================================================================
--- carla-2.4.0.orig/source/backend/utils/Makefile
+++ carla-2.4.0/source/backend/utils/Makefile
@@ -43,6 +43,8 @@ endif
 
 LINK_FLAGS += $(LILV_LIBS)
 LINK_FLAGS += $(WATER_LIBS)
+LINK_FLAGS += $(FLAC_LIBS)
+LINK_FLAGS += $(VORBIS_LIBS)
 
 ifeq ($(HAVE_X11),true)
 LINK_FLAGS += $(X11_LIBS)
Index: carla-2.4.0/source/bridges-plugin/Makefile
===================================================================
--- carla-2.4.0.orig/source/bridges-plugin/Makefile
+++ carla-2.4.0/source/bridges-plugin/Makefile
@@ -154,6 +154,11 @@ NATIVE_LINK_FLAGS  += $(FLUIDSYNTH_LIBS)
 
 NATIVE_LINK_FLAGS  += $(MAGIC_LIBS)
 
+NATIVE_BUILD_FLAGS += $(FLAC_FLAGS)
+NATIVE_LINK_FLAGS  += $(FLAC_LIBS)
+NATIVE_BUILD_FLAGS += $(VORBIS_FLAGS)
+NATIVE_LINK_FLAGS  += $(VORBIS_LIBS)
+
 LIBS_native        += $(MODULEDIR)/audio_decoder.a
 LIBS_native        += $(MODULEDIR)/native-plugins.a
 LIBS_native        += $(MODULEDIR)/sfzero.a
Index: carla-2.4.0/source/bridges-ui/Makefile
===================================================================
--- carla-2.4.0.orig/source/bridges-ui/Makefile
+++ carla-2.4.0/source/bridges-ui/Makefile
@@ -28,19 +28,19 @@ LINK_FLAGS       += $(WATER_LIBS) -lpthr
 # ---------------------------------------------------------------------------------------------------------------------
 
 BUILD_GTK2_FLAGS    = $(BUILD_CXX_FLAGS) -DBRIDGE_GTK2 $(X11_FLAGS)
-LINK_GTK2_FLAGS     = $(LINK_FLAGS) $(X11_LIBS) $(LIBDL_LIBS)
+LINK_GTK2_FLAGS     = $(LINK_FLAGS) $(X11_LIBS) $(LIBDL_LIBS) $(FLAC_LIBS) $(VORBIS_LIBS)
 
 BUILD_GTK3_FLAGS    = $(BUILD_CXX_FLAGS) -DBRIDGE_GTK3 $(X11_FLAGS)
-LINK_GTK3_FLAGS     = $(LINK_FLAGS) $(X11_LIBS) $(LIBDL_LIBS)
+LINK_GTK3_FLAGS     = $(LINK_FLAGS) $(X11_LIBS) $(LIBDL_LIBS) $(FLAC_LIBS) $(VORBIS_LIBS)
 
 BUILD_QT4_FLAGS     = $(BUILD_CXX_FLAGS) -DBRIDGE_QT4 $(shell pkg-config --cflags QtCore QtGui) $(X11_FLAGS) -I$(OBJDIR) -I$(CWD)/theme -Wno-unused-variable
-LINK_QT4_FLAGS      = $(LINK_FLAGS) $(shell pkg-config --libs QtCore QtGui) $(X11_LIBS) $(LIBDL_LIBS)
+LINK_QT4_FLAGS      = $(LINK_FLAGS) $(shell pkg-config --libs QtCore QtGui) $(X11_LIBS) $(LIBDL_LIBS) $(FLAC_LIBS) $(VORBIS_LIBS)
 
 BUILD_QT5_FLAGS     = $(BUILD_CXX_FLAGS) -DBRIDGE_QT5 $(shell pkg-config --cflags Qt5Core Qt5Gui Qt5Widgets) -I$(OBJDIR) -I$(CWD)/theme
-LINK_QT5_FLAGS      = $(LINK_FLAGS) $(shell pkg-config --libs Qt5Core Qt5Gui Qt5Widgets) $(LIBDL_LIBS)
+LINK_QT5_FLAGS      = $(LINK_FLAGS) $(shell pkg-config --libs Qt5Core Qt5Gui Qt5Widgets) $(LIBDL_LIBS) $(FLAC_LIBS) $(VORBIS_LIBS)
 
 BUILD_X11_FLAGS     = $(BUILD_CXX_FLAGS) -DBRIDGE_X11 $(X11_FLAGS)
-LINK_X11_FLAGS      = $(LINK_FLAGS) $(X11_LIBS) $(LIBDL_LIBS)
+LINK_X11_FLAGS      = $(LINK_FLAGS) $(X11_LIBS) $(LIBDL_LIBS) $(FLAC_LIBS) $(VORBIS_LIBS)
 
 BUILD_COCOA_FLAGS   = $(BUILD_CXX_FLAGS) -DBRIDGE_COCOA -ObjC++
 LINK_COCOA_FLAGS    = $(LINK_FLAGS) -framework Cocoa $(LIBDL_LIBS)
Index: carla-2.4.0/source/Makefile.mk
===================================================================
--- carla-2.4.0.orig/source/Makefile.mk
+++ carla-2.4.0/source/Makefile.mk
@@ -583,6 +583,14 @@ QT5_FLAGS = $(shell $(PKG_CONFIG) $(PKG_
 QT5_LIBS  = $(shell $(PKG_CONFIG) $(PKG_CONFIG_FLAGS) --libs Qt5Core Qt5Gui Qt5Widgets)
 endif
 
+FLAC_FLAGS  = $(shell pkg-config --cflags flac)
+FLAC_LIBS   = $(shell pkg-config --libs flac)
+BASE_FLAGS += $(FLAC_FLAGS)
+
+VORBIS_FLAGS  = $(shell pkg-config --cflags vorbis vorbisfile vorbisenc ogg)
+VORBIS_LIBS   = $(shell pkg-config --libs   vorbis vorbisfile vorbisenc ogg)
+BASE_FLAGS += $(VORBIS_FLAGS)
+
 ifeq ($(HAVE_SNDFILE),true)
 SNDFILE_FLAGS = $(shell $(PKG_CONFIG) $(PKG_CONFIG_FLAGS) --cflags sndfile)
 SNDFILE_LIBS  = $(shell $(PKG_CONFIG) $(PKG_CONFIG_FLAGS) --libs sndfile)
Index: carla-2.4.0/source/plugin/Makefile
===================================================================
--- carla-2.4.0.orig/source/plugin/Makefile
+++ carla-2.4.0/source/plugin/Makefile
@@ -114,6 +114,9 @@ LINK_FLAGS += $(JUCE_GUI_EXTRA_LIBS)
 endif
 endif
 
+LINK_FLAGS += $(FLAC_LIBS)
+LINK_FLAGS += $(VORBIS_LIBS)
+
 ifeq ($(MACOS),true)
 SYMBOLS_NATIVE  = -Wl,-exported_symbol,_carla_get_native_rack_plugin
 SYMBOLS_NATIVE += -Wl,-exported_symbol,_carla_get_native_patchbay_plugin
Index: carla-2.4.0/source/backend/Makefile
===================================================================
--- carla-2.4.0.orig/source/backend/Makefile
+++ carla-2.4.0/source/backend/Makefile
@@ -72,6 +72,8 @@ STANDALONE_LINK_FLAGS += $(LIBLO_LIBS)
 STANDALONE_LINK_FLAGS += $(MAGIC_LIBS)
 STANDALONE_LINK_FLAGS += $(FLUIDSYNTH_LIBS)
 STANDALONE_LINK_FLAGS += $(X11_LIBS)
+STANDALONE_LINK_FLAGS += $(FLAC_LIBS)
+STANDALONE_LINK_FLAGS += $(VORBIS_LIBS)
 
 ifeq ($(USING_JUCE),true)
 STANDALONE_LINK_FLAGS += $(JUCE_AUDIO_BASICS_LIBS)
