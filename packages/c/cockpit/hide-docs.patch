From cf16dead8c862fdf0f61a1c7ac0e8804933c812a Mon Sep 17 00:00:00 2001
From: Jacek Tomasiak <jacek.tomasiak@gmail.com>
Date: Mon, 14 Mar 2022 12:02:17 +0100
Subject: [PATCH] Hide links pointing to RHEL docs (bsc#1197003)

---
 pkg/kdump/manifest.json          | 2 +-
 pkg/networkmanager/manifest.json | 2 +-
 pkg/packagekit/manifest.json     | 2 +-
 pkg/shell/indexes.js             | 2 +-
 pkg/storaged/manifest.json       | 2 +-
 pkg/systemd/manifest.json        | 6 +++---
 pkg/users/manifest.json          | 2 +-
 7 files changed, 9 insertions(+), 9 deletions(-)

Index: cockpit/pkg/kdump/manifest.json
===================================================================
--- cockpit.orig/pkg/kdump/manifest.json
+++ cockpit/pkg/kdump/manifest.json
@@ -6,7 +6,7 @@
     "tools": {
         "index": {
             "label": "Kernel Dump",
-            "docs": [
+            "docs-rh": [
                 {
                     "label": "Configuring kdump",
                     "url": "https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/managing_systems_using_the_rhel_8_web_console/configuring-kdump-in-the-web-console_system-management-using-the-rhel-8-web-console"
Index: cockpit/pkg/networkmanager/manifest.json
===================================================================
--- cockpit.orig/pkg/networkmanager/manifest.json
+++ cockpit/pkg/networkmanager/manifest.json
@@ -8,7 +8,7 @@
         "index": {
             "label": "Networking",
             "order": 40,
-            "docs": [
+            "docs-rh": [
                 {
                     "label": "Managing networking bonds",
                     "url": "https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/managing_systems_using_the_rhel_8_web_console/configuring-network-bonds-using-the-web-console_system-management-using-the-rhel-8-web-console"
Index: cockpit/pkg/packagekit/manifest.json
===================================================================
--- cockpit.orig/pkg/packagekit/manifest.json
+++ cockpit/pkg/packagekit/manifest.json
@@ -8,7 +8,7 @@
     "tools": {
         "index": {
             "label": "Software Updates",
-            "docs": [
+            "docs-rh": [
                 {
                     "label": "Managing software updates",
                     "url": "https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/managing_systems_using_the_rhel_8_web_console/managing-software-updates-in-the-web-console_system-management-using-the-rhel-8-web-console"
Index: cockpit/pkg/storaged/manifest.json
===================================================================
--- cockpit.orig/pkg/storaged/manifest.json
+++ cockpit/pkg/storaged/manifest.json
@@ -8,7 +8,7 @@
         "index": {
             "label": "Storage",
             "order": 30,
-            "docs": [
+            "docs-rh": [
                 {
                     "label": "Managing partitions",
                     "url": "https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/managing_systems_using_the_rhel_8_web_console/managing-partitions-using-the-web-console_system-management-using-the-rhel-8-web-console"
Index: cockpit/pkg/systemd/manifest.json
===================================================================
--- cockpit.orig/pkg/systemd/manifest.json
+++ cockpit/pkg/systemd/manifest.json
@@ -9,7 +9,7 @@
         "index": {
             "label": "Overview",
             "order": 10,
-            "docs": [
+            "docs-rh": [
                 {
                     "label": "Configuring system settings",
                     "url": "https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/managing_systems_using_the_rhel_8_web_console/getting-started-with-the-rhel-8-web-console_system-management-using-the-rhel-8-web-console"
@@ -32,7 +32,7 @@
         "services": {
             "label": "Services",
             "order": 100,
-            "docs": [
+            "docs-rh": [
                 {
                     "label": "Managing services",
                     "url": "https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/managing_systems_using_the_rhel_8_web_console/managing-services-in-the-web-console_system-management-using-the-rhel-8-web-console"
@@ -51,7 +51,7 @@
         "logs": {
             "label": "Logs",
             "order": 20,
-            "docs": [
+            "docs-rh": [
                 {
                     "label": "Reviewing logs",
                     "url": "https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/managing_systems_using_the_rhel_8_web_console/reviewing-logs_system-management-using-the-rhel-8-web-console"
Index: cockpit/pkg/users/manifest.json
===================================================================
--- cockpit.orig/pkg/users/manifest.json
+++ cockpit/pkg/users/manifest.json
@@ -7,7 +7,7 @@
         "index": {
             "label": "Accounts",
             "order": 70,
-            "docs": [
+            "docs-rh": [
                 {
                     "label": "Managing user accounts",
                     "url": "https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/managing_systems_using_the_rhel_8_web_console/managing-user-accounts-in-the-web-console_system-management-using-the-rhel-8-web-console"
Index: cockpit/pkg/shell/topnav.jsx
===================================================================
--- cockpit.orig/pkg/shell/topnav.jsx
+++ cockpit/pkg/shell/topnav.jsx
@@ -121,9 +121,9 @@ export class TopNav extends React.Compon
                 {cockpit.format(_("$0 documentation"), this.state.osRelease.NAME)}
             </DropdownItem>);
 
-        docItems.push(<DropdownItem key="cockpit-doc" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/managing_systems_using_the_rhel_8_web_console/index" target="blank" rel="noopener noreferrer" icon={<ExternalLinkAltIcon />}>
-            {_("Web Console")}
-        </DropdownItem>);
+        // docItems.push(<DropdownItem key="cockpit-doc" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/managing_systems_using_the_rhel_8_web_console/index" target="blank" rel="noopener noreferrer" icon={<ExternalLinkAltIcon />}>
+        //    {_("Web Console")}
+        // </DropdownItem>);
 
         if (docs.length > 0)
             docItems.push(<DropdownSeparator key="separator" />);
