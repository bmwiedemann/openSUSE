From a870232c936c5a813ebef44758127b20ee07933e Mon Sep 17 00:00:00 2001
Message-Id: <a870232c936c5a813ebef44758127b20ee07933e.1487494889.git.matthias@mailaender.name>
From: =?UTF-8?q?Matthias=20Mail=C3=A4nder?= <matthias@mailaender.name>
Date: Sat, 18 Feb 2017 13:07:36 +0100
Subject: [PATCH 1/3] Add a FreeDesktop compliant start menu launcher

---
 crawl-ref/source/Makefile            | 4 ++++
 crawl-ref/source/linux/crawl.desktop | 9 +++++++++
 2 files changed, 13 insertions(+)

diff --git a/crawl-ref/source/Makefile b/crawl-ref/source/Makefile
index d4b4dc4a85..4ecf1ca069 100644
--- a/crawl-ref/source/Makefile
+++ b/crawl-ref/source/Makefile
@@ -1439,6 +1439,10 @@ ifeq ($(USE_DGAMELAUNCH),)
 	$(CHMOD) $(MCHMOD) $(prefix_fp)/$(bin_prefix)/$(GAME) || true
 endif
 
+install-linux-desktop:
+	[ -d $(prefix_fp)/share/applications ] || mkdir -p $(prefix_fp)/share/applications
+	$(COPY) linux/crawl.desktop $(prefix_fp)/share/applications
+
 clean: clean-rltiles clean-webserver clean-android clean-monster
 	+$(MAKE) -C $(UTIL) clean
 	$(RM) $(GAME) $(GAME).exe $(GENERATED_FILES) $(EXTRA_OBJECTS) libw32c.o\
diff --git a/crawl-ref/source/linux/crawl.desktop b/crawl-ref/source/linux/crawl.desktop
new file mode 100644
index 0000000000..4287381277
--- /dev/null
+++ b/crawl-ref/source/linux/crawl.desktop
@@ -0,0 +1,9 @@
+[Desktop Entry]
+Name=Dungeon Crawl Stone Soup
+GenericName=Roguelike dungeon exploration game
+Comment=A fun game in the grand tradition of games like Rogue, Hack, and Moria
+Type=Application
+Icon=crawl
+Exec=crawl-sdl
+Terminal=false
+Categories=Game;RolePlaying;
-- 
2.11.0

