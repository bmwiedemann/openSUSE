From 4352ece8e85da43090be171276a0d45d83c55a00 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Christoph=20B=C3=B6hmwalder?=
 <christoph.boehmwalder@linbit.com>
Date: Thu, 22 Aug 2024 12:25:39 +0200
Subject: [PATCH 17/32] compat: specify which essential change was not made

---
 drbd/drbd-kernel-compat/cocci/bdi_congested__yes_present.cocci  | 2 +-
 drbd/drbd-kernel-compat/cocci/bio_op_shift__yes_present.cocci   | 2 +-
 .../cocci/blk_queue_max_write_same_sectors__yes_present.cocci   | 2 +-
 3 files changed, 3 insertions(+), 3 deletions(-)

diff --git a/drbd/drbd-kernel-compat/cocci/bdi_congested__yes_present.cocci b/drbd/drbd-kernel-compat/cocci/bdi_congested__yes_present.cocci
index 8a0260321ab5..fdf6afc8355f 100644
--- a/drbd/drbd-kernel-compat/cocci/bdi_congested__yes_present.cocci
+++ b/drbd/drbd-kernel-compat/cocci/bdi_congested__yes_present.cocci
@@ -21,7 +21,7 @@ struct device_statistics *s;
 @ script:python depends on !(add_bdi_read_congested_congested_remote && add_bdi_read_congested_device_to_statistics) @
 @@
 import sys
-print('ERROR: A rule making an essential change was not executed!', file=sys.stderr)
+print('ERROR: A rule making an essential change was not executed! (bdi_read_congested)', file=sys.stderr)
 print('ERROR: This would not show up as a compiler error, but would still break DRBD.', file=sys.stderr)
 print('ERROR: Check bdi_congested__yes_present.cocci', file=sys.stderr)
 print('ERROR: As a precaution, the build will be aborted here.', file=sys.stderr)
diff --git a/drbd/drbd-kernel-compat/cocci/bio_op_shift__yes_present.cocci b/drbd/drbd-kernel-compat/cocci/bio_op_shift__yes_present.cocci
index cc02f5b91c2e..3225291f7dbd 100644
--- a/drbd/drbd-kernel-compat/cocci/bio_op_shift__yes_present.cocci
+++ b/drbd/drbd-kernel-compat/cocci/bio_op_shift__yes_present.cocci
@@ -57,7 +57,7 @@ combine_opf(wire_flags_to_bio_op(dpf),
 @ script:python depends on !combine_wire_flags @
 @@
 import sys
-print('ERROR: A rule making an essential change was not executed!', file=sys.stderr)
+print('ERROR: A rule making an essential change was not executed! (combine_opf)', file=sys.stderr)
 print('ERROR: This would not show up as a compiler error, but would still break DRBD.', file=sys.stderr)
 print('ERROR: As a precaution, the build will be aborted here.', file=sys.stderr)
 sys.exit(1)
diff --git a/drbd/drbd-kernel-compat/cocci/blk_queue_max_write_same_sectors__yes_present.cocci b/drbd/drbd-kernel-compat/cocci/blk_queue_max_write_same_sectors__yes_present.cocci
index 8eb4eef7dfd5..9202ee9c2dc4 100644
--- a/drbd/drbd-kernel-compat/cocci/blk_queue_max_write_same_sectors__yes_present.cocci
+++ b/drbd/drbd-kernel-compat/cocci/blk_queue_max_write_same_sectors__yes_present.cocci
@@ -7,7 +7,7 @@ blk_queue_max_hw_sectors(q, ...);
 @ script:python depends on !add_blk_queue_max_write_same_sectors @
 @@
 import sys
-print('ERROR: A rule making an essential change was not executed!', file=sys.stderr)
+print('ERROR: A rule making an essential change was not executed! (blk_queue_max_write_same_sectors)', file=sys.stderr)
 print('ERROR: This would not show up as a compiler error, but would still break DRBD.', file=sys.stderr)
 print('ERROR: Check blk_queue_max_write_same_sectors_yes_present.cocci', file=sys.stderr)
 print('ERROR: As a precaution, the build will be aborted here.', file=sys.stderr)
-- 
2.35.3

