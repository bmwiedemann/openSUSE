From: Johannes Thumshirn <johannes.thumshirn@wdc.com>
Date: Tue  7 Sep 17:18:50 JST 2021
Subject: Build fix for openSUSE

openSUSE needs kmod/ as a prefix for libkmod.h

Signed-off-by: Johannes Thumshirn <johannes.thumshirn@wdc.com>
---
 configure.ac        |    2 +-
 src/dmz_devmapper.c |    2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

--- a/configure.ac
+++ b/configure.ac
@@ -38,7 +38,7 @@ AC_CHECK_HEADER(uuid/uuid.h, [],
 		[AC_MSG_ERROR([Couldn't find uuid/uuid.h])])
 AC_CHECK_HEADER(libdevmapper.h, [],
 		[AC_MSG_ERROR([Couldn't find libdevmapper.h])])
-AC_CHECK_HEADER(libkmod.h, [],
+AC_CHECK_HEADER(kmod/libkmod.h, [],
 		[AC_MSG_ERROR([Couldn't find libkmod.h])])
 AC_CHECK_HEADER(libudev.h, [],
 		[AC_MSG_ERROR([Couldn't find libudev.h (install systemd-devel)])])
--- a/src/dmz_devmapper.c
+++ b/src/dmz_devmapper.c
@@ -13,7 +13,7 @@
 #include <string.h>
 #include <errno.h>
 #include <assert.h>
-#include <libkmod.h>
+#include <kmod/libkmod.h>
 #include <asm/byteorder.h>
 
 #include <libdevmapper.h>
