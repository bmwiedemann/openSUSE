From 969e9b89dce08fc1e5a1b8991f17d57b1abf5450 Mon Sep 17 00:00:00 2001
From: Christophe Marin <christophe@krop.fr>
Date: Sat, 26 Aug 2023 12:14:25 +0200
Subject: [PATCH] Look for each akonadi component separately

---
 core/cmake/rules/RulesKDEFramework.cmake | 9 +++------
 1 file changed, 3 insertions(+), 6 deletions(-)

Index: digikam-8.4.0/core/cmake/rules/RulesKDEFramework.cmake
===================================================================
--- digikam-8.4.0.orig/core/cmake/rules/RulesKDEFramework.cmake
+++ digikam-8.4.0/core/cmake/rules/RulesKDEFramework.cmake
@@ -51,15 +51,9 @@ if(ENABLE_AKONADICONTACTSUPPORT)
         find_package(KPim${QT_VERSION_MAJOR}AkonadiContactCore ${AKONADI_MIN_VERSION} QUIET)
 
     else()
-
-        find_package(KF${QT_VERSION_MAJOR} ${AKONADI_MIN_VERSION} QUIET
-                                                OPTIONAL_COMPONENTS
-                                                Akonadi
-                                                AkonadiContact      # For KDE Mail Contacts support.
-                                                Contacts            # API for contacts/address book data.
-        )
-        find_package(KPim${QT_VERSION_MAJOR}Akonadi ${AKONADI_MIN_VERSION} QUIET)
-        find_package(KPim${QT_VERSION_MAJOR}AkonadiContact ${AKONADI_MIN_VERSION} QUIET)
+        find_package(KF${QT_VERSION_MAJOR}Akonadi ${AKONADI_MIN_VERSION} REQUIRED)
+        find_package(KF${QT_VERSION_MAJOR}AkonadiContact ${AKONADI_MIN_VERSION} REQUIRED) # For KDE Mail Contacts support.
+        find_package(KF${QT_VERSION_MAJOR}Contacts ${AKONADI_MIN_VERSION} REQUIRED) # API for contacts/address book data.
 
     endif()
 
