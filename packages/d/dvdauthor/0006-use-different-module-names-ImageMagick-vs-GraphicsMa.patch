From ba1f36271ce31f0ac92444aaf58cc5fd7493464f Mon Sep 17 00:00:00 2001
From: Lawrence D'Oliveiro <ldo@geek-central.gen.nz>
Date: Tue, 4 Jul 2017 06:38:39 +0000
Subject: [PATCH 06/12] use different module names ImageMagick vs
 GraphicsMagick just to distinguish them in config log

---
 configure.ac | 22 +++++++++++++---------
 1 file changed, 13 insertions(+), 9 deletions(-)

diff --git a/configure.ac b/configure.ac
index b18d2a6..d65cc32 100644
--- a/configure.ac
+++ b/configure.ac
@@ -47,15 +47,19 @@ fi
 
 usemagick=0
 
-PKG_CHECK_MODULES([MAGICK], [ImageMagick >= 5.5.7], usemagick=1; AC_DEFINE(HAVE_MAGICK, 1, [Whether the ImageMagick libraries are available]), [:])
-
-if test "$usemagick" != 1; then
-    PKG_CHECK_MODULES([MAGICK], [GraphicsMagick], usemagick=1; [AC_DEFINE(HAVE_GMAGICK, 1, [whether the GraphicsMagick libraries are available])], [:])
-fi
-
-if test "$usemagick" != 1; then
-    MAGICK_CFLAGS="$LIBPNG_CFLAGS"
-    MAGICK_LIBS="$LIBPNG_LIBS"
+PKG_CHECK_MODULES([IMAGEMAGICK], [ImageMagick >= 5.5.7], usemagick=1; AC_DEFINE(HAVE_MAGICK, 1, [Whether the ImageMagick libraries are available]), [:])
+if test "$usemagick" = 1; then
+    MAGICK_CFLAGS="$IMAGEMAGICK_CFLAGS"
+    MAGICK_LIBS="$IMAGEMAGICK_LIBS"
+else
+    PKG_CHECK_MODULES([GRAPHICSMAGICK], [GraphicsMagick], usemagick=1; [AC_DEFINE(HAVE_GMAGICK, 1, [whether the GraphicsMagick libraries are available])], [:])
+    if test "$usemagick" = 1; then
+        MAGICK_CFLAGS="$GRAPHICSMAGICK_CFLAGS"
+        MAGICK_LIBS="$GRAPHICSMAGICK_LIBS"
+    else
+        MAGICK_CFLAGS="$LIBPNG_CFLAGS"
+        MAGICK_LIBS="$LIBPNG_LIBS"
+    fi
 fi
 
 AC_SUBST(MAGICK_CFLAGS)
-- 
2.51.0

