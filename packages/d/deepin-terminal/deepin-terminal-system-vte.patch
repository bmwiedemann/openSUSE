Index: deepin-terminal-3.2.6/CMakeLists.txt
===================================================================
--- deepin-terminal-3.2.6.orig/CMakeLists.txt
+++ deepin-terminal-3.2.6/CMakeLists.txt
@@ -27,8 +27,12 @@ pkg_check_modules(GLIB REQUIRED glib-2.0
 
 option(TEST_BUILD "Build with native testing" ON)
 option(USE_VENDOR_LIB "Backport support for debian stretch" ON)
+option(USE_SYSTEM_VTE "Use system vte" OFF)
 
-if (NOT USE_VENDOR_LIB)
+message(WARNING "USE_VENDOR_LIB: ${USE_VENDOR_LIB}")
+message(WARNING "USE_SYSTEM_VTE: ${USE_SYSTEM_VTE}")
+
+if (USE_SYSTEM_VTE)
 pkg_check_modules(VTE REQUIRED vte-2.91)
 endif()
 
@@ -64,7 +68,7 @@ execute_process(
 )
 endif()
 
-if (USE_VENDOR_LIB)
+if (NOT USE_SYSTEM_VTE)
 ExternalProject_Add(Vte-0.52
   SOURCE_DIR ${CMAKE_SOURCE_DIR}/3rdparty/vte-0.52.1
   CONFIGURE_COMMAND ./configure --enable-static
@@ -72,7 +76,9 @@ ExternalProject_Add(Vte-0.52
   INSTALL_COMMAND ""
   BUILD_IN_SOURCE 1
   )
+endif()
 
+if (USE_VENDOR_LIB)
 ExternalProject_Add(zssh-1.5c
   SOURCE_DIR ${CMAKE_SOURCE_DIR}/3rdparty/zssh-1.5c
   CONFIGURE_COMMAND ./configure
@@ -92,6 +98,9 @@ set(CFLAGS
 	-s -O3 -w
 	#	-g
 )
+if (USE_SYSTEM_VTE)
+  list(APPEND CFLAGS ${VTE_CFLAGS})
+endif()
 add_compile_options(${CFLAGS})
 set(INCLUDE_PATHS
 	${GIO_INCLUDE_DIRS}
@@ -103,7 +112,7 @@ set(INCLUDE_PATHS
 	${LIBSECRET_INCLUDE_DIRS}
 )
 
-if (USE_VENDOR_LIB)
+if (NOT USE_SYSTEM_VTE)
 	list(APPEND INCLUDE_PATHS ${CMAKE_SOURCE_DIR}/3rdparty/vte-0.52.1/src)
 	find_library(VTE_LIB NAMES libvte-2.91.a tcmalloc_minimal)
 else()
@@ -128,12 +137,12 @@ set(LIBS
 	m
 	z
 	pthread
-	gnutls
-	pcre2-8
+  gnutls
+  pcre2-8
 )
 
-if (NOT USE_VENDOR_LIB)
-	list(APPEND LIBS ${VTE_LIBRARIES})
+if (USE_SYSTEM_VTE)
+  list(APPEND LIBS ${VTE_LIBRARIES})
 endif()
 
 SET(APP_SOURCES, "")
@@ -187,7 +196,7 @@ endif()
 
 add_executable(${target} ${VALA_C} ${CMAKE_SOURCE_DIR}/project_path.c ${CMAKE_SOURCE_DIR}/lib/font.c)
 
-if (USE_VENDOR_LIB)
+if (NOT USE_SYSTEM_VTE)
 	target_link_libraries(${target} ${LIBS} ${CMAKE_SOURCE_DIR}/3rdparty/vte-0.52.1/src/.libs/libvte-2.91.a)
 	add_dependencies(${target} Vte-0.52)
 else()
