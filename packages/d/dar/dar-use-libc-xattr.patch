Index: configure.ac
===================================================================
--- configure.ac.orig
+++ configure.ac
@@ -590,15 +590,15 @@ AC_ARG_ENABLE(  [ea-support],
                 [ AC_MSG_CHECKING([for Extended Attribute support])
                   AC_MSG_RESULT([disabled])
                 ],
-                [ AC_CHECK_HEADERS([attr/xattr.h])
-                  AC_CHECK_LIB(attr, [lgetxattr], [], [])
+                [ AC_CHECK_HEADERS([sys/xattr.h])
+                  AC_SEARCH_LIBS([lgetxattr], [attr])
                   AC_MSG_CHECKING([for Unix Extended Attribute support])
                   AC_LINK_IFELSE([AC_LANG_PROGRAM([[extern "C" {
                                                      #if HAVE_SYS_TYPES_H
                                                      #include <sys/types.h>
                                                      #endif
-                                                     #if HAVE_ATTR_XATTR_H
-                                                     #include <attr/xattr.h>
+                                                     #if HAVE_SYS_XATTR_H
+                                                     #include <sys/xattr.h>
                                                      #endif
                                                     }]],
                                                     [ lgetxattr((char *)0, (char *)0, (void *)0, 0); ])
Index: src/libdar/ea_filesystem.cpp
===================================================================
--- src/libdar/ea_filesystem.cpp.orig
+++ src/libdar/ea_filesystem.cpp
@@ -61,6 +61,10 @@ extern "C"
 #endif
 } // end extern "C"
 
+#ifndef ENOATTR
+# define ENOATTR ENODATA        /* No such attribute */
+#endif
+
 #include "ea_filesystem.hpp"
 #include "ea.hpp"
 #include "tools.hpp"
