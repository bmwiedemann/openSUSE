From 550357486d093e60ddf8102cf3ff474c7fa1721d Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Klaus=20K=C3=A4mpf?= <kkaempf@suse.de>
Date: Fri, 12 Dec 2014 15:43:00 +0100
Subject: [PATCH 1/6] Install libraries without exec permission

---
 src/genpmda/genpmda               | 4 ++--
 src/libpcp/src/GNUmakefile        | 4 ++--
 src/libpcp_fault/src/GNUmakefile  | 4 ++--
 src/libpcp_gui/src/GNUmakefile    | 4 ++--
 src/libpcp_import/src/GNUmakefile | 4 ++--
 src/libpcp_mmv/src/GNUmakefile    | 4 ++--
 src/libpcp_pmcd/src/GNUmakefile   | 2 +-
 src/libpcp_pmda/src/GNUmakefile   | 4 ++--
 src/libpcp_trace/src/GNUmakefile  | 4 ++--
 src/pmdas/aix/GNUmakefile         | 2 +-
 src/pmdas/darwin/GNUmakefile      | 2 +-
 src/pmdas/freebsd/GNUmakefile     | 2 +-
 src/pmdas/linux/GNUmakefile       | 2 +-
 src/pmdas/linux_proc/GNUmakefile  | 2 +-
 src/pmdas/lustrecomm/GNUmakefile  | 2 +-
 src/pmdas/pmcd/src/GNUmakefile    | 2 +-
 src/pmdas/sendmail/GNUmakefile    | 2 +-
 src/pmdas/solaris/GNUmakefile     | 2 +-
 18 files changed, 26 insertions(+), 26 deletions(-)

Index: pcp/src/genpmda/genpmda
===================================================================
--- pcp.orig/src/genpmda/genpmda
+++ pcp/src/genpmda/genpmda
@@ -899,7 +899,7 @@ install: default
 	\$(INSTALL) -m 755 -d \$(PCP_VAR_DIR)/pmdas
 	\$(INSTALL) -m 755 -d \$(PMDADIR)
 	\$(INSTALL) -m 755 \$(CMDTARGET) \$(PMDADIR)/\$(CMDTARGET)
-	\$(INSTALL) -m 755 \$(LIBTARGET) \$(PMDADIR)/\$(LIBTARGET)
+	\$(INSTALL) -m 644 \$(LIBTARGET) \$(PMDADIR)/\$(LIBTARGET)
 	\$(INSTALL) -m 755 $oflag/Install \$(PMDADIR)/Install
 	\$(INSTALL) -m 755 $oflag/Remove \$(PMDADIR)/Remove
 	\$(INSTALL) -m 644 $oflag/Makefile.install \$(PMDADIR)/Makefile
@@ -962,7 +962,7 @@ install: default
 	\$(INSTALL) -m 755 -d \$(PCP_VAR_DIR)/pmdas
 	\$(INSTALL) -m 755 -d \$(PMDADIR)
 	\$(INSTALL) -m 755 -f \$(CMDTARGET) \$(PMDADIR)/\$(CMDTARGET)
-	\$(INSTALL) -m 755 -f \$(LIBTARGET) \$(PMDADIR)/\$(LIBTARGET)
+	\$(INSTALL) -m 644 -f \$(LIBTARGET) \$(PMDADIR)/\$(LIBTARGET)
 	\$(INSTALL) -m 755 -f $oflag/Install \$(PMDADIR)/Install
 	\$(INSTALL) -m 755 -f $oflag/Remove \$(PMDADIR)/Remove
 	\$(INSTALL) -m 644 -f $oflag/Makefile.install \$(PMDADIR)/Makefile
Index: pcp/src/libpcp/src/GNUmakefile
===================================================================
--- pcp.orig/src/libpcp/src/GNUmakefile
+++ pcp/src/libpcp/src/GNUmakefile
@@ -125,7 +125,7 @@ endif
 
 install : default
 ifneq ($(LIBTARGET),)
-	$(INSTALL) -m 755 $(LIBTARGET) $(PCP_LIB_DIR)/$(LIBTARGET)
+	$(INSTALL) -m 644 $(LIBTARGET) $(PCP_LIB_DIR)/$(LIBTARGET)
 	$(INSTALL) -m 644 $(LIBCONFIG) $(PCP_LIB_DIR)/pkgconfig/$(LIBCONFIG)
 endif
 ifneq ($(SYMTARGET),)
@@ -134,7 +134,7 @@ ifneq ($(SYMTARGET),)
 	done
 endif
 ifneq ($(STATICLIBTARGET),)
-	$(INSTALL) -m 755 $(STATICLIBTARGET) $(PCP_LIB_DIR)/$(STATICLIBTARGET)
+	$(INSTALL) -m 644 $(STATICLIBTARGET) $(PCP_LIB_DIR)/$(STATICLIBTARGET)
 endif
 
 $(EXT_FILES):
Index: pcp/src/libpcp_fault/src/GNUmakefile
===================================================================
--- pcp.orig/src/libpcp_fault/src/GNUmakefile
+++ pcp/src/libpcp_fault/src/GNUmakefile
@@ -150,7 +150,7 @@ endif
 
 install : default
 ifneq ($(LIBTARGET),)
-	$(INSTALL) -m 755 $(LIBTARGET) $(PCP_LIB_DIR)/$(LIBTARGET)
+	$(INSTALL) -m 644 $(LIBTARGET) $(PCP_LIB_DIR)/$(LIBTARGET)
 endif
 ifneq ($(SYMTARGET),)
 	for tt in $(SYMTARGET); do \
@@ -158,7 +158,7 @@ ifneq ($(SYMTARGET),)
 	done
 endif
 ifneq ($(STATICLIBTARGET),)
-	$(INSTALL) -m 755 $(STATICLIBTARGET) $(PCP_LIB_DIR)/$(STATICLIBTARGET)
+	$(INSTALL) -m 644 $(STATICLIBTARGET) $(PCP_LIB_DIR)/$(STATICLIBTARGET)
 endif
 	$(INSTALL) -m 644 $(TOPDIR)/src/include/pcp/fault.h $(PCP_INC_DIR)/fault.h
 
Index: pcp/src/libpcp_gui/src/GNUmakefile
===================================================================
--- pcp.orig/src/libpcp_gui/src/GNUmakefile
+++ pcp/src/libpcp_gui/src/GNUmakefile
@@ -54,7 +54,7 @@ include $(BUILDRULES)
 
 install: default
 ifneq ($(LIBTARGET),)
-	$(INSTALL) -m 755 $(LIBTARGET) $(PCP_LIB_DIR)/$(LIBTARGET)
+	$(INSTALL) -m 644 $(LIBTARGET) $(PCP_LIB_DIR)/$(LIBTARGET)
 endif
 ifneq ($(SYMTARGET),)
 	for tt in $(SYMTARGET); do \
@@ -62,7 +62,7 @@ ifneq ($(SYMTARGET),)
 	done
 endif
 ifneq ($(STATICLIBTARGET),)
-	$(INSTALL) -m 755 $(STATICLIBTARGET) $(PCP_LIB_DIR)/$(STATICLIBTARGET)
+	$(INSTALL) -m 644 $(STATICLIBTARGET) $(PCP_LIB_DIR)/$(STATICLIBTARGET)
 endif
 
 default_pcp:	default
Index: pcp/src/libpcp_import/src/GNUmakefile
===================================================================
--- pcp.orig/src/libpcp_import/src/GNUmakefile
+++ pcp/src/libpcp_import/src/GNUmakefile
@@ -54,7 +54,7 @@ include $(BUILDRULES)
 
 install: default
 ifneq ($(LIBTARGET),)
-	$(INSTALL) -m 755 $(LIBTARGET) $(PCP_LIB_DIR)/$(LIBTARGET)
+	$(INSTALL) -m 644 $(LIBTARGET) $(PCP_LIB_DIR)/$(LIBTARGET)
 	$(INSTALL) -m 644 $(LIBCONFIG) $(PCP_LIB_DIR)/pkgconfig/$(LIBCONFIG)
 endif
 ifneq ($(SYMTARGET),)
@@ -63,7 +63,7 @@ ifneq ($(SYMTARGET),)
 	done
 endif
 ifneq ($(STATICLIBTARGET),)
-	$(INSTALL) -m 755 $(STATICLIBTARGET) $(PCP_LIB_DIR)/$(STATICLIBTARGET)
+	$(INSTALL) -m 644 $(STATICLIBTARGET) $(PCP_LIB_DIR)/$(STATICLIBTARGET)
 endif
 
 default_pcp: default
Index: pcp/src/libpcp_mmv/src/GNUmakefile
===================================================================
--- pcp.orig/src/libpcp_mmv/src/GNUmakefile
+++ pcp/src/libpcp_mmv/src/GNUmakefile
@@ -47,7 +47,7 @@ include $(BUILDRULES)
 
 install: default
 ifneq ($(LIBTARGET),)
-	$(INSTALL) -m 755 $(LIBTARGET) $(PCP_LIB_DIR)/$(LIBTARGET)
+	$(INSTALL) -m 644 $(LIBTARGET) $(PCP_LIB_DIR)/$(LIBTARGET)
 endif
 ifneq ($(SYMTARGET),)
 	for tt in $(SYMTARGET); do \
@@ -55,7 +55,7 @@ ifneq ($(SYMTARGET),)
 	done
 endif
 ifneq ($(STATICLIBTARGET),)
-	$(INSTALL) -m 755 $(STATICLIBTARGET) $(PCP_LIB_DIR)/$(STATICLIBTARGET)
+	$(INSTALL) -m 644 $(STATICLIBTARGET) $(PCP_LIB_DIR)/$(STATICLIBTARGET)
 endif
 
 default_pcp: default
Index: pcp/src/libpcp_pmcd/src/GNUmakefile
===================================================================
--- pcp.orig/src/libpcp_pmcd/src/GNUmakefile
+++ pcp/src/libpcp_pmcd/src/GNUmakefile
@@ -73,7 +73,7 @@ include $(BUILDRULES)
 
 install : default
 ifeq "$(TARGET_OS)" "mingw"
-	$(INSTALL) -m 755 $(LIBTARGET) $(PCP_LIB_DIR)/$(LIBTARGET)
+	$(INSTALL) -m 644 $(LIBTARGET) $(PCP_LIB_DIR)/$(LIBTARGET)
 endif
 
 ifeq "$(ENABLE_PROBES)" "true"
Index: pcp/src/libpcp_pmda/src/GNUmakefile
===================================================================
--- pcp.orig/src/libpcp_pmda/src/GNUmakefile
+++ pcp/src/libpcp_pmda/src/GNUmakefile
@@ -64,7 +64,7 @@ include $(BUILDRULES)
 
 install: default
 ifneq ($(LIBTARGET),)
-	$(INSTALL) -m 755 $(LIBTARGET) $(PCP_LIB_DIR)/$(LIBTARGET)
+	$(INSTALL) -m 644 $(LIBTARGET) $(PCP_LIB_DIR)/$(LIBTARGET)
 	$(INSTALL) -m 644 $(LIBCONFIG) $(PCP_LIB_DIR)/pkgconfig/$(LIBCONFIG)
 endif
 ifneq ($(SYMTARGET),)
@@ -73,7 +73,7 @@ ifneq ($(SYMTARGET),)
 	done
 endif
 ifneq ($(STATICLIBTARGET),)
-	$(INSTALL) -m 755 $(STATICLIBTARGET) $(PCP_LIB_DIR)/$(STATICLIBTARGET)
+	$(INSTALL) -m 644 $(STATICLIBTARGET) $(PCP_LIB_DIR)/$(STATICLIBTARGET)
 endif
 
 $(XFILES):
Index: pcp/src/libpcp_trace/src/GNUmakefile
===================================================================
--- pcp.orig/src/libpcp_trace/src/GNUmakefile
+++ pcp/src/libpcp_trace/src/GNUmakefile
@@ -56,13 +56,13 @@ include $(BUILDRULES)
 
 install : default
 ifneq ($(LIBTARGET),)
-	$(INSTALL) -m 755 $(LIBTARGET) $(PCP_LIB_DIR)/$(LIBTARGET)
+	$(INSTALL) -m 644 $(LIBTARGET) $(PCP_LIB_DIR)/$(LIBTARGET)
 endif
 ifneq ($(SYMTARGET),)
 	$(INSTALL) -S $(LIBTARGET) $(PCP_LIB_DIR)/$(SYMTARGET)
 endif
 ifneq ($(STATICLIBTARGET),)
-	$(INSTALL) -m 755 $(STATICLIBTARGET) $(PCP_LIB_DIR)/$(STATICLIBTARGET)
+	$(INSTALL) -m 644 $(STATICLIBTARGET) $(PCP_LIB_DIR)/$(STATICLIBTARGET)
 endif
 
 default_pcp : default
Index: pcp/src/pmdas/linux/GNUmakefile
===================================================================
--- pcp.orig/src/pmdas/linux/GNUmakefile
+++ pcp/src/pmdas/linux/GNUmakefile
@@ -89,10 +89,10 @@ build-me: $(LIBTARGET) $(CMDTARGET) $(HE
 install: default
 	$(INSTALL) -m 755 -d $(PMDAADMDIR)
 	$(INSTALL) -m 755 -d $(PMDATMPDIR)
-	$(INSTALL) -m 644 -t $(PMDATMPDIR) domain.h help $(HELPTARGETS) $(PMDAADMDIR)
+	$(INSTALL) -m 644 -t $(PMDATMPDIR) domain.h help $(HELPTARGETS) $(LIBTARGET) $(PMDAADMDIR)
 	$(INSTALL) -m 755 -d $(PMDACONFIG)
 	$(INSTALL) -m 644 -t $(PMDATMPDIR)/samplebandwidth.conf bandwidth.conf $(PMDACONFIG)/samplebandwidth.conf
-	$(INSTALL) -m 755 -t $(PMDATMPDIR) $(LIBTARGET) $(CMDTARGET) $(PMDAADMDIR)
+	$(INSTALL) -m 755 -t $(PMDATMPDIR)/$(CMDTARGET) $(CMDTARGET) $(PMDAADMDIR)/$(CMDTARGET)
 	$(INSTALL) -m 644 -t $(PCP_PMNS_DIR)/root_linux root_linux $(PCP_PMNSADM_DIR)/root_linux
 	$(INSTALL) -m 644 -t $(REWRITEVARDIR)/linux_proc_fs_nfsd_fixups.conf proc_fs_nfsd_fixups.conf $(REWRITEDIR)/linux_proc_fs_nfsd_fixups.conf
 	$(INSTALL) -m 644 -t $(REWRITEVARDIR)/linux_proc_net_snmp_migrate.conf proc_net_snmp_migrate.conf $(REWRITEDIR)/linux_proc_net_snmp_migrate.conf
Index: pcp/src/pmdas/linux_proc/GNUmakefile
===================================================================
--- pcp.orig/src/pmdas/linux_proc/GNUmakefile
+++ pcp/src/pmdas/linux_proc/GNUmakefile
@@ -73,10 +73,10 @@ build-me: root_proc $(LIBTARGET) $(CMDTA
 install: default
 	$(INSTALL) -m 755 -d $(PMDAADMDIR)
 	$(INSTALL) -m 755 -d $(PMDATMPDIR)
-	$(INSTALL) -m 644 -t $(PMDATMPDIR) domain.h help help.dir help.pag root root_proc $(PMDAADMDIR)
+	$(INSTALL) -m 644 -t $(PMDATMPDIR) domain.h help help.dir help.pag root root_proc $(LIBTARGET) $(PMDAADMDIR)
 	$(INSTALL) -m 755 -d $(PMDACONFIG)
 	$(INSTALL) -m 644 -t $(PMDATMPDIR)/samplehotproc.conf samplehotproc.conf $(PMDACONFIG)/samplehotproc.conf
-	$(INSTALL) -m 755 -t $(PMDATMPDIR) $(LIBTARGET) $(CMDTARGET) $(SCRIPTS) $(PMDAADMDIR)
+	$(INSTALL) -m 755 -t $(PMDATMPDIR) $(CMDTARGET) $(SCRIPTS) $(PMDAADMDIR)
 	$(INSTALL) -m 644 -t $(PCP_PMNS_DIR)/root_proc root_proc $(PCP_PMNSADM_DIR)/root_proc
 	$(INSTALL) -m 644 -t $(REWRITEVARDIR) $(LOGREWRITERS) $(REWRITEDIR)
 	@$(INSTALL_MAN)
Index: pcp/src/pmdas/pmcd/src/GNUmakefile
===================================================================
--- pcp.orig/src/pmdas/pmcd/src/GNUmakefile
+++ pcp/src/pmdas/pmcd/src/GNUmakefile
@@ -59,7 +59,7 @@ default: $(LIBTARGET)
 install: default
 	$(INSTALL) -m 755 -d $(PMDAADMDIR)
 	$(INSTALL) -m 755 -d $(PMDATMPDIR)
-	$(INSTALL) -m 755 -t $(PMDATMPDIR)/$(LIBTARGET) $(LIBTARGET) $(PMDAADMDIR)/$(LIBTARGET)
+	$(INSTALL) -m 644 -t $(PMDATMPDIR)/$(LIBTARGET) $(LIBTARGET) $(PMDAADMDIR)/$(LIBTARGET)
 
 include $(BUILDRULES)
 
Index: pcp/src/pmdas/sendmail/GNUmakefile
===================================================================
--- pcp.orig/src/pmdas/sendmail/GNUmakefile
+++ pcp/src/pmdas/sendmail/GNUmakefile
@@ -44,8 +44,8 @@ install install_pcp:	default
 	$(INSTALL) -m 755 -d $(PMDAADMDIR)
 	$(INSTALL) -m 755 -d $(PMDATMPDIR)
 	$(INSTALL) -m 755 -t $(PMDATMPDIR)/pmda$(IAM)$(EXECSUFFIX) $(CMDTARGET) $(PMDAADMDIR)/pmda$(IAM)$(EXECSUFFIX)
-	$(INSTALL) -m 755 -t $(PMDATMPDIR) $(LIBTARGET) $(SCRIPTS) $(PMDAADMDIR)
-	$(INSTALL) -m 644 -t $(PMDATMPDIR) $(DFILES) pmns help root domain.h $(PMDAADMDIR)
+	$(INSTALL) -m 755 -t $(PMDATMPDIR) $(SCRIPTS) $(PMDAADMDIR)
+	$(INSTALL) -m 644 -t $(PMDATMPDIR) $(DFILES) pmns help root domain.h $(LIBTARGET) $(PMDAADMDIR)
 	$(INSTALL) -m 644 -t $(PMCHARTVARDIR)/Sendmail Sendmail.pmchart $(PMCHARTDIR)/Sendmail
 
 $(CMDTARGET):	$(OBJECTS)
Index: pcp/src/libpcp_web/src/GNUmakefile
===================================================================
--- pcp.orig/src/libpcp_web/src/GNUmakefile
+++ pcp/src/libpcp_web/src/GNUmakefile
@@ -84,7 +84,7 @@ endif
 
 install: default
 ifneq ($(LIBTARGET),)
-	$(INSTALL) -m 755 $(LIBTARGET) $(PCP_LIB_DIR)/$(LIBTARGET)
+	$(INSTALL) -m 644 $(LIBTARGET) $(PCP_LIB_DIR)/$(LIBTARGET)
 endif
 ifneq ($(SYMTARGET),)
 	for tt in $(SYMTARGET); do \
@@ -92,7 +92,7 @@ ifneq ($(SYMTARGET),)
 	done
 endif
 ifneq ($(STATICLIBTARGET),)
-	$(INSTALL) -m 755 $(STATICLIBTARGET) $(PCP_LIB_DIR)/$(STATICLIBTARGET)
+	$(INSTALL) -m 644 $(STATICLIBTARGET) $(PCP_LIB_DIR)/$(STATICLIBTARGET)
 endif
 
 $(XFILES):
Index: pcp/src/pmdas/cifs/GNUmakefile
===================================================================
--- pcp.orig/src/pmdas/cifs/GNUmakefile
+++ pcp/src/pmdas/cifs/GNUmakefile
@@ -44,8 +44,8 @@ build-me: $(CMDTARGET) $(LIBTARGET)
 install: default
 	$(INSTALL) -m 755 -d $(PMDAADMDIR)
 	$(INSTALL) -m 755 -d $(PMDATMPDIR)
-	$(INSTALL) -m 644 -t $(PMDATMPDIR) root pmns domain.h help $(PMDAADMDIR)
-	$(INSTALL) -m 755 -t $(PMDATMPDIR) Install Remove $(CMDTARGET) $(LIBTARGET) $(PMDAADMDIR)
+	$(INSTALL) -m 644 -t $(PMDATMPDIR) root pmns domain.h help $(LIBTARGET) $(PMDAADMDIR)
+	$(INSTALL) -m 755 -t $(PMDATMPDIR) Install Remove $(CMDTARGET) $(PMDAADMDIR)
 	@$(INSTALL_MAN)
 else
 build-me:
Index: pcp/src/pmdas/dm/GNUmakefile
===================================================================
--- pcp.orig/src/pmdas/dm/GNUmakefile
+++ pcp/src/pmdas/dm/GNUmakefile
@@ -56,8 +56,8 @@ install: default
 	$(INSTALL) -m 755 -d $(PMDAADMDIR)
 	$(INSTALL) -m 755 -d $(PMDATMPDIR)
 	$(INSTALL) -m 644 -t $(PMDATMPDIR) domain.h help $(PMDAADMDIR)
-	$(INSTALL) -m 644 -t $(PMDATMPDIR) root $(PMNSFILES) $(PMDAADMDIR)
-	$(INSTALL) -m 755 -t $(PMDATMPDIR) $(LIBTARGET) $(CMDTARGET) $(SCRIPTS) $(PMDAADMDIR)
+	$(INSTALL) -m 644 -t $(PMDATMPDIR) root $(PMNSFILES) $(LIBTARGET) $(PMDAADMDIR)
+	$(INSTALL) -m 755 -t $(PMDATMPDIR) $(CMDTARGET) $(SCRIPTS) $(PMDAADMDIR)
 	$(INSTALL) -m 644 -t $(PMIEVARDIR)/data_high_util dmthin.data_high_util.pmie $(PMIEDIR)/data_high_util
 	$(INSTALL) -m 644 -t $(PMIEVARDIR)/metadata_high_util dmthin.metadata_high_util.pmie $(PMIEDIR)/metadata_high_util
 	@$(INSTALL_MAN)
Index: pcp/src/pmdas/docker/GNUmakefile
===================================================================
--- pcp.orig/src/pmdas/docker/GNUmakefile
+++ pcp/src/pmdas/docker/GNUmakefile
@@ -45,8 +45,8 @@ build-me:	$(CMDTARGET) $(LIBTARGET)
 install_pcp install:	default 
 	$(INSTALL) -m 755 -d $(PMDAADMDIR)
 	$(INSTALL) -m 755 -d $(PMDATMPDIR)
-	$(INSTALL) -m 755 -t $(PMDATMPDIR) Install Remove $(CMDTARGET) $(LIBTARGET) $(PMDAADMDIR)
-	$(INSTALL) -m 644 -t $(PMDATMPDIR) root pmns domain.h $(DFILES) $(PMDAADMDIR)
+	$(INSTALL) -m 755 -t $(PMDATMPDIR) Install Remove $(CMDTARGET) $(PMDAADMDIR)
+	$(INSTALL) -m 644 -t $(PMDATMPDIR) root pmns domain.h $(DFILES) $(LIBTARGET) $(PMDAADMDIR)
 	@$(INSTALL_MAN)
 else
 build-me:
Index: pcp/src/pmdas/jbd2/GNUmakefile
===================================================================
--- pcp.orig/src/pmdas/jbd2/GNUmakefile
+++ pcp/src/pmdas/jbd2/GNUmakefile
@@ -57,8 +57,8 @@ build-me: $(LIBTARGET) $(CMDTARGET) $(HE
 install: default
 	$(INSTALL) -m 755 -d $(PMDAADMDIR)
 	$(INSTALL) -m 755 -d $(PMDATMPDIR)
-	$(INSTALL) -m 644 -t $(PMDATMPDIR) domain.h help $(HELPTARGETS) root root_jbd2 $(PMDAADMDIR)
-	$(INSTALL) -m 755 -t $(PMDATMPDIR) $(LIBTARGET) $(CMDTARGET) $(SCRIPTS) $(PMDAADMDIR)
+	$(INSTALL) -m 644 -t $(PMDATMPDIR) domain.h help $(HELPTARGETS) root root_jbd2 $(LIBTARGET) $(PMDAADMDIR)
+	$(INSTALL) -m 755 -t $(PMDATMPDIR) $(CMDTARGET) $(SCRIPTS) $(PMDAADMDIR)
 	$(INSTALL) -m 644 -t $(PCP_PMNS_DIR)/root_jbd2 root_jbd2 $(PCP_PMNSADM_DIR)/root_jbd2
 	$(INSTALL) -m 644 -t $(REWRITEVARDIR)/jbd2_kernel_ulong.conf jbd2_kernel_ulong.conf $(REWRITEDIR)/jbd2_kernel_ulong.conf
 	@$(INSTALL_MAN)
Index: pcp/src/pmdas/kvm/GNUmakefile
===================================================================
--- pcp.orig/src/pmdas/kvm/GNUmakefile
+++ pcp/src/pmdas/kvm/GNUmakefile
@@ -55,10 +55,10 @@ build-me: $(LIBTARGET) $(CMDTARGET) $(HE
 install: default
 	$(INSTALL) -m 755 -d $(PMDAADMDIR)
 	$(INSTALL) -m 755 -d $(PMDATMPDIR)
-	$(INSTALL) -m 644 -t $(PMDATMPDIR) domain.h help help.dir help.pag root root_kvm $(PMDAADMDIR)
+	$(INSTALL) -m 644 -t $(PMDATMPDIR) domain.h help help.dir help.pag root root_kvm $(LIBTARGET) $(PMDAADMDIR)
 	$(INSTALL) -m 755 -d $(PMDACONFIG)
 	$(INSTALL) -m 644 -t $(PMDATMPDIR)/kvm.conf kvm.conf $(PMDACONFIG)/kvm.conf
-	$(INSTALL) -m 755 -t $(PMDATMPDIR) $(LIBTARGET) $(CMDTARGET) $(SCRIPTS) $(PMDAADMDIR)
+	$(INSTALL) -m 755 -t $(PMDATMPDIR) $(CMDTARGET) $(SCRIPTS) $(PMDAADMDIR)
 	$(INSTALL) -m 644 -t $(PCP_PMNS_DIR)/root_kvm root_kvm $(PCP_PMNSADM_DIR)/root_kvm
 	@$(INSTALL_MAN)
 else
Index: pcp/src/pmdas/linux_xfs/GNUmakefile
===================================================================
--- pcp.orig/src/pmdas/linux_xfs/GNUmakefile
+++ pcp/src/pmdas/linux_xfs/GNUmakefile
@@ -57,8 +57,8 @@ build-me: $(LIBTARGET) $(CMDTARGET) $(HE
 install: default
 	$(INSTALL) -m 755 -d $(PMDAADMDIR)
 	$(INSTALL) -m 755 -d $(PMDATMPDIR)
-	$(INSTALL) -m 644 -t $(PMDATMPDIR) domain.h help help.dir help.pag root root_xfs $(PMDAADMDIR)
-	$(INSTALL) -m 755 -t $(PMDATMPDIR) $(LIBTARGET) $(CMDTARGET) $(SCRIPTS) $(PMDAADMDIR)
+	$(INSTALL) -m 644 -t $(PMDATMPDIR) domain.h help help.dir help.pag root root_xfs $(LIBTARGET) $(PMDAADMDIR)
+	$(INSTALL) -m 755 -t $(PMDATMPDIR) $(CMDTARGET) $(SCRIPTS) $(PMDAADMDIR)
 	$(INSTALL) -m 644 -t $(PCP_PMNS_DIR)/root_xfs root_xfs $(PCP_PMNSADM_DIR)/root_xfs
 	$(INSTALL) -m 644 -t $(REWRITEVARDIR)/linux_xfs_migrate.conf linux_xfs_migrate.conf $(REWRITEDIR)/linux_xfs_migrate.conf
 	@$(INSTALL_MAN)
Index: pcp/src/pmdas/nvidia/GNUmakefile
===================================================================
--- pcp.orig/src/pmdas/nvidia/GNUmakefile
+++ pcp/src/pmdas/nvidia/GNUmakefile
@@ -37,9 +37,8 @@ include $(BUILDRULES)
 install:	default
 	$(INSTALL) -m 755 -d $(PMDAADMDIR)
 	$(INSTALL) -m 755 -d $(PMDATMPDIR)
-	$(INSTALL) -m 755 -t $(PMDATMPDIR) Install Remove $(PMDAADMDIR)
-	$(INSTALL) -m 755 -t $(PMDATMPDIR) $(LIBTARGET) $(CMDTARGET) $(PMDAADMDIR)
-	$(INSTALL) -m 644 -t $(PMDATMPDIR) $(DFILES) root help pmns domain.h $(PMDAADMDIR)
+	$(INSTALL) -m 755 -t $(PMDATMPDIR) $(CMDTARGET) Install Remove $(PMDAADMDIR)
+	$(INSTALL) -m 644 -t $(PMDATMPDIR) $(DFILES) root help pmns domain.h $(LIBTARGET) $(PMDAADMDIR)
 
 $(OBJECTS): domain.h
 
Index: pcp/src/pmdas/podman/GNUmakefile
===================================================================
--- pcp.orig/src/pmdas/podman/GNUmakefile
+++ pcp/src/pmdas/podman/GNUmakefile
@@ -48,8 +48,8 @@ build-me: $(LIBTARGET) $(CMDTARGET) $(HE
 install: default
 	$(INSTALL) -m 755 -d $(PMDAADMDIR)
 	$(INSTALL) -m 755 -d $(PMDATMPDIR)
-	$(INSTALL) -m 644 -t $(PMDATMPDIR) domain.h help help.dir help.pag root root_podman $(PMDAADMDIR)
-	$(INSTALL) -m 755 -t $(PMDATMPDIR) $(LIBTARGET) $(CMDTARGET) $(SCRIPTS) $(PMDAADMDIR)
+	$(INSTALL) -m 644 -t $(PMDATMPDIR) domain.h help help.dir help.pag root root_podman $(LIBTARGET) $(PMDAADMDIR)
+	$(INSTALL) -m 755 -t $(PMDATMPDIR) $(CMDTARGET) $(SCRIPTS) $(PMDAADMDIR)
 	$(INSTALL) -m 644 -t $(PCP_PMNS_DIR)/root_podman root_podman $(PCP_PMNSADM_DIR)/root_podman
 	@$(INSTALL_MAN)
 else
Index: pcp/src/pmdas/rpm/GNUmakefile
===================================================================
--- pcp.orig/src/pmdas/rpm/GNUmakefile
+++ pcp/src/pmdas/rpm/GNUmakefile
@@ -51,8 +51,8 @@ build-me: $(CMDTARGET) $(LIBTARGET)
 install_pcp install:	default 
 	$(INSTALL) -m 755 -d $(PMDAADMDIR)
 	$(INSTALL) -m 755 -d $(PMDATMPDIR)
-	$(INSTALL) -m 644 -t $(PMDATMPDIR) root pmns domain.h help $(PMDAADMDIR)
-	$(INSTALL) -m 755 -t $(PMDATMPDIR) $(CMDTARGET) $(LIBTARGET) $(SCRIPTS) $(PMDAADMDIR)
+	$(INSTALL) -m 644 -t $(PMDATMPDIR) root pmns domain.h help $(LIBTARGET) $(PMDAADMDIR)
+	$(INSTALL) -m 755 -t $(PMDATMPDIR) $(CMDTARGET) $(SCRIPTS) $(PMDAADMDIR)
 	$(INSTALL) -m 644 -t $(REWRITEVARDIR)/rpm_migrate.conf migrate.conf $(REWRITEDIR)/rpm_migrate.conf
 	@$(INSTALL_MAN)
 else
Index: pcp/src/pmdas/smart/GNUmakefile
===================================================================
--- pcp.orig/src/pmdas/smart/GNUmakefile
+++ pcp/src/pmdas/smart/GNUmakefile
@@ -48,8 +48,8 @@ build-me: $(CMDTARGET) $(LIBTARGET)
 install: default
 	$(INSTALL) -m 755 -d $(PMDAADMDIR)
 	$(INSTALL) -m 755 -d $(PMDATMPDIR)
-	$(INSTALL) -m 644 -t $(PMDATMPDIR) root pmns domain.h help $(PMDAADMDIR)
-	$(INSTALL) -m 755 -t $(PMDATMPDIR) $(LIBTARGET) $(CMDTARGET) $(SCRIPTS) $(PMDAADMDIR)
+	$(INSTALL) -m 644 -t $(PMDATMPDIR) root pmns domain.h help $(LIBTARGET) $(PMDAADMDIR)
+	$(INSTALL) -m 755 -t $(PMDATMPDIR) $(CMDTARGET) $(SCRIPTS) $(PMDAADMDIR)
 	@$(INSTALL_MAN)
 else
 build-me:
Index: pcp/src/pmdas/statsd/src/GNUmakefile
===================================================================
--- pcp.orig/src/pmdas/statsd/src/GNUmakefile
+++ pcp/src/pmdas/statsd/src/GNUmakefile
@@ -68,8 +68,8 @@ build-me: $(RAGELTARGET).o $(CMDTARGET)
 install: default
 	$(INSTALL) -m 755 -d $(PMDAADMDIR)
 	$(INSTALL) -m 755 -d $(PMDATMPDIR)
-	$(INSTALL) -m 644 -t $(PMDATMPDIR) domain.h root_statsd $(PMDAADMDIR)
-	$(INSTALL) -m 755 -t $(PMDATMPDIR) $(LIBTARGET) $(CMDTARGET) $(PMDAADMDIR)
+	$(INSTALL) -m 644 -t $(PMDATMPDIR) domain.h root_statsd $(LIBTARGET) $(PMDAADMDIR)
+	$(INSTALL) -m 755 -t $(PMDATMPDIR)/$(CMDTARGET) $(CMDTARGET) $(PMDAADMDIR)/$(CMDTARGET)
 
 CFILES += $(RFILES)
 
Index: pcp/src/zabbix-agent/src/GNUmakefile
===================================================================
--- pcp.orig/src/zabbix-agent/src/GNUmakefile
+++ pcp/src/zabbix-agent/src/GNUmakefile
@@ -43,7 +43,7 @@ install: default
 	$(INSTALL) -m 755 -d $(ZABBIX_DIR)
 	$(INSTALL) -m 755 -d $(MODULE_DIR)
 	$(INSTALL) -m 755 -d $(AGENT_DIR)
-	$(INSTALL) -m 755 $(LIBTARGET) $(AGENT_DIR)/$(LIBTARGET)
+	$(INSTALL) -m 644 $(LIBTARGET) $(AGENT_DIR)/$(LIBTARGET)
 	$(INSTALL) -S $(AGENT_DIR)/$(LIBTARGET) $(MODULE_DIR)/$(LIBTARGET)
 	$(INSTALL) -m 755 -d $(CONFIG_DIR)
 	$(INSTALL) -m 644 $(LIBCONFIG) $(CONFIG_DIR)/$(LIBCONFIG)
