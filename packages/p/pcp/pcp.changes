-------------------------------------------------------------------
Mon Apr 15 10:51:06 UTC 2024 - Dirk MÃ¼ller <dmueller@suse.com>

- move pmlogger_daily into main package (bsc#1222815)
- fix compile flags conflusion

-------------------------------------------------------------------
Wed Apr  3 14:49:06 UTC 2024 - Martin Schreiner <martin.schreiner@suse.com>

- Add fix for bsc#1222121:
  * 0011-disable-redis-proxying-by-default.patch

-------------------------------------------------------------------
Mon Apr  1 01:21:44 UTC 2024 - Martin Schreiner <martin.schreiner@suse.com>

- Upgrade to 6.2.0 (bsc#1217826):
  * Changes from pcp-6.2.0:
    - Client tools and utilities:
    pmlogger: default to creating version 3 PCP archives
    pmie, pmlogger, pmcd, pmproxy: init script hardening to
    run less as root:root, more as pcp:pcp and more safely
    pcp-reboot-init: new systemd service for $PCP_RC_DIR setup
    pcp2arrow: new, export metrics to parquet format for pandas
    pcp-atop: deterministic process sort when handling NULLs
    pcp-atop: update to v2.10.0 upstream code
    pcp-htop: update to latest upstream fixes
    pcp-geolocate: function with older versions of python
    pcp-meminfo: resolve possible 'broken pipe' diagnostics
    pcp-ss: fix handling of listening state sockets to match ss
    pcp-ss: fix the UDP UNCONN vs LISTEN state handling
    - PMDA additions, enhancements and bug fixes:
    pmdaproc: improvements for process accounting metrics
    pmdalinux: add pgpromote* and pgdemote* memory metrics
    pmdalinux: add metric sysfs.module.zswap.max_pool_percent
    pmdalinux: add new SNMP metric network.ip.outtransmits
    pmdasummary: send state change 0 (no change) back to pmcd
    pmdapostgresql: support the psycopg3 python module as well
    pmdaopenmetrics: kepler support - live metrics and logging
    - Server-side utilities and log management scripts:
    pmlogrewrite, pmlogredact: fix for missing data volumes
    pmcd: cosmetic change to avoid pipe2 name clash
    runaspcp: new helper utility for unprivileged rc scripts
    pmnsmerge: be more defensive in qsort comparison routine
    pmlogsize: fix qsort comparison function handling of equality
    - libpcp, libpcp_pmda, libpcp_mmv, libpcp_web and language bindings:
    libpcp: pmOpenLog refactor for handling previous log files
    libpcp: new __pmCleanMapDir routine to aid log culling
    libpcp & pmcd: READY-NOT-READY hardening
    libpcp: avoid possible thread issues (coverity)
    libpcp: refactor pmDupContext for thread safety
    libpcp_import: add guard in pmiPutMark to prevent SIGSEGV
    - Build, infrastructure and packaging updates:
    build: changes to re-enable builds for FreeBSD 12, 13, 14
    build: add diffutils rpm dep as pmdaproc script uses diff
    build: add main.yml for building and publishing container
    build: resolve compiler warnings in various tools/libraries
    packaging: use tmpfiles.d method to create PCP_RUN_DIR
    build: packaging changes for openSUSE 15.5 and 15.6
    debian: do not ship empty directory /usr/lib/pkgconfig
    build: el10 systemd-presets for pmcd/pmie/pmlogger enabling
    build: drop rpm dep on bpftool as local version used only
    build: change perl YAML::XS::LibYAML module to YAML::XS
    - Security Enhanced Linux:
    selinux: policy improvements for CentOS/RHEL 7 and 8
    - Documentation:
    docs: Fedora 39 found some tbl(1)/troff(1) issues, fix
    docs: add an explicit code-of-conduct for PCP
    docs: pmns(5) note that metric names must only contain ASCII
    docs: update the BPF README to describe bpftool reality
  * Changes from pcp-6.1.1:
    - Client tools and utilities:
    pmie: add -o/--format to control output format with archives
    pcp-geolocate: automatic latitude and longitude metric labels
    pcp-atop: fix segv encountered on a multi-node NUMA system
    pcp-atop: add last level cache support using pmdaresctrl
    pcp-htop: updated with latest fixes from htop.dev
    pcp-netstat: without time options report one sample only
    pcp-netstat: add machine header info
    pcp-meminfo: without time options report one sample only
    pcp-meminfo: add machine header info
    pcp-buddyinfo: resolve a key issue when using python v2
    pcp-zoneinfo: ensure determinism in pcp-zoneinfo output
    pcp-zoneinfo: fix failure with older PCP metric instances
    - PMDA additions, enhancements and bug fixes:
    pmdaresctrl: new PMDA for x86_64 last level cache metrics
    pmdafarm: new Seagate Field Access Reliability Metrics PMDA
    pmdadarwin: updated for changes in NFS stats management
    pmdalinux: new mem.util metrics from recent kernel versions
    pmdalinux: new networking metrics relating to MPTcpExt
    pmdasockets: allow sockets with duplicate sources to exist
    pmdabpftrace: rework exit/wait handling to avoid errors
    pmdahaproxy: fixed connect script handling of string quoting
    pmdastatsd: fixed metadata for a couple of metrics
    pmdalinux: fixed semantics for mem.vmstat.nr_free_cma metric
    pmdadenki: simplification and refactoring of metrics
    pmdagfs2: correct permissions of several installed files
    pmdakvm: fixed semantics for kvm.largepages metric
    - Server-side utilities and log management scripts:
    pmproxy: add support for HTTP compression
    pmlogger: rework heuristic for Latest folio creation
    pmlogctl: fix incorrect rewriting of PCP_ARCHIVE_DIR
    pmlogredact: add latitude and longitude labels to redacted set
    pmlogrewrite: resolve a small memory leak
    pmlogrewrite: use PM_CTXFLAG_METADATA_ONLY for speed
    pmcd: add $PMCD_CREDS_TIMEOUT as an alternative to -q
    - libpcp, libpcp_pmda, libpcp_mmv, libpcp_web and language bindings:
    libpcp: new PM_CTXFLAG_METADATA_ONLY flag for pmNewContext
    libpcp: fix a couple of derived metric bugs
    libpcp_web: implement config override by canonical env vars
    - Misc build, infrastructure and packaging updates:
    build: new CI build to keep PCP for MacOS up-to-date
    build: several fixes to tools when compiling with clang
    build: install pmlog[redact,reduce,rewrite] on default PATH
    build: default to using a path-prefixed PCP_PYTHON_PROG
    build: update the Fedora container to f38
    build: drop of i386/i686 architectures from Fedora builds
    build: enable build of pmdalibvirt on CentOS 7 platform
    build: enable Qt6 in Fedora and post-RHEL-9 rpm spec files
    build: add pyodbc rpm dep for pcp-pmda-mssql in RHEL 9
    - Security Enhanced Linux:
    selinux: allow pmproxy use the io_uring API
    selinux: policy fixes for recent AVCs on RHEL 7.9
    selinux: add netlink_kobject_uevent_socket getattr (bpftrace)
    - Documentation:
    man pages: change all to map font CW -> CR for latest groff
    man: note pmseries Redis timeseries load order limitation
  * Changes from pcp-6.1.0:
    - pmlogredact: new command for archive anonymisation
    - pcp-atop: new bar graph visualisation mode
    - pcp-atop: update to atoptool.nl 2.9.1 sources
    - pcp-htop: support dynamic screens (user-configurable tabs)
    - pcp-htop: update to latest upstream source
    - pcp-htop: default screens for filesystems, disks and cgroups
    - pcp-htop: non-default screens for several libbpf modules
    - pcp-htop: fix mishandling of some process argument shading
    - pcp-buddyinfo: new tool reporting Linux buddyinfo stats
    - pcp-meminfo: new tool reporting Linux kernel memory stats
    - pcp-netstat: new tool reporting networking statistics
    - pcp-slabinfo: new tool reporting Linux slabinfo kernel stats
    - pcp-zoneinfo: new tool reporting Linux zoneinfo kernel stats
    - pmsleep,pmpause: add -w where option for systemd annotation
    - pmieconf: move test_action from primary into a separate group
    - pmieconf: update webhook action for better EDA integration
    - pmlogconf: remove latency-inducing fsync on config write
    - pmlogconf: updates for new metrics used in pcp-atop
    - pmdalinux: add three new /proc/vmstat pscan/pgsteal metrics
    - pmdalinux: fix bug when lsb-release is only /etc/*-release file
    - pmdabpf: add -q/--tryload command line option
    - pmdaopenmetrics: reduce transient instance logs, improve labels
    - libpcp: improved SSL error reporting
    - selinux: add policy updates for pmproxy (io_uring,ipc_lock)
    - build: support for Qt6, drop remaining Qt4 configure-support
    - build: updated licence strings in spec files to follow SPDX
    - build: default to using a path-prefixed PCP_PYTHON_PROG
    - build: fix several makefile clean targets for deb packagers
    - build: configure.ac update to autoconf 2.71
    - build: add tarball upload to release workflow
    - docs: pmie updates to explain action behaviour with archives
    - docs: retire "archive log" phrase from man pages and books
    - docs: transition Artifactory (no free service) to Packagecloud
  * Changes from pcp-6.0.5:
    - pmie: ensure pmie.log.YYYYMMDD is owned by pcp:pcp
    - pcp2json: extend pcp2json with an option to send HTTP POSTs
    - pmlogger: fix pidfile update; pmlogger.pid is for primary only
    - pmdumptext: fix scaling when -i command line option is used
    - pmlogextract: improve resilience in corner-case conditions
    - pmdasmart: additional NVME power state metrics
    - pmdasmart: additional NVME disk information metrics
    - pmdasmart: update help with proper description of DC status
    - pmdasmart: filter out zram devices when probing for devices
    - pmdahacluster: handle pacemaker 2.1.5 crm_mon output changes
    - pmcd: improve debugging flags and diagnostics in general
    - libpcp_pmda: refactor and improve library diagnostics
    - selinux: updates to policy for pmlogger and pmlogger_daily
    - build: switch rpm spec files to SPDX license identifiers
    - build, qa: numerous updates to improve PCP on OpenBSD
    - build: switch from registry.centos.org to quay.io for el6/el7
    - ci: add centos6 back into the fold as its on quay.io now
    - ci: add Debian 12, drop Ubuntu 16 and Fedora 35
  * Changes from pcp-6.0.4:
    - pmcd: propogate a new PMCD_HOSTNAME_CHANGE flag to clients
    - pmdumplog: support preferred alternate name pmlogdump
    - pmlogger: changes to accommodate PMCD_HOSTNAME_CHANGE
    - pmlogger_janitor: new script called from pmlogger_check
    - pmlogger: add -d directory argument for alternate naming schemes
    - pmlogrewrite: fix remaining corner case for indom renumbering
    - pmie: changes to accommodate PMCD_HOSTNAME_CHANGE
    - pmie: catching SIGUSR1 triggers a pending task dump
    - pmie_{check,daily}: change pmie.log handling regime
    - pmieconf: add support for a webhook action to pmieconf
    - pmieconf: add a wall rule action for adm group members
    - pmieconf: add support for an action testing rule
    - pmieconf: use correct pmieconf percent type for thermal throttle
    - pmieconf: add minimum pct conjunction to entropy for small poolsizes
    - pminfo: use -b to batch pmDesc retrievals as well as pmResult
    - pmstat: fix corner case handling of automatic pmcd reconnect
    - pcp2influxdb: add requests.post timeout to avoid hangs
    - pcp-dstat: fixes CSV output to show all (not visible) plugins
    - pcp-htop: support File Descriptor Meter
    - pcp-htop: sync latest fixes from upstream htop
    - pcp-mpstat: fixed broken pipe issue
    - pcp-ps: fix exception handling for process name
    - rc scripts: ensure pmcd.conf not rewritten unnecessarily
    - pmdalinux: add a couple of new /proc/net/snmp ICMP metrics
    - pmdalinux: add new network.tcp.tcpplbrehash metric
    - pmdaproc: add new proc.smaps.pss_dirty metric
    - pmdarabbitmq: add timeout handling to http requests
    - pmdastatsd: stats and blocklisted metric names alignment
    - libpcp: new pmAddDerivedText API for derived metric help text
    - libpcp: check level parameter on entry to pmLookupText
    - libpcp: new PMAPI error code addition for bad API arguments
    - libpcp: allow derived metrics semantics of 'similar' indoms
    - selinux: add missing context information on farm services
    - build: fix a number of Debian sub-package dependency issues
  * Changes from pcp-6.0.3:
    - build: fix Debian postinst script handling of missing systemctl
    - pmdaproc: support per-cgroup IRQ PSI metrics in recent kernels
    - pmdalinux: support for system wide IRQ PSI metrics in recent kernels
    - pmlogrewrite: improved handling of unused instance domains
  * Changes from pcp-6.0.2:
    - Client tools and utilities:
    pcp-atop: update to latest upstream atoptool.nl sources
    pcp-atop: cgroup, NUMA memory and NUMA CPU support
    pcp-htop: update to latest upstream htop.dev sources
    pcp-dstat: fix handling of --swap with -f (full) option
    pcp-dstat: fix columns for --net-packets
    pcp-mpstat: fix handling of log-once summary metric values
    pcp-mpstat: improve error handling for the current values
    pcp-ps: added capabilities to show N samples with archives
    pcp-ps: fix handling of the -o option
    pcp-ps: fix broken pipe errors when piping to head(1)
    pcp-ps: fix process "START" column calculation and rounding
    pcp-pidstat: fix broken pipe errors when piping to head(1)
    pmdumplog: extend -x so -xxx reports timestamps in Epoch format
    pmlogger: refactor getting FQDN for local host
    - PMDA additions, enhancements and bug fixes:
    pmdabpf: set config default for biosnoop module to disabled
    pmdabpf: port forward to latest vendored libbpf-tools code
    pmdalinux: boolean metric network.interface.virtual from sysfs
    pmdalinux: more careful slabinfo 32/64 bit type multiplication
    pmdalinux: add NUMA external fragmentation metric via sysfs
    pmdalinux: fix pmid numbering issue with hinv.map.scsi_id
    pmdanfsclient: fix srcport handling for RDMA and UDP mounts
    pmdaopenmetrics: validate all names before using them for metrics
    pmdaoverhead: new PMDA to measure overhead for groups of processes
    pmdastatsd: static metric memory leak fix
    pmdastatsd: ragel parser refactor and fix
    - Server-side utilities and log management scripts:
    pmieconf: new pmie rule checking file descriptor limits
    - libpcp, libpcp_pmda, libpcp_mmv, libpcp_web and language bindings:
    libpcp: fix buffer issue for user/group name lookups
    libpcp_web: improve error handling in pmseries AST parser
    - Misc build, infrastructure and packaging updates:
    configure.ac: fixes for improved C99 compatibility
    configure.ac: use QTDIR search path only when given
    MacOS: build: fix shared library builds on modern Macs
    OpenBSD: build updates for clang, Qt and openssl
    libbpf: updated minimium version to 0.8.0, ARM and PPC support
    Qt: update minimum required versions for libqwt
    Drop no-longer-used pmlogger_daily_report systemd rpm spec code
    Determine clang version without optional llvm-config utility
    Another attempt to get the man/man-db/mandoc stuff sorted
    - Security Enhanced Linux:
    Policy updates for pmdastatsd
    - Documentation and QA infrastructure:
    Add help text for some OpenBSD kernel instance domains
    Provide more detailed explanation for default PMLOGGER_INTERVAL
    pmdaChildren(3): clarify the memory allocation scheme
    pcp-ps(1) man page fixes.
  * Changes from pcp-6.0.1:
    - Security Enhanced Linux:
    selinux: rework policy to use optional_policy
    selinux: rework policy to use an independent policy
    selinux: new cluster_exec_t policy handling for pmdahacluster(1)
    selinux: retire those parts of the build affecting CentOS 6
    - PMDA additions, enhancements and bug fixes:
    pmdabpf: set perf_buffer__poll timeout to 0 for optimal sampling
    pmdabpf: add CO-RE biosnoop
    pmdabpf: no BPF debug messages unless debugging (-Ddev0)
    pmdalinux: add "squashfs" to the list of ignored filesystem types
    pmdasnmp: install agent specific configuration file to PMDATMPDIR
    pmdakvm: initialise perf_event interface only if/when needed
    - Client tools and utilities:
    pcp-ps: initial version of a PCP implementation of ps(1)
    pcp-dstat: add --nomissed command line option for large systems
    pmfind, libpcp_web: MMV and shutdown memory management fixes
    pmlogreduce: fix corner-case in temporal index generation
    pmlogcheck: tighten some pmlogcheck pass0 checks
    pmseries: fix sampling when start < first sample or series has gaps
    shell completion: improve pmrep/zsh instance completion in live mode
    shell tools: convert fgrep and egrep over to grep -F and -E
    - Server-side utilities and log management scripts:
    pmlogger_daily_report: no longer needs any systemd support now
    pmlogger_daily.sh: fix pmlogger_daily_report test for zeroconf
    - libpcp, libpcp_pmda, libpcp_mmv, libpcp_web and language bindings:
    libpcp_web: fix race conditions affecting pmproxy
    libpcp_web: allow scalar operands in pmseries expressions
    libpcp_web: add pmseries float multiplication
    - Misc build, infrastructure and packaging updates:
    build: add PCP archive analysis container
    build: updates to fix Windows platform builds
    build: update configure.ac to allow builds on Mac M1 (arm64)
    build: make openSUSE spec file builds work again
    containers: remove /build directory
    debian: use deb-systemd-helper if available
    build: fix libpcp check-statics regexp error with objects in subdirs
    build: podman PMDA no longer has deps, make it unconditional
    build: don't package and install pmrep xtract-names helper
    build: updates to hiredis code for pmseries and pmproxy
    build: updates to hiredis-cluster code for pmseries and pmproxy
    build: fix Makepkgs handling of argument parameters
    build: use vendored github.com/libbpf/bpftool/libbpf and update
    build: use vendored github.com/iovisor/bcc/libbpf-tools
    build: use vendored git.code.sf.net/p/qwt and update
    build: fix bpf PMDA inclusion check
    build: fix windows default pmcd.conf entry, dup path component
    build: rework Python3 and Python2 configure.ac logic
    packaging: fix rpm systemd-sysusers on f37 and rawhide
    - Documentation and QA infrastructure:
    docs: small typo fixes relating to secure connections
    docs: fix sheet2pcp(1) man page quoting in examples
    pmdasample: additional metrics for testing cases
  * Changes from pcp-6.0.0:
    - Major changes:
    1. Add version 3 PCP archive support: instance domain change-deltas,
       Y2038-safe timestamps, nanosecond-precision timestamps, arbitrary
       timezones support, 64-bit file offsets used throughout for larger
       (beyond 2GB) individual volumes.
       ** Opt-in using the /etc/pcp.conf PCP_ARCHIVE_VERSION setting. **
       ** Version 2 archives remain the default (for next few years). **
    2. Switch to using OpenSSL only throughout PCP (dropped NSS/NSPR);
       this impacts on libpcp, PMAPI clients and PMCD use of encryption;
       these are now configured and used consistently with pmproxy HTTPS
       support and redis-server, which were both already using OpenSSL.
    3. New nanosecond precision timestamp PMAPI calls for PCP library
       interfaces that make use of timestamps.  These are all optional,
       and full backward compatibility is preserved for existing tools.
    - Client tools and utilities:
    pcp2elasticsearch: implement authentication support
    pcp-dstat: implement support for the top-alike plugins
    pcp-dstat: add plugin configuration for ZFS metrics
    pcp-dstat: battery charge remaining config using denki metrics
    pcp-htop: update to latest stable upstream release
    pcp-htop: initial support for screen tabs in the user interface
    pcp-pidstat: correct operation of the -p ALL|SELF options
    pmlogger: small changes for handling derived metrics better
    pmlogger, import: support configurable default archive version
    pcp2xxx: ignore pmrep-specific options
    pmlogger: extra hardening, backtrace symbol improvements
    pmlogger: add -V (output archive version) command line option
    pmseries: add sum(), avg() and stdev() functions
    pmseries: add nth_percentile() and topk() functions
    pmseries: add max_inst() and max_sample() functions
    pmseries: add min_inst() and min_sample() functions
    pmseries: be more defensive during shutdown error paths
    pmseries: fix assumption that any 40-character string is a SID
    pmseries: allow reporting values from SIDs (not just queries)
    sheet2pcp: add -V (output archive version) command line option
    ganglia2pcp: add -V (output archive version) command line option
    iostat2pcp: add -V (output archive version) command line option
    - PMDA additions, enhancements and bug fixes:
    pmdaapache: do time_t manipulation with sufficient space
    pmdabcc: sync bcc PMDA modules with upstream bcc tools
    pmdabpf: adds CO-RE (Compile Once - Run Everywhere) modules
        (exitsnoop, oomkill, bashreadline, mountsnoop, vfsstat,
        opensnoop, fsslower, statsnoop, tcpconnlat, tcpconnect)
    pmdabpf: support x86, arm and powerpc
    pmdabpf: fixed persistence of indom and cluster identifiers
    pmdabpf: rework setrlimit() logic for some small memory hosts
    pmdabpftrace: move example autostart scripts to /usr/share
    pmdabpftrace: update biolatency example script for kernel 5.16+
    pmdadenki: fix battery detection for non-intel systems
    pmdadenki: add support for multiple active batteries
    pmdadenki: support the -D option for debugging
    pmdadenki: improve labels associated with metrics
    pmdadenki: add battery capacity metric
    pmdadenki: add separate indom help text
    pmdalinux: add new MpTcpExt metrics from latest Linux 5.x kernels
    pmdalinux: updates for latest /proc/net/netstat kernel changes
    pmdalinux: improve network metrics help text
    pmdalinux: fix of tty metrics on s390x platform
    pmdamailq: update to ensure Y2038-safe time_t handling
    pmdammv: use highest available timestamp resolution
    pmdaopenvswitch: additional interface and coverage stats
    pmdapostfix: harden against a not-yet-running postfix
    pmdaproc: fix psargs string for processes with very large PIDs
    pmdaproc: fix cgroup cpu metrics refresh structures
    pmdasockets: prevent string overwrite of ss_stats_t fields
    pmdasockets: add checking to the pmStore filter strings
    pmdastatsd: fix detection of failure memory allocation
    - Server-side utilities and log management scripts:
    pmproxy: allow request parameters to be sent in the request body
    pmproxy: fix race on teardown of pcp protocol proxy clients
    pmproxy: improve error checking, check uv_pipe_bind result
    pmproxy: harden logging interfaces, racing with startup
    pmieconf: add several pmie rules for Open vSwitch metrics
    pmlogrewrite: subtle change in semantics for error checking
    pmlogreduce: allow sub-second values for -t option
    pmlogreduce: temporal index, add entries after 100k of data volume
    pmlogcheck: beef up pass 0 to check metadata record types
    pmlogconf: fix reprobing with interactive changes
    pmlogmv: fallback to copy for cross-mount case when link fails
    pmlogmv: add -c (paranoid checksum) option
    pmlogger_farm: add default configuration file for farm loggers
    pmlogger_check: increase PMLOGGER_REQUEST_TIMEOUT from 2 to 10 secs
    pmlogger_daily: callbacks for extra daily log processing tasks
    pmlogger_daily, pmlogger_check: additional systemd-driven changes
    pmlogger_daily: move redirection of stdout+stderr earlier in script
    pmlogger_daily: abandom use of fmt(1) - not portable - uses awk now
    pmlogger_daily_report.sh: some major efficiency improvements
    pmlogger_daily_report: re-enabled for rpm and deb builds
    pmie_check: avoid leaving lock file and temp dir behind
    pm{log,ie}ctl: handle embedded shell syntax in control lines
    pm{log,ie}ctl: add -C args option to pass "args" to pm{logger,ie}_check
    systemd units: pmlogger and pmie farm conditional use of type=exec
    rc-pmcd: reorder the systemd paths attempted in migrate_pid_cgroup
    dbpmda: fix an overlapping copy and add error handling
    - libpcp, libpcp_pmda, libpcp_mmv, libpcp_web and language bindings:
    libpcp_archive: new library for apps that write PCP archives
    libpcp: optimize indom handling in fetchgroup code
    libpcp: drop time_t abuse in getdate.y, use safe sizes
    libpcp: add __pmDumpPDUTrace() and circular trace buffer
    libpcp: add PM_ERR_FEATURE, PM_ERR_TLS error codes
    libpcp: refactor __pmDumpStack(), improve direct calling tools
    libpcp_qmc: require Qt5.6 as the minimum version for builds
    libpcp_qmc: resolve the Qt::endl warning more cleanly
    libpcp_web: stop Redis initialization if Redis version tool old
    libpcp_web: honour config settings that disable redis completely
    libpcp_web: fix memory leaks in discovery, query parsing and APIs
    libpcp_web: honor exclude.metrics setting in pmseries --load
    libpcp_web: run pmFetchArchive(3) in a worker thread
    libpcp_web: fix race condition tearing down load baton
    libpcp_pmda: ensure indom cache write handles time_t safely
    libpcp_import: add interface for setting output log version
    libpcp_import: interfaces for samples with high-resolution timestamps
    python api: updates to allow building from outside git repo
    python api: allow tools using pmconfig module to ignore options
    python api: add python wrappers for highres PMAPI routines
    python api: correct refcounting on pmParseMetricSpec source buffer
    - Security Enhanced Linux:
    selinux: additional policy rules, esp glusterd_log_t
    selinux: bcc PMDA policy to exec private memfd ctypes/libffi objects
    selinux: make use of syslogd_var_run_t map rule conditional
    selinux: policy updates needed for the pmdasockets metrics
    selinux: fine-tune netlink_tcpdiag_socket policy for all platforms
    - Misc build, infrastructure and packaging updates:
    build: latest distros supported (ubuntu 22.04, fedora 37, rhel9, etc)
    build: reproducible debian build efforts
    build: use standard dpkg buildflags variables.
    build: add BuildRequires: python*-pymongo to mongodb PMDA
    build: detect libbpf version for the BPF PMDA
    build: do not transform symlink targets when generating the source tarball
    build: update artifactory deploy script, add recalculate_metadata subtask
    build: update configure script for python2 retirement in rhel9
    build: convert libpcp check-statics to using readelf if available
    build: updates to libpcp check-statics for OpenBSD
    build: fix configure detection of backtrace() and associated hooks
    build: fixed source dependencies within libpcp_web makefile
    build: add rpm conflicts lines on postgresql-pgpool-II
    build: remove pmclient reliance on libpcp.h for timed sleep
    build: remove mmvdump reliance on libpcp.h for mmap wrapper
    build: make perl truly conditional in the PCP build
    build: drop no-longer-needed NSS/NSPR package deps
    build: resolve ostree non-writable /var for pmieconf
    packaging: update rpm specs to solve systemd warnings
    container: bump base image version
    Makepkgs: fix for Debian build (and Qt packaging failure in CI)
    vendor: switch to git-subtree for iovisor/bcc libbpf-tools code
    - Documentation and QA infrastructure:
    docs: update notes about sar2pcp, iostat2pcp in pcpcompat(1)
    docs: add section to pcpcompat(1) about python2
    docs: add fix for readthedocs compilation error
    docs: updates to the Quick Guide documents
    docs: clatifications to pmrep et al: man pages
    docs: improve pmproxy timeseries and pmseries load documentation
    docs: further improvements and fixes to the INSTALL doc
    docs: add pmlogger(1) -V, describe $PCP_ARCHIVE_VERSION in pcp.conf.
    docs: small fixes to the pcp-pidstat man page
    docs: fix webapi documentation typo around polltimeout
    pylint: numerous issues resolved, tracking latest versions
    qa: regression tests for bpftrace PMDA: check probes
    qa: pmdabcc pylint fixups
    qa: rework Redis PING-PONG checks
    qa/check: run tests under timeout(1) control if possible
    qa-summary: allow unified reporting from CI and QA Farm
    qa/admin/show-me-all & qa/show-me: changes for CI integration
    qa/check: add support for "triaged" tests
    ci: send report to Slack when QA workflow is triggered manually
    ci: add required packages to enable bpf PMDA on CentOS Stream 9
    ci: run CodeQL daily and for each PR
    ci: run full QA on pull requests, save history
    ci: unset XDG_RUNTIME_DIR when invoking podman
- Refresh patches:
  * 0001-Install-libraries-without-exec-permission.patch
  * 0002-Remove-CPAN-rpaths.patch
  * 0003-Remove-runlevel-4-from-init-scripts.patch
  * 0010-services-switch-logutil-and-pmieutil-scripts-from-ty.patch
- Change dependency from openssl-devel >= 1.1.1 to openssl-devel >= 1.0.2p.
  Required for SLE-12, builds just fine.
- Disable 'pmda-infiniband' subpackage for SLE-12.
  Required so it builds cleanly.
- Introduce pmda-resctrl package, disabled for architectures other
  than x86_64.
- Change the architecture for various subpackages to 'noarch' as they
  contain no binaries, this lowers rpmlint's badness score
  substantially.
- Disable 'pmda-mssql', as it fails to build.

-------------------------------------------------------------------
Thu Feb 29 14:50:14 UTC 2024 - Dominique Leuenberger <dimstar@opensuse.org>

- Use %autosetup macro. Allows to eliminate the usage of deprecated
  %patchN.

-------------------------------------------------------------------
Thu Feb  1 22:51:16 UTC 2024 - Tina MÃ¼ller <tina.mueller@suse.com>

- Change YAML::XS::LibYAML to YAML::XS as this is the module to be used

-------------------------------------------------------------------
Thu Dec 14 10:36:41 CET 2023 - mls@suse.de

- declare the users/groups we create in the preinstall scripts
  (this is needed for newer rpm versions)

-------------------------------------------------------------------
Tue Nov 28 00:33:12 UTC 2023 - Martin Schreiner <martin.schreiner@suse.com>

- This version *does not* break API or ABI compatibility with the
  previous 5.2.5 release.
- Remove 0009-remove-rundir-install.patch. Obsoleted.
- Remove 0011-Revert-systemd-remove-Wants-pmcd-from-pmlogger-and-p.patch.
  Obsoleted.
- Various minor changes/improvements to the RPM spec file.
- Upgrade to 5.3.7. This is the latest release in the 5.X series.
  Changes from 5.3.7:
  - Client tools and utilities:
    pcp2elasticsearch: implement authentication support
    pcp-ss: fixed incorrect client-side filtering
    pcp-ss: fixed reporting of IPv6 sockets in LISTEN state
    pmrep: 'iostat-multipath-wwid' for multipath disk monitoring
  - PMDA additions, enhancements and bug fixes:
    pmdalinux: add disk.wwid.* aggregated multipath metrics
    pmdalinux: add new MPTCP metrics from latest Linux kernel versions
    pmdalinux: fix up TTY metrics on s390x platform
    pmdalinux: add network.tcp.tcploss metric
    pmdamssql: fix config file logic, python string handling
    pmdadenki: fix crash in labels callback with multiple instances
    pmdasockets: changed default filter in sockets PMDA to "state all"
  - Server-side utilities and log management scripts:
    pmlogconf: correctly handle metric state transitions on (re-)probe
    pmie systemd: add missing systemd configuration and shell code
  - libpcp, libpcp_pmda, libpcp_mmv, libpcp_web and language bindings:
    libpcp_web: resolve a number of small memory leaks
  - Security Enhanced Linux:
    selinux: use interface calls instead of a simple rule
    selinux: add several more obscure missing selinux rules
    selinux: additional debugfs policy requirement for pmdakvm
    selinux: resolve an AVC observed on el8 with pmdashping
  - Misc build, infrastructure and packaging updates:
    rpms: switch to conditional selinux dependency for containers
    debs: reproducible build updates
  - Documentation and QA infrastructure:
    docs: add section to pcpcompat(1) about python2
    docs: update notes about sar2pcp, iostat2pcp in pcpcompat(1)
    docs: improve pmproxy --timeseries and pmseries --load documentation
    CI: disable cppcheck for pcp-atop temporarily due to a cppcheck bug

  Changes from 5.3.6:
  https://github.com/performancecopilot/pcp/blob/f3fdd468d09c6e1158433210380a40389516a971/CHANGELOG#L468

  Changes from 5.3.5:
  https://github.com/performancecopilot/pcp/blob/f3fdd468d09c6e1158433210380a40389516a971/CHANGELOG#L497

  Changes from 5.3.4:
  https://github.com/performancecopilot/pcp/blob/f3fdd468d09c6e1158433210380a40389516a971/CHANGELOG#L557

  Changes from 5.3.3:
  https://github.com/performancecopilot/pcp/blob/f3fdd468d09c6e1158433210380a40389516a971/CHANGELOG#L606

  Changes from 5.3.2:
  https://github.com/performancecopilot/pcp/blob/f3fdd468d09c6e1158433210380a40389516a971/CHANGELOG#L665

  Changes from 5.3.1:
  https://github.com/performancecopilot/pcp/blob/f3fdd468d09c6e1158433210380a40389516a971/CHANGELOG#L753

  Changes from 5.3.0:
  https://github.com/performancecopilot/pcp/blob/f3fdd468d09c6e1158433210380a40389516a971/CHANGELOG#L854

-------------------------------------------------------------------
Fri Nov 17 15:55:08 UTC 2023 - Dominique Leuenberger <dimstar@opensuse.org>

- Only auto-trigger pcp-pmda-postfix for automatic installation
  when pcp and postfix are present. Supplementing pcp alone would
  auto-install postfix on all systems.
- Supplement pcp-pmda-rsyslog against pcp and rsyslog.

-------------------------------------------------------------------
Tue Aug 30 12:50:27 UTC 2022 - David Disseldorp <ddiss@suse.com>

- Add back Wants=pmcd from pmlogger and pmie services; (bsc#1202896)
  + 0011-Revert-systemd-remove-Wants-pmcd-from-pmlogger-and-p.patch

-------------------------------------------------------------------
Wed Jun  8 21:33:14 UTC 2022 - David Disseldorp <ddiss@suse.com>

- Workaround intermittent build-time package preun failures by dropping
  PMDA Remove script invocation; (bsc#1197796)

-------------------------------------------------------------------
Tue Jun  7 16:43:41 UTC 2022 - David Disseldorp <ddiss@suse.com>

- Adjust systemd service types and remove deprecated KillMode=none;
  (bsc#1186511)
  + 0010-services-switch-logutil-and-pmieutil-scripts-from-ty.patch

-------------------------------------------------------------------
Mon May 16 14:22:19 UTC 2022 - David Disseldorp <ddiss@suse.com>

- Upgrade to 5.2.5
- Client tools and utilities:
  + pcp-dstat: correct the sample count logic, was off-by-one
  + pcp-dstat: fix csv output with timestamps (no special chars)
- PMDA additions, enhancements and bug fixes:
  + pmdazfs: new Linux ZFS metrics
  + pmdasockets: new Linux ss(1) metrics
  + pmdahacluster: new HA metrics (Pacemaker, Corosync, DRBD and SBD)
  + pmdabcc: netproc module: count kernel calls, not packets
  + pmdalinux: add hinv.cpu.thermal_throttle metrics
  + pmdalinux: add missing help text for new metrics, drop dups
- Server-side utilities and log management scripts:
  + pmproxy: fix quoting of /series/metrics matched names
  + pmlogger: fix permissions mismatch for pmlogger tmp dir
  + pmlogger: fix incorrect reporting of pmcd state changes
  + pmie_check: explicity set a umask appropriate for pmieconf
  + pmlogger_check: explicity set a umask appropriate for pmlogconf
  + pmlogger_check: skip .NeedRewrite processing with -K
  + pmpost: increase timestamp resolution
  + pmpost: fix NOTICES file ownership changes
  + rc scripts: add optional logging
  + systemd: remove Wants=pmcd from pmlogger and pmie
- libpcp, libpcp_pmda, libpcp_mmv, libpcp_web and language bindings
  + libpcp: redo the interp.c time_caliper changes
  + libpcp_web: add timer driven webgroup garbage collector
  + libpcp_pmda: add new function pmdaCachePurgeCallback
- Misc build, infrastructure and packaging updates:
  + libpcp_web: fix minor memory leak on an error path (covscan)
  + build: fixes to ensure PCP_TMPFILE_DIR not used during the build
    drop upstream 0007-pmns-Make-drop-duplicate-if-else.patch
    drop upstream 0008-fixes-for-GH-1140-PCP_TMPFILE_DIR-used-in-build.patch
- Security Enhanced Linux:
  + selinux: enable netcheck rawip_socket if icmp_socket unavailable
  + selinux: additional rules needed for pmie/pmlogger in fedora
- Documentation and QA infrastructure:
  + docs: add pointers to readthedocs.io now that books live there
  + pcp-dstat: optionally install a man page symlink for dstat
  + docs: pmproxy(1) man page corrections and additions

- Upgrade to 5.2.3
- Client tools and utilities:
  + pcp-htop: minimal version of htop with PCP backend platform
  + pcp-atop: add per-process network statistics
  + pcp-atop: result instance indexing performance optimization
  + pcp-atop: always restore original state of process accounting
  + pcp2elasticsearch: add guard around maximum long integer size
  + pmlogsummary: fix indom lookup for dynamic instance domains
  + pmseries: provide sum() and avg() query functions
  + pmseries: persist canonical query expressions to Redis
  + pmseries: fix HMSET calls when querying timeseries expression
  + pmseries: fix for failing queries with disjuncted qualifiers
  + pmseries: fix segfault in func call with globbed metric.name
- Server-side utilities and log management scripts:
  + pmproxy: support fabricated SIDs in /series/instances requests
  + pmproxy: support fabricated SIDs in /series/metrics requests
  + pmlogger_check: add pmlc connection timeout checking current volume
  + pmlogctl,pmiectl: ignore saved control files after an upgrade
  + pmlogconf: add missing mssql template header
  + pmlogconf: add logger configuration files for the htop command
  + pmieconf: add a rule to detect and report OOM kills
  + pmieconf: cleanup old, no-longer-used tool integrations
  + pmieconf: ensure all automated invocations use the -c switch
  + pmieconf: fix default generated config file path
  + pmie_check: remove a tempfile once finished with it
- PMDA additions, enhancements and bug fixes:
  + pmdaapache: fix buffer size to allow for multiple reads of the stream
  + pmdabcc: added new netproc module with per-process network metrics
  + pmdaproc: allow to use acct.control.enable_acct as reference counting
  + pmdalinux: added network.all.* metrics for physical interfaces
  + pmdalinux: fix case of waitio counters from /proc/stat going backwards
  + pmdalinux: minor tweaks to use integer math over floating point
  + dbpmda: send inst profile prior to instances level label requests
- libpcp, libpcp_pmda, libpcp_mmv, libpcp_web and language bindings
  + libpcp: performance improvements for archives with dynamic indoms
  + libpcp: send instance profile for instances level labels requests
  + libpcp: make pmLookupName take a (const char **) namelist
  + libpcp_web: set pmseries source to all-zeroes for expressions
  + libpcp_web: handle fabricated SIDs in /series/values REST API
  + python api: fix fetchgroup max_insts size with multiple indoms
- Misc build, infrastructure and packaging updates:
- Security Enhanced Linux:
  + selinux: use matching autoconf guard for rawip_socket class
- Documentation and QA infrastructure:
  + docs: update pmdabpftrace man page and README
  + docs: improvements in diagrams
  + docs: theme_overrides.css added for readthedocs content
  + docs: pmseries(1) chapter added in Users and Administrators Guide
  + docs: add quotes to curl calls with * in pmwebapi query strings
  + docs: update pmseries schema to describe expression keys

-------------------------------------------------------------------
Mon May 16 07:30:26 UTC 2022 - Dominique Leuenberger <dimstar@opensuse.org>

- Fix a few rpmlint errors (to at least get below the 1000 mark)
  (boo#1199558):
  + make libpcp-devel require libpcp_gui: the devel package
    installs a symlink pointing to that library, so anything
    willing to link it would fail
    libpcp-devel.x86_64: E: no-library-dependency-on libpcp_gui2 /usr/lib64/libpcp_gui.so.2
    The package misses dependency on a package which file it links to.
  + Call fdupes over /var/lib/pcp/testsuite to solve
    pcp-testsuite.x86_64: W: files-duplicate
  + W: macro-in-comment: escape the relevant macros using %%
  + Filter out W: potential-bashisms for pcp-testsuite.

-------------------------------------------------------------------
Mon Feb  7 16:25:45 UTC 2022 - Dominique Leuenberger <dimstar@opensuse.org>

- Own %{_datadir}/zsh and %{_datadir}/zsh/site-functions: we have
  no guaranteed owner of these directories in the buildroot.

-------------------------------------------------------------------
Mon Dec 13 13:48:47 UTC 2021 - Thorsten Kukuk <kukuk@suse.com>

- Remove sysconfig dependencies, this is not the equivalent of
  the initscripts package and completly unneeded here; (jsc#CSD-124)
- Add missing hostname requires; (jsc#CSD-124)

-------------------------------------------------------------------
Tue May 11 17:12:16 CEST 2021 - ro@suse.de

- also buildrequire pkgconfig(systemd) to make sure configure
  detects systemd

-------------------------------------------------------------------
Sat Mar 13 12:41:03 UTC 2021 - Jan Engelhardt <jengelh@inai.de>

- Replace ancient RPM variables by modern equivalents.
- Drop support for ancient SUSE and ancient Fedora.

-------------------------------------------------------------------
Sun Feb 14 21:43:28 UTC 2021 - David Disseldorp <ddiss@suse.com>

- Spec file fixes and cleanups
  + disable pcp-export-zabbix-agent to avoid conflicting /etc/zabbix/
    ownership.
  + fix unversioned Provides
  + remove unused python2 build logic and unconditionally enable python3
  + 0009-remove-rundir-install.patch
- Add SUSE specific dejavu-fonts dependency for pcp-gui sans
- Disable pcp-pmda-libvirt to avoid build dependency loop

-------------------------------------------------------------------
Wed Feb 10 11:03:13 UTC 2021 - David Disseldorp <ddiss@suse.com>

- Drop unnecessary %pre/%post recursive chown calls; (bsc#1152533)
- Changelog for patches carried as part of 5.2.2 source tarball:
  + build-drop-old-config-file-transition-code-from-rpm-.patch
  + 0007-pmdas-perf-Add-cpunumber-option-for-dynamic-perf-eve.patch
  + 0008-pmdas-perf-Add-support-for-hv_24x7-nest-events-on-mu.patch
  + 0009-qa-perfevent-Test-hv_24x7-events-on-multinode.patch

-------------------------------------------------------------------
Thu Nov 19 11:39:51 UTC 2020 - David Disseldorp <ddiss@suse.com>

- Upgrade to 5.2.2; (jsc#SLE-16929)
  + improvements to client tools and utilities
  + new pmdabpftrace monitoring agent
  + pmdaperfevent enhancements
  + pmproxy, libpcp_web and libpcp hardening and improvements
  + assorted bug fixes
  + obsolete pcp-manager discovery service, now provided by pmfind
  + improved FHS compliance
- Remove upstreamed:
  + 0001-Add-missing-includes-in-Qt-5.15-beta2.patch
- Rebase against upstream (faeb2507f):
  + 0001-Install-libraries-without-exec-permission.patch
- Fix build with -fno-common; (bsc#1160411)
- Merge upstream build-time tmpdir fixes
  + 0007-pmns-Make-drop-duplicate-if-else.patch
  + 0008-fixes-for-GH-1140-PCP_TMPFILE_DIR-used-in-build.patch

-------------------------------------------------------------------
Wed Aug 19 11:33:20 UTC 2020 - Dominique Leuenberger <dimstar@opensuse.org>

- Do not mangle libexecdir: the distro defaults are right in all
  cases.

-------------------------------------------------------------------
Wed Apr 22 04:21:13 UTC 2020 - Martin LiÅ¡ka <mliska@suse.cz>

- Add -fcommon in order to fix boo#1160411.

-------------------------------------------------------------------
Fri Mar 27 09:43:05 UTC 2020 - Antonio Larrosa <alarrosa@suse.com>

- Add patch (submitted to upstream) to fix missing includes with Qt 5.15:
  * 0001-Add-missing-includes-in-Qt-5.15-beta2.patch

-------------------------------------------------------------------
Wed Feb 26 10:57:30 UTC 2020 - Michal Suchanek <msuchanek@suse.de>

- hv24x7 support (bsc#1155054 ltc#182081).
  + 0007-pmdas-perf-Add-cpunumber-option-for-dynamic-perf-eve.patch
  + 0008-pmdas-perf-Add-support-for-hv_24x7-nest-events-on-mu.patch
  + 0009-qa-perfevent-Test-hv_24x7-events-on-multinode.patch

-------------------------------------------------------------------
Fri Jan 24 15:56:53 UTC 2020 - David Disseldorp <ddiss@suse.com>

- Fix for security advisory CVE-2019-3696; (bsc#1153921)
  + code change already carried
- Fix for security advisory CVE-2019-3695; (bsc#1152763)
  + build-drop-old-config-file-transition-code-from-rpm-.patch

-------------------------------------------------------------------
Thu Dec 19 14:41:01 UTC 2019 - Dominique Leuenberger <dimstar@opensuse.org>

- BuildRequire pkgconfig(libsystemd) instead of systemd-devel:
  allow OBS to shortcut through -mini flavors.

-------------------------------------------------------------------
Tue Oct  1 15:17:34 UTC 2019 - Ludwig Nussel <lnussel@suse.de>

- don't call 'cd' avoid relying on $HOME beeing set during rpm installation

-------------------------------------------------------------------
Wed Aug 28 10:17:39 UTC 2019 - David Disseldorp <ddiss@suse.com>

- Fix python library dependencies broken via shared library packaging policy
  split; (bsc#1129991).

-------------------------------------------------------------------
Wed Aug 21 14:30:44 UTC 2019 - David Disseldorp <ddiss@suse.com>

- Upgrade to 4.3.4
  + pmchart, pmseries, pcp-dstat, pmrep and pcp-atop UI fixes and
    improvements
  + pmdalinux, pmdaproc and pmdabcc fixes
  + pmproxy REST API changes and TLS support
  + libpcp_pmda and libpcp_web fixes and support for Redis clustering
  + various build and documentation changes
  + libpcp_web: refactoring and support for Redis cluster protocol
  + deprecate pmdapapi, upgrade to perfevent

-------------------------------------------------------------------
Wed Apr 24 17:29:39 UTC 2019 - Martin LiÅ¡ka <mliska@suse.cz>

- Disable LTO (boo#1133273).

-------------------------------------------------------------------
Fri Mar  8 16:04:30 UTC 2019 - David Disseldorp <ddiss@suse.com>

- Split out zeroconf, pmda-haproxy, pmda-smart, pmda-prometheus,
  pcp2elasticsearch, pcp2json, pcp2spark, and pmlogger_daily_report files
  into separate packages, matching upstream; (bsc#1128523).
- Fix incorrect dependencies for rewritten monitoring agents; (bsc#1128606).
- Ensure symlink sources and targets are in the same package; (bsc#1127978).
- Move pcp-dstat into the pcp-system-tools package; (bsc#1127978).

-------------------------------------------------------------------
Thu Mar  7 11:48:47 UTC 2019 - Bernhard Wiedemann <bwiedemann@suse.com>

- drop unreproducible perfevent_coverage program (boo#1040589)
- override build date to make package build reproducible (boo#1047218)

-------------------------------------------------------------------
Thu Feb 28 23:04:12 UTC 2019 - ddiss@suse.com

- Upgrade to 4.3.1; (bsc#1127437).
  + Add proper systemd timer service dependency tracking
  + pmrep: fix a dynamic header corner case with missing values
  + pmie: fix for segv and bad sum_inst() use
  + pmview: fix a missing timeout slot connection

- Drop upstreamed patches:
  0004-create-pmlogger-and-pmie-logdirs-during-install.patch
  0007-pmie-add-systemd-timers-as-cron-alternative.patch
  0008-pmlogger_daily-add-systemd-timers-as-cron-alternativ.patch
  0009-pmlogger_daily_report-add-systemd-timers-as-cron-alt.patch
  0010-pmns-don-t-package-.NeedRebuild-for-SUSE-distros.patch

-------------------------------------------------------------------
Tue Feb 19 14:19:03 UTC 2019 - ddiss@suse.com

- Drop python2 support for Factory and SLES15-SP1; (bsc#1077777).

-------------------------------------------------------------------
Wed Feb  6 14:21:04 UTC 2019 - ddiss@suse.com

- export PACKAGE_DISTRIBUTION="suse" for build; (bsc#1123311).

-------------------------------------------------------------------
Thu Jan 31 12:58:08 UTC 2019 - ddiss@suse.com

- Drop distribution-release build dependency completely; (bsc#1123311).
  + modify 0010-pmns-don-t-package-.NeedRebuild-for-SUSE-distros.patch

-------------------------------------------------------------------
Wed Jan 30 10:33:12 UTC 2019 - ddiss@suse.com

- Replace openSUSE/sles-release build dependency; (bsc#1123311).

-------------------------------------------------------------------
Fri Jan 18 13:13:04 UTC 2019 - ddiss@suse.com

- Drop conflicting dstat symlink; (bsc#1122502).

-------------------------------------------------------------------
Tue Jan 15 00:17:33 UTC 2019 - ddiss@suse.com

- Package missing PMDA binaries; (bsc#1121920).
  + refresh 0001-Install-libraries-without-exec-permission.patch
- Don't package pmns .NeedRebuild flag; (bsc#1092160).
  + add 0010-pmns-don-t-package-.NeedRebuild-for-SUSE-distros.patch

-------------------------------------------------------------------
Thu Jan 10 17:23:03 UTC 2019 - ddiss@suse.com

- Upgrade to 4.3.0; (bsc#1121914).

- Refreshed patches
  0001-Install-libraries-without-exec-permission.patch
  0007-pmie-add-systemd-timers-as-cron-alternative.patch
  0008-pmlogger_daily-add-systemd-timers-as-cron-alternativ.patch
  0009-pmlogger_daily_report-add-systemd-timers-as-cron-alt.patch

-------------------------------------------------------------------
Tue Jan  8 14:54:12 UTC 2019 - Jan Engelhardt <jengelh@inai.de>

- Combine systemd service calls to save on macro
  generated boilerplate.

-------------------------------------------------------------------
Mon Jan  7 15:36:54 UTC 2019 - ddiss@suse.com

- Use systemd timers instead of crontab; (bsc#1115413).
  + 0007-pmie-add-systemd-timers-as-cron-alternative.patch
  + 0008-pmlogger_daily-add-systemd-timers-as-cron-alternativ.patch
  + 0009-pmlogger_daily_report-add-systemd-timers-as-cron-alt.patch

-------------------------------------------------------------------
Fri Dec  7 14:31:07 UTC 2018 - ddiss@suse.com

- Upgrade to 4.2.0 (fate#326865)

- python package dependency changes
  + add setuptools and python-requests
  + fix python-jsonpointer
  + disable pcp-pmda-postgresql due to missing psycopg2 dependency

-------------------------------------------------------------------
Fri Sep  7 10:39:49 UTC 2018 - kkaempf@suse.com

- Upgrade to 4.1.1

- renamed patches
  0002-Install-libraries-without-exec-permission.patch
  to 0001-Install-libraries-without-exec-permission.patch
  0005-Remove-runlevel-4-from-init-scripts.patch
  to 0003-Remove-runlevel-4-from-init-scripts.patch
  0006-create-pmlogger-and-pmie-logdirs-during-install.patch
  to 0004-create-pmlogger-and-pmie-logdirs-during-install.patch
  0008-SUSE-fy-pmsnap-control-path.patch
  to 0005-SUSE-fy-pmsnap-control-path.patch
  0009-pmsnap-control-var-www-srv-www.patch
  to 0006-pmsnap-control-var-www-srv-www.patch

- obsolete (upstream)
  sysmacros.patch
  0003-pcp-legacy-init-lsb.patch
  0007-Honor-CFLAGS-in-qmake.patch

- new
  0002-Remove-CPAN-rpaths.patch
  0003-pcp-legacy-init-lsb.patch
  0007-Honor-CFLAGS-in-qmake.patch

-------------------------------------------------------------------
Mon Aug  6 09:30:46 UTC 2018 - schwab@suse.de

- sysmacros.patch: Include <sys/sysmacros.h> for major/minor/makedev
- Use %license for COPYING
- Don't exclude post-build-checks

-------------------------------------------------------------------
Thu Nov 23 13:41:01 UTC 2017 - rbrown@suse.com

- Replace references to /var/adm/fillup-templates with new
  %_fillupdir macro (boo#1069468)

-------------------------------------------------------------------
Wed Aug 30 23:30:36 UTC 2017 - ddiss@suse.com

- Enable QT5 builds for Factory (suse_version > 1320); (bsc#1056477).

-------------------------------------------------------------------
Wed Aug 30 12:38:58 UTC 2017 - ddiss@suse.com

- Ensure sysconfig files are populated from templates during installation;
  (bsc#1056397).

-------------------------------------------------------------------
Thu Aug 24 15:42:33 UTC 2017 - ddiss@suse.com

- Add weak pcp dependency to pmdas that were split out from the base package
  in the 3.10->3.11 update; (bsc#1055503).

-------------------------------------------------------------------
Mon Jun 19 23:09:32 UTC 2017 - ddiss@suse.com

- Follow the shared library packaging policy and split libpcp_gui.so.2,
  libpcp_mmv.so.1, libpcp_trace.so.2, libpcp_import.so.1 and libpcp_web.so.1
  out from libpcp3 into separate packages.
- Drop a number of unneeded explicit library package Requires.
- Fix a number of file manifest conflicts.
- Drop lio pmda on SUSE systems without proper rtslib-fb dependency.

-------------------------------------------------------------------
Sun Jun 18 19:53:55 UTC 2017 - ddiss@suse.com

- Update to 3.11.9
  See http://git.pcp.io/cgi-bin/gitweb.cgi?p=pcp/pcp.git;a=blob_plain;f=CHANGELOG;hb=3.11.9
  for details.

-------------------------------------------------------------------
Fri Mar 31 12:42:00 UTC 2017 - ddiss@suse.com

- Disable remote _service execution
  + Run locally and add generated tarball and spec file

-------------------------------------------------------------------
Mon Mar 27 15:13:39 UTC 2017 - ddiss@suse.com

- Update to 3.11.8
  See http://git.pcp.io/cgi-bin/gitweb.cgi?p=pcp/pcp.git;a=blob_plain;f=CHANGELOG;hb=3.11.8
  for details.

- Remove 0010-build-do-not-include-.gitignore-in-installed-file-se.patch
  + Upstream

- Drop pcp-webjs.src.tar.gz
  + https://github.com/performancecopilot/pcp-webjs/issues/3
  + Vector will be pulled in from the upstream source in future

- Enable pmda-systemd package
  + libsystemd pkg-config detection fixed upstream

- New packages
  + pcp-devel: Upstream split of non-essential devel packages from
    libpcp-devel
  + pcp-pmda-bind2
  + pcp-pmda-docker
  + pcp-pmda-lio
  + pcp-pmda-nutcracker
  + pcp-pmda-oracle
  + pcp-pmda-redis
  + pcp-pmda-libvirt
  + pcp-export-pcp2influxdb

-------------------------------------------------------------------
Wed Mar 22 15:06:13 UTC 2017 - ddiss@suse.com

- Update to 3.10.9
  See http://git.pcp.io/cgi-bin/gitweb.cgi?p=pcp/pcp.git;a=blob_plain;f=CHANGELOG;hb=3.10.9
  for details.

- Drop obsolete 0001-Fix-XEN-build.patch
  + PCP_PS_ALL_FLAGS now used explicitly
- Add 0010-build-do-not-include-.gitignore-in-installed-file-se.patch

- Split out a number of agents from the base package into separate rpms
- Disable sheet2pcp
  + As per upstream: "until BZ 830923 and BZ 754678 are resolved".

-------------------------------------------------------------------
Tue Feb 28 18:09:50 UTC 2017 - ddiss@suse.com

- Add _service file for pulling directly from the upstream Git repository.

-------------------------------------------------------------------
Thu Apr 16 09:14:35 UTC 2015 - ddiss@suse.com

- Update to 3.10.4
  See http://git.pcp.io/cgi-bin/gitweb.cgi?p=pcp/pcp.git;a=blob_plain;f=CHANGELOG;hb=3.10.4
  for details.

-------------------------------------------------------------------
Wed Mar 18 23:13:23 UTC 2015 - ddiss@suse.com

- Ensure the perl modules correctly link against the PCP libraries;
  (bnc#841204).
  + remove 0004-Remove-CPAN-rpaths.patch

-------------------------------------------------------------------
Tue Mar  3 14:08:18 UTC 2015 - ddiss@suse.com

- Update to 3.10.3
  See http://git.pcp.io/cgi-bin/gitweb.cgi?p=pcp/pcp.git;a=blob_plain;f=CHANGELOG;hb=3.10.3

- New sub-package
  + pcp-import-ganglia2pcp

-------------------------------------------------------------------
Fri Feb 27 13:18:15 UTC 2015 - ddiss@suse.com

- Fix perl-PCP-LogImport requires version for pcp-import-sar2pcp.

-------------------------------------------------------------------
Wed Feb 25 00:14:12 UTC 2015 - ddiss@suse.com

- Require pcp-conf with libpcp3 on [open]SUSE platforms.

-------------------------------------------------------------------
Mon Feb 23 20:21:40 UTC 2015 - kkaempf@suse.com

- Update to 3.10.2
  See http://git.pcp.io/cgi-bin/gitweb.cgi?p=pcp/pcp.git;a=blob_plain;f=CHANGELOG;hb=HEAD
  for details

- new patches
  0007-Honor-CFLAGS-in-qmake.patch
  0008-SUSE-fy-pmsnap-control-path.patch
  0009-pmsnap-control-var-www-srv-www.patch

- renamed patches
  + pcp-xenbuild.patch to 0001-Fix-XEN-build.patch
  + static_lib_perms.diff to
    0002-Install-libraries-without-exec-permission.patch
  + pcp_legacy_init_lsb.patch to 0003-pcp-legacy-init-lsb.patch
  + remove_cpan_rpaths.patch to 0004-Remove-CPAN-rpaths.patch
  + rm_init_script_runlevel_4.patch to
    0005-Remove-runlevel-4-from-init-scripts.patch
  + create-pmlogger-and-pmie-logdirs-during-install.patch
    to 0006-create-pmlogger-and-pmie-logdirs-during-install.patch

- Update to 3.10.1
  See http://git.pcp.io/cgi-bin/gitweb.cgi?p=pcp/pcp.git;a=blob_plain;f=CHANGELOG;hb=HEAD
  for details

- new sub-packages
  * pcp-doc
  * pcp-gui
  * python3-pcp
  * python-pcp
  * pmda-infiniband
  * pmda-perfevent
  * pmda-papi
  * import-collectl2pcp

- drop fix_pmie_pmlogger_startup_races.patch, upstream
  drop pcp-3.6.10-gcc5-reservedword.patch, obsolete

-------------------------------------------------------------------
Mon Feb 23 16:28:50 UTC 2015 - boris@steki.net

- fix gcc5 C99 reserved issue problems with patch
  pcp-3.6.10-gcc5-reservedword.patch

-------------------------------------------------------------------
Mon Nov 10 01:14:00 UTC 2014 - Led <ledest@gmail.com>

- fix bashism in post script

-------------------------------------------------------------------
Sun May 11 05:56:19 UTC 2014 - coolo@suse.com

- use %_rundir if available

-------------------------------------------------------------------
Tue Apr  9 14:27:02 UTC 2013 - schwab@suse.de

- Move configure run into the %build section.

-------------------------------------------------------------------
Thu Jan  3 12:16:56 UTC 2013 - ddiss@suse.com

- Describe xmktime.c and pthread_barrier.h licensing issues. Workaround by
  continuing to remove the testsuite; (bnc#796448).

-------------------------------------------------------------------
Tue Dec  4 12:15:41 UTC 2012 - ddiss@suse.com

- Fix race conditions in pmie and pmlogger startup scripts.
  + Add fix_pmie_pmlogger_startup_races.patch
  + Upstream fix for regression caused by CVE-2012-5530 fix.

-------------------------------------------------------------------
Thu Nov 29 16:38:46 UTC 2012 - meissner@suse.com

- use permissions framework for handling the worldwriteable+sticky
  bit directories. (bnc#782967)

-------------------------------------------------------------------
Wed Nov 21 13:27:25 UTC 2012 - ddiss@suse.com

- Create pcp user and group during installation.
- Package pre-populated tmp directory. The directory must be world writeable
  (with the sticky-bit set), as it may be used by any PMDAs or client tools;
  (bnc#782967).

-------------------------------------------------------------------
Mon Nov 19 17:19:01 UTC 2012 - ddiss@suse.com

- Remove fix_configure_path_tests.patch
  + fixed upstream.
- Remove configure_append_pcp_subdir.patch
  + fixed upstream.
- Add create-pmlogger-and-pmie-logdirs-during-install.patch
  + pmcd and pmproxy logdirs are created, pmlogger and pmie were missing.
  + Submitted upstream.

- Update to pcp-3.6.10.
  + Transition daemons to run under an unprivileged account.
  + Fixes for security advisory CVE-2012-5530: tmpfile flaws;
    (bnc#782967).
  + Fix pcp(1) command short-form pmlogger reporting.
  + Fix pmdalogger error handling for directory files.
  + Fix pmstat handling of odd corner case in CPU metrics.
  + Correct the python ctype used for pmAtomValue 32bit ints.
  + Add missing RPM spec dependency for python-ctypes.
  + Corrections to pmdamysql metrics units.
  + Add pmdamysql slave status metrics.
  + Improve pmcollectl error messages.
  + Parameterize pmcollectl CPU counts in interrupt subsys.
  + Fix generic RPM packaging for powerpc builds.
  + Fix python API use of reentrant libpcp string routines.
  + Python code backporting for RHEL5 in qa and pmcollectl.
  + Fix edge cases in capturing interrupt error counts.

- Update to pcp-3.6.9.
  + Python wrapper for the pmimport API
  + Make sar2pcp work with the sysstat versions from RHEL5,
    RHEL6, and all recent Fedora versions (which is almost
    all current versions of sysstat verified).
  + Added a number of additional metrics into the importer
    for people starting to use it to analyse sar data from
    real customer incidents.
  + Rework use of C99 "restrict" keyword in pmdalogger
    (Debian bug: 689552)
  + Alot of work on the PCP QA suite, special thanks to Tomas
    Dohnalek for all his efforts there.
  + Win32 build updates
  + Add "raw" disk active metrics so that existing tools like
    iostat can be emulated
  + Allow sar2pcp to accept XML input directly (.xml suffix),
    allowing it to not have to run on the same platform as the
    sadc/sadf that originally generated it.
  + Add PMI error codes into the PCP::LogImport perl module.
  + Fix a typo in pmiUnits man page synopsis section
  + Resolve pmdalinux ordering issue in NUMA/CPU indom setup
    (Redhat bug: 858384)
  + Remove unused pmcollectl imports (Redhat bug: 863210)
  + Allow event traces to be used in libpcp interpolate mode

- Update to pcp-3.6.8.
  + Corrects the disk/partition identification for the MMC
    driver, which makes disk indom handling correct on the
    Raspberry Pi (http://www.raspberrypi.org/)
  + Several minor/basic fixes for pmdaoracle.
  + Improve pmcollectl compatibility.
  + Make a few clarifications to pmcollectl.1.
  + Improve python API test coverage.
  + Numerous updates to the test suite in general.
  + Allow pmda Install scripts to specify own dso name again.
  + Reconcile spec file differences between PCP flavours.
  + Fix handling of multiple contexts with a remote namespace.
  + Core socket interface abstractions to support NSS (later).
  + Fix man page SYNOPSIS section for pmUnpackEventRecords.
  + Add --disable-shared build option for static builds.

- Update to pcp-3.6.6.
  + Added the python PMAPI bindings and an initial python client
    in pmcollectl.  Separate, new package exists for python libs
    for those platforms that split out packages (rpm, deb).
  + Added a pcp-testsuite package for those platforms that might
    want this (rpm, deb again, mainly)
  + Re-introduced the pcp/qa subdirectory in pcp and deprecated
    the external pcpqa git tree.
  + Fix potential buffer overflow in pmlogger host name handling.
  + Reworked the configure --prefix handling to be more like the
    rest of the open source world.
  + Ensure the __pmDecodeText ident parameter is always set
    Resolves Red Hat bugzilla bug #841306.

-------------------------------------------------------------------
Tue Nov 13 11:10:58 UTC 2012 - ddiss@suse.com

- Ensure pmlogger and pmie temporary state is always placed under
  PCP_TMP_DIR.

-------------------------------------------------------------------
Mon Nov 12 14:14:20 UTC 2012 - ddiss@suse.com

- Specify the PCP temporary file directory at configure time using the
  --with-tempdir= argument.

-------------------------------------------------------------------
Fri Nov  9 15:32:28 UTC 2012 - ddiss@suse.com

- Use mktemp for the placement of init script temp files. Place global
  temp files under run_dir; (bnc#782967).

-------------------------------------------------------------------
Wed Aug 15 23:57:34 UTC 2012 - ddiss@suse.com

- Update to pcp-3.6.5.
  + Fixes for security advisory CVE-2012-3418; (bnc#775009).
    o Add field validation to PCP instance PDU (Red Hat #841240)
    o Fix __pmDecodeInstanceReq heap buffer overflow (Red Hat #841284)
    o Fix __pmDecodeText heap overflow (Red Hat #841249)
    o Multiple issues in result PDU decoding (Red Hat #841159)
    o Fix __pmDecodeNameReq buffer overflow (Red Hat #841180)
    o Add length checks to __pmDecodeLogControl (Red Hat #841290)
    o Add size check to __pmDecodeIDList (Red Hat #841112)
    o Fix __pmDecodeNameList buffer overflow (Red Hat #840920)
    o Add missing __pmDecodeFetch namelen checks (Red Hat #841183)
    o Add length checks to __pmDecodeProfile (Red Hat #841126)
    o Add length checks to __pmDecodeCreds (Red Hat #840822)
  + Workaround for security advisory CVE-2012-3419; (bnc#775010).
    o Split the Linux kernel and proc PMDAs to prevent information
      leakage in default installs - esp. /proc/pid/maps exposure,
      but other proc metrics as well - and no longer export process
      metrics by default (Red Hat #841702)
  + Fixes for security advisory CVE-2012-3420; (bnc#775011).
    o Memory leak in pmcd DoFetch error path (Red Hat #841298)
    o Memory leak in __pmGetPDU in-band signalling (Red Hat #841319)
  + Fixes for security advisory CVE-2012-3421; (bnc#775013).
    o Resolve event-driven programming flaw in pmcd (Red Hat #841706)
  + Correct buffer unpinning logic in a PMNS traversal error path
    o Red Hat bugzilla bug #847314.
  + All of the above issues were identified by Florian Weimer of the
    Red Hat Security Team, who also assisted extensively in fixing
    and testing; a huge thank you to Florian from all PCP developers
    and users!
  + Add modern gcc/glibc security protection mechanisms where
    available.  Thanks to the Frank Eigler.
  + Harden all boundary checking in the remaining PDU decoders.
  + Resolve an issue with configure script checking for the init(1)
    process on Fedora 17 (and other systems using systemd).  Thanks
    to Lukas Berk.
  + pmdaelasticsearch only reports on nodes in the cluster now,
    and not other client nodes.  Thanks to Nigel Donaldson.
  + Added interfaces to PCP::PMDA Perl module to allow PMDAs to
    use a hash instance domain (instead of int/string array).
    These make use of the pmdaCacheOp(3) interfaces - the hash
    keys are the (external) PCP instance names, and the value
    associated with each key is an opaque reference.
  + Added an interface to allow PMDAs to register event queues
    with existing clients (pmdaEventNewActiveQueue).
  + Initial version of the (experimental) bash tracing PMDA.

-------------------------------------------------------------------
Mon Jul 30 11:54:34 UTC 2012 - ddiss@suse.com

- use addFilter for rpmlintrc, setBadness is not acceptable for Factory.

-------------------------------------------------------------------
Thu Jul 19 15:28:03 UTC 2012 - ddiss@suse.com

- Spec file cleanups following feedback from Sascha.
  + Do not remove the buildroot as part of %install
  + Use %suse_version rather than %_vendor
  + Add pcp-rpmlintrc script for devel-file-in-non-devel-package errors
  + Remove runlevel 4 references from init scripts
  + Add explicit perl version Requires

-------------------------------------------------------------------
Wed Jun 27 10:36:49 UTC 2012 - ddiss@suse.com

- Remove fix_cpan_pmda_manifest.patch, no longer needed with fixed
  upstream tarball.

-------------------------------------------------------------------
Mon Jun 18 11:01:29 UTC 2012 - ddiss@suse.com

- Remove invalid cpan/PMDA manifest entry.

-------------------------------------------------------------------
Fri Jun 15 14:59:26 UTC 2012 - ddiss@suse.com

- Update to pcp-3.6.4.
  + Fix build on s390x platform (thanks to Dan Horak)
  + Rethink order of PATH setting for pcp start scripts, to ensure
    binaries from other packages with names that conflict with pcp
    binaries are not found ahead of the same-named pcp binary.

-------------------------------------------------------------------
Wed Jun  6 12:49:13 UTC 2012 - ddiss@suse.com

- Use upstream based spec file to support combined SUSE/RH builds;
  (bnc#732763).

- Update to pcp-3.6.3.
  + Revert initial attempt at getting configure --prefix option to
    make sense for local developer PCP installations
  + Fix RPM changelog typo in in-tree spec file
  + Further work on Debian/kFreeBSD port (thanks to Robert Millan)

- Update to pcp-3.6.2.
  + Fix Debian builds on FreeBSD (missing header files)
  + Resolve Debian startup script (compat) lintian issue
  + Resolve FreeBSD kernel PMDA build issue with PCP not installed
    in the build root already.

- Update to pcp-3.6.1.
  + Resolve final Mac OS X pthreads build issues
  + Debian packaging improvements for split pmlogger/pmcd scripts,
    perl module pieces, and other lintian reported issues
  + Update the startup script dependencies for /var use
  + Support --prefix=... and --exec-prefix=... configure options
  + Relaxed the "are you running as root?" test in startup scripts
  + Win32 build updates and improvements
  + Cache /proc/stat file handle in Linux kernel agent to reduce
    syscalls on the most commonly fetched metric subtree

- Update to pcp-3.6.0.
  + Thread-safe libpcp, including additional re-entrant and thread-safe
    variants for some routines
  + Retire all asynchronous routines from libpcp
  + Retire all V1 protocols and services (archive format, PMAPI and
    PMDA_INTERFACE)
  + PMNS moves to ASCII only (no binary PMNS)
  + Rework "init" scripts, splitting pcp into pmcd and pmlogger
  + Update elasticsearch PMDA to 0.19+, new transport and shard metrics
  + Updates to PMDA new event queueing interfaces for agents wishing to
    export that class of performance data.
  + First round of Coverity cleanup fixes incorporated.
  + Initial version of the SNMP PMDA, thanks to Hamish Coleman.
  + Updates to postgres PMDA to export additional recovery metrics.

- Update to pcp-3.5.11.
  + Update FSF contact address in copyright notices to keep
    rpmlint happy.
  + Fix instance domain checks in elasticsearch PMDA.
  + Make KVM PMDA to run as root once more (permissions issues).
  + Integration of pmlogger_daily with pmlogrewrite.
  + Fix pmlogger_merge corner case for empty archives.

- Update to pcp-3.5.10.
  + Support new 0.18+ elasticsearch metrics.
  + Fix handling of elasticsearch version metric cluster.
  + Fix trace PMDA build issues.
  + Fix some Win32 build issues.
  + Run with reduced privileges for more of the perl PMDAs.
  + Name Solaris load average metric consistently.
  + Small metric documentation tweaks for Solaris PMDA.

- Update to pcp-3.5.9.
  + Add rc script support for condrestart, and condrestart the pcp,
    pmie and pmproxy services after an RPM install or upgrade.
  + Fix a bug where hinv.ndisk is incorrect if CLUSTER_PARTITIONS
    hasn't yet been refreshed immediately following a restart.
  + Implementation of client event queueing logic for all PMDAs to
    share (all PMDAs wishing to support event metrics, that is).
  + New manual pages for new PMDA event queueing interfaces.
  + PostgreSQL PMDA, supporting versions 9.0 and 9.1 (at least).
  + Reserved ID 111 for Samba Clustered Trivial Database PMDA.
  + Add perl interface to allow PMDAs to drop priveleges
  + Add an elasticsearch version metric.
  + Correct perl module type detection logic for 32/64-bit systems.
  + Small pmlogconf source and man page fixes.
  + Rework flex usage to resolve build warnings.
  + Make Darwin CPU metrics 64 bit.
  + Add (long) opaque key support to libpcp_pmda.
  + Add pmdaCacheStoreInst() routine to libpcp_pmda.
  + Added mssql PMDA for SQL server Dynamic Management View stats.
  + Add pmlogrewrite(1) to rewrite archives (fix inconsistencies).
  + Fix a cgroup option parsing error on consecutive fetch calls.

-------------------------------------------------------------------
Mon Feb 13 10:51:49 UTC 2012 - coolo@suse.com

- patch license to follow spdx.org standard

-------------------------------------------------------------------
Thu Nov 10 20:39:01 CET 2011 - meissner@suse.de

- wildcard a bit to make it package on ppc

-------------------------------------------------------------------
Wed Aug 10 12:39:05 CEST 2011 - ddiss@suse.de

- Update to pcp-3.5.8.
  + Rework rsyslog PMDA to remove Switch use, very odd behaviour
    observed on RHEL5.2 (mysteriously failing to compile).
  + Add in Kens scripting defenses against dodgey toolchains.

-------------------------------------------------------------------
Tue Aug  9 10:56:34 CEST 2011 - ddiss@suse.de

- Update to pcp-3.5.7.
  + Fix build issue on SLES11 SP1 IA64 systems.
  + Improved rsyslog PMDA handling of queue metrics.
  + Add open file-descriptor count metric to the Linux PMDA.
  + Implement logger PMDA line-oriented event mode.
  + Add regular expression based event filtering in logger PMDA.
  + The default pmcd.conf now has an access control section, and
    all remote store operations are blocked by default.

-------------------------------------------------------------------
Mon Aug  1 18:50:18 CEST 2011 - ddiss@suse.de

- Update to pcp-3.5.6.
  + Fix warning from pmie_daily with some /bin/pwd versions.
  + Numerous Debian packaging updates for lintian cleanliness.
  + Fixed typos in several man pages.
  + Added ElasticSearch PMDA.
  + Fix build on RHEL4 with older sys/queue.h variant.

-------------------------------------------------------------------
Thu Jul  7 12:17:17 CEST 2011 - ddiss@suse.de

- Update to pcp-3.5.5.
  + Resolve Debian packaging issues preventing new uploads.
  + Fix warnings from pmie_check with some /bin/pwd versions.

- Update to pcp-3.5.4.
  + Fix warnings from pmlogger_check with some /bin/pwd versions.

- Update to pcp-3.5.3.
  + Remove reliance on a cpp binary being installed locally.
  + Ensure compressed pmie log files are also cleaned up daily.
  + Extend the event store mechanism to be more generally useful.
  + Add memory limiting functionality to pmdalogger.
  + Add SQLServer metric for user settable queries.
  + Fix potential sigsegv in pmprobe fetching multiple live values.
  + Perl changes for Solaris.
  + Fix Fedora15 build relating to handling of systemd.
  + Solaris pmda zpool_vdev_name() api change.
  + Update sar2pcp for sysstat version 9.1.7.
  + Resolve realloc issue in event metric handling in libpcp_pmda.

- Update to pcp-3.5.2.
  + pmlogreduce - fix 2 problems (memory leak, additional mark records)
  + Initial version of pmdalogger, from David Smith, a log monitoring
    PMDA exporting event metrics.
  + Make Windows drive instance domain code less chatty.
  + RC scripts and pmie_check - Mac OS X porting
  + pmlogger_check - symbolic link issue fixed
  + Add in the rsyslog PMDA (http://www.rsyslog.com)
  + Extend PCP::PMDA so that the log tail mode can be used on named papes.
  + Numerous updates to the Perl packaging infrastructure
  + Fix build when $HOME is not set.
  + pmlogconf - another non-posix awk issue fixed
  + Darwin pmda - filesys.maxfiles metric
  + pmie_daily - assorted minor fixups
  + Unix domain socket issue found on Mac OS X
  + pmcd config parsing error handling cleanup
  + Quieten pmevent output in the absence of new events.
  + Pass process ID out on success of __pmProcessCreate.
  + pmdaproc.sh - add PMDA_INTERFACE_5 support
  + pcp_completion.sh - add pmevent for bash metic completion
  + pmevent - add instance domain support
  + Bugfix: fetching hinv.cpu.* aborts if cpu indom is not initialized
  + Rearrange the per-CPU intr metrics on Linux to use dynamic namespace
  + Add perl modules into Mac OS X installations
  + Additional vmstat metrics added to Linux kernel PMDA
  + Fix pmieconf after syscall metrics went away on Linux
  + pmevent - new util to report event records, with instance domain support
  + sample PMDA - instance domain for event records metric
  + pmval, pminfo - man page typo corrections
  + pmval - fix typo in error message
  + pmlogextract, pmlogreduce - auto volume switch at 2^31 bytes
  + pmnscomp - defaults to Version 2 of the compiled PMNS
  + Remove unconditional diagnostic in MMV agent, log spam
  + Rework the code that uncompresses archives for Win32
  + Updates to Win32 makefiles to get a clean package build
  + Enable compressed log processing for Windows as well
  + Sample event consumer code for Windows ETW
  + Update PDH Win32 headers to use those from current mingw-m64 tree
  + Win32 socket error messages are reporting correctly
  + Great strides in getting error reporting correct on Windows
  + Add Win32 pthread wrapper for threading work on Windows
  + Add PowerDNS recursor stats to the pdns PMDA

- Update to pcp-3.5.0.
  + Infrastucture support for doing distributed event tracing with PCP.
    This includes a new metric type (PM_TYPE_EVENT), cunning mechanisms
    for encoding event records in pmResults, and providing PMDAs with
    per-client context connection information allowing agents to track
    which clients have seen which parts of a trace stream so far.  Some
    reference uses of these extensions can be seen in pmdasample and in
    the pmcd PMDA as well.
  + Transparent support for archive de-compression by clients.
  + Manual page formatting errors corrected.
  + Fix a pmDupContext memory corruption issue seen with derived metrics.
  + Added a one-trip optimisation/guard to pcp.env
  + Improved pmdaFetch and pmdaFetchCallback man pages with respect to
    return codes and value memory allocation models.
  + Fix for Windows unintentionally allowing multiple pmcd processes
    to startup and bind to the same port, with "undefined" results.
  + Fix Windows services interaction, preventing pmcd service stop.
  + Fix Mac OS X scandir memory leak on empty directories.
  + Fix Mac OS X mem.util.wired metric, was exporting the wrong value.
  + Correct the handling of SLES11 distro identification (lsb-release
    file not used again, on SuSE Linux distributions).
  + Fix postfix PMDA log file path handling for Redhat Linux distros.
  + Extend Perl PMDA interfaces to allow additional metrics to be
    added at runtime (now makes use of dynamic namespace support).
  + Set KEEPALIVE option on pmproxy client sockets, mirroring pmcd
    behaviour and reducing open file descriptor pressure.
  + Improvements to the native Windows version of pmlogger, preventing
    it from exiting prematurely thanks to a socket read race condition.
  + Fix /proc/interrupts parser in Linux PMDA, thanks to Arthur Kepner.

-------------------------------------------------------------------
Mon Jan 24 15:00:50 CET 2011 - ddiss@suse.de

- Update to pcp-3.4.0.
  + Add new libpcp_import C API library to pcp-libs.
  + Add perl-PCP-LogImport RPM sub-package for libpcp_import perl binding.
  + Add pcp-import-* RPM sub-packages containing front-end tools for
    importing data from sar, iostat, generic speadsheets and mrtg.
  + Major Solaris PMDA updates: CPUs, vnode ops, disk stats and disk queue
    stats, switch to using pmid clusters, internal timers, ZFS Adjustable
    Replacement Cache stats, new help text, memory metrics, fsflush stats.
  + Use Solaris devinfo to get information about pretty disk names.
  + Fix a memory leak in Perl PMDA wrapper string handling.
  + Use correct structure to extrace zpool write counters in Solaris PMDA.
  + pmafm now supports multiple -a arguments.
  + Fix pmie multiple -a options bug.
  + Fix pmdaInit() callback handling where it did not handle all the
    interface versions correctly.
  + Quote filenames reported by pmwtf, else awk can get confused.
  + Fix pmdawindows missing metrics help text.
  + Add network interface speed metrics into pmdawindows.
  + Fix pmdalinux handling of long network interface names.
  + Updated pmdaapache to use cross-platform http library.
  + Updated pmdaapache install process to allow port selection.

- Update to pcp-3.3.3.
  + Fix two off-by-one errors in NUMA metrics in Linux PMDA.
  + Rework timezone environment variable handling to be able to
    coexist more peacefully with Perl.
  + Remove Fedora specfile now that this is in Fedora CVS.

- Update to pcp-3.3.2.
  + Fix FreeBSD build and packaging issues affecting Debian.
  + Move PCP::Glider Perl code into core PCP with other Perl modules.
  + Avoid a mingw64-compiler-runtime bug in gettimeofday.
  + Fix spec file issue in Fedora/RHEL builds.
  + Add in the gpsd PMDA.

- Update to pcp-3.3.1.
  + Fix a sigsegv in pmdalinux in the kernel.pernode.cpu metrics.
  + Don't kill dbpmda if namespace cannot be loaded.
  + Resolve a Windows build error under latest toolchain.
  + Some minor pmieconf and pmimport related cleanups.

- Update to pcp-3.3.0.
  + Rework pmlogconf utility - version 2.0 ondisk format.
  + Initial support for Linux kernel cgroup subsystem, using dynamic
    metrics (cpu sets, cpu sched, cpu acct, memory, ...)
  + Fix per-process I/O (proc.io.*) metric values.
  + Fix potential SEGV in derived metrics when pmcd connection lost.
  + Fix to allow pmlogger to log derived metrics.
  + Fix open file descriptor leak in Linux disk scheduler code.
  + Postfix PMDA updated to report aggregate stats from mail.log parsing.
  + Add per-node CPU metrics to Linux kernel agent.
  + Integrate pmieconf into the build, modernisation and porting work.
  + Add install-sh to the set of pcp-internal programs for external code.
  + Improved checking of PMDA domain numbers.
  + Allow use of SunStudio compiler on Solaris.
  + Add load average metrics to Solaris kernel agent.
  + Windows 7 porting work.
  + Make Win32 build work with more recent versions of gcc and Perl.
  + Fix pmie [no]match_inst botch, tweak sleepTight reporting.
  + Allow \$ for pmie regular expressions.
  + Ensure pmlogger doesn't write extended pmcd host syntax as hostname.
  + Switch over to not using local context for bash completion.
  + Improve Lustre agent metric help text.
  + Added a readonly filesystems metric into Linux kernel agent.
  + Ensure xfs.buffer metrics are always properly refreshed.
  + Add Linux kernel statistics related to XFS btree operations.

- Update to pcp-3.2.1.
  + Export information about ZFS snapshots
  + Correct accounting of PMNS size in a libpcp_pmda helper routine.

- Update to pcp-3.2.0.
  + Change how PM_CONTEXT_LOCAL determines available PMDAs:
    rework local context code to retire $PMDA_LOCAL_*, build DSO table
    from pmcd.conf at run-time, new __pmLocalPMDA and __pmSpecLocalPMDA
    routines in libpcp, -K options for pminfo, pmval and pmprobe.
  + Make some pmda dynamic name operations take (const char *) args.
  + Fix bash completion so dynamic names expanded, and stderr culled
    (culling DSO agent initialisation messages).
  + Improve pmlogger handling of alias names (same PMID, different names).
  + Honour the -T command line option in pmlogreduce.
  + Resolve an MMV issue evident in the Mac OS X installer, which resulted
    in failed dmg (binary) installation attempts.
  + Solaris startup script improvements.
  + Add details of the extended hostname syntax to pcpintro(1).
  + Fix a memory leak in pmdawindows help text handling.
  + Fix a memory leak in pmdammv help text handling.
  + Add anonymous huge page Linux memory utilisation metric.
  + Fix local context reporting of help text.
  + Solaris man page build changes.
  + Clean up diagnostic messages in pmlogextract.
  + Teach pmdaproc about Solaris' ping.
  + If pmstat fails to connect to local pmcd, fallback to local context.
  + Mark as const the final (requested units) pmConvScale argument
  + Clean out SGI-isms from build related files (no longer used by SGI).
  + Fix mem.numa.util.NFS_Unstable metric.
  + Removed pmdajstat, this has long been superceded by the capabilities
    of the Parfait package for instrumenting Java applications with PCP.

- Update to pcp-3.1.2.
  + Add indom save and restore logic into Windows PMDA.
  + Fix a typo in the Postfix PMDA.
  + Update and extend /proc/meminfo stats on Linux.
  + Improve handling of monitored process in pmdammv, especially
    when the monitored process exits (pmns not cleaned up before).

- Update to pcp-3.1.1.
  + Use a better MMV generation number, using all bits available.
  + Fix a metric count calculation error in pmdammv.
  + Add precision argument (-p) to pmwtf.
  + Added an open socket sockname command to dbpmda.
  + Remove use of grep -q, unavailable on OpenSolaris.
  + Couple of trivial build fixes for the Win32 platform.

- Update to pcp-3.1.0.
  + Derived metric support.
  + Fix a memory leak in the Solaris kernel PMDA.
  + Extract information about network links on Solaris.
  + MMV PMDA (DSO) is now installed and enabled by default.
  + Reintroduced MMV support for cross-(mmap-)file instances.
  + Bug fix in pmdammv which was capable of causing SIGSEGV.
  + Add dbpmda readline support (and packaging dependencies).
  + Add in -Z option to pmwtf, to pass through to pmlogsummary.
  + Export NUMA memory statistics from the linux kernel.
  + Make pmie_check work on Solaris.
  + Make perdisk stats part of the zpool hierarchy.
  + dbpmda fix for name lookup and dynamic metrics.
  + Add a new PMDA exporting the Postfix queue lengths.
  + BuildRequires initscripts for %{_vendor} == redhat.

- Update to pcp-3.0.2.
  + Improvements and fixes to PCP::PMDA perl module.
  + Added the SQL Server dtsrun log file parser PMDA.
  + Switch MMV PMDA to use dynamic namespace interfaces, which resolves
    long-standing spurious EAGAIN error on reconfiguration.
  + Separate out the Infiniband and cluster PMDAs into their own
    package - removing dependencies and configure complexities from
    pcp into specialised, layered packages.
  + Configure packaging to use libexecdir for private pcp binaries,
    if supported on the platform (also honour --libexecdir configure flag)
  + Add sysfs.kernel metrics cluster to Linux PMDA.

- Update to pcp-3.0.1.
  + Reverted rc scripts default start/stop settings back to how
    it was in 2.9.3-1, for Debian bug #544350. On Red Hat platforms,
    the RPM spec overrides this to be chkconfig off by default.
  + Lexical analyser tweaks (various tools) to work on Windows.
  + pmlogextract change timezone selection algorithm, add -f for old behaviour
  + configure.in clean up more thoroughly on Mac OS X
  + Get pcp building on Debian GNU/kFreeBSD port.
  + Add missing return statement causing incorrect mem.util on Win32.
  + Improved support for Slackware distro makepkg packaging
  + Solaris fixes: pass information about compiler into Perl PMDA makefiles,
    don't change pointer types of pmCtime's arguments, deal with default lex
  + Move Infiniband and Cluster PMDAs to a stand-alone packages
  + Trim the set of RPM files marked as %config to just those
    that are actually likely to be edited (rpm -qlcv pcp pcp-libs).

- Update to pcp-3.0.0.
  + PMDA_INTERFACE_4 and the support of dynamic subtrees of the PMNS
    where the PMDA (not PMCD) maintains knowledge of the PMNS.
  + RPM packaging split into pcp, pcp-libs and pcp-libs-devel
    pcp-libs is common - it's required by pcp and by pcp-libs-devel but
    pcp and pcp-libs-devel can be installed with or without each other.
  + Added separate specific licenses for the new subpackages,
    particularly pcp-libs, which is LGPL.
  + Added ldconfig %post and %postun scriptlets for -libs
  + Don't explicitly require Infiniband libs, since they're libs and RPM
    figures it out
  + No need to explicitly BuildRequire gcc-c++ libstdc++-devel
  + Add BuildRequires on perl-ExtUtils-MakeMaker
  + Remove explicit ia64 Requires: libunwind
  + Preserve generated gram.tab.c in several places since debuginfo needs it
  + Create %{_localstatedir}/run/pcp and ship it (so it'll be removed)
  + Use %doc in spec for CHANGELOG COPYING INSTALL README VERSION.pcp pcp.lsm
  + Tweak configure to move PCP_BINADM_DIR out of /usr/share, into /usr/lib.
    Arch dependent binaries should not be installed below /usr/share.
  + Delete unneeded "explicit script interpreter" in several places
    to keep rpmlint happy
  + Remove setuid from pmpost, not needed (and not in debian either)
  + Nuke the migrate_pcp_var_dir, script and it's %post scriptlet
  + Default "chkconfig off" for all PCP services (retain settings on upgrade)
  + Clean-up and simplify the %post scriptlets (rather dramatically)
  + Don't ship static libraries in Fedora, we have the debug package for that
  + Install .NeedRebuild, add to %files and remove crud from %post scriptlets
  + Added %changelog in RPM spec and moved %files to end before %changelog
  + Move demos, examples and demo PMDAS to the libs-devel package since they
    are not used for production (but are useful for devel and needed for QA).
  + Don't install trace demo binaries since src is installed anyway
  + Reconciled build/rpm/pcp.spec.in with build/rpm/pcp_fedora.spec
  + Integrated RPM packaging support for perl-PCP-PMDA and perl-PCP-MMV
    (but perl-PCP-Logsummary is not currently shipped in RPM packages)
  + RPM build requires perl(ExtUtils::MakeMaker) rather than
    perl-extutils-makemaker (this is the standard notation)
  + For easier upgrades, the perl PMDAs only really require pcp >= package
    version (until we change or extend an API).
  + ReplacePmnsSubtree fix bad signal handling botch (affecting MMV PMDA)
  + Fix pmcd.timezone metric such that value updates on daylight savings
    (or other timezone) changes.
  + Initial packaging work for Slackware Linux, thanks to Roman Revyakin.

- Update to pcp-2.9.3.
  + configure.in fix for Windows iptypes.h header.
  + Fixup Windows SQL Server metrics on 64 bit platforms.

- Update to pcp-2.9.2.
  + Final iteration on pmval sample count changes.
  + Build fallout on Mac/Win32 in MMV client library.
  + Tidy configure.in sys/stat time field/types handling for Alpha builds.

- Update to pcp-2.9.1.
  + Fix a long-standing pmval sample count miscalculation.
  + Add missing runlevels and dependencies in start scripts.
  + Fix a segv observed in the Windows PMDA accessing SQL Server metrics.
  + Fix logic error causing wrong Windows version to be reported sometimes.
  + Add kernel.all.uptime to the Windows kernel agent.
  + Initial version of the (perl-based) Samba PMDA.
  + Fixes to pmdasimple.pl so it functions correctly on all platforms.
  + Add PCP::PMDA helper routines for determining native long sizes.
  + Extend MMV to allow teardown of MMV file, and set errno on failure.
  + Initial stable (1.00) version of MMV Perl interface.
  + Correct the metric units for several Windows per-process memory metrics.
  + Add network metrics to Solaris PMDA
  + Report ZFS statistics from Solaris PMDA
  + Export zpool stats from Solaris PMDA
  + Generate packages for Solaris
  + Allow user to choose her compiler (proper use of AC_PROG_CC)

- Update to pcp-2.9.0.
  + Fix Linux PMDA issue with -fstack-protector gcc option.
  + Get socket daemon PMDAs working with Win32 pmcd.
  + Bind 9.4 PMDA.
  + PowerDNS PMDA.
  + Fix atexit handling in the Perl PMDA module.
  + Fix a duplicate PMID in the MySQL PMDA.
  + Infiniband PMDA improvements and man page.
  + Minor packaging tweaks for rpm and deb formats.

- Update to pcp-2.8.12.
  + Bug fixes in Zimbra and MySQL PMDAs.
  + Fix memory leaks in the Perl PMDA interface.
  + Fix the Mac OS X pmdadarwin metric table direct mapping.

- Update to pcp-2.8.11.
  + Rework namespace file generation for Perl PMDAs.

- Update to pcp-2.8.10.
  + RPM packaging fixes for Perl modules.

- Update to pcp-2.8.9.
  + Remove Cygwin support, we're now committed to native Win32
    port - first production install yesterday, hooray!
  + Further Win32 work - wrapper batch files for shell scripts
    run as commands, moved daemon configs into $PCP_DIR/etc,
    bug fixes to process creation code.
  + Significant work on the MMV PMDA, including revamped API,
    Perl API, updated on-disk support with string values and
    help text support, amongst other changes.
  + Fix build of Perl PMDA module when PCP not installed.
  + Fix Zimbra PMDA status metrics.

- Update to pcp-2.8.8.
  + Added a Zimbra Collaboration Suite PMDA.
  + Build fixes for OpenSolaris.
  + Perl PMDA fixes in tail mode.
  + Correct physical memory reporting in Windows PMDA on 32 bit
    machines.
  + Other small tweaks and improvements to Windows PMDA also.

- Update to pcp-2.8.7.
  + Windows PMDA major rework to improve memory footprint.
  + Yet another Mac OS X build issue resolution.

- Update to pcp-2.8.6.
  + Fix build on Mac OS X after lex warning cleanups.
  + Fix pmdate build when PCP headers not in the root.
  + A single PMNS domain number file now used in-tree.
  + Added tmpfs filesystem metrics to Linux PMDA.

- Update to pcp-2.8.5.
  + Packaging tweaks for Debian (builddefs/rules moved).
  + Make timezone manipulation in Windows work (mimic MSYS).
  + Numerous warnings fixed.
  + Several changes to tempfile handling for Vista.
  + Make setting pcp_rc_dir in configure.in more robust.
  + Further pathname separator auditing for Windows.
  + Fixed a libpcp_gui linker issue on Mac OS X.

- Update to pcp-2.8.4.
  + Descend into src/bashrc.  D'oh!

- Update to pcp-2.8.3.
  + Bash auto-completion of metric names.
  + Fix a memory leak in xfs project quotas metrics.
  + Several Win32 fixes for Windows Server 2008.
  + Add Linux per-CPU and aggregate "guest" CPU utilisation metrics.
  + Add a pmlogsummary option to report a "header" line (-H).
  + Add optional pmstat support for time control via pmtime.
  + Add pmcd.client.* metrics for identifying connected clients.

- Update to pcp-2.8.2.
  + Fix pmie bug in the handling of && and || operators.
  + Improve daily pmie/pmlogger script behaviour.

- Update to pcp-2.8.1.
  + Fix build issue with libpcp_mmv - would not build-from-source
    if <pcp/pmapi.h> was not in the root filesystem.
  + Finer control of pmie2col(1) reporting precision.

- Update to pcp-2.8.0.
  + Linux netfilter (IP connection tracking) PMDA included
  + Memory Mapped Value (MMV) PMDA and client library included
  + Linux bonding (bonded network interface) PMDA included
  + Lustre PMDA included
  + Added pcp_gui library as pcpmon replacement, supporting the
    new (open source) version of pmtime for console tools.
  + Perl PCP::LogSummary module included.
  + KVM (Linux Kernel Virtualisation layer) PMDA
  + Infiniband PMDA included
  + VMware PMDA included
  + Perl PCP::PMDA module completed, stabilised and incorporated.
  + Default pmcd and pmproxy ports changed to IANA registered ones.
    ( The old behaviour - i.e. both original and IANA ports - is
    still available using PMCD_PORTS and PMPROXY_PORTS variables ).

- Update to pcp-2.7.7.
  + Infiniband metric enhancements
  + Handle missing "which" binary during rpm installation
  + Added new quota metrics (XFS project quota)
  + Aggregate and per-CPU hypervisor "steal" time metrics added
  + NFS v4 metrics
  + commitLimit meminfo metric added
  + Namespace locking fix in pmdaproc.sh
  + Additional Windows memory metrics
  + Several pmie fixes from Ken
  + Kens pmlogreduce archive corruption fix
  + Kens pmproxy PDU size fix
  + Nathan's pmlogsummary sum calulation fix
  + Added a (cheap) runnable processes metric.

- Update to pcp-2.7.4.
  + MaxOSX and Debian/Ubuntu build/package fixes
  + Add sqlserver active_transactions metrics to the Windows PMDA.
  + Fix a pmie_check typo causing mis-identification of pmie processes.
  + Allow pmie and/or operators to function with some data missing.
  + Resolve path naming issues with more recent versions of autoconf.
  + pmlogsummary report sum option
  + pmval kmtime support
  + Additional Linux SNMP metrics
  + Fix Linux vmstat nr_slab metrics
  + Make pcp status command report build version
  + Windows split_io metrics
  + Fix pmdapmcd empty pmie instance
  + pmdamailq filename regex
  + Windows TCP metrics
  + pmie log file rotation
  + Changed the default compression program to be bzip2(1)

- Update to pcp-2.7.3.
  + add network.ib.control to timeout infiniband stats workthread
  + add mem.util.anonpages

- Update to pcp-2.7.2.
  + pcp doc updates
  + pmdalinux death from open file descriptors: pclose needed in network.ib
  + network.ib stats updated to cope with OFED 1.2 changes
  + some numa.link fixes for shub2 & NL4
  + Improve start/stop times of pmcd,pmlogger,pmie
  + create portable pmsleep (subsecond sleep) exe

- Update to pcp-2.7.0.
  This log has been allowed to lapse for some time. Blanket catch-up..
  the following PVs describe changes made in that time:
  + 947510 - UNIX95 patches break pcp tools
  + 948548 - [SUSE#182852] Buffer overflow in linux proc_pmda
  + 948551 - Update pcp configure and build infrastructure
  + 948799 - Move telnet-probe to oss part of pcp
  + 948958 - *nodeid conversions have inconsistent naming
  + 952623 - possible use-after-free of pmProfile objects used by pmda
  + 952932 - pcp-open RPM requires libpcp.so.2 but doesn't provide it
  + 953015 - Promote libpcp_pmc to DSO
  + 953301 - Update irix pcp bits
  + 953876 - Use swap.pagesin/pagesout instead of swap.in/.out in pmstat
  + 954035 - Update macosx build infrastructure
  + 954165 - pmdumptext reports wrong time with sub-second intervals
  + 954173 - pmReceiveNamesOfChildren returns bogus value
  + 954203 - pmnscomp generates bogus binary pmns files
  + 954342 - Add support for FreeBSD
  + 954343 - Update windows pmda
  + 954432 - Use a pidfile to stop pcp
  + 954652 - telnet-probe ate my arguments
  + 954842 - Update qa on sles10 for pcp 2.5 and 2.6
  + 956190 - add IB traffic stats to linux PMDA
  + 956199 - pmlogsummary double free causes graph failures
  + 957598 - add debuginfo to pcp-open build in mangrove
  + 957758 - valgrind finds "invalid read of size 8" etc in __pmStuffValue
  + 957884 - need network.ib.status for per-port IB status and description
  + 958273 - If OFED is installed but no ports are found, return PM_ERR_VALUE from refresh_ib
  + 958379 - IB PMDA broken (port num appearing twice in perfquery calls)
  + 958476 - path to pmie_check binary incorrect in pmie crontab config file

- Update to pcp-2.5.0-2.
  + 947602 - pmdas/aix/common.h is missing from the tarball

-------------------------------------------------------------------
Thu Feb 11 00:44:51 UTC 2010 - jengelh@medozas.de

- SPARC requiers use large PIC

-------------------------------------------------------------------
Wed Jun 10 10:55:48 CEST 2009 - coolo@novell.com

- filter out -fomit-frame-pointer to fix build

-------------------------------------------------------------------
Tue Jun  9 17:10:20 CEST 2009 - coolo@novell.com

- continue previous work

-------------------------------------------------------------------
Wed Feb 25 20:21:59 CET 2009 - crrodriguez@suse.de

- fix build with GCC44, #ident is a deprecated GCC extension

-------------------------------------------------------------------
Thu Nov  6 17:23:58 CET 2008 - ro@suse.de

- fix build failure in obs

-------------------------------------------------------------------
Tue Oct  7 16:42:23 CEST 2008 - kukuk@suse.de

- Fix possible buffer overflow

-------------------------------------------------------------------
Thu Aug 28 23:28:57 CEST 2008 - cthiel@suse.de

- fix init scripts

-------------------------------------------------------------------
Wed Dec  5 02:33:52 CET 2007 - ro@suse.de

- fix build with gcc-4.3
  (package could possibly be updated anyway)

-------------------------------------------------------------------
Thu Jul 12 16:28:26 CEST 2007 - rw@suse.de

- Split off development package.

-------------------------------------------------------------------
Fri Mar 30 01:24:31 CEST 2007 - ro@suse.de

- Add procps,ncurses-devel,bison to buildreq.

-------------------------------------------------------------------
Fri Jun 16 16:20:58 CEST 2006 - schwab@suse.de

- Set datadir.
- Use RPM_OPT_FLAGS.

-------------------------------------------------------------------
Fri Jun  2 17:46:18 CEST 2006 - rw@suse.de

- Remove fake dependency on gdbm-devel headers.  (#177730)

-------------------------------------------------------------------
Wed Jan 25 21:39:19 CET 2006 - mls@suse.de

- Convert neededforbuild to BuildRequires

-------------------------------------------------------------------
Mon Jan 16 17:04:58 CET 2006 - rw@suse.de

- Update to version 2.5.0.  (FATE 153129)

-------------------------------------------------------------------
Thu Oct 20 16:32:42 CEST 2005 - rw@suse.de

- Fix permission of a demo directory.  (#129486)

-------------------------------------------------------------------
Sat Apr  9 20:30:07 CEST 2005 - coolo@suse.de

- Fix gcc4 compilation

-------------------------------------------------------------------
Fri Nov 12 14:38:06 CET 2004 - ro@suse.de

- Correct permissions handling for pmpost

-------------------------------------------------------------------
Mon Oct 18 05:21:36 CEST 2004 - nashif@suse.de

- Update to version 2.4.0

-------------------------------------------------------------------
Wed Apr 28 16:52:27 CEST 2004 - nashif@suse.de

- #39324: fixes for SuSE and 2.6 kernels in general from SGI

-------------------------------------------------------------------
Tue Mar 16 07:19:24 CET 2004 - nashif@suse.de

- Update to version 2.3.2

-------------------------------------------------------------------
Wed Nov  5 17:08:13 CET 2003 - ro@suse.de

- package according to permissions.secure and add run_permissions
- don't build as root

-------------------------------------------------------------------
Mon Jul 21 15:43:49 CEST 2003 - nashif@suse.de

- update to version 2.3.1

-------------------------------------------------------------------
Thu Jun 19 07:10:26 CEST 2003 - nashif@suse.de

- Update to version 2.3.0
- Fixed file list

-------------------------------------------------------------------
Fri Apr 11 00:52:01 CEST 2003 - ro@suse.de

- fix build with coreutils
  (deprecated calling syntax for head,tail,sort)

-------------------------------------------------------------------
Mon Jan 20 15:16:34 CET 2003 - ro@suse.de

- make it compile with latest glibc (pcp-2.2.2-st_mtime.patch)

-------------------------------------------------------------------
Mon Dec  2 18:15:37 CET 2002 - ro@suse.de

- include errno.h where needed
- use yacc instead of bison for now (make it compile)

-------------------------------------------------------------------
Fri Aug 16 18:18:55 CEST 2002 - nashif@suse.de

- Fixed bug #17954: Added PreReq

-------------------------------------------------------------------
Thu Apr 25 11:40:56 CEST 2002 - coolo@suse.de

- fix build for x86_64 and s390x

-------------------------------------------------------------------
Fri Feb 15 18:31:58 CET 2002 - nashif@suse.de

- fix bug #13321: made init script pmie LSB compliant
	- Added header note
	- Status returns correct value
- Fixed pcp init script: status did not work

-------------------------------------------------------------------
Fri Jan 18 08:02:29 CET 2002 - nashif@suse.de

- Update to version 2.2.2

-------------------------------------------------------------------
Thu Dec  6 16:51:03 CET 2001 - nashif@suse.de

- Removed START_ variable
- Changed escaped { to non escaped to stop awk from complaining

-------------------------------------------------------------------
Mon Jul  9 23:20:50 CEST 2001 - nashif@suse.de

- Update to version 2.2.1
- Fixed bug # 9068

-------------------------------------------------------------------
Thu Jun  7 02:39:24 CEST 2001 - nashif@suse.de

- fixed configure.in

-------------------------------------------------------------------
Wed May  9 20:42:05 CEST 2001 - mfabian@suse.de

- bzip2 sources

-------------------------------------------------------------------
Thu Mar 15 16:57:21 CET 2001 - nashif@suse.de

- added -fpic to fix compile error on ia64

-------------------------------------------------------------------
Fri Feb  9 07:02:18 MET 2001 - nashif@suse.de

- Update headers
- Modified init scripts

-------------------------------------------------------------------
Sun Dec  3 17:29:42 MET 2000 - nashif@suse.de

- Fixed %post (exit before insserv)
- Added sub-package pcp-mysql
- Added mysql PMDA to monitor mysql sessions

-------------------------------------------------------------------
Thu Nov 30 15:29:22 MET 2000 - nashif@suse.de

- Update to 2.2.11

-------------------------------------------------------------------
Wed Nov 29 18:15:47 CET 2000 - ro@suse.de

- move rcscript to etc/init.d

-------------------------------------------------------------------
Sun Nov 26 18:29:28 MET 2000 - nashif@suse.de

- Use insserv

-------------------------------------------------------------------
Mon Oct 30 04:32:01 MET 2000 - nashif@suse.de

- Update to version 2.2.10

-------------------------------------------------------------------
Wed Sep 27 03:19:06 MEST 2000 - nashif@suse.de

- Update to 2.1.7

-------------------------------------------------------------------
Fri Jul  7 14:13:33 CEST 2000 - kukuk@suse.de

- Fix for SPARC

-------------------------------------------------------------------
Wed May 24 09:30:43 CEST 2000 - nashif@suse.de

- Initial Release (2.1.4)

