-------------------------------------------------------------------
Mon Feb 23 08:44:04 UTC 2026 - Dirk Müller <dmueller@suse.com>

- update to 3.3.3:
  * Retain Error.pgconn when raising a single exception for
    multiple connection attempt errors
  * Return a proper error when server sends ErrorResponse for a
    Sync after a Parse

-------------------------------------------------------------------
Tue Jan 27 07:37:59 UTC 2026 - Dirk Müller <dmueller@suse.com>

- update to 3.3.2:
  * Add :ref:`template strings queries <template-strings>`
    (:ticket:`#1054`).
  * More flexible :ref:`composite adaptation<adapt-composite>`:
    it is now possible to adapt Python objects to PostgreSQL
    composites and back even if they are not sequences or if they
    take keyword arguments (:ticket:`#932`, :ticket:`#1202`).
  * Cursors are now iterators, not just iterables. This means you
    can call next(cur) or anext(cur), which is useful as a
    :ref:`type-safe expression <typing-fetchone>`
    (:ticket:`#1064`).
  * Add Cursor.set_result() and Cursor.results() to move across
    the result sets of queries executed though
    ~Cursor.executemany() or ~Cursor.execute() with multiple
    statements (:tickets:`#1080, #1170`).
  * Add :ref:`transaction-status` to report the status during and
    after a ~Connection.transaction() block (:ticket:`#969`).
  * Allow to change loaders using
    ~adapt.AdaptersMap.register_loader() on Cursor.adapters after
    a query result has been already returned (:ticket:`#884`).
  * Add pq.PGconn.used_gssapi attribute and
    Capabilities.has_used_gssapi() function (:ticket:`#1138`).
  * Add ConnectionInfo.full_protocol_version attribute,
    Capabilities.has_full_protocol_version() function
    (:ticket:`#1079`).
  * Disable default GSSAPI preferential connection in the binary
    package (:ticket:`#1136`).  Warning Please explicitly set the
    gssencmode_ connection parameter or the
    :envvar:`PGGSSENCMODE` environment variable to interact
    reliably with the GSSAPI.
  * Drop support for Python 3.8 (:ticket:`#976`) and 3.9
    (:ticket:`#1056`).
  * Show the host name in the error message in case of name
    resolution error (:ticket:`#1205`).
  * Fix Cursor.copy() and AsyncCursor.copy() to hold the
    connection lock for the entire operation, preventing
    concurrent access issues (:ticket:`#1210`).
  * Fix GSSAPI check with C extension built with libpq < v16
    (:ticket:`#1216`).

-------------------------------------------------------------------
Tue Nov 11 15:27:55 UTC 2025 - Dirk Müller <dmueller@suse.com>

- update to 3.2.12:
  * Allow copy to pass different types per column, as long as the
    database can convert them. Regression introduced in 3.2.11
  * Fix spurious readiness flags in some of the wait functions
  * Fix high CPU usage using the wait_c function on Windows
  * Fix bad data on error in binary copy (ticket #1147).
  * Respect Copy.set_types() in TEXT copy in C version,
    consistently with the Python version (ticket #1153).
  * Don’t raise warning, and don’t leak resources, if a builtin
    function is used as JSON dumper/loader function (ticket #1165).
  * Improve performance of Python conversion on results loading
   (ticket #1155).

-------------------------------------------------------------------
Mon Sep 29 21:09:24 UTC 2025 - Dirk Müller <dmueller@suse.com>

- update to 3.2.10:
  * Fix TypeError shadowing CancelledError upon task cancellation
    during pipeline execution (ticket #1005).
  * Fix memory leak when lambda/local functions are used as
    argument for set_json_dumps(), set_json_loads() (ticket #1108).
  * Fix coordination of executemany() with other concurrent
    operations on other cursors (ticket #1130).
  * Fix leak receiving notifications if the notifies() generator
    is not called (ticket #1091).
  * Using both the generator and handlers to receive notifications
    on the same connection is therefore deprecated and will now
    generate a runtime warning.
  * Add support for Python 3.14 (ticket #1053).

-------------------------------------------------------------------
Thu May 29 09:44:26 UTC 2025 - Dirk Müller <dmueller@suse.com>

- update to 3.2.9:
  * Fix `DateFromTicks` and `TimeFromTicks` return values to return
    a date and a time referred to the UTC timezone rather than to
    the local timezone. For consistency, `TimestampFromTicks` to
    return a datetime in UTC rather than in the local timezone
  * Fix `~Cursor.rownumber` after using  `~AsyncServerCursor.scroll()`
    on `AsyncServerCursor` (:ticket:`#1066`).
  * Fix interval parsing with days or other parts and negative time
    in C module
  * Don't process further connection attempts after Ctrl-C
  * Fix cursors to correctly iterate over rows even if their row
    factory returns `None` (:ticket:`#1073`).
  * Fix `ConnectionInfo.port` when the port is specified as an
    empty string
  * Report all the attempts error messages in the exception raised
    for a connection failure (:ticket:`#1069`).
  * Improve logging on connection (:ticket:`#1085`).
  * Add support for PostgreSQL 18 libpq (:ticket:`#1082`).
  * Add SRID support to shapely dumpers/loaders (:ticket:`#1028`).
  * Add support for binary hstore (:ticket:`#1030`).

-------------------------------------------------------------------
Wed Apr  9 06:53:27 UTC 2025 - Antonio Larrosa <alarrosa@suse.com>

- update to 3.2.6:
  * Fix connection semantic when using
    target_session_attrs=prefer-standby (ticket #1021).
- update to 3.2.5:
  * 3x faster UUID loading thanks to C implementation
    (tickets #447, #998).
- update to 3.2.4:
  * Don’t lose notifies received whilst the notifies() iterator
    is not running (ticket #962).
  * Make sure that the notifies callback is called during the use
    of the notifies() generator (ticket #972).
  * Raise the correct error returned by the database (such as
    AdminShutdown or IdleInTransactionSessionTimeout) instead of
    a generic OperationalError when a server error causes a client
    disconnection (ticket #988).
  * Build macOS dependencies from sources instead using the
    Homebrew versions in order to avoid problems with
    MACOSX_DEPLOYMENT_TARGET (ticket #858).
  * Bump libpq to 17.2 in Linux and macOS binary packages.
  * Bump libpq to 16.4 in Windows binary packages, using the
    vcpkg library (ticket #966).

-------------------------------------------------------------------
Tue Nov 12 16:28:30 UTC 2024 - Dirk Müller <dmueller@suse.com>

- update to 3.2.3:
  * Release binary packages including PostgreSQL 17 libpq
  * Drop TypeDef specifications as string from public modules, as
    they cannot be composed by users as typing objects previously
    could (ticket #860).
  * Release Python 3.13 binary packages.

-------------------------------------------------------------------
Sat Aug 31 12:26:21 UTC 2024 - Dirk Müller <dmueller@suse.com>

- update to 3.2.1:
  * Fix packaging metadata breaking [c], [binary] dependencies
  * Add support for integer, floating point, boolean NumPy scalar
    types (ticket #332).
  * Add timeout and stop_after parameters to Connection.notifies()
  * Allow dumpers to return None, to be converted to NULL (ticket
  * Add Raw query cursors to execute queries using placeholders in
    PostgreSQL format ($1, $2…) (tickets #560, #839).
  * Add capabilities object to inspect the libpq capabilities
  * Add scalar_row to return scalar values from a query
  * Add cancel_safe() for encrypted and non-blocking cancellation when
    using libpq v17. Use such method internally to implement
    KeyboardInterrupt and copy termination
  * The context parameter of sql objects as_string() and as_bytes()
    methods is now optional
  * Add set_autocommit() on sync connections, and similar transaction
    control methods available on the async connections.
  * Add a size parameter to stream() to enable results retrieval in
    chunks instead of row-by-row

------------------------------------------------------------------
Thu May 16 08:37:46 UTC 2024 - Dirk Müller <dmueller@suse.com>

- update to 3.1.19:
  * Fix unaligned access undefined behaviour in C extension (ticket #734).
  * Fix excessive stripping of error message prefixes (ticket #752).
  * Allow to specify the connect_timeout connection parameter as float (ticket #796).
  * Improve COPY performance on macOS (ticket #745).

-------------------------------------------------------------------
Sat Mar 16 09:43:36 UTC 2024 - Dirk Müller <dmueller@suse.com>

- update to 3.1.18:
  * Fix possible deadlock on pipeline exit (ticket #685).
  * Fix overflow loading large intervals in C module (ticket #719).
  * Fix compatibility with musl libc distributions affected
    by CPython issue #65821 (ticket #725).

-------------------------------------------------------------------
Mon Jan 15 13:03:50 UTC 2024 - Antonio Larrosa <alarrosa@suse.com>

- Use %sle15_python_module_pythons

-------------------------------------------------------------------
Sun Jan  7 19:17:40 UTC 2024 - Dirk Müller <dmueller@suse.com>

- update to 3.1.17:
  * add missing enum entries

-------------------------------------------------------------------
Fri Jan  5 17:49:03 UTC 2024 - Dirk Müller <dmueller@suse.com>

- update to 3.1.16:
  * version only update

-------------------------------------------------------------------
Thu Dec 14 21:08:26 UTC 2023 - Dirk Müller <dmueller@suse.com>

- update to 3.1.15:
  * Fix use of service in connection string
  * Fix async connection to hosts resolving to multiple IP
    addresses
  * Respect the PGCONNECT_TIMEOUT environment variable to
    determine the connection timeout.
  * Psycopg 3.1.14
  * Fix interaction with gevent (ticket #527).
  * Add support for PyPy (ticket #686).

-------------------------------------------------------------------
Fri Nov 24 13:58:45 UTC 2023 - Antonio Larrosa <alarrosa@suse.com>

- Update to 3.1.13:
  * Raise DataError instead of whatever internal failure trying to
    dump a time object with with a tzinfo specified as ZoneInfo
    (ambiguous offset, see ticket #652).
  * Handle gracefully EINTR on signals instead of raising
    InterruptedError, consistently with PEP 475 guideline
    (ticket #667).
  * Fix support for connection strings with multiple hosts/ports
    and for the load_balance_hosts connection parameter
    (ticket #674).
  * Fix memory leak receiving notifications in Python
    implementation (ticket #679).
- Update to 3.1.12:
  * Fix possible hanging if a connection is closed while querying
    (ticket #608).
  * Fix memory leak when register_*() functions are called
    repeatedly (ticket #647).
  * Release Python 3.12 binary packages.
- Update to 3.1.11:
  * Avoid caching the parsing results of large queries to avoid
    excessive memory usage (ticket #628).
  * Fix integer overflow in C/binary extension with OID > 2^31
    (ticket #630).
  * Fix loading of intervals with days and months or years
    (ticket #643).
  * Work around excessive CPU usage on Windows (reported in
    ticket #645).
  * Fix building on Solaris and derivatives (ticket #632).
  * Fix possible lack of critical section guard in
    async executemany().
  * Fix missing pipeline fetch in async scroll().
  * Build binary packages with libpq 15.4, which allows
    group-readable permissions on the SSL certificate on the client
    (ticket #528).
- Update to 3.1.10
  * Allow JSON dumpers to dump bytes directly instead of str, for
    better compatibility with libraries like orjson and msgspec
    (ticket #569)
  * Fix prepared statement cache validation when exiting pipeline
    mode (or executemany()) in case an error occurred within the
    pipeline (ticket #585).
  * Fix connect() to avoid “leaking” an open PGconn attached to
    the OperationalError in case of connection failure.
    Error.pgconn is now a shallow copy of the real libpq
    connection, and the latter is closed before the exception
    propagates (ticket #565).
  * Fix possible (ignored) exception on objects deletion
    (ticket #591).
  * Don’t clobber a Python exception raised during COPY FROM with
    the resulting QueryCanceled raised as a consequence
    (ticket #593).
  * Fix resetting Connection.read_only and deferrable to their
    default value using None (ticket #612).
  * Add support for Python 3.12.

-------------------------------------------------------------------
Wed Jul 12 05:34:34 UTC 2023 - Steve Kowalik <steven.kowalik@suse.com>

- Initial release of 3.1.9
