From 3c5b05de514289c30130ef98fa796591e1acdb29 Mon Sep 17 00:00:00 2001
From: Ben Greiner <code@bnavigator.de>
Date: Fri, 4 Dec 2020 20:27:25 +0100
Subject: [PATCH 1/2] Fix AliasNode.copy()

---
 sphinx/domains/c.py | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

diff --git a/sphinx/domains/c.py b/sphinx/domains/c.py
index d18094217a..206d049f75 100644
--- a/sphinx/domains/c.py
+++ b/sphinx/domains/c.py
@@ -3452,7 +3452,8 @@ def __init__(self, sig: str, maxdepth: int, document: Any, env: "BuildEnvironmen
             self.parentKey = parentKey
 
     def copy(self: T) -> T:
-        return self.__class__(self.sig, env=None, parentKey=self.parentKey)  # type: ignore
+        return self.__class__(self.sig, self.maxdepth, self.document,
+                              env=None, parentKey=self.parentKey)  # type: ignore
 
 
 class AliasTransform(SphinxTransform):

From a549d8ff2e0371531b8ec8af1d2133812d60b2bb Mon Sep 17 00:00:00 2001
From: Ben Greiner <code@bnavigator.de>
Date: Fri, 4 Dec 2020 20:48:02 +0100
Subject: [PATCH 2/2] Fix mypy type error

---
 sphinx/domains/c.py | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/sphinx/domains/c.py b/sphinx/domains/c.py
index 206d049f75..38b81e3fa6 100644
--- a/sphinx/domains/c.py
+++ b/sphinx/domains/c.py
@@ -3451,9 +3451,9 @@ def __init__(self, sig: str, maxdepth: int, document: Any, env: "BuildEnvironmen
             assert parentKey is not None
             self.parentKey = parentKey
 
-    def copy(self: T) -> T:
+    def copy(self) -> 'AliasNode':
         return self.__class__(self.sig, self.maxdepth, self.document,
-                              env=None, parentKey=self.parentKey)  # type: ignore
+                              env=None, parentKey=self.parentKey)
 
 
 class AliasTransform(SphinxTransform):
