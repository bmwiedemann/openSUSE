From 6393d51947c94a2ba43aff3b44966827f2cf7b27 Mon Sep 17 00:00:00 2001
From: Christophe Giboudeaux <christophe@krop.fr>
Date: Thu, 9 Apr 2020 13:23:56 +0200
Subject: [PATCH] Fix build with python 3.8.

python-config --libs doesn't contain the python3.8 library.
---
 build/python.prf | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

diff --git a/build/python.prf b/build/python.prf
index 165ad3b..be45d23 100644
--- a/build/python.prf
+++ b/build/python.prf
@@ -36,6 +36,8 @@ macx {
   # on linux, python-config is used to autodetect Python.
   # make sure that you have installed a matching python-dev package.
   
-  unix:LIBS += $$system(python$${PYTHON_VERSION}-config --libs)
+  system(python$${PYTHON_VERSION}-config --embed --libs) {
+    unix:LIBS += $$system(python$${PYTHON_VERSION}-config --embed --libs)
+  } else: unix:LIBS += $$system(python$${PYTHON_VERSION}-config --libs)
   unix:QMAKE_CXXFLAGS += $$system(python$${PYTHON_VERSION}-config --includes)
 }
-- 
2.26.0

