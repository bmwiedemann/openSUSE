From f2e40852cf29a781ef5682fd675cd3e15d69f277 Mon Sep 17 00:00:00 2001
From: Mike Gorse <mgorse@suse.com>
Date: Mon, 27 Sep 2021 16:41:40 -0500
Subject: [PATCH] Testsuite fixes

---
 tests/dummyatk/my-atk-hyperlink.h | 2 ++
 tests/dummyatk/my-atk-object.c    | 5 ++++-
 2 files changed, 6 insertions(+), 1 deletion(-)

diff --git a/tests/dummyatk/my-atk-hyperlink.h b/tests/dummyatk/my-atk-hyperlink.h
index 35af13e..c07bc34 100644
--- a/tests/dummyatk/my-atk-hyperlink.h
+++ b/tests/dummyatk/my-atk-hyperlink.h
@@ -50,5 +50,7 @@ struct _MyAtkHyperlinkClass
     AtkHyperlinkClass parent;
 };
 
+MyAtkHyperlink* my_atk_hyperlink_new(gint start_index, gint end_index,const gchar* uri);
+
 GType my_atk_hyperlink_get_type();
 #endif /*MY_ATK_HYPERLINK_H*/
diff --git a/tests/dummyatk/my-atk-object.c b/tests/dummyatk/my-atk-object.c
index 2b69583..218cc9e 100644
--- a/tests/dummyatk/my-atk-object.c
+++ b/tests/dummyatk/my-atk-object.c
@@ -116,7 +116,8 @@ static AtkStateSet *my_atk_object_ref_state_set(AtkObject *accessible)
 
     if (obj->state_set == NULL)
         obj->state_set = atk_state_set_new();
-    return g_object_ref(G_OBJECT(obj->state_set));
+    g_object_ref(obj->state_set);
+    return obj->state_set;
 }
 
 static AtkAttributeSet *my_atk_object_get_attributes (AtkObject *accessible)
@@ -139,6 +140,8 @@ static AtkAttributeSet *my_atk_object_get_attributes (AtkObject *accessible)
     rs = g_slist_append(rs, (gpointer) a); 
     rs = g_slist_append(rs, (gpointer) b); 
     rs = g_slist_append(rs, (gpointer) c); 
+
+    return rs;
 }
 
 //function, needed in instance_finalize()
-- 
2.33.0

