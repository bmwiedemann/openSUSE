--- m4/malloc.m4
+++ m4/malloc.m4
@@ -27,8 +27,7 @@
 	 jm_cv_func_working_malloc=no)
   ])
   if test $jm_cv_func_working_malloc = no; then
-    AC_SUBST(LIBOBJS)
-    LIBOBJS="$LIBOBJS malloc.$ac_objext"
+    AC_LIBOBJ(malloc)
     AC_DEFINE_UNQUOTED(malloc, rpl_malloc,
       [Define to rpl_malloc if the replacement function should be used.])
   fi
--- m4/realloc.m4
+++ m4/realloc.m4
@@ -27,8 +27,7 @@
 	 jm_cv_func_working_realloc=no)
   ])
   if test $jm_cv_func_working_realloc = no; then
-    AC_SUBST(LIBOBJS)
-    LIBOBJS="$LIBOBJS realloc.$ac_objext"
+    AC_LIBOBJ(realloc)
     AC_DEFINE_UNQUOTED(realloc, rpl_realloc,
       [Define to rpl_realloc if the replacement function should be used.])
   fi
--- src/Makefile.am
+++ src/Makefile.am
@@ -11,7 +11,7 @@
 
 CPPFLAGS = -DYYDEBUG
 INCLUDES = -I.. -I$(srcdir) -I$(top_srcdir)/lib
-LFLAGS = -8pd
+LFLAGS = -8 -p -d
 YFLAGS = -dtv
 
 essai-elisp: xpot
