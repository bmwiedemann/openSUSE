-------------------------------------------------------------------
Sun Aug 14 10:47:53 UTC 2022 - Ben Greiner <code@bnavigator.de>

- Update to v2.1.2
  * Fix a bug that dependencies from different versions of the same
    package override each other. #1307
  * Forward SIGTERM to child processes in pdm run. #1312
  * Fix errors when running on FIPS 140-2 enabled systems using
    Python 3.9 and newer. #1313
  * Fix the build failure when the subprocess outputs with non-UTF8
    characters. #1319
  * Delay the trigger of post_lock for add and update operations,
    to ensure the pyproject.toml is updated before the hook is run.
    #1320
- Release 2.1.1
  * Add a env_file.override option that allows the user to specify
    that the env_file should override any existing environment
    variables. This is not the default as the environment the code
    runs it should take precedence. #1299
  * Fix a bug that unnamed requirements can't override the old ones
    in either add or update command. #1287
  * Support mutual TLS to private repositories via pypi.client_cert
    and pypi.client_key config options. #1290
  * Set a minimum version for the packaging dependency to ensure
    that packaging.utils.parse_wheel_filename is available. #1293
  * Fix a bug that checking for PDM update creates a venv. #1301
  * Prefer compatible packages when fetching metadata. #1302
- Release 2.1.0
  * Allow the use of custom CA certificates using the pypi.ca_certs
    config entry. #1240
  * Add pdm export to available pre-commit hooks. #1279
  * Skip incompatible requirements when installing build
    dependencies. #1264
  * Fix a crash when pdm tries to publish a package with non-ASCII
    characters in the metadata. #1270
  * Try to read the lock file even if the lock version is
    incompatible. #1273
  * For packages that are only available as source distribution,
    the summary field in pdm.lock contains the description from the
    package's pyproject.toml. #1274
  * Do not crash when calling pdm show for a package that is only
    available as source distribution. #1276
  * Fix a bug that completion scripts are interpreted as rich
    markups. #1283
  * Remove the dependency of pip. #1268
  * Deprecate the top-level imports from pdm module, it will be
    removed in the future. #1282
- Release 2.0.3
  * Support Conda environments when detecting the project
    environment. #1253
  * Fix the interpreter resolution to first try python executable
    in the PATH. #1255
  * Stabilize sorting of URLs in metadata.files in pdm.lock. #1256
  * Don't expand credentials in the file URLs in the [metada.files]
    table of the lock file. #1259
- Release 2.0.2
  * env_file variables no longer override existing environment
    variables. #1235
  * Support referencing other optional groups in
    optional-dependencies with <this_package_name>[group1, group2]
    #1241
  * Respect requires-python when creating the default venv. #1237
- Release 2.0.1
  * Write lockfile before calling 'post_lock' hook #1224
  * Suppress errors when cache dir isn't accessible. #1226
  * Don't save python path for venv commands. #1230
- Release 2.0.0
  * Fix a bug that the running env overrides the PEP 582
    PYTHONPATH. #1211
  * Add pwsh as an alias of powershell for shell completion. #1216
  * Fixed a bug with zsh completion regarding --pep582 flag. #1218
  * Fix a bug of requirement checking under non-isolated mode.
    #1219
  * Fix a bug when removing packages, TOML document might become
    invalid. #1221
- Back to testing all python flavors in one go: CLI tests fail if
  only one python interpreter is found. The test suite runs under 3
  minutes per flavor on a normal workstation.

-------------------------------------------------------------------
Sun Jun 19 22:03:26 UTC 2022 - Ben Greiner <code@bnavigator.de>

- Fix runtime requirements, test by removing build requirements and
  let it pull in in test flavors.

-------------------------------------------------------------------
Fri Jun 17 07:42:46 UTC 2022 - Steve Kowalik <steven.kowalik@suse.com>

- Update to 1.15.2:
  * Fix a defect in the resolution preferences that causes an infinite
    resolution loop. #1119
  * Update the poetry importer to support the new [tool.poetry.build] config
    table. #1131
  * Fix a bug where dependencies with requires-python pre-release versions 
    caused pdm update to fail with InvalidPyVersion. #1111
  * Fix a bug that dependencies are missing from the dep graph when they are
    depended by a requirement with extras. #1097
  * Allow specifying lockfile other than pdm.lock by --lockfile option or
    PDM_LOCKFILE env var. #1038
  * Ensure the pip module inside venv in installation script. #1053
  * Fix a bug that file paths in URLs are not correctly unquoted. #1073
  * Fix a bug on Python 3.11 that overriding an existing command from plugins
    raises an error. #1075
  * Fix a bug of missing subdirectory fragment when importing from a
    requirements.txt. #1036
  * Fix use_cache.json with corrupted python causes pdm use error. #1039
  * Fix a bug that requirement with extras isn't resolved to the version as
    specified by the range. #1001
  * Support installer 0.5.x. #1002
  * Don't create project files in pdm search command. #993
  * Fix a bug that the env vars in source urls in exported result are not
    expanded. #997
  * Don't follow symlinks for the paths in the requirement strings. #976
  * Fix a bug that _.site_packages is overridden by default option value. #985
  * Filter out the unmatched python versions when listing the available
    versions. #941
  * Fix a bug displaying the available python versions. #943
  * Fix a bug under non-UTF8 console encoding. #960
  * Fix a bug that data files are not copied to the destination when using
    installation cache. #961
  * Switch from pythonfinder to findpython as the Python version finder. #930
  * Fix a regression issue that prereleases can't be installed if the version
    specifier of the requirement doesn't imply that. #920
  * Fix a race condition in parallel installation by changing metadata to a
    lazy property. This fixes a bug that incompatible wheels are installed
    unexpectedly. #924
  * Fix a bug that incompatible platform-specific wheels are installed. #921
  * Fix the compatibility issue with pip>=22.0. #875
  * Fix the hash calculation when generating direct_url.json for a local
    pre-built wheel. #861
  * Reduce the number of tests that require network, and mark the rest with
    network marker. #858 
- Remove artifacts.tar.gz, it is now included in the source tarball.
- Drop patches because they are included upstream:
  * mark-network-tests.patch
  * mark-tests-path.patch
  * sys-exec-failures.patch
- Add patch instrumentation-test-case.patch:
  * Instrument a test case for ease of debugging.
- Switch to multibuild per Python version since the testsuite takes
  approximately seven eons.

-------------------------------------------------------------------
Mon Jan 24 09:37:39 UTC 2022 - Matej Cepl <mcepl@suse.com>

- My ad-hoc patch failed_test_use_command.patch replaced by the
  upstream mark-tests-path.patch (from
  gh#pdm-project/pdm#commit/23f1cf62a302 and gh#pdm-project/pdm#865).

-------------------------------------------------------------------
Sun Jan 23 20:56:10 UTC 2022 - Matej Cepl <mcepl@suse.com>

- By downgrading python-installer to 0.3 we have eliminated
  number of failed tests.

-------------------------------------------------------------------
Sun Jan 23 00:55:41 UTC 2022 - Matej Cepl <mcepl@suse.com>

- Replacing mark-network-tests.patch with the upstream PR
  (gh#pdm-project/pdm#864), which unfortunately leaves a lot of
  tests still failing.

-------------------------------------------------------------------
Fri Jan 21 01:35:33 UTC 2022 - Matej Cepl <mcepl@suse.com>

- Add mark-network-tests.patch for skipping network-requiring
  tests (gh#pdm-project/pdm#858). This is a very shotgun
  approach, just mark everything which fails.
- Add sys-exec-failures.patch to fix problems with the version
  number of Python 3.10 (gh#pdm-project/pdm#865).

-------------------------------------------------------------------
Thu Jan 20 18:51:14 UTC 2022 - Matej Cepl <mcepl@suse.com>

- Initial packaging effort for pdm 1.12.6
