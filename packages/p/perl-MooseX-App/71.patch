From 55cf0fec6b5f25fba2ac9adabf14b0923fbf9c73 Mon Sep 17 00:00:00 2001
From: "Bernhard M. Wiedemann" <bernhard+gitcommit lsmod.de>
Date: Sun, 15 Oct 2023 17:58:57 +0200
Subject: [PATCH] Allow to override build date with SOURCE_DATE_EPOCH

in order to make builds reproducible.
See https://reproducible-builds.org/ for why this is good
and https://reproducible-builds.org/specs/source-date-epoch/
for the definition of this variable.

Also use UTC/gmtime to be independent of timezone.
---
 lib/MooseX/App/Plugin/BashCompletion/Command.pm | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/lib/MooseX/App/Plugin/BashCompletion/Command.pm b/lib/MooseX/App/Plugin/BashCompletion/Command.pm
index 311cc2f..afe5c66 100644
--- a/lib/MooseX/App/Plugin/BashCompletion/Command.pm
+++ b/lib/MooseX/App/Plugin/BashCompletion/Command.pm
@@ -22,7 +22,7 @@ sub bash_completion {
     my $package         = __PACKAGE__;
     my $prefix          = $app_meta->app_base;
 
-    my ($sec,$min,$hour,$mday,$mon,$year) = localtime(time);
+    my ($sec,$min,$hour,$mday,$mon,$year) = gmtime($ENV{SOURCE_DATE_EPOCH} || time);
     $year               += 1900;
     $mday               = sprintf('%02i',$mday);
     $mon                = sprintf('%02i',$mon+1);
