From c75039547a57036a627e067173a2b4c136350b66 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Miro=20Hron=C4=8Dok?= <miro@hroncok.cz>
Date: Tue, 20 Aug 2019 11:30:02 +0200
Subject: [PATCH] Use importlib.metadata from the standard library on Python
 3.8+

---
 kombu/utils/compat.py    | 6 +++++-
 requirements/default.txt | 2 +-
 2 files changed, 6 insertions(+), 2 deletions(-)

Index: kombu-4.6.5/kombu/utils/compat.py
===================================================================
--- kombu-4.6.5.orig/kombu/utils/compat.py
+++ kombu-4.6.5/kombu/utils/compat.py
@@ -7,7 +7,11 @@ import sys
 from functools import wraps
 
 from contextlib import contextmanager
-import importlib_metadata
+
+try:
+    from importlib import metadata as importlib_metadata
+except ImportError:
+    import importlib_metadata
 
 from kombu.five import reraise
 
Index: kombu-4.6.5/requirements/default.txt
===================================================================
--- kombu-4.6.5.orig/requirements/default.txt
+++ kombu-4.6.5/requirements/default.txt
@@ -1,2 +1,2 @@
 amqp==2.5.1
-importlib-metadata>=0.18
+importlib-metadata>=0.18; python_version<"3.8"
