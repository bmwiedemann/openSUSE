From 53cb5f830207dd417d20e0e55aab2e6764f0d6fc Mon Sep 17 00:00:00 2001
From: Victorien <65306057+Viicos@users.noreply.github.com>
Date: Thu, 4 Dec 2025 11:10:39 +0100
Subject: [PATCH] Remove `xfail` marker on a PEP 649 related test (#12609)

Thanks to https://github.com/python/cpython/pull/138164 (included in 3.14.1), Python is now able to preserve references when building the forward ref object, and so calling `_eval_type()` on the individual annotations works as expected.
---
 tests/test_deferred_annotations.py | 6 ------
 1 file changed, 6 deletions(-)

diff --git a/tests/test_deferred_annotations.py b/tests/test_deferred_annotations.py
index c8a9c65dae2..c36281c0a6d 100644
--- a/tests/test_deferred_annotations.py
+++ b/tests/test_deferred_annotations.py
@@ -36,12 +36,6 @@ class Model(BaseModel):
     assert inst.b == 'test'
 
 
-@pytest.mark.xfail(
-    reason=(
-        'When rebuilding model fields, we individually re-evaluate all fields (using `_eval_type()`) '
-        "and as such we don't benefit from PEP 649's capabilities."
-    ),
-)
 def test_deferred_annotations_nested_model() -> None:
     def outer():
         def inner():
