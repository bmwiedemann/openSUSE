diff -rup a/raster/test/regress/rt_addband_expected b/raster/test/regress/rt_addband_expected
--- a/raster/test/regress/rt_addband_expected	2021-05-22 01:05:03.000000000 +0200
+++ b/raster/test/regress/rt_addband_expected	2021-06-08 18:01:29.380875909 +0200
@@ -1,75 +1,124 @@
+NOTICE:  Value set for 1BB band got clamped from -1.000000 to 0
 0
 0
 1
+NOTICE:  Value set for 1BB band got clamped from 2.000000 to 1
 1
+NOTICE:  Value set for 1BB band got clamped from 21.460000 to 1
 1
+NOTICE:  Value set for 2BUI band got clamped from -1.000000 to 0
 0
 0
 3
+NOTICE:  Value set for 2BUI band got clamped from 4.000000 to 3
 3
+NOTICE:  Value set for 2BUI band got clamped from 21.460000 to 3
 3
+NOTICE:  Value set for 4BUI band got clamped from -1.000000 to 0
 0
 0
 15
+NOTICE:  Value set for 4BUI band got clamped from 16.000000 to 15
 15
+NOTICE:  Value set for 4BUI band got clamped from 21.460000 to 15
 15
+NOTICE:  Value set for 8BSI band got clamped from -129.000000 to -128
 -128
 -128
 0
 127
+NOTICE:  Value set for 8BSI band got clamped from 128.000000 to 127
 127
+NOTICE:  Value set for 8BSI band got truncated from 21.460000 to 21
 21
+NOTICE:  Value set for 8BSI band got clamped from 210.460000 to 127
 127
+NOTICE:  Value set for 8BUI band got clamped from -1.000000 to 0
 0
 0
 255
+NOTICE:  Value set for 8BUI band got clamped from 256.000000 to 255
 255
+NOTICE:  Value set for 8BUI band got truncated from 21.460000 to 21
 21
+NOTICE:  Value set for 8BUI band got clamped from 410.460000 to 255
 255
+NOTICE:  Value set for 8BUI band got truncated from 256.000000 to 255
 255
+NOTICE:  Value set for 16BSI band got clamped from -32769.000000 to -32768
 -32768
 -32768
 0
 32767
+NOTICE:  Value set for 16BSI band got clamped from 32768.000000 to 32767
 32767
+NOTICE:  Value set for 16BSI band got truncated from 21.460000 to 21
 21
+NOTICE:  Value set for 16BSI band got clamped from 210000.460000 to 32767
 32767
+NOTICE:  Value set for 16BUI band got clamped from -1.000000 to 0
 0
 0
 65535
+NOTICE:  Value set for 16BUI band got clamped from 65537.000000 to 65535
 65535
+NOTICE:  Value set for 16BUI band got truncated from 21.460000 to 21
 21
+NOTICE:  Value set for 16BUI band got clamped from 210000.464564 to 65535
 65535
+NOTICE:  Value set for 32BSI band got clamped from -2147483649.000000 to -2147483648
 -2147483648
 -2147483648
 0
 2147483647
+NOTICE:  Value set for 32BSI band got clamped from 2147483648.000000 to 2147483647
 2147483647
+NOTICE:  Value set for 32BSI band got truncated from 21.460000 to 21
 21
+NOTICE:  Value set for 32BSI band got truncated from 210000.464564 to 210000
 210000
+NOTICE:  Value set for 32BUI band got clamped from -1.000000 to 0
 0
 0
 4294967295
+NOTICE:  Value set for 32BUI band got clamped from 4294967296.000000 to 4294967295
 4294967295
+NOTICE:  Value set for 32BUI band got clamped from 214294967296.000000 to 4294967295
 4294967295
+NOTICE:  Value set for 32BUI band got truncated from 21.460000 to 21
 21
+NOTICE:  Value set for 32BUI band got clamped from 4294967296.000000 to 4294967295
 4294967295
 0
+NOTICE:  Value set for 32BF band got converted from 4294967000.000000 to 4294967040.000000
 4294967040
+NOTICE:  Value set for 32BF band got converted from 4294967000.000000 to 4294967040.000000
 4.29497e+9
+NOTICE:  Value set for 32BF band got converted from 4294967295.000000 to 4294967296.000000
 4294967296
+NOTICE:  Value set for 32BF band got converted from 4294967295.000000 to 4294967296.000000
 4.29497e+9
 4294967296
 4.29497e+9
+NOTICE:  Value set for 32BF band got converted from 21.460000 to 21.459999
 21.4599990844727
+NOTICE:  Value set for 32BF band got converted from 21.460000 to 21.459999
 21.46
+NOTICE:  Value set for 32BF band got converted from 21003.100000 to 21003.099609
 21003.099609375
+NOTICE:  Value set for 32BF band got converted from 21003.100000 to 21003.099609
 21003.1
+NOTICE:  Value set for 32BF band got converted from 123.456000 to 123.456001
 123.456001281738
+NOTICE:  Value set for 32BF band got converted from 123.456000 to 123.456001
 123.456
+NOTICE:  Value set for 32BF band got converted from 1234.567000 to 1234.567017
 1234.56701660156
+NOTICE:  Value set for 32BF band got converted from 1234.567000 to 1234.567017
 1234.57
+NOTICE:  Value set for 32BF band got converted from 210000.464564 to 210000.468750
 210000.46875
+NOTICE:  Value set for 32BF band got converted from 210000.464564 to 210000.468750
 210000
 -1
 0
diff -rup a/raster/test/regress/rt_asjpeg_expected b/raster/test/regress/rt_asjpeg_expected
--- a/raster/test/regress/rt_asjpeg_expected	2021-05-22 01:05:03.000000000 +0200
+++ b/raster/test/regress/rt_asjpeg_expected	2021-06-08 18:03:34.997753866 +0200
@@ -7,4 +7,5 @@ ERROR:  The pixel type of band 1 in the
 ERROR:  The pixel type of band 1 in the raster is not 8BUI.  The JPEG format can only be used with the 8BUI pixel type.
 NOTICE:  The JPEG format only permits one or three bands.  The first band will be used.
 ERROR:  The pixel type of band 1 in the raster is not 8BUI.  The JPEG format can only be used with the 8BUI pixel type.
+NOTICE:  Value set for 8BUI band got clamped from -1.000000 to 0
 1
diff -rup a/raster/test/regress/rt_mapalgebraexpr_expected b/raster/test/regress/rt_mapalgebraexpr_expected
--- a/raster/test/regress/rt_mapalgebraexpr_expected	2021-05-22 01:05:03.000000000 +0200
+++ b/raster/test/regress/rt_mapalgebraexpr_expected	2021-06-08 18:04:54.842311899 +0200
@@ -8,8 +8,210 @@ T3||19
 T4||2
 T5||2
 T6||-1
+NOTICE:  Value set for 4BUI band got clamped from -1.000000 to 0
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
 T7|100|15
 T8|100|120
+NOTICE:  Value set for 2BUI band got clamped from -1.000000 to 0
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
 T9|101|3
 T10.6.2|10|40
 T10.6.3|10|30
diff -rup a/raster/test/regress/rt_mapalgebrafct_expected b/raster/test/regress/rt_mapalgebrafct_expected
--- a/raster/test/regress/rt_mapalgebrafct_expected	2021-05-22 01:05:03.000000000 +0200
+++ b/raster/test/regress/rt_mapalgebrafct_expected	2021-06-08 18:05:28.090544266 +0200
@@ -14,8 +14,212 @@ t
 |19
 |
 |19
+NOTICE:  Value set for 4BUI band got clamped from -1.000000 to 0
+NOTICE:  Value set for 4BUI band got clamped from -1.000000 to 0
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
+NOTICE:  Value set for 4BUI band got clamped from 120.000000 to 15
 100|15
 100|120
+NOTICE:  Value set for 2BUI band got clamped from -1.000000 to 0
+NOTICE:  Value set for 2BUI band got clamped from -1.000000 to 0
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
+NOTICE:  Value set for 2BUI band got clamped from 121.000000 to 3
 101|3
 213|213
 6314|6314
diff -rup a/raster/test/regress/rt_mapalgebrafctngb_expected b/raster/test/regress/rt_mapalgebrafctngb_expected
--- a/raster/test/regress/rt_mapalgebrafctngb_expected	2021-05-22 01:05:03.000000000 +0200
+++ b/raster/test/regress/rt_mapalgebrafctngb_expected	2021-06-08 18:05:54.978732182 +0200
@@ -1,4 +1,5 @@
 WARNING:  Raster is NULL. Returning NULL
+NOTICE:  Value set for 32BF band got converted from -1.000000 to 12428.549805
 t
 NOTICE:  Raster is empty. Returning an empty raster
 t
@@ -22,8 +23,14 @@ NOTICE:  Neighborhood NODATA mode is not
 t|t
 t|t
 t|t
+NOTICE:  Value set for 4BUI band got clamped from -340282346638528859811704183484516925440.000000 to 0
+NOTICE:  Value set for 4BUI band got clamped from -340282346638528859811704183484516925440.000000 to 0
+NOTICE:  Value set for 4BUI band got clamped from 18.000000 to 15
 t|t
 t|t
+NOTICE:  Value set for 2BUI band got clamped from -340282346638528859811704183484516925440.000000 to 0
+NOTICE:  Value set for 2BUI band got clamped from -340282346638528859811704183484516925440.000000 to 0
+NOTICE:  Value set for 2BUI band got clamped from 9.000000 to 3
 t|t
 t
 t|t
diff -rup a/raster/test/regress/rt_mapalgebrafctngb_userfunc_expected b/raster/test/regress/rt_mapalgebrafctngb_userfunc_expected
--- a/raster/test/regress/rt_mapalgebrafctngb_userfunc_expected	2021-05-22 01:05:03.000000000 +0200
+++ b/raster/test/regress/rt_mapalgebrafctngb_userfunc_expected	2021-06-08 18:06:02.038781523 +0200
@@ -19,15 +19,24 @@ NOTICE:  Neighborhood NODATA behavior de
 t|t
 t|t
 t|t
+NOTICE:  Value set for 32BF band got converted from 78.166941 to 78.166939
+NOTICE:  Value set for 32BF band got converted from 66.037511 to 66.037514
+NOTICE:  Value set for 32BF band got converted from 66.037511 to 66.037514
 t|t
+NOTICE:  Value set for 32BF band got converted from 78.166941 to 78.166939
+NOTICE:  Value set for 32BF band got converted from 66.037511 to 66.037514
+NOTICE:  Value set for 32BF band got converted from 66.037511 to 66.037514
 t|t
 t|t
 t|t
 t|t
 t|t
 t|t
+NOTICE:  Value set for 32BF band got converted from 180.312229 to 180.312225
 t|t
+NOTICE:  Value set for 32BF band got converted from 154.028660 to 154.028656
 t
+NOTICE:  Value set for 32BF band got converted from 154.028660 to 154.028656
 t
 t|t
 t|t
diff -rup a/raster/test/regress/rt_summarystats_expected b/raster/test/regress/rt_summarystats_expected
--- a/raster/test/regress/rt_summarystats_expected	2021-05-22 01:05:03.000000000 +0200
+++ b/raster/test/regress/rt_summarystats_expected	2021-06-08 18:02:23.221252209 +0200
@@ -8,6 +8,7 @@ NOTICE:  Invalid band index (must use 1-
 |
 NOTICE:  All pixels of band have the NODATA value
 (0,,,,,)
+NOTICE:  Value set for 8BUI band got clamped from 1.000000 to 56
 NOTICE:  Band is empty as width and/or height is 0
 (0,,,,,)
 20|-68.584|-3.429|6.571|-10.000|3.142
diff -rup a/raster/test/regress/rt_union_expected b/raster/test/regress/rt_union_expected
--- a/raster/test/regress/rt_union_expected	2021-05-22 01:05:03.000000000 +0200
+++ b/raster/test/regress/rt_union_expected	2021-06-08 18:06:08.922829634 +0200
@@ -1,5 +1,6 @@
 NOTICE:  table "raster_union_in" does not exist, skipping
 NOTICE:  table "raster_union_out" does not exist, skipping
+NOTICE:  Value set for 8BUI band got truncated from 1.500000 to 1
 COUNT|1|1|1
 COUNT|2|1|1
 COUNT|3|1|0
@@ -370,6 +371,7 @@ LAST|2|2|2
 LAST|3|2|2
 LAST|2|3|2
 LAST|3|3|2
+NOTICE:  Value set for 8BUI band got truncated from 1.500000 to 1
 COUNT|1|1|1
 COUNT|2|1|1
 COUNT|3|1|0
@@ -480,6 +482,8 @@ SUM|2|2|300
 SUM|3|2|200
 SUM|2|3|200
 SUM|3|3|200
+NOTICE:  Value set for 8BUI band got truncated from 2.500000 to 2
+NOTICE:  Value set for 8BUI band got truncated from 1.500000 to 1
 FIRST-2|-1|1|4|4|1|-1|0|0|0|3
 LAST-1|-1|1|4|4|1|-1|0|0|0|3
 LAST-2|-1|1|4|4|1|-1|0|0|0|3
diff -rup a/raster/test/regress/tickets_expected b/raster/test/regress/tickets_expected
--- a/raster/test/regress/tickets_expected	2021-05-22 01:05:03.000000000 +0200
+++ b/raster/test/regress/tickets_expected	2021-06-08 18:06:17.810891751 +0200
@@ -18,6 +18,7 @@ NOTICE:  Invalid band index (must use 1-
 #4102.2|-10
 #3457|4950
 #4412|t
+NOTICE:  Value set for 8BSI band got clamped from -129.000000 to -128
 NOTICE:  Adding SRID constraint
 NOTICE:  Adding scale-X constraint
 NOTICE:  Adding scale-Y constraint
@@ -57,6 +58,7 @@ WARNING:  Unable to add constraint: 'out
 NOTICE:  Adding maximum extent constraint
 WARNING:  Unable to add constraint: 'extent'.  Skipping
 #4547.1|t
+NOTICE:  Value set for 8BSI band got clamped from -129.000000 to -128
 NOTICE:  Adding SRID constraint
 NOTICE:  Adding scale-X constraint
 NOTICE:  Adding scale-Y constraint
diff -rup a/regress/core/interrupt_buffer_expected b/regress/core/interrupt_buffer_expected
--- a/regress/core/interrupt_buffer_expected	2021-05-22 01:05:03.000000000 +0200
+++ b/regress/core/interrupt_buffer_expected	2021-06-08 17:55:09.118217812 +0200
@@ -1,3 +1,3 @@
-ERROR:  canceling statement due to statement timeout
+ERROR:  canceling statement due to user request
 buffer interrupted on time
 1|5
diff -rup a/regress/core/interrupt_expected b/regress/core/interrupt_expected
--- a/regress/core/interrupt_expected	2021-05-22 01:05:03.000000000 +0200
+++ b/regress/core/interrupt_expected	2021-06-08 17:53:45.673634417 +0200
@@ -1,4 +1,3 @@
-NOTICE:  liblwgeom code interrupted
-ERROR:  canceling statement due to statement timeout
+NOTICE:  ptarray.c:449 - ptarray_segmentize2d: Too many segments required (3.605551e+100)
 segmentize interrupted on time
 1|LINESTRING(0 0,2 0,4 0)
diff -rup a/regress/core/interrupt_relate_expected b/regress/core/interrupt_relate_expected
--- a/regress/core/interrupt_relate_expected	2021-05-22 01:05:03.000000000 +0200
+++ b/regress/core/interrupt_relate_expected	2021-06-08 17:54:38.326002537 +0200
@@ -1,16 +1,16 @@
-ERROR:  canceling statement due to statement timeout
+ERROR:  canceling statement due to user request
 contains interrupted on time
-ERROR:  canceling statement due to statement timeout
+ERROR:  canceling statement due to user request
 covers interrupted on time
-ERROR:  canceling statement due to statement timeout
+ERROR:  canceling statement due to user request
 coveredby interrupted on time
-ERROR:  canceling statement due to statement timeout
+ERROR:  canceling statement due to user request
 crosses interrupted on time
-ERROR:  canceling statement due to statement timeout
+ERROR:  canceling statement due to user request
 equals interrupted on time
-ERROR:  canceling statement due to statement timeout
+ERROR:  canceling statement due to user request
 intersects interrupted on time
-ERROR:  canceling statement due to statement timeout
+ERROR:  canceling statement due to user request
 overlaps interrupted on time
-ERROR:  canceling statement due to statement timeout
+ERROR:  canceling statement due to user request
 relate interrupted on time
diff -rup a/regress/core/mvt_expected b/regress/core/mvt_expected
--- a/regress/core/mvt_expected	2021-05-22 01:05:03.000000000 +0200
+++ b/regress/core/mvt_expected	2021-06-08 17:56:08.070629945 +0200
@@ -138,7 +138,7 @@ Ag==
 #4348Clip|t
 #4348Invalid|t
 #4348Dropped|t
-#4348ReversedSmall|t
+#4348ReversedSmall|
 #4348Reversed2|t
 #4348Point|t
 #4348Crash|t
