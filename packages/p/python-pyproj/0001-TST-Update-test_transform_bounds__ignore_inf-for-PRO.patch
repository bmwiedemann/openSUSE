From 9283f962e4792da2a7f05ba3735c1ed7f3479502 Mon Sep 17 00:00:00 2001
From: "Alan D. Snow" <alansnow21@gmail.com>
Date: Tue, 3 Jan 2023 21:58:12 -0600
Subject: [PATCH] TST: Update test_transform_bounds__ignore_inf for PROJ 9.2+
 (#1225)

[plus test for PROJ 9.2 from upstream commit 59d16f57387b]
Acked-by: Libor Pechacek <lpechacek@gmx.com>
---
 test/test_transformer.py | 15 ++++++++++-----
 1 file changed, 10 insertions(+), 5 deletions(-)

--- a/test/conftest.py
+++ b/test/conftest.py
@@ -14,6 +14,7 @@ PROJ_GTE_9 = PROJ_LOOSE_VERSION >= versi
 PROJ_GTE_901 = PROJ_LOOSE_VERSION >= version.parse("9.0.1")
 PROJ_GTE_91 = PROJ_LOOSE_VERSION >= version.parse("9.1")
 PROJ_GTE_911 = PROJ_LOOSE_VERSION >= version.parse("9.1.1")
+PROJ_GTE_92 = PROJ_LOOSE_VERSION >= version.parse("9.2.0")
 
 
 def unset_data_dir():
--- a/test/test_transformer.py
+++ b/test/test_transformer.py
@@ -21,6 +21,7 @@ from pyproj.transformer import AreaOfInt
 from test.conftest import (
     PROJ_GTE_9,
     PROJ_GTE_91,
+    PROJ_GTE_92,
     grids_available,
     proj_env,
     proj_network_env,
@@ -1286,17 +1287,21 @@ def test_transform_bounds__beyond_global
 
 
 @pytest.mark.parametrize(
-    "input_crs,expected_bounds",
+    "input_crs,input_bounds,expected_bounds",
     [
-        ("ESRI:102036", (0, -89178008, 0, 0)),
-        ("ESRI:54026", (0, -179545824, 0, 179545824)),
+        (
+            "ESRI:102036",
+            (-180.0, -90.0, 180.0, 1.3 if PROJ_GTE_92 else 0),
+            (0, -116576599 if PROJ_GTE_92 else -89178008, 0, 0),
+        ),
+        ("ESRI:54026", (-180.0, -90.0, 180.0, 90.0), (0, -179545824, 0, 179545824)),
     ],
 )
-def test_transform_bounds__ignore_inf(input_crs, expected_bounds):
+def test_transform_bounds__ignore_inf(input_crs, input_bounds, expected_bounds):
     crs = CRS(input_crs)
     transformer = Transformer.from_crs(crs.geodetic_crs, crs, always_xy=True)
     assert_almost_equal(
-        transformer.transform_bounds(*crs.area_of_use.bounds),
+        transformer.transform_bounds(*input_bounds),
         expected_bounds,
         decimal=0,
     )
