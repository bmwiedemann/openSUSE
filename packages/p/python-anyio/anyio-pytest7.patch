From 58fcb0c495a847e2f6627ec07fe07f4dd6ae9cd9 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Alex=20Gr=C3=B6nholm?= <alex.gronholm@nextday.fi>
Date: Mon, 7 Feb 2022 00:16:18 +0200
Subject: [PATCH] Upgraded pytest to 7.0

---
 setup.cfg                   |  2 +-
 tests/test_pytest_plugin.py | 14 +++++++-------
 2 files changed, 8 insertions(+), 8 deletions(-)

Index: anyio-3.5.0/setup.cfg
===================================================================
--- anyio-3.5.0.orig/setup.cfg
+++ anyio-3.5.0/setup.cfg
@@ -47,7 +47,7 @@ test =
 	contextlib2; python_version < '3.7'
 	coverage[toml] >= 4.5
 	hypothesis >= 4.0
-	pytest >= 6.0
+	pytest >= 7.0
 	pytest-mock >= 3.6.1
 	trustme
 	uvloop < 0.15; python_version < '3.7' and (platform_python_implementation == 'CPython' and platform_system != 'Windows')
Index: anyio-3.5.0/tests/test_pytest_plugin.py
===================================================================
--- anyio-3.5.0.orig/tests/test_pytest_plugin.py
+++ anyio-3.5.0/tests/test_pytest_plugin.py
@@ -1,5 +1,5 @@
 import pytest
-from _pytest.pytester import Testdir
+from _pytest.pytester import Pytester
 
 from anyio import get_all_backends
 
@@ -9,7 +9,7 @@ pytestmark = pytest.mark.filterwarnings(
 pytest_args = '-v', '-p', 'anyio', '-p', 'no:asyncio'
 
 
-def test_plugin(testdir: Testdir) -> None:
+def test_plugin(testdir: Pytester) -> None:
     testdir.makeconftest(
         """
         import sniffio
@@ -67,7 +67,7 @@ def test_plugin(testdir: Testdir) -> Non
     result.assert_outcomes(passed=3 * len(get_all_backends()), skipped=len(get_all_backends()))
 
 
-def test_asyncio(testdir: Testdir) -> None:
+def test_asyncio(testdir: Pytester) -> None:
     testdir.makeconftest(
         """
         import asyncio
@@ -140,7 +140,7 @@ def test_asyncio(testdir: Testdir) -> No
     result.assert_outcomes(passed=2, failed=1, errors=2)
 
 
-def test_autouse_async_fixture(testdir: Testdir) -> None:
+def test_autouse_async_fixture(testdir: Pytester) -> None:
     testdir.makeconftest(
         """
         import pytest
@@ -177,7 +177,7 @@ def test_autouse_async_fixture(testdir:
     result.assert_outcomes(passed=len(get_all_backends()))
 
 
-def test_cancel_scope_in_asyncgen_fixture(testdir: Testdir) -> None:
+def test_cancel_scope_in_asyncgen_fixture(testdir: Pytester) -> None:
     testdir.makepyfile(
         """
         import pytest
@@ -204,7 +204,7 @@ def test_cancel_scope_in_asyncgen_fixtur
     result.assert_outcomes(passed=len(get_all_backends()))
 
 
-def test_hypothesis_module_mark(testdir: Testdir) -> None:
+def test_hypothesis_module_mark(testdir: Pytester) -> None:
     testdir.makepyfile(
         """
         import pytest
@@ -235,7 +235,7 @@ def test_hypothesis_module_mark(testdir:
     result.assert_outcomes(passed=len(get_all_backends()) + 1, xfailed=len(get_all_backends()))
 
 
-def test_hypothesis_function_mark(testdir: Testdir) -> None:
+def test_hypothesis_function_mark(testdir: Pytester) -> None:
     testdir.makepyfile(
         """
         import pytest
