From 9379ef5b73a8a07a6e8c95185db33b849a9d015f Mon Sep 17 00:00:00 2001
From: John Vandenberg <jayvdb@gmail.com>
Date: Sun, 15 Sep 2019 14:13:44 +0700
Subject: [PATCH] test_integration: Use sys.executable

Literal `python` is often `python2` and may not be present at all.

Closes https://github.com/PyCQA/pydocstyle/issues/177
---
 src/tests/test_integration.py | 9 +++++----
 1 file changed, 5 insertions(+), 4 deletions(-)

Index: pydocstyle-6.1.1/src/tests/test_integration.py
===================================================================
--- pydocstyle-6.1.1.orig/src/tests/test_integration.py
+++ pydocstyle-6.1.1/src/tests/test_integration.py
@@ -99,9 +99,10 @@ class SandboxEnv:
         run_target = self.tempdir if target is None else \
             os.path.join(self.tempdir, target)
 
-        cmd = shlex.split("{} {} {}"
-                          .format(self.script_name, run_target, args),
-                          posix=False)
+        cmd = shlex.split(
+            ('"{}" -m {} {} {}' if sys.platform == "nt" else '{} -m {} {} {}')
+            .format(sys.executable, self.script_name, run_target, args),
+            posix=False)
         p = subprocess.Popen(cmd,
                              stdout=subprocess.PIPE,
                              stderr=subprocess.PIPE)
