From 1441bec703cf68161acce5e85907ddd71c47fdc3 Mon Sep 17 00:00:00 2001
From: Stefan Weil <sw@weilnetz.de>
Date: Mon, 18 Jul 2022 08:09:15 +0200
Subject: [PATCH] Add support for upcoming Leptonica 1.83.0

Signed-off-by: Stefan Weil <sw@weilnetz.de>
---
 tesseract5.pxd | 10 ++++++++++
 1 file changed, 10 insertions(+)

diff --git a/tesseract5.pxd b/tesseract5.pxd
index 21ad667..aa7e52d 100644
--- a/tesseract5.pxd
+++ b/tesseract5.pxd
@@ -54,6 +54,16 @@ cdef extern from "leptonica/allheaders.h" nogil:
         L_SEVERITY_ERROR    = 5   # Print error and higher messages
         L_SEVERITY_NONE     = 6   # Highest severity: print no messages
 
+cdef extern from *:
+    """
+    #if (LIBLEPT_MAJOR_VERSION > 1) || (LIBLEPT_MINOR_VERSION > 82)
+    // The public API of Leptonica 1.83.0 hides details of some data
+    // structures which are used by tesserocr (see Pix, Box, ... above).
+    // Get those details by including a private header file.
+    #include <leptonica/pix_internal.h>
+    #endif
+    """
+
 cdef extern from "tesseract/publictypes.h" namespace "tesseract" nogil:
     cdef enum PolyBlockType:
         PT_UNKNOWN          # Type is not yet known. Keep as the first element.
