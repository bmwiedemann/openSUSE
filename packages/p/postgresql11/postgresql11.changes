-------------------------------------------------------------------
Fri Nov 20 11:51:37 UTC 2020 - Reinhard Max <max@suse.com>

- bsc#1178961: %ghost the symlinks to pg_config and ecpg.
- boo#1179765: BuildRequire libpq5 and libecpg6 when not building
  them to avoid dangling symlinks in the devel package.

-------------------------------------------------------------------
Wed Nov 11 12:08:53 UTC 2020 - Reinhard Max <max@suse.com>

- Upgrade to version 11.10:
  * CVE-2020-25695, bsc#1178666: Block DECLARE CURSOR ... WITH HOLD
    and firing of deferred triggers within index expressions and
    materialized view queries.
  * CVE-2020-25694, bsc#1178667:
    a) Fix usage of complex connection-string parameters in pg_dump,
    pg_restore, clusterdb, reindexdb, and vacuumdb.
    b) When psql's \connect command re-uses connection parameters,
    ensure that all non-overridden parameters from a previous
    connection string are re-used.
  * CVE-2020-25696, bsc#1178668: Prevent psql's \gset command from
    modifying specially-treated variables.
  * Fix recently-added timetz test case so it works when the USA
    is not observing daylight savings time.
    (obsoletes postgresql-timetz.patch)
  * https://www.postgresql.org/about/news/2111/
  * https://www.postgresql.org/docs/11/release-11-10.html

-------------------------------------------------------------------
Tue Nov  3 13:54:38 UTC 2020 - Reinhard Max <max@suse.com>

- Fix a DST problem in the test suite: postgresql-timetz.patch
  https://postgr.es/m/16689-57701daa23b377bf@postgresql.org

-------------------------------------------------------------------
Thu Aug 13 14:33:16 UTC 2020 - Reinhard Max <max@suse.com>

- update to 11.9:
  * CVE-2020-14349, bsc#1175193: Set a secure search_path in
    logical replication walsenders and apply workers
  * CVE-2020-14350, bsc#1175194: Make contrib modules' installation
    scripts more secure.
  * https://www.postgresql.org/docs/11/release-11-9.html
- Remove postgresql-regress.patch, it does not apply anymore and
  it does not seem to be needed anymore.
- Pack the /usr/lib/postgresql symlink only into the main package.

-------------------------------------------------------------------
Tue Jun 16 12:21:43 UTC 2020 - Reinhard Max <max@suse.com>

- Let postgresqlXX conflict with postgresql-noarch < 12.0.1 to get
  a clean and complete cutover to the new packaging schema.

-------------------------------------------------------------------
Wed Jun  3 17:35:11 UTC 2020 - Reinhard Max <max@suse.com>

- update to 11.8 (bsc#1171924).
  https://www.postgresql.org/about/news/2038/
  https://www.postgresql.org/docs/11/release-11-8.html
- Unify the spec file to work across all current PostgreSQL
  versions to simplify future maintenance.
- Move from the "libs" build flavour to a "mini" package that will
  only be used inside the build service and not get shipped, to
  avoid confusion with the debuginfo packages (bsc#1148643).

-------------------------------------------------------------------
Sat Feb 15 03:10:12 UTC 2020 - Marcus Rueckert <mrueckert@suse.de>

- update to 11.7: (CVE-2020-1720) 
  https://www.postgresql.org/about/news/2011/
  https://www.postgresql.org/docs/11/release-11-7.html

-------------------------------------------------------------------
Mon Jan 27 09:10:34 UTC 2020 - Guillaume GARDET <guillaume.gardet@opensuse.org>

- Disable explicitly armv8 CRC for %arm, as we use some armv8
  workers for armv6/7 builds which is confusing configure script

-------------------------------------------------------------------
Fri Dec 20 14:58:51 UTC 2019 - Marcus Rueckert <mrueckert@suse.de>

- update to 11.6:
  https://www.postgresql.org/about/news/1994/
  https://www.postgresql.org/docs/11/release-11-6.html

-------------------------------------------------------------------
Tue Oct 22 16:56:44 UTC 2019 - Marcus Rueckert <mrueckert@suse.de>

- add requires to the server-devel package for the libs that are
  returned by pg_config --libs

-------------------------------------------------------------------
Tue Oct 22 12:22:35 UTC 2019 - Marcus Rueckert <mrueckert@suse.de>

- disable building of the libraries here. Will now be provided from
  the 12.0 package

-------------------------------------------------------------------
Mon Aug 12 13:20:15 UTC 2019 - Reinhard Max <max@suse.com>

- Update to 11.5:
  * https://www.postgresql.org/about/news/1960/
  * https://www.postgresql.org/docs/11/release-11-5.html
  * CVE-2019-10208, bsc#1145092: TYPE in pg_temp executes arbitrary
    SQL during SECURITY DEFINER execution.
  * CVE-2019-10209, bsc#1145091: Memory disclosure in cross-type
    comparison for hashed subplan.

-------------------------------------------------------------------
Fri Aug  2 08:54:10 UTC 2019 - Martin Liška <mliska@suse.cz>

- Use FAT LTO objects in order to provide proper static library.

-------------------------------------------------------------------
Fri Jun 21 13:27:15 UTC 2019 - Marcus Rueckert <mrueckert@suse.de>

- update to 11.4:
  * https://www.postgresql.org/docs/11/release-11-4.html
  * https://www.postgresql.org/about/news/1949/
  * CVE-2019-10164 bsc#1138034: Stack-based buffer overflow via
    setting a password

-------------------------------------------------------------------
Fri May 10 09:52:48 UTC 2019 - Reinhard Max <max@suse.com>

- Update to 11.3:
  * https://www.postgresql.org/docs/11/release-11-3.html
  * https://www.postgresql.org/about/news/1939/
  * CVE-2019-10130, bsc#1134689: Prevent row-level security
    policies from being bypassed via selectivity estimators.
  * CVE-2019-10129, bsc#1134684: Avoid access to already-freed
    memory during partition routing error reports.

-------------------------------------------------------------------
Tue Feb 19 15:42:31 UTC 2019 - Reinhard Max <max@suse.com>

- Update to 11.2:
  * https://www.postgresql.org/docs/11/release-11-2.html
  * https://www.postgresql.org/about/news/1920/
  * By default, panic instead of retrying after fsync() failure,
    to avoid possible data corruption.
  * Fix handling of unique indexes with INCLUDE columns on
    partitioned tables.
  * Ensure that NOT NULL constraints of a partitioned table are
    honored within its partitions.
  * Numerous other bug fixes.
- Overhaul README.SUSE

-------------------------------------------------------------------
Fri Jan 11 13:23:20 UTC 2019 - Reinhard Max <max@suse.com>

- The release tags between the main package build and libs might
  be different, but that's not a problem, so we can relax the tight
  dependency of server-devel on devel.
- Adjust the line between headers going to devel and server-devel.
  Now everything under /usr/include/pgsql/server is in server-devel
  and the rest of /usr/include/pgsql is in devel (bsc#1120035).

-------------------------------------------------------------------
Mon Dec  3 12:29:23 UTC 2018 - Marcus Rueckert <mrueckert@suse.de>

- move the server-devel package definition into the buildmain
  section

-------------------------------------------------------------------
Tue Nov 20 09:29:51 UTC 2018 - Guillaume GARDET <guillaume.gardet@opensuse.org>

- Add sha256 file to list of sources
- Update v11.1 files from upstream

-------------------------------------------------------------------
Thu Nov  8 15:08:59 UTC 2018 - Reinhard Max <max@suse.com>

- Update to 11.1:
  * CVE-2018-16850, bsc#1114837: Improper quoting of transition
    table names when pg_dump emits CREATE TRIGGER can cause
    privilege escalation
  * Numerous bug fixes, see the release notes:
    https://www.postgresql.org/docs/current/release-11-1.html
  * Remove unneeded library dependencies from PGXS.

-------------------------------------------------------------------
Mon Oct 22 11:51:50 UTC 2018 - Reinhard Max <max@suse.com>

- Update to 11.0.
  * https://www.postgresql.org/about/news/1894/
  * https://www.postgresql.org/docs/11/static/release-11.html
- Improvements to partitioning functionality, including:
  * Add support for partitioning by a hash key
  * Add support for PRIMARY KEY, FOREIGN KEY, indexes, and triggers
    on partitioned tables.
  * Allow creation of a “default” partition for storing data that
    does not match any of the remaining partitions.
  * UPDATE statements that change a partition key column now cause
    affected rows to be moved to the appropriate partitions.
  * Improve SELECT performance through enhanced partition
    elimination strategies during query planning and execution.
- Improvements to parallelism, including:
  * CREATE INDEX can now use parallel processing while building a
    B-tree index.
  * Parallelization is now possible in CREATE TABLE ... AS, CREATE
    MATERIALIZED VIEW, and certain queries using UNION.
  * Parallelized hash joins and parallelized sequential scans now
    perform better.
- SQL stored procedures that support embedded transactions.
- Optional Just-in-Time (JIT) compilation for some SQL code,
  speeding evaluation of expressions (new subpackage: -llvmjit).
- Window functions now support all framing options shown in the
  SQL:2011 standard, including RANGE distance PRECEDING/FOLLOWING,
  GROUPS mode, and frame exclusion options.
- Covering indexes can now be created, using the INCLUDE clause of
  CREATE INDEX.
- Many other useful performance improvements, including the ability
  to avoid a table rewrite for ALTER TABLE ... ADD COLUMN with a
  non-null column default.
- Split a new -server-devel subpackage from -devel.

-------------------------------------------------------------------
Fri Aug 10 16:00:58 UTC 2018 - mrueckert@suse.de

- update to 11 beta3
  https://www.postgresql.org/docs/11/static/release-11.html
  https://www.postgresql.org/about/news/1878/
  CVE-2018-10925 CVE-2018-10915

-------------------------------------------------------------------
Mon Jul  2 17:04:43 UTC 2018 - mrueckert@suse.de

- initial package
