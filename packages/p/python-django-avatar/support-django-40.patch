From 701a04e372dc66340959015181af498e7121dde1 Mon Sep 17 00:00:00 2001
From: Luis Ernesto Assandri <luigi.assandri@icloud.com>
Date: Thu, 9 Dec 2021 11:50:31 +0100
Subject: [PATCH 1/5] Fixed deprecated library.

---
 avatar/admin.py                    | 2 +-
 avatar/forms.py                    | 2 +-
 avatar/models.py                   | 2 +-
 avatar/templatetags/avatar_tags.py | 2 +-
 avatar/views.py                    | 2 +-
 5 files changed, 5 insertions(+), 5 deletions(-)

Index: django-avatar-5.0.0/avatar/admin.py
===================================================================
--- django-avatar-5.0.0.orig/avatar/admin.py
+++ django-avatar-5.0.0/avatar/admin.py
@@ -4,7 +4,7 @@ try:
     from django.utils import six
 except ImportError:
     import six
-from django.utils.translation import ugettext_lazy as _
+from django.utils.translation import gettext_lazy as _
 from django.template.loader import render_to_string
 
 from avatar.models import Avatar
Index: django-avatar-5.0.0/avatar/forms.py
===================================================================
--- django-avatar-5.0.0.orig/avatar/forms.py
+++ django-avatar-5.0.0/avatar/forms.py
@@ -9,7 +9,7 @@ try:
     from django.utils import six
 except ImportError:
     import six
-from django.utils.translation import ugettext_lazy as _
+from django.utils.translation import gettext_lazy as _
 from django.template.defaultfilters import filesizeformat
 
 from avatar.conf import settings
Index: django-avatar-5.0.0/avatar/models.py
===================================================================
--- django-avatar-5.0.0.orig/avatar/models.py
+++ django-avatar-5.0.0/avatar/models.py
@@ -9,8 +9,8 @@ from django.core.files import File
 from django.core.files.base import ContentFile
 from django.core.files.storage import get_storage_class
 from django.utils.module_loading import import_string
-from django.utils.translation import ugettext_lazy as _
-from django.utils.encoding import force_text
+from django.utils.translation import gettext_lazy as _
+from django.utils.encoding import force_str
 from django.db.models import signals
 
 from avatar.conf import settings
@@ -39,7 +39,7 @@ def avatar_path_handler(instance=None, f
     if settings.AVATAR_EXPOSE_USERNAMES:
         tmppath.append(get_username(instance.user))
     else:
-        tmppath.append(force_text(instance.user.pk))
+        tmppath.append(force_str(instance.user.pk))
     if not filename:
         # Filename already stored in database
         filename = instance.avatar.name
Index: django-avatar-5.0.0/avatar/templatetags/avatar_tags.py
===================================================================
--- django-avatar-5.0.0.orig/avatar/templatetags/avatar_tags.py
+++ django-avatar-5.0.0/avatar/templatetags/avatar_tags.py
@@ -10,7 +10,7 @@ try:
     from django.utils import six
 except ImportError:
     import six
-from django.utils.translation import ugettext as _
+from django.utils.translation import gettext as _
 from django.utils.module_loading import import_string
 
 from avatar.conf import settings
Index: django-avatar-5.0.0/avatar/views.py
===================================================================
--- django-avatar-5.0.0.orig/avatar/views.py
+++ django-avatar-5.0.0/avatar/views.py
@@ -1,5 +1,5 @@
 from django.shortcuts import render, redirect
-from django.utils.translation import ugettext as _
+from django.utils.translation import gettext as _
 # Issue 182: six no longer included with Django 3.0
 try:
     from django.utils import six
Index: django-avatar-5.0.0/avatar/signals.py
===================================================================
--- django-avatar-5.0.0.orig/avatar/signals.py
+++ django-avatar-5.0.0/avatar/signals.py
@@ -1,5 +1,5 @@
 import django.dispatch
 
 
-avatar_updated = django.dispatch.Signal(providing_args=["user", "avatar"])
-avatar_deleted = django.dispatch.Signal(providing_args=["user", "avatar"])
+avatar_updated = django.dispatch.Signal()
+avatar_deleted = django.dispatch.Signal()
Index: django-avatar-5.0.0/avatar/urls.py
===================================================================
--- django-avatar-5.0.0.orig/avatar/urls.py
+++ django-avatar-5.0.0/avatar/urls.py
@@ -1,12 +1,12 @@
-from django.conf.urls import url
+from django.urls import re_path
 
 from avatar import views
 
 urlpatterns = [
-    url(r'^add/$', views.add, name='avatar_add'),
-    url(r'^change/$', views.change, name='avatar_change'),
-    url(r'^delete/$', views.delete, name='avatar_delete'),
-    url(r'^render_primary/(?P<user>[\w\d\@\.\-_]+)/(?P<size>[\d]+)/$',
+    re_path(r'^add/$', views.add, name='avatar_add'),
+    re_path(r'^change/$', views.change, name='avatar_change'),
+    re_path(r'^delete/$', views.delete, name='avatar_delete'),
+    re_path(r'^render_primary/(?P<user>[\w\d\@\.\-_]+)/(?P<size>[\d]+)/$',
         views.render_primary,
         name='avatar_render_primary'),
 ]
Index: django-avatar-5.0.0/tests/urls.py
===================================================================
--- django-avatar-5.0.0.orig/tests/urls.py
+++ django-avatar-5.0.0/tests/urls.py
@@ -1,6 +1,6 @@
-from django.conf.urls import include, url
+from django.urls import include, re_path
 
 
 urlpatterns = [
-    url(r'^avatar/', include('avatar.urls')),
+    re_path(r'^avatar/', include('avatar.urls')),
 ]
