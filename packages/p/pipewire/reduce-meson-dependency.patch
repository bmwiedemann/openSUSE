diff -Naur pipewire-0.3.62/doc/meson.build pipewire-0.3.62.new/doc/meson.build
--- pipewire-0.3.62/doc/meson.build	2022-12-09 10:28:24.000000000 +0000
+++ pipewire-0.3.62.new/doc/meson.build	2022-12-10 13:39:45.122679346 +0000
@@ -1,8 +1,8 @@
 doxyfile_conf = configuration_data()
 doxyfile_conf.set('PACKAGE_NAME', meson.project_name())
 doxyfile_conf.set('PACKAGE_VERSION', meson.project_version())
-doxyfile_conf.set('top_srcdir', meson.project_source_root())
-doxyfile_conf.set('top_builddir', meson.project_build_root())
+doxyfile_conf.set('top_srcdir', meson.source_root())
+doxyfile_conf.set('top_builddir', meson.build_root())
 
 dot_found = find_program('dot', required: false).found()
 summary({'dot (used with doxygen)': dot_found}, bool_yn: true, section: 'Optional programs')
@@ -48,35 +48,35 @@
 
 inputs = []
 foreach extra : extra_docs
-  inputs += meson.project_source_root() / 'doc' / extra
+  inputs += meson.source_root() / 'doc' / extra
 endforeach
 foreach h : pipewire_headers
-  inputs += meson.project_source_root() / 'src' / 'pipewire' / h
+  inputs += meson.source_root() / 'src' / 'pipewire' / h
 endforeach
 foreach h : pipewire_ext_headers
-  inputs += meson.project_source_root() / 'src' / 'pipewire' / 'extensions' / h
+  inputs += meson.source_root() / 'src' / 'pipewire' / 'extensions' / h
 endforeach
 foreach h : pipewire_ext_sm_headers
-  inputs += meson.project_source_root() / 'src' / 'pipewire' / 'extensions' / h
+  inputs += meson.source_root() / 'src' / 'pipewire' / 'extensions' / h
 endforeach
 foreach h : pipewire_sources
-  inputs += meson.project_source_root() / 'src' / 'pipewire' / h
+  inputs += meson.source_root() / 'src' / 'pipewire' / h
 endforeach
 foreach h : module_sources
-  inputs += meson.project_source_root() / 'src' / 'modules' / h
+  inputs += meson.source_root() / 'src' / 'modules' / h
 endforeach
-inputs += meson.project_source_root() / 'test' / 'pwtest.h'
-input_dirs = [ meson.project_source_root() / 'spa' / 'include' / 'spa' ]
+inputs += meson.source_root() / 'test' / 'pwtest.h'
+input_dirs = [ meson.source_root() / 'spa' / 'include' / 'spa' ]
 
 path_prefixes = [
-  meson.project_source_root() / 'src',
-  meson.project_source_root() / 'spa' / 'include',
-  meson.project_source_root(),
+  meson.source_root() / 'src',
+  meson.source_root() / 'spa' / 'include',
+  meson.source_root(),
 ]
 
 cssfiles = [
-  meson.project_source_root() / 'doc' / 'doxygen-awesome.css',
-  meson.project_source_root() / 'doc' / 'custom.css'
+  meson.source_root() / 'doc' / 'doxygen-awesome.css',
+  meson.source_root() / 'doc' / 'custom.css'
 ]
 
 # Example files (in order from simple to esoteric)
@@ -116,13 +116,25 @@
 
 man_doxygen = []
 man_subpages = []
+manpages = [
+  'pipewire.1.rst.in',
+  'pipewire-pulse.1.rst.in',
+  'pipewire.conf.5.rst.in',
+  'pw-cat.1.rst.in',
+  'pw-cli.1.rst.in',
+  'pw-dot.1.rst.in',
+  'pw-metadata.1.rst.in',
+  'pw-mididump.1.rst.in',
+  'pw-mon.1.rst.in',
+  'pw-profiler.1.rst.in',
+]
 foreach m : manpages
   manconf = configuration_data()
-  pagename = 'page_man_' + m.split('.rst.in').get(0).replace('.', '_').replace('-', '_')
+  pagename = 'page_man_' + m.split('.rst.in').get(0).underscorify()
   filename = m.split('.rst.in').get(0) + '.dox'
   manconf.set('pagename', pagename)
-  manconf.set('title', m.split('.rst.in').get(0).replace('.1','').replace('.5',''))
-  manconf.set('filename', meson.project_source_root() / 'man' / m)
+  manconf.set('title', m.split('.rst.in').get(0).strip('.15'))
+  manconf.set('filename', meson.source_root() / 'man' / m)
   manfile = configure_file(input: 'manpage.dox.in',
                            output: filename,
                            configuration: manconf)
@@ -141,8 +153,8 @@
 doxyfile_conf.set('inputs', ' '.join(inputs + input_dirs))
 doxyfile_conf.set('cssfiles', ' '.join(cssfiles))
 doxyfile_conf.set('path_prefixes', ' '.join(path_prefixes))
-doxyfile_conf.set('c_input_filter', meson.project_source_root() / 'doc' / 'input-filter.sh')
-doxyfile_conf.set('h_input_filter', meson.project_source_root() / 'doc' / 'input-filter-h.sh')
+doxyfile_conf.set('c_input_filter', meson.source_root() / 'doc' / 'input-filter.sh')
+doxyfile_conf.set('h_input_filter', meson.source_root() / 'doc' / 'input-filter-h.sh')
 
 doxyfile = configure_file(input: 'Doxyfile.in',
                           output: 'Doxyfile',
diff -Naur pipewire-0.3.62/man/meson.build pipewire-0.3.62.new/man/meson.build
--- pipewire-0.3.62/man/meson.build	2022-12-09 10:28:24.000000000 +0000
+++ pipewire-0.3.62.new/man/meson.build	2022-12-10 13:39:45.126679340 +0000
@@ -21,7 +21,7 @@
   'pw-top.1.rst.in',
 ]
 
-if get_option('pipewire-jack').allowed()
+if not get_option('pipewire-jack').disabled()
   manpages += 'pw-jack.1.rst.in'
 endif
 
diff -Naur pipewire-0.3.62/meson.build pipewire-0.3.62.new/meson.build
--- pipewire-0.3.62/meson.build	2022-12-09 10:28:24.000000000 +0000
+++ pipewire-0.3.62.new/meson.build	2022-12-10 13:41:33.450512558 +0000
@@ -1,7 +1,7 @@
 project('pipewire', ['c' ],
   version : '0.3.62',
   license : [ 'MIT', 'LGPL-2.1-or-later', 'GPL-2.0-only' ],
-  meson_version : '>= 0.59.0',
+  meson_version : '>= 0.54.0',
   default_options : [ 'warning_level=3',
                       'c_std=gnu11',
                       'cpp_std=c++17',
@@ -236,8 +236,8 @@
 pipewire_inc = include_directories('src')
 
 makedata = configuration_data()
-makedata.set('BUILD_ROOT', meson.project_build_root())
-makedata.set('SOURCE_ROOT', meson.project_source_root())
+makedata.set('BUILD_ROOT', meson.build_root())
+makedata.set('SOURCE_ROOT', meson.source_root())
 makedata.set('VERSION', pipewire_version)
 if version_arr.length() == 4
   makedata.set('TAG', 'HEAD')
@@ -337,7 +337,7 @@
 gst_dp_found = gst_dep.length() > 0
 summary({'gstreamer-device-provider': gst_dp_found}, bool_yn: true, section: 'Backend')
 
-cdata.set('HAVE_GSTREAMER_DEVICE_PROVIDER', get_option('gstreamer-device-provider').allowed())
+cdata.set('HAVE_GSTREAMER_DEVICE_PROVIDER', (not get_option('gstreamer-device-provider').disabled()))
 
 webrtc_dep = dependency('webrtc-audio-processing',
   version : ['>= 0.2', '< 1.0'],
@@ -400,10 +400,10 @@
 
 installed_tests_metadir = pipewire_datadir / 'installed-tests' / pipewire_name
 installed_tests_execdir = pipewire_libexecdir / 'installed-tests' / pipewire_name
-installed_tests_enabled = get_option('installed_tests').allowed()
+installed_tests_enabled = (not get_option('installed_tests').disabled())
 installed_tests_template = files('template.test.in')
 
-if get_option('tests').allowed()
+if not get_option('tests').disabled()
   gstack = find_program('gstack', required : false)
   cdata.set('HAVE_GSTACK', gstack.found())
 endif
@@ -412,17 +412,17 @@
 subdir('spa')
 subdir('src')
 
-if get_option('tests').allowed()
+if not get_option('tests').disabled()
   subdir('test')
 endif
 
 configure_file(output : 'config.h',
                configuration : cdata)
 
-if get_option('pipewire-jack').allowed()
+if not get_option('pipewire-jack').disabled()
   subdir('pipewire-jack')
 endif
-if get_option('pipewire-v4l2').allowed()
+if not get_option('pipewire-v4l2').disabled()
   subdir('pipewire-v4l2')
 endif
 
@@ -433,7 +433,7 @@
 endif
 
 generate_manpages = false
-if get_option('man').allowed()
+if not get_option('man').disabled()
   rst2man = find_program('rst2man', required: false)
   if not rst2man.found()
     rst2man = find_program('rst2man.py', required: get_option('man'))
@@ -454,20 +454,20 @@
 setenv = find_program('pw-uninstalled.sh')
 run_target('pw-uninstalled',
   command : [setenv,
-             '-b@0@'.format(meson.project_build_root()),
+             '-b@0@'.format(meson.build_root()),
              '-v@0@'.format(pipewire_version)]
 )
 
 devenv = environment()
 
-builddir = meson.project_build_root()
-srcdir = meson.project_source_root()
+builddir = meson.build_root()
+srcdir = meson.source_root()
 
-devenv.set('PIPEWIRE_CONFIG_DIR', pipewire_dep.get_variable('confdatadir'))
-devenv.set('PIPEWIRE_MODULE_DIR', pipewire_dep.get_variable('moduledir'))
+devenv.set('PIPEWIRE_CONFIG_DIR', pipewire_dep.get_variable(internal: 'confdatadir'))
+devenv.set('PIPEWIRE_MODULE_DIR', pipewire_dep.get_variable(internal: 'moduledir'))
 
-devenv.set('SPA_PLUGIN_DIR', spa_dep.get_variable('plugindir'))
-devenv.set('SPA_DATA_DIR', spa_dep.get_variable('datadir'))
+devenv.set('SPA_PLUGIN_DIR', spa_dep.get_variable(internal: 'plugindir'))
+devenv.set('SPA_DATA_DIR', spa_dep.get_variable(internal: 'datadir'))
 
 devenv.set('GST_PLUGIN_PATH', builddir / 'src'/ 'gst')
 
@@ -479,4 +479,6 @@
 
 devenv.set('PW_UNINSTALLED', '1')
 
-meson.add_devenv(devenv)
+if meson.version().version_compare('>=0.58.0')
+  meson.add_devenv(devenv)
+endif
diff -Naur pipewire-0.3.62/spa/meson.build pipewire-0.3.62.new/spa/meson.build
--- pipewire-0.3.62/spa/meson.build	2022-12-09 10:28:24.000000000 +0000
+++ pipewire-0.3.62.new/spa/meson.build	2022-12-10 13:39:45.126679340 +0000
@@ -31,7 +31,7 @@
 
 subdir('include')
 
-if get_option('spa-plugins').allowed()
+if not get_option('spa-plugins').disabled()
   udevrulesdir = get_option('udevrulesdir')
   if udevrulesdir == ''
     # absolute path, otherwise meson prepends the prefix
@@ -66,7 +66,7 @@
     summary({'Opus': opus_dep.found()}, bool_yn: true, section: 'Bluetooth audio codecs')
     lc3_dep = dependency('lc3', required : get_option('bluez5-codec-lc3'))
     summary({'LC3': lc3_dep.found()}, bool_yn: true, section: 'Bluetooth audio codecs')
-    if get_option('bluez5-backend-hsp-native').allowed() or get_option('bluez5-backend-hfp-native').allowed()
+    if (not get_option('bluez5-backend-hsp-native').disabled()) or (not get_option('bluez5-backend-hfp-native').disabled())
       mm_dep = dependency('ModemManager', version : '>= 1.10.0', required : get_option('bluez5-backend-native-mm'))
       summary({'ModemManager': mm_dep.found()}, bool_yn: true, section: 'Bluetooth backends')
     endif
@@ -90,6 +90,6 @@
 
 subdir('tools')
 subdir('tests')
-if get_option('examples').allowed()
+if not get_option('examples').disabled()
   subdir('examples')
 endif
diff -Naur pipewire-0.3.62/spa/plugins/audioconvert/meson.build pipewire-0.3.62.new/spa/plugins/audioconvert/meson.build
--- pipewire-0.3.62/spa/plugins/audioconvert/meson.build	2022-12-09 10:28:24.000000000 +0000
+++ pipewire-0.3.62.new/spa/plugins/audioconvert/meson.build	2022-12-10 13:39:45.130679334 +0000
@@ -148,7 +148,7 @@
       install : installed_tests_enabled,
       install_dir : installed_tests_execdir / 'audioconvert'),
       env : [
-        'SPA_PLUGIN_DIR=@0@'.format(spa_dep.get_variable('plugindir')),
+        'SPA_PLUGIN_DIR=@0@'.format(spa_dep.get_variable(internal: 'plugindir')),
         ])
 
     if installed_tests_enabled
@@ -178,7 +178,7 @@
       install : installed_tests_enabled,
       install_dir : installed_tests_execdir / 'audioconvert'),
       env : [
-        'SPA_PLUGIN_DIR=@0@'.format(spa_dep.get_variable('plugindir')),
+        'SPA_PLUGIN_DIR=@0@'.format(spa_dep.get_variable(internal: 'plugindir')),
         ])
 
     if installed_tests_enabled
diff -Naur pipewire-0.3.62/spa/plugins/audiomixer/meson.build pipewire-0.3.62.new/spa/plugins/audiomixer/meson.build
--- pipewire-0.3.62/spa/plugins/audiomixer/meson.build	2022-12-09 10:28:24.000000000 +0000
+++ pipewire-0.3.62.new/spa/plugins/audiomixer/meson.build	2022-12-10 13:39:45.130679334 +0000
@@ -81,7 +81,7 @@
       install : installed_tests_enabled,
       install_dir : installed_tests_execdir / 'audiomixer'),
       env : [
-        'SPA_PLUGIN_DIR=@0@'.format(spa_dep.get_variable('plugindir')),
+        'SPA_PLUGIN_DIR=@0@'.format(spa_dep.get_variable(internal: 'plugindir')),
         ])
 
     if installed_tests_enabled
@@ -110,7 +110,7 @@
       install : installed_tests_enabled,
       install_dir : installed_tests_execdir / 'audiomixer'),
       env : [
-        'SPA_PLUGIN_DIR=@0@'.format(spa_dep.get_variable('plugindir')),
+        'SPA_PLUGIN_DIR=@0@'.format(spa_dep.get_variable(internal: 'plugindir')),
         ])
 
     if installed_tests_enabled
diff -Naur pipewire-0.3.62/spa/plugins/bluez5/meson.build pipewire-0.3.62.new/spa/plugins/bluez5/meson.build
--- pipewire-0.3.62/spa/plugins/bluez5/meson.build	2022-12-09 10:28:24.000000000 +0000
+++ pipewire-0.3.62.new/spa/plugins/bluez5/meson.build	2022-12-10 13:39:45.130679334 +0000
@@ -6,13 +6,13 @@
 endforeach
 
 cdata.set('HAVE_BLUEZ_5_BACKEND_NATIVE',
-          get_option('bluez5-backend-hsp-native').allowed() or
-          get_option('bluez5-backend-hfp-native').allowed())
-cdata.set('HAVE_BLUEZ_5_BACKEND_HSP_NATIVE', get_option('bluez5-backend-hsp-native').allowed())
-cdata.set('HAVE_BLUEZ_5_BACKEND_HFP_NATIVE', get_option('bluez5-backend-hfp-native').allowed())
-cdata.set('HAVE_BLUEZ_5_BACKEND_NATIVE_MM', get_option('bluez5-backend-native-mm').allowed())
-cdata.set('HAVE_BLUEZ_5_BACKEND_OFONO', get_option('bluez5-backend-ofono').allowed())
-cdata.set('HAVE_BLUEZ_5_BACKEND_HSPHFPD', get_option('bluez5-backend-hsphfpd').allowed())
+          (not get_option('bluez5-backend-hsp-native').disabled()) or
+          (not get_option('bluez5-backend-hfp-native').disabled()))
+cdata.set('HAVE_BLUEZ_5_BACKEND_HSP_NATIVE', (not get_option('bluez5-backend-hsp-native').disabled()))
+cdata.set('HAVE_BLUEZ_5_BACKEND_HFP_NATIVE', (not get_option('bluez5-backend-hfp-native').disabled()))
+cdata.set('HAVE_BLUEZ_5_BACKEND_NATIVE_MM', (not get_option('bluez5-backend-native-mm').disabled()))
+cdata.set('HAVE_BLUEZ_5_BACKEND_OFONO', (not get_option('bluez5-backend-ofono').disabled()))
+cdata.set('HAVE_BLUEZ_5_BACKEND_HSPHFPD', (not get_option('bluez5-backend-hsphfpd').disabled()))
 cdata.set('HAVE_BLUEZ_5_HCI', dependency('bluez', version: '< 6', required: false).found())
 
 bluez5_sources = [
@@ -35,7 +35,7 @@
 
 install_data(bluez5_data, install_dir : spa_datadir / 'bluez5')
 
-if get_option('bluez5-backend-hsp-native').allowed() or get_option('bluez5-backend-hfp-native').allowed()
+if (not get_option('bluez5-backend-hsp-native').disabled()) or (not get_option('bluez5-backend-hfp-native').disabled())
   if libusb_dep.found()
     bluez5_deps += libusb_dep
   endif
@@ -46,11 +46,11 @@
   bluez5_sources += ['backend-native.c', 'upower.c']
 endif
 
-if get_option('bluez5-backend-ofono').allowed()
+if not get_option('bluez5-backend-ofono').disabled()
   bluez5_sources += ['backend-ofono.c']
 endif
 
-if get_option('bluez5-backend-hsphfpd').allowed()
+if not get_option('bluez5-backend-hsphfpd').disabled()
   bluez5_sources += ['backend-hsphfpd.c']
 endif
 
@@ -115,7 +115,7 @@
     install_dir : spa_plugindir / 'bluez5')
 endif
 
-if get_option('bluez5-codec-lc3plus').allowed() and lc3plus_dep.found()
+if (not get_option('bluez5-codec-lc3plus').disabled()) and lc3plus_dep.found()
   bluez_codec_lc3plus = shared_library('spa-codec-bluez5-lc3plus',
     [ 'a2dp-codec-lc3plus.c', 'media-codecs.c' ],
     include_directories : [ configinc ],
@@ -125,7 +125,7 @@
     install_dir : spa_plugindir / 'bluez5')
 endif
 
-if get_option('bluez5-codec-opus').allowed() and opus_dep.found()
+if (not get_option('bluez5-codec-opus').disabled()) and opus_dep.found()
   opus_args = codec_args
   opus_dep = [ opus_dep ]
   bluez_codec_opus = shared_library('spa-codec-bluez5-opus',
@@ -137,7 +137,7 @@
     install_dir : spa_plugindir / 'bluez5')
 endif
 
-if get_option('bluez5-codec-lc3').allowed() and lc3_dep.found()
+if (not get_option('bluez5-codec-lc3').disabled()) and lc3_dep.found()
   bluez_codec_lc3 = shared_library('spa-codec-bluez5-lc3',
     [ 'bap-codec-lc3.c', 'media-codecs.c' ],
     include_directories : [ configinc ],
diff -Naur pipewire-0.3.62/spa/plugins/meson.build pipewire-0.3.62.new/spa/plugins/meson.build
--- pipewire-0.3.62/spa/plugins/meson.build	2022-12-09 10:28:24.000000000 +0000
+++ pipewire-0.3.62.new/spa/plugins/meson.build	2022-12-10 13:39:45.130679334 +0000
@@ -1,19 +1,22 @@
 if alsa_dep.found()
   subdir('alsa')
 endif
-if get_option('avb').require(host_machine.system() == 'linux', error_message: 'AVB support is only available on Linux').allowed()
+if not get_option('avb').disabled()
+  if (host_machine.system() != 'linux')
+    error('AVB support is only available on Linux')
+  endif
   subdir('avb')
 endif
-if get_option('audioconvert').allowed()
+if not get_option('audioconvert').disabled()
   subdir('audioconvert')
 endif
-if get_option('audiomixer').allowed()
+if not get_option('audiomixer').disabled()
   subdir('audiomixer')
 endif
-if get_option('control').allowed()
+if not get_option('control').disabled()
   subdir('control')
 endif
-if get_option('audiotestsrc').allowed()
+if not get_option('audiotestsrc').disabled()
   subdir('audiotestsrc')
 endif
 if bluez_dep.found()
@@ -25,19 +28,19 @@
 if jack_dep.found()
   subdir('jack')
 endif
-if get_option('support').allowed()
+if not get_option('support').disabled()
   subdir('support')
 endif
-if get_option('test').allowed()
+if not get_option('test').disabled()
   subdir('test')
 endif
-if get_option('videoconvert').allowed()
+if not get_option('videoconvert').disabled()
   subdir('videoconvert')
 endif
-if get_option('videotestsrc').allowed()
+if not get_option('videotestsrc').disabled()
   subdir('videotestsrc')
 endif
-if get_option('volume').allowed()
+if not get_option('volume').disabled()
   subdir('volume')
 endif
 if vulkan_headers
diff -Naur pipewire-0.3.62/spa/plugins/support/meson.build pipewire-0.3.62.new/spa/plugins/support/meson.build
--- pipewire-0.3.62/spa/plugins/support/meson.build	2022-12-09 10:28:24.000000000 +0000
+++ pipewire-0.3.62.new/spa/plugins/support/meson.build	2022-12-10 13:39:45.130679334 +0000
@@ -23,7 +23,7 @@
   install_dir : spa_plugindir / 'support')
 spa_support_dep = declare_dependency(link_with: spa_support_lib)
 
-if get_option('evl').allowed()
+if not get_option('evl').disabled()
   evl_inc = include_directories('/usr/evl/include')
   evl_lib = cc.find_library('evl',
                             dirs: ['/usr/evl/lib/'],
diff -Naur pipewire-0.3.62/spa/tests/meson.build pipewire-0.3.62.new/spa/tests/meson.build
--- pipewire-0.3.62/spa/tests/meson.build	2022-12-09 10:28:24.000000000 +0000
+++ pipewire-0.3.62.new/spa/tests/meson.build	2022-12-10 13:39:45.130679334 +0000
@@ -5,7 +5,7 @@
 summary({'find (for header testing)': find.found()}, bool_yn: true, section: 'Optional programs')
 if find.found()
   spa_headers = run_command(find,
-                            meson.project_source_root() / 'spa' / 'include',
+                            meson.source_root() / 'spa' / 'include',
                             '-name', '*.h',
                             '-not', '-name', 'type-info.h',
                             '-type', 'f',
@@ -41,7 +41,7 @@
       install_dir : installed_tests_execdir,
     ),
     env : [
-      'SPA_PLUGIN_DIR=@0@'.format(spa_dep.get_variable('plugindir')),
+      'SPA_PLUGIN_DIR=@0@'.format(spa_dep.get_variable(internal: 'plugindir')),
     ]
   )
 
diff -Naur pipewire-0.3.62/src/daemon/meson.build pipewire-0.3.62.new/src/daemon/meson.build
--- pipewire-0.3.62/src/daemon/meson.build	2022-12-09 10:28:24.000000000 +0000
+++ pipewire-0.3.62.new/src/daemon/meson.build	2022-12-10 13:39:45.130679334 +0000
@@ -18,9 +18,9 @@
 
 conf_config_uninstalled = conf_config
 conf_config_uninstalled.set('pipewire_path',
-  meson.project_build_root() / 'src' / 'daemon' / 'pipewire')
+  meson.build_root() / 'src' / 'daemon' / 'pipewire')
 conf_config_uninstalled.set('pipewire_pulse_path',
-  meson.project_build_root() / 'src' / 'daemon' / 'pipewire-pulse')
+  meson.build_root() / 'src' / 'daemon' / 'pipewire-pulse')
 conf_config_uninstalled.set('pulse_comment', '')
 
 build_ms = 'media-session' in get_option('session-managers')
@@ -116,7 +116,7 @@
   install: false,
   input: pipewire_exec,
   output: 'pipewire-uninstalled',
-  command: [ln, '-fs', meson.project_build_root() + '/@INPUT@', '@OUTPUT@'],
+  command: [ln, '-fs', meson.build_root() + '/@INPUT@', '@OUTPUT@'],
 )
 
 #desktop_file = i18n.merge_file(
diff -Naur pipewire-0.3.62/src/daemon/systemd/meson.build pipewire-0.3.62.new/src/daemon/systemd/meson.build
--- pipewire-0.3.62/src/daemon/systemd/meson.build	2022-12-09 10:28:24.000000000 +0000
+++ pipewire-0.3.62.new/src/daemon/systemd/meson.build	2022-12-10 13:39:45.130679334 +0000
@@ -1,6 +1,6 @@
-if get_option('systemd-system-service').allowed()
+if not get_option('systemd-system-service').disabled()
   subdir('system')
 endif
-if get_option('systemd-user-service').allowed()
+if not get_option('systemd-user-service').disabled()
   subdir('user')
 endif
diff -Naur pipewire-0.3.62/src/daemon/systemd/user/meson.build pipewire-0.3.62.new/src/daemon/systemd/user/meson.build
--- pipewire-0.3.62/src/daemon/systemd/user/meson.build	2022-12-09 10:28:24.000000000 +0000
+++ pipewire-0.3.62.new/src/daemon/systemd/user/meson.build	2022-12-10 13:39:45.134679328 +0000
@@ -1,4 +1,4 @@
-systemd_user_services_dir = systemd.get_variable('systemduserunitdir', pkgconfig_define : [ 'prefix', prefix])
+#systemd_user_services_dir = systemd.get_variable('systemduserunitdir', pkgconfig_define : [ 'prefix', prefix])
 if get_option('systemd-user-unit-dir') != ''
   systemd_user_services_dir = get_option('systemd-user-unit-dir')
 endif
diff -Naur pipewire-0.3.62/src/gst/meson.build pipewire-0.3.62.new/src/gst/meson.build
--- pipewire-0.3.62/src/gst/meson.build	2022-12-09 10:28:24.000000000 +0000
+++ pipewire-0.3.62.new/src/gst/meson.build	2022-12-10 13:39:45.134679328 +0000
@@ -8,7 +8,7 @@
   'gstpipewiresrc.c',
 ]
 
-if get_option('gstreamer-device-provider').allowed()
+if not get_option('gstreamer-device-provider').disabled()
   pipewire_gst_sources += [ 'gstpipewiredeviceprovider.c' ]
 endif
 
diff -Naur pipewire-0.3.62/src/meson.build pipewire-0.3.62.new/src/meson.build
--- pipewire-0.3.62/src/meson.build	2022-12-09 10:28:24.000000000 +0000
+++ pipewire-0.3.62.new/src/meson.build	2022-12-10 13:39:45.134679328 +0000
@@ -3,10 +3,10 @@
 subdir('daemon')
 subdir('tools')
 subdir('modules')
-if get_option('examples').allowed()
+if not get_option('examples').disabled()
   subdir('examples')
 endif
-if get_option('tests').allowed()
+if not get_option('tests').disabled()
   subdir('tests')
 endif
 
diff -Naur pipewire-0.3.62/src/modules/meson.build pipewire-0.3.62.new/src/modules/meson.build
--- pipewire-0.3.62/src/modules/meson.build	2022-12-09 10:28:24.000000000 +0000
+++ pipewire-0.3.62.new/src/modules/meson.build	2022-12-10 13:39:45.134679328 +0000
@@ -401,9 +401,9 @@
     install_dir : installed_tests_execdir,
   ),
   env : [
-    'SPA_PLUGIN_DIR=@0@'.format(spa_dep.get_variable('plugindir')),
-    'PIPEWIRE_CONFIG_DIR=@0@'.format(pipewire_dep.get_variable('confdatadir')),
-    'PIPEWIRE_MODULE_DIR=@0@'.format(pipewire_dep.get_variable('moduledir')),
+    'SPA_PLUGIN_DIR=@0@'.format(spa_dep.get_variable(internal: 'plugindir')),
+    'PIPEWIRE_CONFIG_DIR=@0@'.format(pipewire_dep.get_variable(internal: 'confdatadir')),
+    'PIPEWIRE_MODULE_DIR=@0@'.format(pipewire_dep.get_variable(internal: 'moduledir')),
   ]
 )
 
@@ -560,8 +560,11 @@
   dependencies : [mathlib, dl_lib, rt_lib, pipewire_dep],
 )
 
-build_module_avb = get_option('avb').require(host_machine.system() == 'linux', error_message: 'AVB support is only available on Linux').allowed()
+build_module_avb = (not get_option('avb').disabled())
 if build_module_avb
+if (host_machine.system() != 'linux')
+  error('AVB support is only available on Linux')
+endif
 pipewire_module_avb = shared_library('pipewire-module-avb',
   [ 'module-avb.c',
     'module-avb/avb.c',
diff -Naur pipewire-0.3.62/src/tests/meson.build pipewire-0.3.62.new/src/tests/meson.build
--- pipewire-0.3.62/src/tests/meson.build	2022-12-09 10:28:24.000000000 +0000
+++ pipewire-0.3.62.new/src/tests/meson.build	2022-12-10 13:39:45.134679328 +0000
@@ -14,9 +14,9 @@
       install : installed_tests_enabled,
       install_dir : installed_tests_execdir),
     env : [
-      'SPA_PLUGIN_DIR=@0@'.format(spa_dep.get_variable('plugindir')),
-      'PIPEWIRE_CONFIG_DIR=@0@'.format(pipewire_dep.get_variable('confdatadir')),
-      'PIPEWIRE_MODULE_DIR=@0@'.format(pipewire_dep.get_variable('moduledir')),
+      'SPA_PLUGIN_DIR=@0@'.format(spa_dep.get_variable(internal: 'plugindir')),
+      'PIPEWIRE_CONFIG_DIR=@0@'.format(pipewire_dep.get_variable(internal: 'confdatadir')),
+      'PIPEWIRE_MODULE_DIR=@0@'.format(pipewire_dep.get_variable(internal: 'moduledir')),
       ])
 
   if installed_tests_enabled
diff -Naur pipewire-0.3.62/src/tools/meson.build pipewire-0.3.62.new/src/tools/meson.build
--- pipewire-0.3.62/src/tools/meson.build	2022-12-09 10:28:24.000000000 +0000
+++ pipewire-0.3.62.new/src/tools/meson.build	2022-12-10 13:39:45.134679328 +0000
@@ -32,7 +32,7 @@
 endif
 
 build_pw_cat = false
-if get_option('pw-cat').allowed() and sndfile_dep.found()
+if (not get_option('pw-cat').disabled()) and sndfile_dep.found()
   build_pw_cat = true
 
   pwcat_sources = [
diff -Naur pipewire-0.3.62/test/meson.build pipewire-0.3.62.new/test/meson.build
--- pipewire-0.3.62/test/meson.build	2022-12-09 10:28:24.000000000 +0000
+++ pipewire-0.3.62.new/test/meson.build	2022-12-10 13:39:45.134679328 +0000
@@ -14,8 +14,8 @@
 ]
 
 pwtest_c_args = [
-  '-DBUILD_ROOT="@0@"'.format(meson.project_build_root()),
-  '-DSOURCE_ROOT="@0@"'.format(meson.project_source_root()),
+  '-DBUILD_ROOT="@0@"'.format(meson.build_root()),
+  '-DSOURCE_ROOT="@0@"'.format(meson.source_root()),
 ]
 
 pwtest_inc = [
