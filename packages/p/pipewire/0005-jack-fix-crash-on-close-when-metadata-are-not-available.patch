From a108752514dafa5c6555050991406decc9bff5f2 Mon Sep 17 00:00:00 2001
From: George Kiagiadakis <george.kiagiadakis@collabora.com>
Date: Wed, 17 Jun 2020 14:28:42 +0300
Subject: [PATCH] jack: fix crash on close when metadata are not available

---
 pipewire-jack/src/pipewire-jack.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/pipewire-jack/src/pipewire-jack.c b/pipewire-jack/src/pipewire-jack.c
index 28a8ff82..5d4ee7b7 100644
--- a/pipewire-jack/src/pipewire-jack.c
+++ b/pipewire-jack/src/pipewire-jack.c
@@ -2400,7 +2400,7 @@ int jack_client_close (jack_client_t *client)
 
 	if (c->registry)
 		pw_proxy_destroy((struct pw_proxy*)c->registry);
-	if (c->metadata->proxy)
+	if (c->metadata && c->metadata->proxy)
 		pw_proxy_destroy((struct pw_proxy*)c->metadata->proxy);
 	pw_core_disconnect(c->core);
 	pw_context_destroy(c->context.context);
