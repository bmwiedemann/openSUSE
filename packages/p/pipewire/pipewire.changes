-------------------------------------------------------------------
Tue Jun 16 09:04:18 UTC 2020 - Antonio Larrosa <alarrosa@suse.com>

- Update to version 0.3.6:
  * Extensive memory leak fixing and stress testing was done.
    A big leak in screen sharing with DMA-BUF was fixed.
  * Compile fixes
  * Stability improvements in jack and pulseaudio layers.
  * Added the old portal module to make the Camera portal
    work again. This will be moved to the session manager in
    future versions.
  * Improvements to the GStreamer source and sink shutdown.
  * Fix compatibility with v2 clients again when negotiating
    buffers.
- Disable vulkan if the vulkan package is too old (as in
  SLE 15 SP0 and SP1)
- Add patch to build with meson >= 0.46.0 since 0.50.0 is not
  really needed:
  * fix-meson-required-version.patch

-------------------------------------------------------------------
Thu May 21 08:50:18 UTC 2020 - Antonio Larrosa <alarrosa@suse.com>

- Filter out libpulse.so.0 and libjack.so.0 automatic provides so
  this is not considered an alternative when resolving dependencies
  in the distribution.

-------------------------------------------------------------------
Thu May 21 07:51:29 UTC 2020 - Antonio Larrosa <alarrosa@suse.com>

- Add patch to fix build in SLE/Leap where alsa doesn't have a
  snd_pcm_ioplug_hw_avail function:
  * do-not-use-snd_pcm_ioplug_hw_avail.patch

-------------------------------------------------------------------
Tue May 19 07:54:52 UTC 2020 - Antonio Larrosa <alarrosa@suse.com>

- Update to version 0.3.5:
  * Compiler fixes
  * Add pw-midiplay and pw-midirecord aliases
  * Add pw-mididump tool
  * Add pw-metadata tool to inspect, add and remove metadata
    for objects.
  * Docs updates, man pages
  * install alsa config files
  * Fix linked sink/source in pulseaudio
  * ratelimit graph processing warnings
  * improve buffer handling in GStreamer elements
  * Fix power usage by removing the queue for the alsa
    sequencer system announce messages.
  * Fix metadata clear() method dispatch.
  * Improve parameter enumeration, make it possible to detect
    missing parameters vs no-compatible parameters so that we
    can use defaults in the first case and error in the second
    case.
  * Fix cleanup of proxy objects. Stability improvements on
    plug/unplug in session manager.
  * Make it possible to set log level from config file
  * improve debug of param negotiation errors. Log the
    parameters to stderr/journal.
  * Make it possible to configure global logger
    implementation.
  * Fix NEON detection
  * JACK and PulseAudio compatibility improvements

- Update to version 0.3.4:
  * A quick update with some important stability fixes.

- Update to version 0.3.3:
  * NEON optimizations for audio conversion (32 and 64 bits)
  * rework of session manager implementation
  * Add option to disable modules in the session manager
  * Release midi hardware devices when suspended
  * various build fixes
  * Clean up options of various utils
  * Stability improvements
  * Mayor improvements in pulseaudio emulation. Improved
    timings and compatibility.
  * Implementation of drain and flush in pulse and alsa
    emulation.
  * Implement poll on file descriptors.
  * Improvement of metadata for jack emulation.
  * Fix memory and thread problems in jack emulation.
  * Simplification of state changes. Should make more use
    cases work in the jack emulation.
  * Improvements in the gstreamer elements. Removal of
    extra internal queue. pipewiresink can now be used to
    play audio.
  * Add pw-jack and pw-pulse scripts to run pulseaudio and
    jack applications with the right library path.

- Replace libpulse* replacement packages with a single
  pipewire-libpulse-0_3 package that includes all libraries
  installed in the non-standard directory
  %{_libdir}/pipewire-0.3/pulse and a new pw-pulse wrapper script.
  Likewise for the jack replacement libraries in a new
  pipewire-libjack-0_3 package.

- Use update-alternatives for the wrapper scripts.

-------------------------------------------------------------------
Wed Apr  1 07:35:48 UTC 2020 - Antonio Larrosa <alarrosa@suse.com>

- Use the License rpm tag to specify that although most of
  pipewire is licensed under MIT,  the pulseaudio replacement
  library is licensed under LGPL-2.1+.

-------------------------------------------------------------------
Tue Mar 31 15:11:45 UTC 2020 - Antonio Larrosa <alarrosa@suse.com>

- Use gcc9 to build in SLE-15 / Leap 15, since at least gcc8 is
  needed now.

-------------------------------------------------------------------
Tue Mar 31 10:48:28 UTC 2020 - Antonio Larrosa <alarrosa@suse.com>

- Update to version 0.3.2:
  + build fixes
  + Added support for data type negotiation. This makes it
    possible for a client to say that it can handle DMABuf
    and MemFd and then let the server select a compatible
    format.
  + Handle errors when enumerating parameters better.
  + Add support for rate, format, channels and period_bytes
    to the alsa config file to restrict what alsa apps can
    negotiate.
  + Fix JACK midi output.
  + Optimizations in common audio format conversions using
    AVX2. Small optimizations to plugins.
  + Change the vulkan compute example to an MIT licensed
    shader.
  + Remove some hardcoded defaults in the audio and video
    processing and use the values from the processing
    context. This also fixes the vulkan example.
  + Correct the documentation and defaults in the daemon
    config file.
  + Fix alsa and v4l2 buffer recycle. A paused client could
    cause the server to leak all buffers.
  + Remove some warnings that should be ignored.
  + Fix a crash in the bluez5 plugins.
  + Try to select higher quality formats first when
    negotiating a format with an audio device.
  + Fix an infinite loop in udev detection in some cases.
  + Add non-interactive mode to pw-cli. You can now just
    do "pw-cli ls Port" to get a listing of all ports.
    pw-cli will now also connect to the default server by
    default and has options to select a different server.
  + Allow the server to go up to the maximum quantum (8192
    samples or ~=180ms) if a client explicitly wants this.


-------------------------------------------------------------------
Mon Mar 23 13:56:45 UTC 2020 - Bjørn Lie <bjorn.lie@gmail.com>

- Update to version 0.3.1+48:
  + Fix 32bit build.

-------------------------------------------------------------------
Wed Mar 18 16:33:21 UTC 2020 - Bjørn Lie <bjorn.lie@gmail.com>

- Switch to source service, update to explicit head, file with
  non-compliant license replaced.

-------------------------------------------------------------------
Tue Mar 17 10:58:42 UTC 2020 - Bjørn Lie <bjorn.lie@gmail.com>

- Switch license to MIT and actually package it.
- Add doxygen, graphviz and xmltoman BuildRequires and pass docs
  and man = true to meson, build documentation. Package docs in a
  new docs sub-package.
- Add check section and run meson_test macro, run tests during
  build.
- Add fdupes BuildRequires and pass fdupes macro, remove duplicate
  files.

-------------------------------------------------------------------
Mon Mar  9 16:11:08 UTC 2020 - Antonio Larrosa <alarrosa@suse.com>

- Update to version 0.3.1:
  + This is a bugfix release that is API and ABI compatible
    with previous 0.3.x releases.
  + Don't load the rtkit module by default. It can cause a
    sigkill, which is not desirable for mutter, for example.
    Only enable this for the jack library for now.
  + Don't use pthread cancel by default because it uses a
    signal that might crash some apps. Only use it for
    the jack library because jack clients really expect this.
  + Build fixes for -Werror=suggest-attribute=format
  + improve error messages, don't report harmless errors and
    warnings. Try to send error messages to the proxy that
    started the operation or is the owner of the object.
  + pw-cat: midi improvement, add midi recording and dump
    in verbose mode
  + fix properties when loading spa-nodes from the config
  + Fix and update some examples
  + jack: check arguments and don't crash when invalid
  + Fix buffer memory upload.
  + jack: fix compatibility with zrythm. Fix timemaster
    install, improve sample_rate callback. Fix reposition
    handling.
  + fix crash in port after buffer negotiation error.
  + add support for control ports in pw_filter
  + fix cleanup of the metadata module
  + improve param enumeration.
  + Clear stream buffers when the format is cleared.
  + Add create-object command in the config file to create
    object from a factory.
  + Fix crash after the driver was not removed from unassigned
    nodes. Also properly pause inactive nodes.
  + Use "true" and "false" in properties when we are talking
    about a boolean.
  + pulseaudio: improve compatibility

-------------------------------------------------------------------
Fri Feb 21 15:13:15 UTC 2020 - Antonio Larrosa <alarrosa@suse.com>

- Add patch to build correctly with glibc < 2.27 (like in SLE/Leap):
  * fix-memfd_create-call.patch

-------------------------------------------------------------------
Fri Feb 21 12:32:01 UTC 2020 - Antonio Larrosa <alarrosa@suse.com>

- Add BuildRequires for pkgconfig(sndfile) and pkgconfig(vulkan)
  so the vulkan plugin is built.
- Version the spa-plugins subpackage so different versions of
  the plugins can be co-installed in the future.

-------------------------------------------------------------------
Thu Feb 20 18:54:53 UTC 2020 - Bjørn Lie <bjorn.lie@gmail.com>

- Update to version 0.3.0:
  + The 0.3 release is a major milestone in the developement of
    PipeWire. It features a complete redesign of the scheduling
    mechanisms that make it possible to run a JACK compatibility
    layer with comparable performance to JACK2.
  + The API has been reworked and is declared stable now. All
    developement files and runtime paths are versioned so that
    future incompatible changes can be done without breaking
    exising applications.
  + PipeWire 0.3 also includes a (now mandatory) session manager
    that populates and controls the PipeWire graph. This example
    session manager is very simple and not configurable. It is
    expected that future version will either switch to a more
    flexible session manager (like WirePlumber) or improve the
    configuration options of the example session manager.
  + PipeWire 0.3 includes both PulseAudio, JACK and ALSA
    compatibility libraries that are known to support a wide range
    of applications. The ALSA library is pretty complete at this
    point. The JACK and mostly the PulseAudio compatibility
    libraries need more work. See the Wiki pages for the current
    compatibility problems. We do not yet encourage people to
    switch away from their existing audio solutions (PulseAudio
    or JACK) but we would love to hear from people who try it
    anyways. Future versions will mostly focus on improving
    compatibility further to make PipeWire a drop-in replacement.
    PipeWire comes with some GStreamer plugins to consume and
    produce data for PipeWire. The consumer (pipewiresrc) is
    working well in most cases. The sink (pipewiresink) is known
    to be somewhat problematic for now.
- Add pkgconfig(bluez) and pkgconfig(libpulse) BuildRequires: New
  dependencies.
- Bump libpipewire, apiver and spa_ver define following upstreams
  changes. Also add a new sover define.
- Package new subpackages: libjack-pw0_3_0,
  libpulse-mainloop-glib-pw0_3_0, libpulse-pw0_3_0 and
  libpulse-simple-pw0_3_0, as well as handle them in post(un).
- Adjust options passed to meson following upstreams changes.

-------------------------------------------------------------------
Wed Nov  6 12:29:43 UTC 2019 - Fabian Vogt <fvogt@suse.com>

- Update to version 0.2.7:
  + Add support for alsa-lib 1.1.9 which changed the include path
  + Improve error checking and reporting in the protocol
  + deviceprovider: fix probing without starting
  + add sentinel to some functions
  + compiler fixes for musl
  + Revert object tree permission checks that broke things, this is
    probably not a good idea (and the tree of objects is going to
    be removed later)

-------------------------------------------------------------------
Wed May 22 16:33:08 UTC 2019 - Markus S <kamikazow@opensuse.org>

- Update to version 0.2.6:
  + Improve error checking for threads.
  + Fix some memory and fd leaks.
  + Fix compilation with C++ compilers and clang.
  + DISABLE_RTKIT should now not try to use dbus at all.
  + Camera Portal fixes:
    - add Camera media.role.
    - Rename module-flatpak to module-portal.
    - Use the portal permissions store for camera checks.
  + Actually use the passed fd in pipewiresrc.
  + Make properties with "pipewire." prefix read-only.
  + Add security label to client object.
  + Enforce link permissions.
  + Permissions of objects are now combined with parent
    permissions.
  + Remove libv4l2 dependency, it is not used.
  + Improve format negotiation in autolink #146.
  + Try to avoid list corruption with event emmission #143.
  + Fix destroy of client-node memory corruption.
  + Various small improvements.
- Remove pkgconfig(libv4l2) BuildRequires: follow upstreams cleanup
  of build dependencies.
- Drop avoid-invalid-conversion-error-with-C++.patch: fixed
  upstream.

-------------------------------------------------------------------
Fri Apr 19 14:27:04 UTC 2019 - Fabian Vogt <fabian@ritter-vogt.de>

- Add patch to fix use of headers from C++:
  * avoid-invalid-conversion-error-with-C++.patch

-------------------------------------------------------------------
Thu Feb 21 13:06:16 UTC 2019 - bjorn.lie@gmail.com

- Update to version 0.2.5:
  + Build fixes for systemd.
  + Add cursor and bitmap metadata. This can be used to send a
    cursor sprite with the video stream.
  + Permissions were set too strict for non-flatpak clients.
  + Fix crash in loop caused by thread unsafe hook emission.
  + Add more error checking for thread-loop.
  + Small cleanups and bugfixes.
- Drop libspa define and add spa_ver define, and following this
  drop libspa-lib1 subpackage, no longer built.
- Drop doxygen BuildRequires and manpages source, follow upstream
  in not building docs nor manually installing manpages that have
  to be updated every version bump to ensure they are current.
- Add pkgconfig(libsystemd) BuildRequires: New dependency.
- Update options passed to meson following upstream changes.

-------------------------------------------------------------------
Mon Aug 13 18:55:29 UTC 2018 - bjorn.lie@gmail.com

- Update to version 0.2.2:
  + Add apiversion to pkgconfig as well.
- Add apiver define and set it to 0.2.
- Bump libpipewire define to libpipewire-0_2-1 and libspa define to
  libspa-lib1 following upstream changes.

-------------------------------------------------------------------
Mon Jul 23 19:38:08 UTC 2018 - bjorn.lie@gmail.com

- Update to version 0.2.1:
  + stream: update to latest API.
  + hook: add private data for future expansion.

-------------------------------------------------------------------
Tue Jul 17 15:31:07 UTC 2018 - alarrosa@suse.com

- Update to version 0.2.0
  * No changelog provided by upstream. To see the changes in this
    version, please browse the commit logs at
    https://github.com/PipeWire/pipewire/commits/0.2.0 .

-------------------------------------------------------------------
Tue Mar 13 04:27:43 UTC 2018 - luc14n0@linuxmail.org

- Initial package, version 0.1.9.

