From a8bafa063137c78cd191837598fae3c6c6392b68 Mon Sep 17 00:00:00 2001
From: Wim Taymans <wtaymans@redhat.com>
Date: Tue, 18 Jan 2022 12:41:17 +0100
Subject: [PATCH] pw-metadata: handle NULL props from metadata object

---
 src/tools/pw-metadata.c | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

diff --git a/src/tools/pw-metadata.c b/src/tools/pw-metadata.c
index 97fda6744..e0aca1366 100644
--- a/src/tools/pw-metadata.c
+++ b/src/tools/pw-metadata.c
@@ -96,7 +96,8 @@ static void registry_event_global(void *data, uint32_t id, uint32_t permissions,
 	if (!spa_streq(type, PW_TYPE_INTERFACE_Metadata))
 		return;
 
-	if ((str = spa_dict_lookup(props, PW_KEY_METADATA_NAME)) != NULL &&
+	if (props != NULL &&
+	    (str = spa_dict_lookup(props, PW_KEY_METADATA_NAME)) != NULL &&
 	    !spa_streq(str, d->opt_name))
 		return;
 
-- 
GitLab

