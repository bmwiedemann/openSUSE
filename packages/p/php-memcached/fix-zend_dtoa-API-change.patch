From 70ec7c2717deeeb03c8ca49fa36860b7f2476eb3 Mon Sep 17 00:00:00 2001
From: Remi Collet <remi@remirepo.net>
Date: Fri, 23 Jul 2021 12:00:19 +0200
Subject: [PATCH] fix zend_dtoa API change in 8.1.0beta1

---
 g_fmt.c | 9 +++++++--
 1 file changed, 7 insertions(+), 2 deletions(-)

diff --git a/g_fmt.c b/g_fmt.c
index 73f82fd0..f456790c 100644
--- a/g_fmt.c
+++ b/g_fmt.c
@@ -27,12 +27,17 @@
  *        // Teddy Grenman <teddy.grenman@iki.fi>, 2010-05-18.
  */
 
-#include <zend_operators.h>
+#include <php.h>
 
 char *php_memcached_g_fmt(register char *b, double x) {
 	register int i, k;
 	register char *s;
-	int decpt, j, sign;
+	int decpt, j;
+#if PHP_VERSION_ID < 80100
+	int sign;
+#else
+	bool sign;
+#endif
 	char *b0, *s0, *se;
 
 	b0 = b;
