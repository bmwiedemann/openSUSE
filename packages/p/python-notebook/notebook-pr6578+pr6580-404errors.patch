From f68d5198b006108c860d27918720fdf6a7ab48bd Mon Sep 17 00:00:00 2001
From: RRosio <rosio_reyes@yahoo.com>
Date: Fri, 14 Oct 2022 09:13:31 -0700
Subject: [PATCH] update dependency path in static template

---
 notebook/templates/page.html | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/notebook/templates/page.html b/notebook/templates/page.html
index 2237319037..927694e937 100644
--- a/notebook/templates/page.html
+++ b/notebook/templates/page.html
@@ -7,7 +7,7 @@
     <title>{% block title %}Jupyter Notebook{% endblock %}</title>
     {% block favicon %}<link id="favicon" rel="shortcut icon" type="image/x-icon" href="{{static_url("base/images/favicon.ico") }}">{% endblock %}
     <meta http-equiv="X-UA-Compatible" content="IE=edge" />
-    <link rel="stylesheet" href="{{static_url("components/jquery-ui/themes/smoothness/jquery-ui.min.css") }}" type="text/css" />
+    <link rel="stylesheet" href="{{static_url("components/jquery-ui/dist/themes/smoothness/jquery-ui.min.css") }}" type="text/css" />
     <link rel="stylesheet" href="{{static_url("components/jquery-typeahead/dist/jquery.typeahead.min.css") }}" type="text/css" />
     <meta name="viewport" content="width=device-width, initial-scale=1.0">
     
@@ -39,7 +39,7 @@
             text: 'components/requirejs-text/text',
             bootstrap: 'components/bootstrap/dist/js/bootstrap.min',
             bootstraptour: 'components/bootstrap-tour/build/js/bootstrap-tour.min',
-            'jquery-ui': 'components/jquery-ui/jquery-ui.min',
+            'jquery-ui': 'components/jquery-ui/dist/jquery-ui.min',
             moment: 'components/moment/min/moment-with-locales',
             codemirror: 'components/codemirror',
             termjs: 'components/xterm.js/xterm',

From ab71610669e7548f2e9050f98da80cf1eba675ae Mon Sep 17 00:00:00 2001
From: Eric Charles <eric@datalayer.io>
Date: Sun, 16 Oct 2022 11:36:45 +0200
Subject: [PATCH] Ensure custom preload is correctly handled

diff --git a/notebook/templates/page.html b/notebook/templates/page.html
index 927694e937..fb5d642f4e 100644
--- a/notebook/templates/page.html
+++ b/notebook/templates/page.html
@@ -98,6 +98,18 @@
           }
       })
 
+      // error-catching custom-preload.js shim.
+      define("custom-preload", function (require, exports, module) {
+          try {
+              var custom = require('custom/custom-preload');
+              console.debug('loaded custom-preload.js');
+              return custom;
+          } catch (e) {
+              console.error("error loading custom-preload.js", e);
+              return {};
+          }
+      })
+
     document.nbjs_translations = {{ nbjs_translations|safe }};
     document.documentElement.lang = navigator.language.toLowerCase();
     </script>
