From 33f1943171e1840a167a69f9717ff2a14b1d822f Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Kristoffer=20Gr=C3=B6nlund?= <krig@koru.se>
Date: Wed, 24 Dec 2014 17:01:45 +0100
Subject: [PATCH 2/2] Fix quiet option after API patch

---
 psshlib/callbacks.py | 9 +++++----
 1 file changed, 5 insertions(+), 4 deletions(-)

diff --git a/psshlib/callbacks.py b/psshlib/callbacks.py
index a00126b..8cb93f7 100644
--- a/psshlib/callbacks.py
+++ b/psshlib/callbacks.py
@@ -30,10 +30,11 @@ class DefaultCallbacks(object):
             failure = "[FAILURE]"
             stderr = "Stderr: "
         host = task.pretty_host
-        if task.failures:
-            print(' '.join((progress, tstamp, failure, host, error)))
-        else:
-            print(' '.join((progress, tstamp, success, host)))
+        if not task.quiet:
+            if task.failures:
+                print(' '.join((progress, tstamp, failure, host, error)))
+            else:
+                print(' '.join((progress, tstamp, success, host)))
         # NOTE: The extra flushes are to ensure that the data is output in
         # the correct order with the C implementation of io.
         if task.outputbuffer:
-- 
2.2.0

