From 9be236e39ef3ac75772066ecc60cab2ca6f54e5c Mon Sep 17 00:00:00 2001
From: Fabian Vogt <fabian@ritter-vogt.de>
Date: Thu, 14 Mar 2024 19:29:48 +0100
Subject: [PATCH 1/2] Allow specifing KWALLETD_BIN_PATH manually

That way the dependency on KF6::Wallet can be avoided.
---
 CMakeLists.txt | 7 +++++--
 1 file changed, 5 insertions(+), 2 deletions(-)

diff --git a/CMakeLists.txt b/CMakeLists.txt
index 4f10b4f..643270e 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -43,9 +43,12 @@ set(pam_kwallet_SRCS
    pam_kwallet.c
 )
 
-find_package(KF6 ${KF6_MIN_VERSION} REQUIRED COMPONENTS
+if (NOT KWALLETD_BIN_PATH)
+  message (STATUS "KWALLETD_BIN_PATH not set, trying KF6::Wallet")
+  find_package(KF6 ${KF6_MIN_VERSION} REQUIRED COMPONENTS
     Wallet
-)
+  )
+endif ()
 
 add_definitions(-DKWALLETD_BIN_PATH="${KWALLETD_BIN_PATH}")
 
-- 
2.43.0

