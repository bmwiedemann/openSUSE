From ff5c65db51216a725060a44ddd65a7f51fafde7e Mon Sep 17 00:00:00 2001
From: Alexander Lohnau <alexander.lohnau@gmx.de>
Date: Sat, 16 Apr 2022 20:59:19 +0200
Subject: [PATCH 3/3] Fix check for argument length in DataEngine loader

BUG: 452596

After i wrote the initial patch, we decided that the plasma-frameworks internal code which dumped
the entire KPluginMetaData object as a variant map in the args could be removed.
However, this change was not applied to the sanity check in the latest revision of the MR.

(cherry picked from commit c90e49cc98769ca5b9275c089880b3d64f1689c5)
---
 src/plasma/dataengine.cpp | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/src/plasma/dataengine.cpp b/src/plasma/dataengine.cpp
index 5c246d9b8..60b837797 100644
--- a/src/plasma/dataengine.cpp
+++ b/src/plasma/dataengine.cpp
@@ -56,7 +56,7 @@ DataEngine::DataEngine(QObject *parent, const QVariantList &args)
     : QObject(parent)
 {
     KPluginMetaData data;
-    if (args.size() > 1 && args.first().canConvert<KPluginMetaData>()) {
+    if (!args.isEmpty() && args.first().canConvert<KPluginMetaData>()) {
         data = args.first().value<KPluginMetaData>();
     }
     d = new DataEnginePrivate(this, data, args);
-- 
2.35.1

