From 913439f5e5691f391e2969b3c8f0a49e50dce43a Mon Sep 17 00:00:00 2001
From: Bruno Oliveira <nicoddemus@gmail.com>
Date: Thu, 16 Dec 2021 09:07:14 -0300
Subject: [PATCH] Fix test_errors_in_xfail_skip_expressions for Python 3.10.1

Decided to remove the condition altogether as seems reasonable to state
that our own test suite requires Python 3.10.1.

Fix #9413
---
 .github/workflows/main.yml | 4 ++--
 testing/test_skipping.py   | 2 --
 2 files changed, 2 insertions(+), 4 deletions(-)

Index: pytest-6.2.5/.github/workflows/main.yml
===================================================================
--- pytest-6.2.5.orig/.github/workflows/main.yml
+++ pytest-6.2.5/.github/workflows/main.yml
@@ -75,7 +75,7 @@ jobs:
             os: windows-latest
             tox_env: "py39-xdist"
           - name: "windows-py310"
-            python: "3.10-dev"
+            python: "3.10.1"
             os: windows-latest
             tox_env: "py310-xdist"
 
@@ -105,7 +105,7 @@ jobs:
             os: ubuntu-latest
             tox_env: "py39-xdist"
           - name: "ubuntu-py310"
-            python: "3.10-dev"
+            python: "3.10.1"
             os: ubuntu-latest
             tox_env: "py310-xdist"
           - name: "ubuntu-pypy3"
Index: pytest-6.2.5/testing/test_skipping.py
===================================================================
--- pytest-6.2.5.orig/testing/test_skipping.py
+++ pytest-6.2.5/testing/test_skipping.py
@@ -1126,8 +1126,6 @@ def test_errors_in_xfail_skip_expression
     pypy_version_info = getattr(sys, "pypy_version_info", None)
     if pypy_version_info is not None and pypy_version_info < (6,):
         markline = markline[5:]
-    elif sys.version_info[:2] >= (3, 10):
-        markline = markline[11:]
     elif sys.version_info >= (3, 8) or hasattr(sys, "pypy_version_info"):
         markline = markline[4:]
 
