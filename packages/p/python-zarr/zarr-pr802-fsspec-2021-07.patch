From ceab6b89e86857e64b04d17fb3e7118696f8258b Mon Sep 17 00:00:00 2001
From: Gregory Lee <grlee77@gmail.com>
Date: Mon, 2 Aug 2021 15:11:45 -0400
Subject: [PATCH 1/2] BUG: fix FSStore.listdir when key_separator == '/'

---
 zarr/storage.py |    3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

--- a/zarr/storage.py
+++ b/zarr/storage.py
@@ -1189,7 +1189,8 @@ class FSStore(MutableMapping):
                             for file_name in self.fs.find(entry_path):
                                 file_path = os.path.join(dir_path, file_name)
                                 rel_path = file_path.split(root_path)[1]
-                                new_children.append(rel_path.replace(os.path.sep, '.'))
+                                rel_path = rel_path.lstrip('/')
+                                new_children.append(rel_path.replace('/', '.'))
                         else:
                             new_children.append(entry)
                     return sorted(new_children)
