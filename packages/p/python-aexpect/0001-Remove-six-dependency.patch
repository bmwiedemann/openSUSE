From 8782bcf28750247b35f5c7d994b8bd9558cd3c04 Mon Sep 17 00:00:00 2001
From: Daniel Garcia Moreno <daniel.garcia@suse.com>
Date: Wed, 19 Oct 2022 18:06:27 +0200
Subject: [PATCH] Remove six dependency

Fix #83
---
 aexpect/rss_client.py | 8 +++-----
 setup.py              | 3 +--
 2 files changed, 4 insertions(+), 7 deletions(-)

diff --git a/aexpect/rss_client.py b/aexpect/rss_client.py
index 0e7ebd3..a818da9 100644
--- a/aexpect/rss_client.py
+++ b/aexpect/rss_client.py
@@ -33,8 +33,6 @@ import os
 import glob
 import argparse
 
-import six
-
 # Globals
 CHUNKSIZE = 65536
 
@@ -260,17 +258,17 @@ class FileTransferClient:
 
     def _handle_transfer_error(self):
         # Save original exception
-        error = sys.exc_info()
+        (_type, error, traceback) = sys.exc_info()
         try:
             # See if we can get an error message
             msg = self._receive_msg()
         except FileTransferError:
             # No error message -- re-raise original exception
-            six.reraise(*error)
+            raise error.with_traceback(traceback)
         if msg == RSS_ERROR:
             errmsg = self._receive_packet().decode()
             raise FileTransferServerError(errmsg)
-        six.reraise(*error)
+        raise error.with_traceback(traceback)
 
 
 class FileUploadClient(FileTransferClient):
diff --git a/setup.py b/setup.py
index 405dd87..8870846 100644
--- a/setup.py
+++ b/setup.py
@@ -27,5 +27,4 @@ if __name__ == '__main__':
           packages=['aexpect',
                     'aexpect.utils'],
           scripts=['scripts/aexpect_helper'],
-          test_suite='tests',
-          install_requires=['six'])
+          test_suite='tests')
-- 
2.38.0

