From 9f2abc75ad27d3dcc951b8fc5aa922bdbe76f287 Mon Sep 17 00:00:00 2001
From: Andreas Stieger <Andreas.Stieger@gmx.de>
Date: Mon, 28 Jul 2025 18:38:26 +0200
Subject: [PATCH] Fix tests with gcc15 (uintptr_t)
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

fixes: error: ‘uintptr_t’ undeclared, defined in header ‘<stdint.h>
---
 tests/unittests/config/stub_accounts.c | 1 +
 tests/unittests/log/stub_log.c         | 1 +
 tests/unittests/test_autocomplete.c    | 1 +
 tests/unittests/test_chat_session.c    | 1 +
 tests/unittests/test_common.c          | 1 +
 tests/unittests/test_jid.c             | 1 +
 tests/unittests/test_parser.c          | 1 +
 tests/unittests/test_preferences.c     | 1 +
 tests/unittests/test_roster_list.c     | 1 +
 9 files changed, 9 insertions(+)

diff --git a/tests/unittests/config/stub_accounts.c b/tests/unittests/config/stub_accounts.c
index 360e564312..981d018013 100644
--- a/tests/unittests/config/stub_accounts.c
+++ b/tests/unittests/config/stub_accounts.c
@@ -1,5 +1,6 @@
 #include <stdarg.h>
 #include <stddef.h>
+#include <stdint.h>
 #include <setjmp.h>
 #include <cmocka.h>
 
diff --git a/tests/unittests/log/stub_log.c b/tests/unittests/log/stub_log.c
index 23ab5cdc88..f0f67e4781 100644
--- a/tests/unittests/log/stub_log.c
+++ b/tests/unittests/log/stub_log.c
@@ -20,6 +20,7 @@
  *
  */
 
+#include <stdint.h>
 #include <glib.h>
 #include <setjmp.h>
 #include <cmocka.h>
diff --git a/tests/unittests/test_autocomplete.c b/tests/unittests/test_autocomplete.c
index 599cf39003..0e30735137 100644
--- a/tests/unittests/test_autocomplete.c
+++ b/tests/unittests/test_autocomplete.c
@@ -1,6 +1,7 @@
 #include <glib.h>
 #include <stdarg.h>
 #include <stddef.h>
+#include <stdint.h>
 #include <setjmp.h>
 #include <cmocka.h>
 #include <stdlib.h>
diff --git a/tests/unittests/test_chat_session.c b/tests/unittests/test_chat_session.c
index 26845dbcbf..2de18c0866 100644
--- a/tests/unittests/test_chat_session.c
+++ b/tests/unittests/test_chat_session.c
@@ -4,6 +4,7 @@
 #include <setjmp.h>
 #include <cmocka.h>
 #include <stdlib.h>
+#include <stdint.h>
 
 #include "xmpp/chat_session.h"
 
diff --git a/tests/unittests/test_common.c b/tests/unittests/test_common.c
index f381947b8c..e340fcf378 100644
--- a/tests/unittests/test_common.c
+++ b/tests/unittests/test_common.c
@@ -5,6 +5,7 @@
 #include <setjmp.h>
 #include <cmocka.h>
 #include <stdlib.h>
+#include <stdint.h>
 
 void
 replace_one_substr(void** state)
diff --git a/tests/unittests/test_jid.c b/tests/unittests/test_jid.c
index 645a7b0a5e..77886e4a42 100644
--- a/tests/unittests/test_jid.c
+++ b/tests/unittests/test_jid.c
@@ -1,5 +1,6 @@
 #include <stdarg.h>
 #include <stddef.h>
+#include <stdint.h>
 #include <setjmp.h>
 #include <cmocka.h>
 #include <stdlib.h>
diff --git a/tests/unittests/test_parser.c b/tests/unittests/test_parser.c
index 3d0d3fc6e6..8019097da0 100644
--- a/tests/unittests/test_parser.c
+++ b/tests/unittests/test_parser.c
@@ -1,5 +1,6 @@
 #include <stdarg.h>
 #include <stddef.h>
+#include <stdint.h>
 #include <setjmp.h>
 #include <cmocka.h>
 #include <stdlib.h>
diff --git a/tests/unittests/test_preferences.c b/tests/unittests/test_preferences.c
index 7868791d41..1eb2ba3643 100644
--- a/tests/unittests/test_preferences.c
+++ b/tests/unittests/test_preferences.c
@@ -1,5 +1,6 @@
 #include <stdarg.h>
 #include <stddef.h>
+#include <stdint.h>
 #include <setjmp.h>
 #include <cmocka.h>
 #include <stdlib.h>
diff --git a/tests/unittests/test_roster_list.c b/tests/unittests/test_roster_list.c
index fc10d1a740..185a9c7282 100644
--- a/tests/unittests/test_roster_list.c
+++ b/tests/unittests/test_roster_list.c
@@ -5,6 +5,7 @@
 #include <setjmp.h>
 #include <cmocka.h>
 #include <stdlib.h>
+#include <stdint.h>
 
 #include "xmpp/contact.h"
 #include "xmpp/roster_list.h"
