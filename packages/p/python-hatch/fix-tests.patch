From 79d3c156d6d49d277d4a4014e78f84b02aac978b Mon Sep 17 00:00:00 2001
From: Cary <hawkinscary23@gmail.com>
Date: Sat, 27 Sep 2025 14:07:34 -0700
Subject: [PATCH] Fix failing tests, handle subprocess buffering causing output
 issues on terminal (#2061)

Co-authored-by: Ofek Lev <ofekmeister@gmail.com>

diff --git a/tests/cli/config/test_set.py b/tests/cli/config/test_set.py
index cd576feb4..73bb9bc03 100644
--- a/tests/cli/config/test_set.py
+++ b/tests/cli/config/test_set.py
@@ -184,6 +184,7 @@ def test_project_location_basic_set_first_project(hatch, config_file, helpers, t
         f"""
         New setting:
         project = "foo"
+
         [projects]
         foo = "{path}"
         """
@@ -205,6 +206,7 @@ def test_project_location_complex_set_first_project(hatch, config_file, helpers,
         f"""
         New setting:
         project = "foo"
+
         [projects.foo]
         location = "{path}"
         """
diff --git a/tests/cli/self/test_self.py b/tests/cli/self/test_self.py
index cd1a4aed1..3059905f5 100644
--- a/tests/cli/self/test_self.py
+++ b/tests/cli/self/test_self.py
@@ -2,6 +2,6 @@
 
 
 def test(hatch):
-    result = hatch(os.environ['PYAPP_COMMAND_NAME'])
+    result = hatch(os.environ['PYAPP_COMMAND_NAME'], '-h')
 
     assert result.exit_code == 0, result.output
