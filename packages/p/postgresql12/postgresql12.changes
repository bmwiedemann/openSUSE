-------------------------------------------------------------------
Tue May 11 16:19:19 UTC 2021 - Reinhard Max <max@suse.com>

- Upgrade to version 12.7:
  * https://www.postgresql.org/docs/12/release-12-7.html
  * CVE-2021-32027, bsc#1185924:
    Prevent integer overflows in array subscripting calculations.
  * CVE-2021-32028, bsc#1185925: Fix mishandling of “junk”
    columns in INSERT ... ON CONFLICT ... UPDATE target lists.
  * CVE-2021-32029, bsc#1185926: Fix possibly-incorrect
    computation of UPDATE ... RETURNING
    "pg_psql_temporary_savepoint" does not exist”.

- Don't use %_stop_on_removal, because it was meant to be private
  and got removed from openSUSE. %_restart_on_update is also
  private, but still supported and needed for now (bsc#1183168).

-------------------------------------------------------------------
Mon Mar 15 19:29:39 UTC 2021 - Reinhard Max <max@suse.com>

- Re-enable build of the llvmjit subpackage on SLE, but it will
  only be delivered on PackageHub for now (boo#1183118).

-------------------------------------------------------------------
Tue Mar  9 13:52:19 UTC 2021 - Reinhard Max <max@suse.com>

- Remove leftover PreReq on chkconfig, we stopped using it long
  time ago.

-------------------------------------------------------------------
Fri Feb 19 15:30:08 UTC 2021 - Reinhard Max <max@suse.com>

- boo#1179945: Disable icu for PostgreSQL 10 (and older) on TW.

-------------------------------------------------------------------
Wed Feb 10 13:32:07 UTC 2021 - Reinhard Max <max@suse.com>

Upgrade to version 12.6:
  * https://www.postgresql.org/docs/12/release-12-6.html  
  * Reindexing might be needed after applying this update.
  * CVE-2021-3393, bsc#1182040: Fix information leakage in
    constraint-violation error messages.
  * Obsoletes postgresql-icu68.patch.

-------------------------------------------------------------------
Mon Dec 14 16:19:33 UTC 2020 - Callum Farmer <gmbr3@opensuse.org>

- Add postgresql-icu68.patch: fix build with ICU 68

-------------------------------------------------------------------
Fri Nov 20 11:51:37 UTC 2020 - Reinhard Max <max@suse.com>

- bsc#1178961: %ghost the symlinks to pg_config and ecpg.
- boo#1179765: BuildRequire libpq5 and libecpg6 when not building
  them to avoid dangling symlinks in the devel package.

-------------------------------------------------------------------
Wed Nov 11 12:04:35 UTC 2020 - Reinhard Max <max@suse.com>

- Upgrade to version 12.5:
  * CVE-2020-25695, bsc#1178666: Block DECLARE CURSOR ... WITH HOLD
    and firing of deferred triggers within index expressions and
    materialized view queries.
  * CVE-2020-25694, bsc#1178667:
    a) Fix usage of complex connection-string parameters in pg_dump,
    pg_restore, clusterdb, reindexdb, and vacuumdb.
    b) When psql's \connect command re-uses connection parameters,
    ensure that all non-overridden parameters from a previous
    connection string are re-used.
  * CVE-2020-25696, bsc#1178668: Prevent psql's \gset command from
    modifying specially-treated variables.
  * Fix recently-added timetz test case so it works when the USA
    is not observing daylight savings time.
    (obsoletes postgresql-timetz.patch)
  * https://www.postgresql.org/about/news/2111/
  * https://www.postgresql.org/docs/12/release-12-5.html

-------------------------------------------------------------------
Tue Nov  3 13:54:38 UTC 2020 - Reinhard Max <max@suse.com>

- Fix a DST problem in the test suite: postgresql-timetz.patch
  https://postgr.es/m/16689-57701daa23b377bf@postgresql.org

-------------------------------------------------------------------
Fri Sep 25 07:34:28 UTC 2020 - Reinhard Max <max@suse.com>

- Stop building the mini and lib packages as they are now coming
  from postgresql13.

-------------------------------------------------------------------
Thu Aug 13 12:01:34 UTC 2020 - Reinhard Max <max@suse.com>

- update to 12.4:
  * CVE-2020-14349, bsc#1175193: Set a secure search_path in
    logical replication walsenders and apply workers
  * CVE-2020-14350, bsc#1175194: Make contrib modules' installation
    scripts more secure.
  * https://www.postgresql.org/docs/12/release-12-4.html
- Remove postgresql-regress.patch, it does not apply anymore and
  it does not seem to be needed anymore.
- Pack the /usr/lib/postgresql symlink only into the main package.

-------------------------------------------------------------------
Tue Jun 16 12:21:43 UTC 2020 - Reinhard Max <max@suse.com>

- Let postgresqlXX conflict with postgresql-noarch < 12.0.1 to get
  a clean and complete cutover to the new packaging schema.

-------------------------------------------------------------------
Wed Jun  3 17:36:27 UTC 2020 - Reinhard Max <max@suse.com>

- update to 12.3 (bsc#1171924).
  https://www.postgresql.org/about/news/2038/
  https://www.postgresql.org/docs/12/release-12-3.html
- Unify the spec file to work across all current PostgreSQL
  versions to simplify future maintenance.
- Move from the "libs" build flavour to a "mini" package that will
  only be used inside the build service and not get shipped, to
  avoid confusion with the debuginfo packages (bsc#1148643).

-------------------------------------------------------------------
Fri May 15 10:13:58 UTC 2020 - Namor Barcode <z1trus@gmx.com>

- update to 12.3
  https://www.postgresql.org/about/news/2038/
  https://www.postgresql.org/docs/12/release-12-3.html

-------------------------------------------------------------------
Tue Mar 31 14:23:52 UTC 2020 - Reinhard Max <max@suse.com>

- Temporarily disable JIT support on SLE until support status of
  clang has been clarified.
- We only need clang for LLVM, not clang-devel.

-------------------------------------------------------------------
Thu Feb 27 08:58:37 UTC 2020 - Reinhard Max <max@suse.com>

- Fix a few mistakes in the spec file.

-------------------------------------------------------------------
Sat Feb 15 03:02:07 UTC 2020 - Marcus Rueckert <mrueckert@suse.de>

- update to 12.2 (CVE-2020-1720)
  https://www.postgresql.org/about/news/2011/
  https://www.postgresql.org/docs/12/release-12-2.html

-------------------------------------------------------------------
Fri Feb 14 07:53:46 UTC 2020 - Guillaume GARDET <guillaume.gardet@opensuse.org>

- Disable explicitly armv8 CRC for %arm, as we use some armv8
  workers for armv6/7 builds which is confusing configure script

-------------------------------------------------------------------
Tue Feb 11 04:15:40 UTC 2020 - Stefan Brüns <stefan.bruens@rwth-aachen.de>

- Avoid the dependency from the devel package to the main package.
  devel packages are exclusive, thus ecpg does not require
  update-alternatives.

-------------------------------------------------------------------
Thu Feb  6 17:13:41 UTC 2020 - Reinhard Max <max@suse.com>

- Remove unused build dependencies from the client libs package:
  LVM, icu, selinux, systemd.
- Drop conditionals for suse_version 1110/1120.

-------------------------------------------------------------------
Fri Dec 20 14:46:29 UTC 2019 - Marcus Rueckert <mrueckert@suse.de>

- update to 12.1
  https://www.postgresql.org/docs/12/release-12-1.html
  https://www.postgresql.org/about/news/1994/

-------------------------------------------------------------------
Tue Oct 22 16:50:55 UTC 2019 - Marcus Rueckert <mrueckert@suse.de>

- add requires to the server-devel package for the libs that are
  returned by pg_config --libs

-------------------------------------------------------------------
Mon Oct  7 09:03:24 UTC 2019 - Marcus Rueckert <mrueckert@suse.de>

- initial package for the postgresql 12 branch
  https://www.postgresql.org/about/news/1976/
