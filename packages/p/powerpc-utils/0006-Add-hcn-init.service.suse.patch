From 0f2489fd015cce2662bde4a98a6c54b8432ee667 Mon Sep 17 00:00:00 2001
From: Mingming Cao <mmc@linux.vnet.ibm.com>
Date: Wed, 16 Feb 2022 01:09:05 -0800
Subject: [PATCH 6/6] Add hcn-init.service.suse

---
 configure.ac                     |  2 +-
 systemd/hcn-init.service.suse.in | 13 +++++++++++++
 2 files changed, 14 insertions(+), 1 deletion(-)
 create mode 100644 systemd/hcn-init.service.suse.in

diff --git a/configure.ac b/configure.ac
index 79d6cf7..fd275be 100644
--- a/configure.ac
+++ b/configure.ac
@@ -117,5 +117,5 @@ LOCAL_CHECK_FLAGS
 
 AC_CONFIG_FILES([Makefile powerpc-utils.spec systemd/smt_off.service])
 AC_CONFIG_FILES([systemd/smtstate.service scripts/smtstate])
-AC_CONFIG_FILES([systemd/hcn-init.service])
+AC_CONFIG_FILES([systemd/hcn-init.service systemd/hcn-init.service.suse])
 AC_OUTPUT
diff --git a/systemd/hcn-init.service.suse.in b/systemd/hcn-init.service.suse.in
new file mode 100644
index 0000000..f841755
--- /dev/null
+++ b/systemd/hcn-init.service.suse.in
@@ -0,0 +1,13 @@
+[Unit]
+Description=hybrid virtual network scan and config
+After=network-pre.target NetworkManager.service
+Before=wicked.service
+Requisite=network.service
+PartOf=network.service
+
+[Service]
+Type=oneshot
+ExecStart=@sbindir@/hcnmgr -s
+
+[Install]
+WantedBy=multi-user.target network.target
-- 
2.34.1

