#!/bin/sh
#
# Script to create node_modules.tar.xz for the tests.
# Adapted from .github/workflows/test.yml
# Execute this in an extracted github archive/cloned repository
# Note: The pathname MUST NOT include any ':' as is common
# in checked out obs package directories.

# requires: yarn, npm

pushd javascript
yarn
yarn build
popd
pushd tests
npm install
popd

tar cJf node_modules.tar.xz \
  yarn.lock \
  node_modules \
  tests/node_modules \
  javascript/lib \
  javascript/node_modules \
  javascript/tsconfig.tsbuildinfo
