---
 SelFile/SelFile.c |   11 +++++------
 1 file changed, 5 insertions(+), 6 deletions(-)

--- SelFile/SelFile.c
+++ SelFile/SelFile.c	2021-03-30 09:09:08.874235990 +0000
@@ -46,9 +46,7 @@
 /* BSD 4.3 errno.h does not declare errno */
 extern int errno;
 extern int sys_nerr;
-#if !(defined __GLIBC__ && __GLIBC__ >=2)
-extern char *sys_errlist[];
-#endif
+#include <string.h>
 
 #include <sys/param.h>
 #include <X11/cursorfont.h>
@@ -564,11 +562,12 @@ SFopenFile(name, mode, prompt, failed)
     SFchdir(SFstartDir);
     if ((fp = fopen(name, mode)) == NULL) {
 	char *buf;
-	if (errno <= sys_nerr) {
-	    buf = XtMalloc(strlen(failed) + strlen(sys_errlist[errno]) + 
+	if (strerrorname_np(errno)) {
+	    const char *err = strerror(errno);
+	    buf = XtMalloc(strlen(failed) + strlen(err) + 
 			   strlen(prompt) + 2);
 	    strcpy(buf, failed);
-	    strcat(buf, sys_errlist[errno]);
+	    strcat(buf, err);
 	    strcat(buf, "\n");
 	    strcat(buf, prompt);
 	} else {
