From c94527c95ffc68b3b161c8cd0a786ae179f30915 Mon Sep 17 00:00:00 2001
From: Christophe Giboudeaux <christophe@krop.fr>
Date: Tue, 27 Jul 2021 14:54:00 +0200
Subject: [PATCH] Always link to python libraries.

Change-Id: I687191431adaff55927de353db8f81dfa30ba1b1
---
 sources/shiboken6/data/shiboken_helpers.cmake | 18 +++---------------
 1 file changed, 3 insertions(+), 15 deletions(-)

diff --git a/sources/shiboken6/data/shiboken_helpers.cmake b/sources/shiboken6/data/shiboken_helpers.cmake
index 7e772c7fd..438f63480 100644
--- a/sources/shiboken6/data/shiboken_helpers.cmake
+++ b/sources/shiboken6/data/shiboken_helpers.cmake
@@ -300,21 +300,9 @@ macro(shiboken_compute_python_libraries)
         "SHIBOKEN_COMPUTE_LIBS" "shiboken_compute_python_libraries"
         "IS_CALLED_FROM_EXPORT" "" "" ${ARGN})
 
-    if (NOT SHIBOKEN_PYTHON_LIBRARIES)
-        set(SHIBOKEN_PYTHON_LIBRARIES "")
-    endif()
-
-    if(CMAKE_BUILD_TYPE STREQUAL "Debug")
-        if(WIN32 AND NOT SHIBOKEN_PYTHON_LIBRARIES)
-            set(SHIBOKEN_PYTHON_LIBRARIES ${PYTHON_DEBUG_LIBRARIES})
-        endif()
-    endif()
-
-    if(CMAKE_BUILD_TYPE STREQUAL "Release")
-        if(WIN32 AND NOT SHIBOKEN_PYTHON_LIBRARIES)
-            set(SHIBOKEN_PYTHON_LIBRARIES ${PYTHON_LIBRARIES})
-        endif()
-    endif()
+    # Always link to python libraries.
+    message(STATUS "Linking shiboken to ${PYTHON_LIBRARIES}")
+    set(SHIBOKEN_PYTHON_LIBRARIES ${PYTHON_LIBRARIES})
 
     # If the resulting variable
     # contains a "debug;X;optimized;Y" list like described in shiboken_check_if_limited_api,
-- 
2.33.0

