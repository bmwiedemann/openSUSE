--- linux/pcfclock.c
+++ linux/pcfclock.c
@@ -269,7 +269,11 @@
 	int rc;
 	int try;
 	char buf1[18], buf2[18];
+#if LINUX_VERSION_CODE < KERNEL_VERSION(3,19,0)
 	unsigned int minor = iminor(filp->f_dentry->d_inode);
+#else
+	unsigned int minor = iminor(file_inode(filp));
+#endif
 	struct pcfclock_struct *pcfclock = &pcfclock_table[minor];
 	struct pcfclock_status *status = (struct pcfclock_status *) &filp->private_data;
 
