From 3ccb15d7bea97db132ed4cdea4d9ef25d18311a4 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Mat=C4=9Bj=20Cepl?= <mcepl@suse.com>
Date: Mon, 25 Mar 2024 20:11:16 +0100
Subject: [PATCH 2/2] skip test which require network access

---
 pyproject.toml                                                 | 3 +++
 .../python/virtual_env/package/test_package_cmd_builder.py     | 1 +
 2 files changed, 4 insertions(+)

diff --git a/pyproject.toml b/pyproject.toml
index 5e9b104a..b81c63ad 100644
--- a/pyproject.toml
+++ b/pyproject.toml
@@ -147,6 +147,9 @@ count = true
 [tool.pytest.ini_options]
 testpaths = ["tests"]
 addopts = "--tb=auto -ra --showlocals --no-success-flaky-report"
+markers = [
+    "network: tests requiring network connection",
+]
 
 [tool.coverage]
 html.show_contexts = true
diff --git a/tests/tox_env/python/virtual_env/package/test_package_cmd_builder.py b/tests/tox_env/python/virtual_env/package/test_package_cmd_builder.py
index d29fe257..fb49a984 100644
--- a/tests/tox_env/python/virtual_env/package/test_package_cmd_builder.py
+++ b/tests/tox_env/python/virtual_env/package/test_package_cmd_builder.py
@@ -87,6 +87,7 @@ def test_install_pkg_via(tox_project: ToxProjectCreator, mode: str, pkg_with_ext
 
 
 @pytest.mark.usefixtures("enable_pip_pypi_access")
+@pytest.mark.network
 def test_build_wheel_external(tox_project: ToxProjectCreator, demo_pkg_inline: Path) -> None:
     ini = """
     [testenv]
-- 
2.44.0

