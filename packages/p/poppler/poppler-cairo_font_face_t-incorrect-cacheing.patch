From 4af747747642ae640b535872d837f28f9a1a7940 Mon Sep 17 00:00:00 2001
From: Adrian Johnson <ajohnson@redneon.com>
Date: Thu, 12 May 2022 08:23:48 +0930
Subject: [PATCH] CairoFontEngine: cairo_font_face_t cache should only cache
 external fonts

CaioFontEnginer::fontCache already caches embedded fonts
---
 poppler/CairoFontEngine.cc | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/poppler/CairoFontEngine.cc b/poppler/CairoFontEngine.cc
index 62c4bab65..0a4154e66 100644
--- a/poppler/CairoFontEngine.cc
+++ b/poppler/CairoFontEngine.cc
@@ -204,7 +204,7 @@ static bool operator==(_ft_face_data &a, _ft_face_data &b)
         return false;
     }
 
-    if (a.embFontID != b.embFontID) {
+    if (a.bytes.size() > 0 || b.bytes.size() > 0) {
         return false;
     }
 
-- 
GitLab

