From 4e45e9bd0a93581e17efd42caed0a643e5cfee4b Mon Sep 17 00:00:00 2001
From: Andreas Sturmlechner <andreas.sturmlechner@gmail.com>
Date: Sun, 1 Jan 2017 00:30:44 +0100
Subject: [PATCH 3/6] Make tests optional

---
 CMakeLists.txt     | 2 ++
 src/CMakeLists.txt | 4 +++-
 2 files changed, 5 insertions(+), 1 deletion(-)

diff --git a/CMakeLists.txt b/CMakeLists.txt
index 247eb7f..d0499f6 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -33,6 +33,8 @@ SET( OYRANOS_VERSION_MAJORMINOR "${OYRANOS_VERSION_MAJOR}.${OYRANOS_VERSION_MINO
 
 include(GNUInstallDirs)
 
+option(ENABLE_TESTS "Build tests (requires static libs)" ON)
+
 IF( ${CMAKE_SYSTEM_NAME} MATCHES "Darwin")
   SET(PLATFORM "OSX")
 ELSEIF( ${CMAKE_SYSTEM_NAME} MATCHES "Linux")
diff --git a/src/CMakeLists.txt b/src/CMakeLists.txt
index 395f941..76f3ccb 100644
--- a/src/CMakeLists.txt
+++ b/src/CMakeLists.txt
@@ -301,7 +301,9 @@ ADD_SUBDIRECTORY( liboyranos )
 
 ADD_SUBDIRECTORY( modules )
 
-ADD_SUBDIRECTORY( tests )
+IF(ENABLE_TESTS)
+  ADD_SUBDIRECTORY( tests )
+ENDIF()
 
 ADD_SUBDIRECTORY( tools )
 
-- 
2.10.2

