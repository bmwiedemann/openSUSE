commit e392c8fd6f0b4a092cb4a2370b2d3f97c2135c8b
Author: Nicolas Morey-Chaisemartin <nmoreychaisemartin@suse.com>
Date:   Wed May 15 09:22:00 2019 +0200

    opae: fix python packaging
    
    Signed-off-by: Nicolas Morey-Chaisemartin <nmoreychaisemartin@suse.com>

diff --git cmake/modules/packaging.cmake cmake/modules/packaging.cmake
index a028cb147d78..cc7101bc1688 100644
--- cmake/modules/packaging.cmake
+++ cmake/modules/packaging.cmake
@@ -98,7 +98,7 @@ macro(CREATE_PYTHON_EXE EXE_NAME MAIN_MODULE)
         "\n"
         "# Write to a buffer so that the shebang can be prepended easily\n"
         "wr_buf = BytesIO()\n"
-        "wr_buf.write('#!/usr/bin/python3' + os.linesep)\n"
+        "wr_buf.write(str.encode('#!/usr/bin/python3' + os.linesep))\n"
         "\n"
         "z = zipfile.PyZipFile(wr_buf, 'w')\n")
 
@@ -137,7 +137,7 @@ macro(CREATE_PYTHON_EXE EXE_NAME MAIN_MODULE)
         "f.close()\n")
 
     # Run Python to generate the zipped file
-    execute_process(COMMAND python "${BUILD_DIR_MAIN}/do_zip.py"
+    execute_process(COMMAND ${PYTHON_EXECUTABLE} "${BUILD_DIR_MAIN}/do_zip.py"
         WORKING_DIRECTORY ${CMAKE_CURRENT_SOURCE_DIR})
 
 endmacro(CREATE_PYTHON_EXE)
