From: Egbert Eich <eich@suse.com>
Date: Sun Mar 13 10:57:59 2022 +0100
Subject: Do not include symbols defined in driver/others/parameter.c in DYNAMIC_BUILD
Patch-mainline: Not yet
Git-repo: https://github.com/xianyi/OpenBLAS
Git-commit: 53cd07b0201c94ea50a499867382dcf39d1b8766
References: 

driver/others/parameter.c does not get build during DYNAMIC_BUILD, thus,
do not declare its symbols. This will make the build fail early and in
an obvious way if functions are trying to use these symbols.

Signed-off-by: Egbert Eich <eich@suse.com>
Signed-off-by: Egbert Eich <eich@suse.de>
---
 common_macro.h | 5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)
diff --git a/common_macro.h b/common_macro.h
index 9826f180..d2fa822c 100644
--- a/common_macro.h
+++ b/common_macro.h
@@ -2610,8 +2610,9 @@
 #endif
 
 #ifndef ASSEMBLER
-#if defined(ARCH_X86) || defined(ARCH_X86_64) || defined(ARCH_IA64) || defined(ARCH_MIPS64) || defined(ARCH_ARM64)\
-|| defined(ARCH_LOONGARCH64) || defined(ARCH_E2K)
+#if !defined(DYNAMIC_ARCH) \
+  && (defined(ARCH_X86) || defined(ARCH_X86_64) || defined(ARCH_IA64) || defined(ARCH_MIPS64) || defined(ARCH_ARM64) \
+      || defined(ARCH_LOONGARCH64) || defined(ARCH_E2K))
 extern BLASLONG gemm_offset_a;
 extern BLASLONG gemm_offset_b;
 extern BLASLONG sbgemm_p;
