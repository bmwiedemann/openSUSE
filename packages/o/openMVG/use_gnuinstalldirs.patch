From ddde4f954601e68e2f8840e865791681c2c56f6b Mon Sep 17 00:00:00 2001
From: kev <kev@localhost.localdomain>
Date: Tue, 2 Feb 2021 15:59:04 +0700
Subject: [PATCH 1/5] fix lib dir

---
 src/CMakeLists.txt                                       | 2 +-
 src/openMVG/cameras/CMakeLists.txt                       | 2 +-
 src/openMVG/exif/CMakeLists.txt                          | 2 +-
 src/openMVG/features/CMakeLists.txt                      | 2 +-
 src/openMVG/geodesy/CMakeLists.txt                       | 2 +-
 src/openMVG/geometry/CMakeLists.txt                      | 2 +-
 src/openMVG/graph/CMakeLists.txt                         | 2 +-
 src/openMVG/image/CMakeLists.txt                         | 2 +-
 src/openMVG/linearProgramming/CMakeLists.txt             | 2 +-
 src/openMVG/linearProgramming/lInfinityCV/CMakeLists.txt | 2 +-
 src/openMVG/matching/CMakeLists.txt                      | 2 +-
 src/openMVG/matching/kvld/CMakeLists.txt                 | 2 +-
 src/openMVG/matching_image_collection/CMakeLists.txt     | 2 +-
 src/openMVG/multiview/CMakeLists.txt                     | 2 +-
 src/openMVG/numeric/CMakeLists.txt                       | 2 +-
 src/openMVG/robust_estimation/CMakeLists.txt             | 2 +-
 src/openMVG/sfm/CMakeLists.txt                           | 2 +-
 src/openMVG/system/CMakeLists.txt                        | 2 +-
 src/third_party/lemon/lemon/CMakeLists.txt               | 4 ++--
 19 files changed, 20 insertions(+), 20 deletions(-)

diff --git a/src/CMakeLists.txt b/src/CMakeLists.txt
index b12eb5ad9..d424c45ee 100644
--- a/src/CMakeLists.txt
+++ b/src/CMakeLists.txt
@@ -549,7 +549,7 @@ message("\n")
 # INSTALL RULES
 # ==============================================================================
 
-install(EXPORT openMVG-targets DESTINATION lib)
+install(EXPORT openMVG-targets DESTINATION ${CMAKE_INSTALL_LIBDIR})
 install(EXPORT openMVG-targets
   FILE OpenMVGTargets.cmake
   NAMESPACE OpenMVG::
diff --git a/src/openMVG/cameras/CMakeLists.txt b/src/openMVG/cameras/CMakeLists.txt
index 333ab7295..1b93898f6 100644
--- a/src/openMVG/cameras/CMakeLists.txt
+++ b/src/openMVG/cameras/CMakeLists.txt
@@ -5,7 +5,7 @@ set_property(TARGET openMVG_camera APPEND PROPERTY
 
 target_compile_features(openMVG_camera INTERFACE ${CXX11_FEATURES})
 target_link_libraries(openMVG_camera INTERFACE openMVG_numeric cereal ${OPENMVG_LIBRARY_DEPENDENCIES})
-install(TARGETS openMVG_camera DESTINATION lib EXPORT openMVG-targets)
+install(TARGETS openMVG_camera DESTINATION ${CMAKE_INSTALL_LIBDIR} EXPORT openMVG-targets)
 
 UNIT_TEST(openMVG Camera_Pinhole openMVG_camera)
 
diff --git a/src/openMVG/exif/CMakeLists.txt b/src/openMVG/exif/CMakeLists.txt
index 034896488..2542cae3a 100644
--- a/src/openMVG/exif/CMakeLists.txt
+++ b/src/openMVG/exif/CMakeLists.txt
@@ -4,7 +4,7 @@ target_compile_features(openMVG_exif INTERFACE ${CXX11_FEATURES})
 target_link_libraries(openMVG_exif LINK_PRIVATE openMVG_easyexif)
 target_include_directories(openMVG_exif PRIVATE ${CMAKE_SOURCE_DIR} ${CMAKE_SOURCE_DIR}/third_party/include/easyexif)
 set_property(TARGET openMVG_exif PROPERTY FOLDER OpenMVG/OpenMVG)
-install(TARGETS openMVG_exif DESTINATION lib EXPORT openMVG-targets)
+install(TARGETS openMVG_exif DESTINATION ${CMAKE_INSTALL_LIBDIR} EXPORT openMVG-targets)
 
 
 UNIT_TEST(openMVG exif_IO "openMVG_testing;${STLPLUS_LIBRARY};openMVG_exif")
diff --git a/src/openMVG/features/CMakeLists.txt b/src/openMVG/features/CMakeLists.txt
index c7d3d3be9..79cd42d08 100644
--- a/src/openMVG/features/CMakeLists.txt
+++ b/src/openMVG/features/CMakeLists.txt
@@ -39,7 +39,7 @@ if (MSVC)
   target_compile_options(openMVG_features PUBLIC "-D_USE_MATH_DEFINES")
 endif (MSVC)
 set_target_properties(openMVG_features PROPERTIES SOVERSION ${OPENMVG_VERSION_MAJOR} VERSION "${OPENMVG_VERSION_MAJOR}.${OPENMVG_VERSION_MINOR}")
-install(TARGETS openMVG_features DESTINATION lib EXPORT openMVG-targets)
+install(TARGETS openMVG_features DESTINATION ${CMAKE_INSTALL_LIBDIR} EXPORT openMVG-targets)
 set_property(TARGET openMVG_features PROPERTY FOLDER OpenMVG/OpenMVG)
 
 UNIT_TEST(openMVG features "openMVG_features")
diff --git a/src/openMVG/geodesy/CMakeLists.txt b/src/openMVG/geodesy/CMakeLists.txt
index f8147932c..a8d700542 100644
--- a/src/openMVG/geodesy/CMakeLists.txt
+++ b/src/openMVG/geodesy/CMakeLists.txt
@@ -7,6 +7,6 @@ target_link_libraries(openMVG_geodesy
   INTERFACE
     openMVG_numeric
 )
-install(TARGETS openMVG_geodesy DESTINATION lib EXPORT openMVG-targets)
+install(TARGETS openMVG_geodesy DESTINATION ${CMAKE_INSTALL_LIBDIR} EXPORT openMVG-targets)
 
 UNIT_TEST(openMVG_geodesy geodesy "openMVG_geodesy")
diff --git a/src/openMVG/geometry/CMakeLists.txt b/src/openMVG/geometry/CMakeLists.txt
index 0a6a016a1..bacd3eab2 100644
--- a/src/openMVG/geometry/CMakeLists.txt
+++ b/src/openMVG/geometry/CMakeLists.txt
@@ -30,7 +30,7 @@ target_include_directories(openMVG_geometry
     $<INSTALL_INTERFACE:include>
 )
 
-install(TARGETS openMVG_geometry DESTINATION lib EXPORT openMVG-targets)
+install(TARGETS openMVG_geometry DESTINATION ${CMAKE_INSTALL_LIBDIR} EXPORT openMVG-targets)
 
 UNIT_TEST(openMVG convex_hull "openMVG_geometry")
 UNIT_TEST(openMVG rigid_transformation3D_srt "openMVG_geometry")
diff --git a/src/openMVG/graph/CMakeLists.txt b/src/openMVG/graph/CMakeLists.txt
index 3cb31ad4e..34f4ba2a3 100644
--- a/src/openMVG/graph/CMakeLists.txt
+++ b/src/openMVG/graph/CMakeLists.txt
@@ -2,7 +2,7 @@
 add_library(openMVG_graph INTERFACE)
 target_compile_features(openMVG_graph INTERFACE ${CXX11_FEATURES})
 target_link_libraries(openMVG_graph INTERFACE ${LEMON_LIBRARY})
-install(TARGETS openMVG_graph DESTINATION lib EXPORT openMVG-targets)
+install(TARGETS openMVG_graph DESTINATION ${CMAKE_INSTALL_LIBDIR} EXPORT openMVG-targets)
 
 UNIT_TEST(openMVG_graph connectedComponent "openMVG_testing;openMVG_graph")
 UNIT_TEST(openMVG_graph triplet_finder "openMVG_testing;openMVG_graph")
diff --git a/src/openMVG/image/CMakeLists.txt b/src/openMVG/image/CMakeLists.txt
index 6913d193a..b6373f5ba 100644
--- a/src/openMVG/image/CMakeLists.txt
+++ b/src/openMVG/image/CMakeLists.txt
@@ -38,7 +38,7 @@ if (MSVC)
 endif (MSVC)
 set_target_properties(openMVG_image PROPERTIES SOVERSION ${OPENMVG_VERSION_MAJOR} VERSION "${OPENMVG_VERSION_MAJOR}.${OPENMVG_VERSION_MINOR}")
 set_property(TARGET openMVG_image PROPERTY FOLDER OpenMVG/OpenMVG)
-install(TARGETS openMVG_image DESTINATION lib EXPORT openMVG-targets)
+install(TARGETS openMVG_image DESTINATION ${CMAKE_INSTALL_LIBDIR} EXPORT openMVG-targets)
 
 UNIT_TEST(openMVG image "openMVG_image")
 UNIT_TEST(openMVG image_drawing "openMVG_image")
diff --git a/src/openMVG/linearProgramming/CMakeLists.txt b/src/openMVG/linearProgramming/CMakeLists.txt
index cc5212fda..4532161de 100644
--- a/src/openMVG/linearProgramming/CMakeLists.txt
+++ b/src/openMVG/linearProgramming/CMakeLists.txt
@@ -8,7 +8,7 @@ add_library(openMVG_linearProgramming
 target_compile_features(openMVG_linearProgramming INTERFACE ${CXX11_FEATURES})
 
 set_property(TARGET openMVG_linearProgramming PROPERTY FOLDER OpenMVG/OpenMVG)
-install(TARGETS openMVG_linearProgramming DESTINATION lib EXPORT openMVG-targets)
+install(TARGETS openMVG_linearProgramming DESTINATION ${CMAKE_INSTALL_LIBDIR} EXPORT openMVG-targets)
 set_target_properties(openMVG_linearProgramming PROPERTIES SOVERSION ${OPENMVG_VERSION_MAJOR} VERSION "${OPENMVG_VERSION_MAJOR}.${OPENMVG_VERSION_MINOR}")
 
 target_link_libraries(openMVG_linearProgramming
diff --git a/src/openMVG/linearProgramming/lInfinityCV/CMakeLists.txt b/src/openMVG/linearProgramming/lInfinityCV/CMakeLists.txt
index e10c9457c..56d805481 100644
--- a/src/openMVG/linearProgramming/lInfinityCV/CMakeLists.txt
+++ b/src/openMVG/linearProgramming/lInfinityCV/CMakeLists.txt
@@ -21,7 +21,7 @@ target_compile_features(openMVG_lInftyComputerVision INTERFACE ${CXX11_FEATURES}
 target_link_libraries(openMVG_lInftyComputerVision PUBLIC openMVG_linearProgramming openMVG_multiview)
 set_target_properties(openMVG_lInftyComputerVision PROPERTIES SOVERSION ${OPENMVG_VERSION_MAJOR} VERSION "${OPENMVG_VERSION_MAJOR}.${OPENMVG_VERSION_MINOR}")
 set_property(TARGET openMVG_lInftyComputerVision PROPERTY FOLDER OpenMVG/OpenMVG)
-install(TARGETS openMVG_lInftyComputerVision DESTINATION lib EXPORT openMVG-targets)
+install(TARGETS openMVG_lInftyComputerVision DESTINATION ${CMAKE_INSTALL_LIBDIR} EXPORT openMVG-targets)
 
 set(LOCAL_LIBS
   openMVG_lInftyComputerVision
diff --git a/src/openMVG/matching/CMakeLists.txt b/src/openMVG/matching/CMakeLists.txt
index 5fcd9722b..0b647473f 100644
--- a/src/openMVG/matching/CMakeLists.txt
+++ b/src/openMVG/matching/CMakeLists.txt
@@ -55,7 +55,7 @@ if (USE_AVX2)
   endif (UNIX)
 endif (USE_AVX2)
 
-install(TARGETS openMVG_matching DESTINATION lib EXPORT openMVG-targets)
+install(TARGETS openMVG_matching DESTINATION ${CMAKE_INSTALL_LIBDIR} EXPORT openMVG-targets)
 
 UNIT_TEST(openMVG matching "openMVG_matching")
 UNIT_TEST(openMVG matching_filters "openMVG_matching")
diff --git a/src/openMVG/matching/kvld/CMakeLists.txt b/src/openMVG/matching/kvld/CMakeLists.txt
index 0c9cb9926..dcc23a5c2 100644
--- a/src/openMVG/matching/kvld/CMakeLists.txt
+++ b/src/openMVG/matching/kvld/CMakeLists.txt
@@ -5,4 +5,4 @@ target_link_libraries(openMVG_kvld
   PUBLIC openMVG_features openMVG_image)
 set_target_properties(openMVG_kvld PROPERTIES SOVERSION ${OPENMVG_VERSION_MAJOR} VERSION "${OPENMVG_VERSION_MAJOR}.${OPENMVG_VERSION_MINOR}")
 set_property(TARGET openMVG_kvld PROPERTY FOLDER OpenMVG/OpenMVG)
-install(TARGETS openMVG_kvld DESTINATION lib EXPORT openMVG-targets)
+install(TARGETS openMVG_kvld DESTINATION ${CMAKE_INSTALL_LIBDIR} EXPORT openMVG-targets)
diff --git a/src/openMVG/matching_image_collection/CMakeLists.txt b/src/openMVG/matching_image_collection/CMakeLists.txt
index 1afd2bc1e..a7ce23633 100644
--- a/src/openMVG/matching_image_collection/CMakeLists.txt
+++ b/src/openMVG/matching_image_collection/CMakeLists.txt
@@ -31,6 +31,6 @@ target_include_directories(openMVG_matching_image_collection
 )
 set_target_properties(openMVG_matching_image_collection PROPERTIES SOVERSION ${OPENMVG_VERSION_MAJOR} VERSION "${OPENMVG_VERSION_MAJOR}.${OPENMVG_VERSION_MINOR}")
 set_property(TARGET openMVG_matching_image_collection PROPERTY FOLDER OpenMVG/OpenMVG)
-install(TARGETS openMVG_matching_image_collection DESTINATION lib EXPORT openMVG-targets)
+install(TARGETS openMVG_matching_image_collection DESTINATION ${CMAKE_INSTALL_LIBDIR} EXPORT openMVG-targets)
 
 UNIT_TEST(openMVG Pair_Builder "openMVG_matching_image_collection")
diff --git a/src/openMVG/multiview/CMakeLists.txt b/src/openMVG/multiview/CMakeLists.txt
index 91f1bc321..5f8467591 100644
--- a/src/openMVG/multiview/CMakeLists.txt
+++ b/src/openMVG/multiview/CMakeLists.txt
@@ -23,7 +23,7 @@ add_library(openMVG_multiview
   ${multiview_files_cpp})
 target_compile_features(openMVG_multiview INTERFACE ${CXX11_FEATURES})
 set_property(TARGET openMVG_multiview PROPERTY FOLDER OpenMVG/OpenMVG)
-install(TARGETS openMVG_multiview DESTINATION lib EXPORT openMVG-targets)
+install(TARGETS openMVG_multiview DESTINATION ${CMAKE_INSTALL_LIBDIR} EXPORT openMVG-targets)
 target_link_libraries(openMVG_multiview
   PUBLIC
     openMVG_numeric
diff --git a/src/openMVG/numeric/CMakeLists.txt b/src/openMVG/numeric/CMakeLists.txt
index 1f3fc30c4..1407bdd50 100644
--- a/src/openMVG/numeric/CMakeLists.txt
+++ b/src/openMVG/numeric/CMakeLists.txt
@@ -39,7 +39,7 @@ if (MSVC)
 endif (MSVC)
 set_target_properties(openMVG_numeric PROPERTIES SOVERSION ${OPENMVG_VERSION_MAJOR} VERSION "${OPENMVG_VERSION_MAJOR}.${OPENMVG_VERSION_MINOR}")
 set_property(TARGET openMVG_numeric PROPERTY FOLDER OpenMVG/OpenMVG)
-install(TARGETS openMVG_numeric DESTINATION lib EXPORT openMVG-targets)
+install(TARGETS openMVG_numeric DESTINATION ${CMAKE_INSTALL_LIBDIR} EXPORT openMVG-targets)
 
 UNIT_TEST(openMVG extract_columns openMVG_numeric)
 UNIT_TEST(openMVG numeric openMVG_numeric)
diff --git a/src/openMVG/robust_estimation/CMakeLists.txt b/src/openMVG/robust_estimation/CMakeLists.txt
index e57321443..a0b3255ce 100644
--- a/src/openMVG/robust_estimation/CMakeLists.txt
+++ b/src/openMVG/robust_estimation/CMakeLists.txt
@@ -20,7 +20,7 @@ target_link_libraries(openMVG_robust_estimation
     openMVG_numeric
 )
 set_property(TARGET openMVG_robust_estimation PROPERTY FOLDER OpenMVG/OpenMVG)
-install(TARGETS openMVG_robust_estimation DESTINATION lib EXPORT openMVG-targets)
+install(TARGETS openMVG_robust_estimation DESTINATION ${CMAKE_INSTALL_LIBDIR} EXPORT openMVG-targets)
 set_target_properties(
   openMVG_robust_estimation
   PROPERTIES SOVERSION ${OPENMVG_VERSION_MAJOR}
diff --git a/src/openMVG/sfm/CMakeLists.txt b/src/openMVG/sfm/CMakeLists.txt
index bd287679c..f1e0e46e0 100644
--- a/src/openMVG/sfm/CMakeLists.txt
+++ b/src/openMVG/sfm/CMakeLists.txt
@@ -50,7 +50,7 @@ if (MSVC)
 endif (MSVC)
 set_target_properties(openMVG_sfm PROPERTIES SOVERSION ${OPENMVG_VERSION_MAJOR} VERSION "${OPENMVG_VERSION_MAJOR}.${OPENMVG_VERSION_MINOR}")
 set_property(TARGET openMVG_sfm PROPERTY FOLDER OpenMVG/OpenMVG)
-install(TARGETS openMVG_sfm DESTINATION lib EXPORT openMVG-targets)
+install(TARGETS openMVG_sfm DESTINATION ${CMAKE_INSTALL_LIBDIR} EXPORT openMVG-targets)
 
 UNIT_TEST(openMVG sfm_data_io "openMVG_sfm;${STLPLUS_LIBRARY}")
 UNIT_TEST(openMVG sfm_data_BA "openMVG_multiview_test_data;openMVG_sfm;${STLPLUS_LIBRARY}")
diff --git a/src/openMVG/system/CMakeLists.txt b/src/openMVG/system/CMakeLists.txt
index c5f2844e0..c732ef0fb 100644
--- a/src/openMVG/system/CMakeLists.txt
+++ b/src/openMVG/system/CMakeLists.txt
@@ -6,7 +6,7 @@ target_include_directories(openMVG_system PUBLIC $<BUILD_INTERFACE:${CMAKE_SOURC
 target_compile_features(openMVG_system INTERFACE ${CXX11_FEATURES})
 set_target_properties(openMVG_system PROPERTIES SOVERSION ${OPENMVG_VERSION_MAJOR} VERSION "${OPENMVG_VERSION_MAJOR}.${OPENMVG_VERSION_MINOR}")
 set_property(TARGET openMVG_system PROPERTY FOLDER OpenMVG/OpenMVG)
-install(TARGETS openMVG_system DESTINATION lib/ EXPORT openMVG-targets)
+install(TARGETS openMVG_system DESTINATION ${CMAKE_INSTALL_LIBDIR}/ EXPORT openMVG-targets)
 
 add_library(openMVG_progress_test INTERFACE)
 target_link_libraries(openMVG_progress_test INTERFACE ${OPENMVG_LIBRARY_DEPENDENCIES})
diff --git a/src/third_party/lemon/lemon/CMakeLists.txt b/src/third_party/lemon/lemon/CMakeLists.txt
index 342771b3f..89cab1ec3 100644
--- a/src/third_party/lemon/lemon/CMakeLists.txt
+++ b/src/third_party/lemon/lemon/CMakeLists.txt
@@ -62,7 +62,7 @@ target_include_directories(openMVG_lemon PUBLIC
 
 INSTALL(
   TARGETS openMVG_lemon
-  DESTINATION lib
+  DESTINATION ${CMAKE_INSTALL_LIBDIR}
   EXPORT openMVG-targets
 )
 
@@ -94,5 +94,5 @@ INSTALL(
 
 #INSTALL(
 #  FILES ${CMAKE_CURRENT_BINARY_DIR}/lemon.pc
-#  DESTINATION lib/pkgconfig
+#  DESTINATION ${CMAKE_INSTALL_LIBDIR}/pkgconfig
 #)

From 635f2333619567b182d1237c2dd7b863d8dfdbac Mon Sep 17 00:00:00 2001
From: kev <kev@localhost.localdomain>
Date: Tue, 2 Feb 2021 17:17:27 +0700
Subject: [PATCH 2/5] Fix lib dir third party

---
 src/third_party/flann/src/cpp/CMakeLists.txt | 2 +-
 src/third_party/stlplus3/CMakeLists.txt      | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/src/third_party/flann/src/cpp/CMakeLists.txt b/src/third_party/flann/src/cpp/CMakeLists.txt
index 296a0128d..7cee10665 100644
--- a/src/third_party/flann/src/cpp/CMakeLists.txt
+++ b/src/third_party/flann/src/cpp/CMakeLists.txt
@@ -14,7 +14,7 @@
 
 #INSTALL(
 #  TARGETS flann_cpp_s
-#  DESTINATION lib
+#  DESTINATION ${CMAKE_INSTALL_LIBDIR}
 #  EXPORT openMVG-targets)
 
 INSTALL (
diff --git a/src/third_party/stlplus3/CMakeLists.txt b/src/third_party/stlplus3/CMakeLists.txt
index 334c59580..cffac0253 100644
--- a/src/third_party/stlplus3/CMakeLists.txt
+++ b/src/third_party/stlplus3/CMakeLists.txt
@@ -21,7 +21,7 @@ set_property(TARGET openMVG_stlplus PROPERTY FOLDER OpenMVG/3rdParty)
 
 install(
   TARGETS openMVG_stlplus
-  DESTINATION lib
+  DESTINATION ${CMAKE_INSTALL_LIBDIR}
   EXPORT openMVG-targets
 )
 

From 908f6c086b1719cd5b42a12016d1c933fe12b8e7 Mon Sep 17 00:00:00 2001
From: kev <kev@localhost.localdomain>
Date: Tue, 2 Feb 2021 17:51:59 +0700
Subject: [PATCH 3/5] Revert flann install lib, use build flag instead

---
 src/third_party/flann/src/cpp/CMakeLists.txt | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/src/third_party/flann/src/cpp/CMakeLists.txt b/src/third_party/flann/src/cpp/CMakeLists.txt
index 7cee10665..296a0128d 100644
--- a/src/third_party/flann/src/cpp/CMakeLists.txt
+++ b/src/third_party/flann/src/cpp/CMakeLists.txt
@@ -14,7 +14,7 @@
 
 #INSTALL(
 #  TARGETS flann_cpp_s
-#  DESTINATION ${CMAKE_INSTALL_LIBDIR}
+#  DESTINATION lib
 #  EXPORT openMVG-targets)
 
 INSTALL (

From d680e30608dc40a9049c6c9f26fb32a978fdcd7d Mon Sep 17 00:00:00 2001
From: kev <kev@localhost.localdomain>
Date: Tue, 2 Feb 2021 18:46:16 +0700
Subject: [PATCH 4/5] cmake bin instead of bin/.

---
 src/openMVG/system/CMakeLists.txt             |  2 +-
 src/software/Geodesy/CMakeLists.txt           |  2 +-
 src/software/Localization/CMakeLists.txt      |  2 +-
 src/software/SfM/CMakeLists.txt               | 36 +++++++++----------
 src/software/SfM/clustering/CMakeLists.txt    |  2 +-
 src/software/SfM/export/CMakeLists.txt        | 30 ++++++++--------
 src/software/SfM/import/CMakeLists.txt        |  2 +-
 src/software/SfMViewer/CMakeLists.txt         |  2 +-
 src/software/SfMWebGLViewer/CMakeLists.txt    |  2 +-
 src/software/VO/AlternativeVO/CMakeLists.txt  |  2 +-
 src/software/colorHarmonize/CMakeLists.txt    |  2 +-
 .../opencv/accv12_demo/CMakeLists.txt         |  2 +-
 .../adjacency_matrix_viewer/CMakeLists.txt    |  2 +-
 .../CMakeLists.txt                            |  2 +-
 src/third_party/lemon/lemon/CMakeLists.txt    |  2 +-
 15 files changed, 46 insertions(+), 46 deletions(-)

diff --git a/src/openMVG/system/CMakeLists.txt b/src/openMVG/system/CMakeLists.txt
index c732ef0fb..5ed532b66 100644
--- a/src/openMVG/system/CMakeLists.txt
+++ b/src/openMVG/system/CMakeLists.txt
@@ -6,7 +6,7 @@ target_include_directories(openMVG_system PUBLIC $<BUILD_INTERFACE:${CMAKE_SOURC
 target_compile_features(openMVG_system INTERFACE ${CXX11_FEATURES})
 set_target_properties(openMVG_system PROPERTIES SOVERSION ${OPENMVG_VERSION_MAJOR} VERSION "${OPENMVG_VERSION_MAJOR}.${OPENMVG_VERSION_MINOR}")
 set_property(TARGET openMVG_system PROPERTY FOLDER OpenMVG/OpenMVG)
-install(TARGETS openMVG_system DESTINATION ${CMAKE_INSTALL_LIBDIR}/ EXPORT openMVG-targets)
+install(TARGETS openMVG_system DESTINATION ${CMAKE_INSTALL_LIBDIR} EXPORT openMVG-targets)
 
 add_library(openMVG_progress_test INTERFACE)
 target_link_libraries(openMVG_progress_test INTERFACE ${OPENMVG_LIBRARY_DEPENDENCIES})
diff --git a/src/software/Geodesy/CMakeLists.txt b/src/software/Geodesy/CMakeLists.txt
index cc79ed166..8ea507d1e 100644
--- a/src/software/Geodesy/CMakeLists.txt
+++ b/src/software/Geodesy/CMakeLists.txt
@@ -11,4 +11,4 @@ target_link_libraries(openMVG_main_geodesy_registration_to_gps_position
 )
 
 set_property(TARGET openMVG_main_geodesy_registration_to_gps_position PROPERTY FOLDER OpenMVG/software)
-install(TARGETS openMVG_main_geodesy_registration_to_gps_position DESTINATION bin/)
+install(TARGETS openMVG_main_geodesy_registration_to_gps_position DESTINATION ${CMAKE_INSTALL_BINDIR})
diff --git a/src/software/Localization/CMakeLists.txt b/src/software/Localization/CMakeLists.txt
index 2f603934d..66b1e967a 100644
--- a/src/software/Localization/CMakeLists.txt
+++ b/src/software/Localization/CMakeLists.txt
@@ -16,4 +16,4 @@ target_link_libraries(openMVG_main_SfM_Localization
 
 # Installation rules
 set_property(TARGET openMVG_main_SfM_Localization PROPERTY FOLDER OpenMVG/software)
-install(TARGETS openMVG_main_SfM_Localization DESTINATION bin/)
+install(TARGETS openMVG_main_SfM_Localization DESTINATION ${CMAKE_INSTALL_BINDIR})
diff --git a/src/software/SfM/CMakeLists.txt b/src/software/SfM/CMakeLists.txt
index f1ef43370..6c414d862 100644
--- a/src/software/SfM/CMakeLists.txt
+++ b/src/software/SfM/CMakeLists.txt
@@ -25,9 +25,9 @@ target_link_libraries(openMVG_main_ConvertList
 
 # Installation rules
 set_property(TARGET openMVG_main_SfMInit_ImageListing PROPERTY FOLDER OpenMVG/software)
-install(TARGETS openMVG_main_SfMInit_ImageListing DESTINATION bin/)
+install(TARGETS openMVG_main_SfMInit_ImageListing DESTINATION ${CMAKE_INSTALL_BINDIR})
 set_property(TARGET openMVG_main_ConvertList PROPERTY FOLDER OpenMVG/software)
-install(TARGETS openMVG_main_ConvertList DESTINATION bin/)
+install(TARGETS openMVG_main_ConvertList DESTINATION ${CMAKE_INSTALL_BINDIR})
 
 ###
 # Add executable that computes:
@@ -84,13 +84,13 @@ target_link_libraries(openMVG_main_MatchesToTracks
 
 # Installation rules
 set_property(TARGET openMVG_main_ComputeFeatures PROPERTY FOLDER OpenMVG/software)
-install(TARGETS openMVG_main_ComputeFeatures DESTINATION bin/)
+install(TARGETS openMVG_main_ComputeFeatures DESTINATION ${CMAKE_INSTALL_BINDIR})
 set_property(TARGET openMVG_main_ListMatchingPairs PROPERTY FOLDER OpenMVG/software)
-install(TARGETS openMVG_main_ListMatchingPairs DESTINATION bin/)
+install(TARGETS openMVG_main_ListMatchingPairs DESTINATION ${CMAKE_INSTALL_BINDIR})
 set_property(TARGET openMVG_main_ComputeMatches PROPERTY FOLDER OpenMVG/software)
-install(TARGETS openMVG_main_ComputeMatches DESTINATION bin/)
+install(TARGETS openMVG_main_ComputeMatches DESTINATION ${CMAKE_INSTALL_BINDIR})
 set_property(TARGET openMVG_main_MatchesToTracks PROPERTY FOLDER OpenMVG/software)
-install(TARGETS openMVG_main_MatchesToTracks DESTINATION bin/)
+install(TARGETS openMVG_main_MatchesToTracks DESTINATION ${CMAKE_INSTALL_BINDIR})
 
 ###
 # SfM Pipelines
@@ -194,23 +194,23 @@ target_link_libraries(openMVG_main_ChangeLocalOrigin
 
 # Installation rules
 set_property(TARGET openMVG_main_IncrementalSfM PROPERTY FOLDER OpenMVG/software)
-install(TARGETS openMVG_main_IncrementalSfM DESTINATION bin/)
+install(TARGETS openMVG_main_IncrementalSfM DESTINATION ${CMAKE_INSTALL_BINDIR})
 set_property(TARGET openMVG_main_IncrementalSfM2 PROPERTY FOLDER OpenMVG/software)
-install(TARGETS openMVG_main_IncrementalSfM2 DESTINATION bin/)
+install(TARGETS openMVG_main_IncrementalSfM2 DESTINATION ${CMAKE_INSTALL_BINDIR})
 set_property(TARGET openMVG_main_GlobalSfM PROPERTY FOLDER OpenMVG/software)
-install(TARGETS openMVG_main_GlobalSfM DESTINATION bin/)
+install(TARGETS openMVG_main_GlobalSfM DESTINATION ${CMAKE_INSTALL_BINDIR})
 set_property(TARGET openMVG_main_ConvertSfM_DataFormat PROPERTY FOLDER OpenMVG/software)
-install(TARGETS openMVG_main_ConvertSfM_DataFormat DESTINATION bin/)
+install(TARGETS openMVG_main_ConvertSfM_DataFormat DESTINATION ${CMAKE_INSTALL_BINDIR})
 set_property(TARGET openMVG_main_FrustumFiltering PROPERTY FOLDER OpenMVG/software)
-install(TARGETS openMVG_main_FrustumFiltering DESTINATION bin/)
+install(TARGETS openMVG_main_FrustumFiltering DESTINATION ${CMAKE_INSTALL_BINDIR})
 set_property(TARGET openMVG_main_ComputeStructureFromKnownPoses PROPERTY FOLDER OpenMVG/software)
-install(TARGETS openMVG_main_ComputeStructureFromKnownPoses DESTINATION bin/)
+install(TARGETS openMVG_main_ComputeStructureFromKnownPoses DESTINATION ${CMAKE_INSTALL_BINDIR})
 set_property(TARGET openMVG_main_ComputeSfM_DataColor PROPERTY FOLDER OpenMVG/software)
-install(TARGETS openMVG_main_ComputeSfM_DataColor DESTINATION bin/)
+install(TARGETS openMVG_main_ComputeSfM_DataColor DESTINATION ${CMAKE_INSTALL_BINDIR})
 set_property(TARGET openMVG_main_PointsFiltering PROPERTY FOLDER OpenMVG/software)
-install(TARGETS openMVG_main_PointsFiltering DESTINATION bin/)
+install(TARGETS openMVG_main_PointsFiltering DESTINATION ${CMAKE_INSTALL_BINDIR})
 set_property(TARGET openMVG_main_ChangeLocalOrigin PROPERTY FOLDER OpenMVG/software)
-install(TARGETS openMVG_main_ChangeLocalOrigin DESTINATION bin/)
+install(TARGETS openMVG_main_ChangeLocalOrigin DESTINATION ${CMAKE_INSTALL_BINDIR})
 
 # SplitMatchFileIntoMatchFiles
 add_executable(openMVG_main_SplitMatchFileIntoMatchFiles main_SplitMatchFileIntoMatchFiles.cpp)
@@ -224,7 +224,7 @@ target_link_libraries(openMVG_main_SplitMatchFileIntoMatchFiles
 
 # Installation rules
 set_property(TARGET openMVG_main_SplitMatchFileIntoMatchFiles PROPERTY FOLDER OpenMVG/software)
-install(TARGETS openMVG_main_SplitMatchFileIntoMatchFiles DESTINATION bin/)
+install(TARGETS openMVG_main_SplitMatchFileIntoMatchFiles DESTINATION ${CMAKE_INSTALL_BINDIR})
 
 # -
 # Use openCV Feature detector to describe the images
@@ -249,7 +249,7 @@ if(OpenMVG_USE_OPENCV)
 
   set_property(TARGET openMVG_main_ComputeFeatures_OpenCV PROPERTY FOLDER OpenMVG/software)
   set_property(TARGET openMVG_main_ComputeFeatures_OpenCV PROPERTY INSTALL_RPATH_USE_LINK_PATH TRUE)
-  install(TARGETS openMVG_main_ComputeFeatures_OpenCV DESTINATION bin/)
+  install(TARGETS openMVG_main_ComputeFeatures_OpenCV DESTINATION ${CMAKE_INSTALL_BINDIR})
 endif(OpenMVG_USE_OPENCV)
 
 
@@ -269,7 +269,7 @@ target_link_libraries(openMVG_main_evalQuality
 
 #installation rules
 set_property(TARGET openMVG_main_evalQuality PROPERTY FOLDER OpenMVG/software)
-install(TARGETS openMVG_main_evalQuality DESTINATION bin/)
+install(TARGETS openMVG_main_evalQuality DESTINATION ${CMAKE_INSTALL_BINDIR})
 
 ##
 # Export tutorial with valid path thanks to a configuration file
diff --git a/src/software/SfM/clustering/CMakeLists.txt b/src/software/SfM/clustering/CMakeLists.txt
index 0f0dcaf31..0a2e73d9a 100644
--- a/src/software/SfM/clustering/CMakeLists.txt
+++ b/src/software/SfM/clustering/CMakeLists.txt
@@ -11,4 +11,4 @@ target_link_libraries(openMVG_main_ComputeClusters
     ${STLPLUS_LIBRARY})
 
 set_property(TARGET openMVG_main_ComputeClusters PROPERTY FOLDER OpenMVG/software/clustering)
-install(TARGETS openMVG_main_ComputeClusters DESTINATION bin/)
+install(TARGETS openMVG_main_ComputeClusters DESTINATION ${CMAKE_INSTALL_BINDIR})
diff --git a/src/software/SfM/export/CMakeLists.txt b/src/software/SfM/export/CMakeLists.txt
index c22d7de17..f0dd100ee 100644
--- a/src/software/SfM/export/CMakeLists.txt
+++ b/src/software/SfM/export/CMakeLists.txt
@@ -115,25 +115,25 @@ target_link_libraries( openMVG_main_openMVGSpherical2Cubic
 
 # installation rules
 set_property(TARGET openMVG_main_openMVG2PMVS PROPERTY FOLDER OpenMVG/software)
-install(TARGETS openMVG_main_openMVG2PMVS DESTINATION bin/)
+install(TARGETS openMVG_main_openMVG2PMVS DESTINATION ${CMAKE_INSTALL_BINDIR})
 set_property(TARGET openMVG_main_openMVG2openMVS PROPERTY FOLDER OpenMVG/software)
-install(TARGETS openMVG_main_openMVG2openMVS DESTINATION bin/)
+install(TARGETS openMVG_main_openMVG2openMVS DESTINATION ${CMAKE_INSTALL_BINDIR})
 set_property(TARGET openMVG_main_openMVG2CMPMVS PROPERTY FOLDER OpenMVG/software)
-install(TARGETS openMVG_main_openMVG2CMPMVS DESTINATION bin/)
+install(TARGETS openMVG_main_openMVG2CMPMVS DESTINATION ${CMAKE_INSTALL_BINDIR})
 set_property(TARGET openMVG_main_openMVG2MESHLAB PROPERTY FOLDER OpenMVG/software)
-install(TARGETS openMVG_main_openMVG2MESHLAB DESTINATION bin/)
+install(TARGETS openMVG_main_openMVG2MESHLAB DESTINATION ${CMAKE_INSTALL_BINDIR})
 set_property(TARGET openMVG_main_openMVG2Agisoft PROPERTY FOLDER OpenMVG/software)
-install(TARGETS openMVG_main_openMVG2Agisoft DESTINATION bin/)
+install(TARGETS openMVG_main_openMVG2Agisoft DESTINATION ${CMAKE_INSTALL_BINDIR})
 set_property(TARGET openMVG_main_openMVG2MVSTEXTURING PROPERTY FOLDER OpenMVG/software)
-install(TARGETS openMVG_main_openMVG2MVSTEXTURING DESTINATION bin/)
+install(TARGETS openMVG_main_openMVG2MVSTEXTURING DESTINATION ${CMAKE_INSTALL_BINDIR})
 set_property(TARGET openMVG_main_openMVG2MVE2 PROPERTY FOLDER OpenMVG/software)
-install(TARGETS openMVG_main_openMVG2MVE2 DESTINATION bin/)
+install(TARGETS openMVG_main_openMVG2MVE2 DESTINATION ${CMAKE_INSTALL_BINDIR})
 set_property(TARGET openMVG_main_openMVG2NVM PROPERTY FOLDER OpenMVG/software)
-install(TARGETS openMVG_main_openMVG2NVM DESTINATION bin/)
+install(TARGETS openMVG_main_openMVG2NVM DESTINATION ${CMAKE_INSTALL_BINDIR})
 set_property(TARGET openMVG_main_openMVG2Colmap PROPERTY FOLDER OpenMVG/software)
-install(TARGETS openMVG_main_openMVG2Colmap DESTINATION bin/)
+install(TARGETS openMVG_main_openMVG2Colmap DESTINATION ${CMAKE_INSTALL_BINDIR})
 set_property(TARGET openMVG_main_openMVGSpherical2Cubic PROPERTY FOLDER OpenMVG/software)
-install(TARGETS openMVG_main_openMVGSpherical2Cubic DESTINATION bin/)
+install(TARGETS openMVG_main_openMVGSpherical2Cubic DESTINATION ${CMAKE_INSTALL_BINDIR})
 
 ###
 # SfM tools to visualize feature tracking data
@@ -183,13 +183,13 @@ target_link_libraries(openMVG_main_ExportUndistortedImages
 
 # installation rules
 set_property(TARGET openMVG_main_exportKeypoints PROPERTY FOLDER OpenMVG/software)
-install(TARGETS openMVG_main_exportKeypoints DESTINATION bin/)
+install(TARGETS openMVG_main_exportKeypoints DESTINATION ${CMAKE_INSTALL_BINDIR})
 set_property(TARGET openMVG_main_exportMatches PROPERTY FOLDER OpenMVG/software)
-install(TARGETS openMVG_main_exportMatches DESTINATION bin/)
+install(TARGETS openMVG_main_exportMatches DESTINATION ${CMAKE_INSTALL_BINDIR})
 set_property(TARGET openMVG_main_exportTracks PROPERTY FOLDER OpenMVG/software)
-install(TARGETS openMVG_main_exportTracks DESTINATION bin/)
+install(TARGETS openMVG_main_exportTracks DESTINATION ${CMAKE_INSTALL_BINDIR})
 set_property(TARGET openMVG_main_ExportUndistortedImages PROPERTY FOLDER OpenMVG/software)
-install(TARGETS openMVG_main_ExportUndistortedImages DESTINATION bin/)
+install(TARGETS openMVG_main_ExportUndistortedImages DESTINATION ${CMAKE_INSTALL_BINDIR})
 
 
 # - Export SfM openMVG camera scene frustums as triangle meshes
@@ -202,4 +202,4 @@ target_link_libraries(openMVG_main_ExportCameraFrustums
   ${STLPLUS_LIBRARY}
 )
 set_property(TARGET openMVG_main_ExportCameraFrustums PROPERTY FOLDER OpenMVG/software)
-install(TARGETS openMVG_main_ExportCameraFrustums DESTINATION bin/)
+install(TARGETS openMVG_main_ExportCameraFrustums DESTINATION ${CMAKE_INSTALL_BINDIR})
diff --git a/src/software/SfM/import/CMakeLists.txt b/src/software/SfM/import/CMakeLists.txt
index 063e5977e..aaaf67326 100644
--- a/src/software/SfM/import/CMakeLists.txt
+++ b/src/software/SfM/import/CMakeLists.txt
@@ -20,7 +20,7 @@ target_link_libraries(openMVG_main_SfMInit_ImageListingFromKnownPoses
 
 # Installation rules
 set_property(TARGET openMVG_main_SfMInit_ImageListingFromKnownPoses PROPERTY FOLDER OpenMVG/software)
-install(TARGETS openMVG_main_SfMInit_ImageListingFromKnownPoses DESTINATION bin/)
+install(TARGETS openMVG_main_SfMInit_ImageListingFromKnownPoses DESTINATION ${CMAKE_INSTALL_BINDIR})
 
 SET(OPENMVG_TUTORIAL_IN_FILE "${CMAKE_CURRENT_LIST_DIR}/SfM_StructurePipeline.py.in")
 CONFIGURE_FILE(${OPENMVG_TUTORIAL_IN_FILE}
diff --git a/src/software/SfMViewer/CMakeLists.txt b/src/software/SfMViewer/CMakeLists.txt
index 45dd495d0..dd31600be 100644
--- a/src/software/SfMViewer/CMakeLists.txt
+++ b/src/software/SfMViewer/CMakeLists.txt
@@ -42,4 +42,4 @@ target_link_libraries(openMVG_main_sfmViewer
   ${GLFW_LIBRARIES})
 
 set_property(TARGET openMVG_main_sfmViewer PROPERTY FOLDER OpenMVG/software)
-install(TARGETS openMVG_main_sfmViewer DESTINATION bin/)
+install(TARGETS openMVG_main_sfmViewer DESTINATION ${CMAKE_INSTALL_BINDIR})
diff --git a/src/software/SfMWebGLViewer/CMakeLists.txt b/src/software/SfMWebGLViewer/CMakeLists.txt
index 015854c05..41113f8e6 100644
--- a/src/software/SfMWebGLViewer/CMakeLists.txt
+++ b/src/software/SfMWebGLViewer/CMakeLists.txt
@@ -13,7 +13,7 @@ target_link_libraries(openMVG_main_openMVG2WebGL
 
 target_include_directories( openMVG_main_openMVG2WebGL PRIVATE ${CMAKE_CURRENT_BINARY_DIR} )
 
-install(TARGETS openMVG_main_openMVG2WebGL DESTINATION bin/)
+install(TARGETS openMVG_main_openMVG2WebGL DESTINATION ${CMAKE_INSTALL_BINDIR})
 set_property(TARGET openMVG_main_openMVG2WebGL PROPERTY FOLDER OpenMVG/software)
 
 install(FILES "${CMAKE_CURRENT_SOURCE_DIR}/common/camera.js"  DESTINATION share/openMVG/webgl/common/ )
diff --git a/src/software/VO/AlternativeVO/CMakeLists.txt b/src/software/VO/AlternativeVO/CMakeLists.txt
index 550875e45..7cc3d7c44 100644
--- a/src/software/VO/AlternativeVO/CMakeLists.txt
+++ b/src/software/VO/AlternativeVO/CMakeLists.txt
@@ -31,7 +31,7 @@ if ( OpenMVG_BUILD_GUI_SOFTWARES )
 
     set_property( TARGET openMVG_main_AlternativeVO PROPERTY CXX_STANDARD 11 )
     set_property(TARGET openMVG_main_AlternativeVO PROPERTY FOLDER OpenMVG/software)
-    install(TARGETS openMVG_main_AlternativeVO DESTINATION bin/)
+    install(TARGETS openMVG_main_AlternativeVO DESTINATION ${CMAKE_INSTALL_BINDIR})
 
   endif( Qt5Widgets_FOUND )
 
diff --git a/src/software/colorHarmonize/CMakeLists.txt b/src/software/colorHarmonize/CMakeLists.txt
index 600b3fcf0..92ab89426 100644
--- a/src/software/colorHarmonize/CMakeLists.txt
+++ b/src/software/colorHarmonize/CMakeLists.txt
@@ -13,4 +13,4 @@ target_link_libraries(openMVG_main_ColHarmonize
 
 set_property(TARGET openMVG_main_ColHarmonize PROPERTY FOLDER OpenMVG/software)
 
-install(TARGETS openMVG_main_ColHarmonize DESTINATION bin/)
+install(TARGETS openMVG_main_ColHarmonize DESTINATION ${CMAKE_INSTALL_BINDIR})
diff --git a/src/software/opencv/accv12_demo/CMakeLists.txt b/src/software/opencv/accv12_demo/CMakeLists.txt
index baa1de907..ee20b3b73 100644
--- a/src/software/opencv/accv12_demo/CMakeLists.txt
+++ b/src/software/opencv/accv12_demo/CMakeLists.txt
@@ -4,5 +4,5 @@ if(OpenMVG_USE_OPENCV)
     target_include_directories(opencv_fitting PRIVATE ${OpenCV_INCLUDE_DIRS})
     target_compile_definitions(opencv_fitting
       PRIVATE -DTHIS_SOURCE_DIR="${CMAKE_CURRENT_SOURCE_DIR}")
-    install(TARGETS opencv_fitting DESTINATION bin/)
+    install(TARGETS opencv_fitting DESTINATION ${CMAKE_INSTALL_BINDIR})
 endif(OpenMVG_USE_OPENCV)
diff --git a/src/software/ui/SfM/adjacency_matrix_viewer/CMakeLists.txt b/src/software/ui/SfM/adjacency_matrix_viewer/CMakeLists.txt
index 2db34ee66..843f5b674 100644
--- a/src/software/ui/SfM/adjacency_matrix_viewer/CMakeLists.txt
+++ b/src/software/ui/SfM/adjacency_matrix_viewer/CMakeLists.txt
@@ -30,5 +30,5 @@ if (Qt5Widgets_FOUND AND Qt5Svg_FOUND )
   endif()
 
   set_property(TARGET ui_openMVG_MatchesViewer PROPERTY FOLDER OpenMVG/software/ui)
-  install(TARGETS ui_openMVG_MatchesViewer DESTINATION bin/)
+  install(TARGETS ui_openMVG_MatchesViewer DESTINATION ${CMAKE_INSTALL_BINDIR})
 endif(Qt5Widgets_FOUND AND Qt5Svg_FOUND )
diff --git a/src/software/ui/SfM/control_points_registration/CMakeLists.txt b/src/software/ui/SfM/control_points_registration/CMakeLists.txt
index ee8e1091e..eff5b75cc 100644
--- a/src/software/ui/SfM/control_points_registration/CMakeLists.txt
+++ b/src/software/ui/SfM/control_points_registration/CMakeLists.txt
@@ -43,5 +43,5 @@ if(Qt5Widgets_FOUND)
   ${STLPLUS_LIBRARY})
 
   SET_PROPERTY(TARGET ${ProjectName} PROPERTY FOLDER OpenMVG/software/ui)
-  INSTALL(TARGETS ${ProjectName} DESTINATION bin/)
+  INSTALL(TARGETS ${ProjectName} DESTINATION ${CMAKE_INSTALL_BINDIR})
 endif(Qt5Widgets_FOUND)
