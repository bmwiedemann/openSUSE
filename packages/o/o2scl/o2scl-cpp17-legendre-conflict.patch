From 4f7ac90c3074d706a2440465928bf6c7bbdec36b Mon Sep 17 00:00:00 2001
From: "Andrew W. Steiner" <awsteiner@mykolab.com>
Date: Sat, 22 May 2021 21:34:10 -0700
Subject: [PATCH] Fixing test regressions.

---
diff --git a/src/inte/inte_qaws_gsl_ts.cpp b/src/inte/inte_qaws_gsl_ts.cpp
index 85b0600b7..53943575b 100644
--- a/src/inte/inte_qaws_gsl_ts.cpp
+++ b/src/inte/inte_qaws_gsl_ts.cpp
@@ -40,7 +40,9 @@ double legendre_gsl(double x, void *params) {
   return gsl_sf_legendre_Pl(deg,x);
 }
 
-double legendre(double x, int &deg) {
+// 5/22/21: renamed from legendre to legendrex because of compilation
+// errors, likely confusion with a boost function of the same name?
+double legendrex(double x, int &deg) {
   return gsl_sf_legendre_Pl(deg,x);
 }
 
@@ -68,7 +70,7 @@ int main(void) {
   size_t limit=512;
 	
   inte_qaws_gsl<funct> Q;
-  funct f=std::bind(legendre,std::placeholders::_1,deg);
+  funct f=std::bind(legendrex,std::placeholders::_1,deg);
 	
   double alpha=0.0, beta=0.0; 
   int mu=0, nu=0;
diff --git a/src/inte/inte_qng_gsl_ts.cpp b/src/inte/inte_qng_gsl_ts.cpp
index 4cb091508..15ffa6122 100644
--- a/src/inte/inte_qng_gsl_ts.cpp
+++ b/src/inte/inte_qng_gsl_ts.cpp
@@ -46,7 +46,9 @@ double legendre_gsl(double x, void *params) {
   return P*P;
 }
 
-double legendre(double x, int &deg) {
+// 5/22/21: renamed from legendre to legendrex because of compilation
+// errors, likely confusion with a boost function of the same name?
+double legendrex(double x, int &deg) {
   double P = gsl_sf_legendre_Pl(deg, x);
   return P*P;
 }
@@ -87,7 +89,7 @@ int main(void) {
     
     for(size_t i=0;i<7;i++) {
       
-      funct f=std::bind(legendre,std::placeholders::_1,n);
+      funct f=std::bind(legendrex,std::placeholders::_1,std::ref(n));
       
       Q.integ_err(f,-1.0,1.0,o2scl_res,o2scl_err);
     
