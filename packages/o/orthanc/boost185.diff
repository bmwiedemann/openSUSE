# HG changeset patch
# User Sebastien Jodogne <s.jodogne@gmail.com>
# Date 1715887975 -7200
# Node ID a7c88563c8cc18afdacc8e261e5d81e82301456f
# Parent  72dcf3a8d7d526e95c8f290801a0b675a0533590
fix build with boost 1.85.0

diff -r 72dcf3a8d7d5 -r a7c88563c8cc OrthancFramework/Sources/SystemToolbox.cpp
--- a/OrthancFramework/Sources/SystemToolbox.cpp	Thu May 16 15:31:31 2024 +0200
+++ b/OrthancFramework/Sources/SystemToolbox.cpp	Thu May 16 21:32:55 2024 +0200
@@ -774,7 +774,7 @@
 
   MimeType SystemToolbox::AutodetectMimeType(const std::string& path)
   {
-    std::string extension = boost::filesystem::extension(path);
+    std::string extension = boost::filesystem::path(path).extension().string();
     Toolbox::ToLowerCase(extension);
 
     // http://en.wikipedia.org/wiki/Mime_types
diff -r 72dcf3a8d7d5 -r a7c88563c8cc OrthancServer/Plugins/Engine/PluginsManager.cpp
--- a/OrthancServer/Plugins/Engine/PluginsManager.cpp	Thu May 16 15:31:31 2024 +0200
+++ b/OrthancServer/Plugins/Engine/PluginsManager.cpp	Thu May 16 21:32:55 2024 +0200
@@ -307,7 +307,7 @@
       }
       else
       {
-        std::string extension = boost::filesystem::extension(it->path());
+        std::string extension = it->path().extension().string();
         Toolbox::ToLowerCase(extension);
 
         if (extension == PLUGIN_EXTENSION)
diff -r 72dcf3a8d7d5 -r a7c88563c8cc OrthancServer/Plugins/Samples/ModalityWorklists/Plugin.cpp
--- a/OrthancServer/Plugins/Samples/ModalityWorklists/Plugin.cpp	Thu May 16 15:31:31 2024 +0200
+++ b/OrthancServer/Plugins/Samples/ModalityWorklists/Plugin.cpp	Thu May 16 21:32:55 2024 +0200
@@ -166,7 +166,7 @@
         if (type == fs::regular_file ||
             type == fs::reparse_file)   // cf. BitBucket issue #11
         {
-          std::string extension = fs::extension(it->path());
+          std::string extension = it->path().extension().string();
           std::transform(extension.begin(), extension.end(), extension.begin(), tolower);  // Convert to lowercase
 
           if (extension == ".wl")
diff -r 72dcf3a8d7d5 -r a7c88563c8cc OrthancServer/Sources/OrthancConfiguration.cpp
--- a/OrthancServer/Sources/OrthancConfiguration.cpp	Thu May 16 15:31:31 2024 +0200
+++ b/OrthancServer/Sources/OrthancConfiguration.cpp	Thu May 16 21:32:55 2024 +0200
@@ -114,7 +114,7 @@
     {
       if (!is_directory(it->status()))
       {
-        std::string extension = boost::filesystem::extension(it->path());
+        std::string extension = it->path().extension().string();
         Toolbox::ToLowerCase(extension);
 
         if (extension == ".json")

 
