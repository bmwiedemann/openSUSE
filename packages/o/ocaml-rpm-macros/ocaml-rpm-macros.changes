-------------------------------------------------------------------
Thu May 14 14:14:14 UTC 2020 - ohering@suse.de

- The filename for rpm *.attr files and the tag used within these
  files must match. Otherwise rpm will not execute the helper scripts.
  Use tag 'suseocaml', rename zocaml.attr to suseocaml.attr to
  avoid filename conflicts with rpm-build.rpm (bsc#1154874)
- Rename also ocamlfind to suseocamlfind
- Escape plain % chars

-------------------------------------------------------------------
Sun Apr 12 12:12:12 UTC 2020 - ohering@suse.de

- run OCaml rpm dependency generator only if both path and magic matches (rpm#1173)

-------------------------------------------------------------------
Sat Mar 21 12:34:56 UTC 2020 - ohering@suse.de

- Disable parallel build for OCaml 4.08, 4.09 and 4.10
  to get reproducible cma archives (issue#9307)

-------------------------------------------------------------------
Thu Feb 20 20:20:20 UTC 2020 - ohering@suse.de

- Add ocaml-ocaml.rpm.prov_req.attr.sh
  New script for rpm Provides/Requires, replacement for rpm
  built-in ocaml(NAME)=hash, which covers bytecode and interfaces
  Now it covers also native code via ocamlx(NAME)=HASH (bsc#1154874)
- Update the filelist generator
  Use awk to match directories in ocamls built-in ld.conf
  C stublibs in default locations do not need a ld.so.conf entry
  Remaining ld.so.conf files for stublibs go to the devel package
- Disable debug in ocamlfind() Provides/Requires generator
  Update META parser to handle multiline statements and ppx
- Provide a ocaml_standard_library macro
- Explicitly preserve debuginfo in .cmxs, already enforced by dune
- Install also COPYRIGHT.txt as license, needed for some JaneStreet pkgs

-------------------------------------------------------------------
Mon Nov 25 12:34:56 UTC 2019 - ohering@suse.de

- Install also LGPL as license, needed by ocaml-lablgtk2

-------------------------------------------------------------------
Fri Nov  1 12:34:56 UTC 2019 - ohering@suse.de

- Moved ocaml-findlib.rpm.prov_req.attr.sh from ocaml to provide
  ocamlfind() in ocaml itself
- Handle license separately because sed w truncates output
- Document individual file extensions
- Move cmxs and so files to devel packages because they are not
  used at runtime. Also, cmxs dependencies in main pkg are
  not covered by ocaml-find-requires.sh (bsc#1154874)
- Set VERSION unconditionally for each patch, sometimes dune picks it up
- Pass --for-release-of-packages to dune via dune_release_pkgs=
- Print potential BuildRequires during build
- Package sml for camlp5
- SLE_12 has still no license macro, package as doc instead
- Use _smp_mflags instead of nproc for parallel build

-------------------------------------------------------------------
Wed Oct  9 05:48:16 UTC 2019 - ohering@suse.de

- Package also COPYRIGHT, for labltk
- Package also Copyright, for dose3
- Package also *.cmo
- Package also *.so.owner
- Package also *.o
- Package also /etc/ld.so.conf.d
- Package also *.js

-------------------------------------------------------------------
Fri Oct  4 07:56:44 UTC 2019 - ohering@suse.de

- Use _rpmmacrodir
- Automatically package known license files in main pkg
- List unhandled files in ocaml_create_file_list macro
- Do not mark files as %config

-------------------------------------------------------------------
Mon Sep 30 14:15:16 UTC 2019 - ohering@suse.de

- Increase ulimit -s on ppc64 in dune macros
  Required for at least ocaml-camomile
- Show external-lib-deps also for dune runtest
- Provide a ocaml_create_file_list macro
- Optional extra args for dune commands
- Pass --verbose to dune commands
- Move prefix/man to datadir/man to workaround bug in dune (#2670)

-------------------------------------------------------------------
Mon Sep 30 12:34:56 UTC 2019 - ohering@suse.de

- moved ocaml-rpm-macros from ocaml.spec to separate pkg

