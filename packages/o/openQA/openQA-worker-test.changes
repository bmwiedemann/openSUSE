-------------------------------------------------------------------
Tue Sep 17 11:09:08 UTC 2019 - coolo@suse.com

- Update to version 4.6.1568387059.db88ff48d:
  * Add Storable dependency
  * Remove debugging
  * Create a deepcopy of the settings
  * Always sort keys to make behaviour reproducible
  * Demonstrate what's going wrong on staging yaml
  * Fix duplicate path name
  * Update YAML guide and schema to explain custom job template names
  * Publish API schema(s) along with other docs
  * Fix some issues in the doc markup reported by asciidoc
  * Always build docs and allow local generation
  * Fix warning caused by filename getting removed from reused form hashref in Mojo::UserAgent
  * Cleanup disabled code about 'Sereal'
  * Non-experimental YAML routes with explicit schema
  * Revert back to duplicating dependencies in dockerfile (#2315)
  * Extend the requires of openQA-devel and make them easier to review (#2313)
  * Implement optional defaults.settings key in YAML
  * Fix container image to use repository paths (#2310)
  * Improve test coverage for more background jobs
  * Increase coverage by allowing Devel::Cover to collect stats for background jobs
  * Fix printing usage when invoking openqa-clone-job --help
  * Remove codecov hack that was only added to increase coverage percentage, but does not actually test anything useful
  * Scenarios can have different settings
  * docker: Use devel package instead of spelling out duplicate dependencies (#2308)
  * Cut the test result directory shorter when its length is more than 255
  * Support branch url on openqa-clone-custom-git-refspec
  * docs: Hint to 'openQA-devel' for pulling in dependencies
  * Delete unused screenshots in separate loop
  * docs: Render code correctly (#2306)
  * Allow CodeMirror to render off screen
  * Show context for REST-API errors to make debugging a little bit easier
  * Fix artefact upload errors to show the message instead of the hash address
  * Reduce coverage requirement a bit until we can make Devel::Cover include subprocesses in stats
  * Don't use 3rd set of names for passing dependencies to JS
  * Use capitalized names for module-scoped variables
  * Consider directly chained deps in several places
  * Support _START_DIRECTLY_AFTER_JOBS
  * Add dependency type for START_DIRECTLY_AFTER_TEST
  * Failed isotovideo status checks are fairly harmless, but a log message can be useful for debugging
  * Since we now expect there to be more subprocesses, there is no reason to log them as unexpected anymore
  * Do not try to reconnect the WebSocket connection in subprocesses
  * Make annoying log message debug level instead of info for now
  * Test API and upload errors
  * Test asset uploads too
  * Move artefact upload into a webui connection method so it can be easily mocked for testing
  * Add more worker upload tests
  * Fix fake WebSocket transaction to correctly defer callback execution
  * Improve test coverage of the worker job life cycle
  * Move all direct uses of Mojo::UserAgent from OpenQA::Worker::Job to client modules
  * Add new worker tests and an isotovideo client module that can be mocked easily
  * Perform isotovideo status checks non-blocking too
  * Try to defer all callbacks correctly to the next reactor tick
  * Handle exceptions in uploads
  * Make image uploads non-blocking too
  * Callbacks cannot be optional in an async application
  * Update mock worker tests to be able to deal with multiple processes handling uploads
  * Handle asset and logfile uploads in a subprocess
  * Split up upload handling into more manageable parts
  * Reuse t/test_postgresql in container test as well
  * Harmonize dependencies in cpanfile+openQA.spec
  * spec: Specify more dependencies needed for local development
  * spec: Fix test dependencies after os-autoinst removed dependencies
  * Move codemirror javascript file to javascript label (#2297)
  * spec: Fix 'devel' package (for real) with proper macro definition
  * spec: Fix error about python shebang
  * Fix 'devel' package
  * docs: Update openSUSE repos using $releasever, priorities, better names
  * spec: Add 'devel' package
  * worker job: Add log of second virtio console to upload list
  * Fix accidentally removed dependency
  * Add missing apparmor permission (#2285)
  * Remove shellcheck disable
  * Modernize bash tests
  * Fix test that did nothing
  * Fix argument handling of a function and turn background job into a real plugin
  * Remove print from test
  * Avoid using HAVING on ScreenshotLinks
  * No longer delete job modules one by one
  * Remove support for old migration
  * Use IPC::Run instead of IPC::Run::Simple
  * More code style fixes
  * Tidy developer mode test
  * Test assert_screen args with array of needle tags
  * Code style changes and unit test for current_api_function handling
  * Increase lock timeouts a bit because some jobs might just need a little more time and the risk or locks not getting cleared at the end is very low (#2280)
  * Show needle tags for assert_screen/check_screen
  * Validate tag input field in needleeditor
  * Render a diff of the job group YAML in preview/ save
  * Use purple for blocked jobs
  * Distinguish scheduled and  blocked jobs on test result overview
  * Delete vim footer in files that still have it
  * Makefile: Allow again to select single test cases with PROVE_ARGS
  * Preserve QEMU PID file on pool dir cleanup if QEMU still running
  * Improve tests for triggering pool directory cleanup
  * Test support for non-ASCII chars in needle JSON only in description
  * Tweaks according to code review
  * Handle newline characters in form parameters correctly
  * Use single gru job
  * Always include the group property editor
  * Do not delete assets based on empty size
  * Remove useless quoting
  * Check finished job cout in async test
  * Increase timeout in async test
  * Remove unconditional sleeps from async test
  * Add Gru Test with Mock Api Server
  * Split Folders and Gru controllers
  * Add Rsync Queue UI
  * Use Gru for rsync
  * ObsRsync handle requests asynchronously
  * job cancel: Explicitly return a number to avoid warning
  * Fix warning about undefined $testresdir
  * Fix flaky test t/api/11-bugs.t
  * scheduler: Fix warnings about undefined variables
  * Fix rendering of the openqa.cmd
  * openqa-bootstrap: Fix logic of git clone
  * Add machine filter in 'Test result overview'
  * docs: Mention most simple installation instructions and "clone-job" first
  * docs: Add documentation for immediate bootstrap+clone
  * docs: Fix internal link
  * branding: Prevent undefined flavor in external_reporting.html.ep
  * apparmor: Allow virtio_console based on named PIPE
  * spec: Split out all dependencies properly per sub-package
  * apparmor: Allow loading of client.conf in usual home of geekotest
  * apparmor: Allow loading override templates in /etc/openqa/templates/
  * branding: Prevent warnings about undefined $distri in external_reporting.html.ep
  * Test worker behavior if _upload_log_file fails
  * Improve needle editor test
  * Change iso scheduling behavior to not obsolete older jobs anymore
  * Improve calculating preferred machine
  * Fix error when saving needle JSON with non-ASCII characters
  * Modify workaround property to support adding reason
  * Fix 30-test_parser.t warnings
  * Remove exported functions from OpenQA::File and stop using private methods as part of the public API
  * docs: Fix explanation for masquerading which is needed on all involved zones
  * docs: Simplify firewalld commands by using the runtime variants
  * docs: Make the current "firewalld" approach more prominent than old SuSEfirewall2
  * Fix PROVE_ARGS in spec file
  * docs: Remove obsolete section about "wicked < 0.6.23"
  * load_templates: fix --clean and reading perl templates
  * Do not handle arguments in reverse and move OpenQA::Files class into a proper package
  * Make worker retry-delay configurable
  * Test retry behavior of worker
  * Extend retry delay of worker to 60 seconds if web UI busy
  * Adapt codecov target to current coverage of 85%
  * Allow * placeholders in product names
  * docs: Fix marking for 2nd level list about "wicked pros"
  * Prevent over-escaping of bug titles in test result overview
  * Adjust web socket server test
  * Avoid 'return;' in web socket code
  * Fix sending web socket message when job not exists
  * Improve transaction handling in web socket server
  * AMQP: allow no message prefix
  * Fix '--no-cleanup' on worker start regression
  * Remove OpenQA::Schema::Result::Jobs::set_scheduling_worker
  * Replace Text::Markdown and HTML::Restrict with CommonMark for much better comment rendering speed and security
  * Adding a new parameter to support not schedule parent test suite
  * Timeout for wait_for_ajax
  * Let prove handle @INC for us
  * Expose saving and hiding of the legacy editor in the UI
  * Scrub dangerous HTML from comments
  * Abstract out markdown handling into a new class
  * worker: Consider ws disconnects as uncritical during job execution
  * Fix worker crash when sending job ID
  * YAML: don't merge scenarios with multiple machines with defaults
  * Add dependency on CommonMark, which will soon replace Text::Markdown for a 1000% performance increase (#2228)
  * Ignore cpu_modelname in worker test
  * Let worker pass current job ID on re-registration
  * Allow worker to pass its current job on registration
  * Improve test for checking job status and output
  * Improve error message when rejecting status update
  * Add YAML support to {dump,load}_templates
  * Add systemd timer to trigger daily audit event cleanup
  * Delete old audit events according to configured storage duration
  * AMQP: don't encode message body to JSON before publishing
  * Handle reusing existing connection in devel fullstack test
  * Improve documentation about running test of openQA itself
  * Timeout for wait_for_developer_console_contains_log_message
  * Override default exception handler in extra daemons
  * Fix default route of live handler to prevent template errors
  * Docs for the job group editor and YAML REST
  * AMQP: allow passing headers to publish_amqp
  * Add note about openQA's CLI interface
  * openqa-bootstrap: Fix lookup of configure-web-proxy
  * Improve rendering summary in test result overview
  * t/api/03-auth.t: don't actually wipe asset files from disk
  * Mojo::Pg 4.14 requires the "delete $dbh->{private_...}" feature from DBI 1.632
  * Log errors when reading worker config
  * Add type/additionalProperties to products spec
  * spec: Fix SLE12 build with patched out python subpackage
  * Start a documentation section on how to build openQA plugins
  * templates: Update references to documentation in help texts
  * docs: Update references to target versions in our issue tracker
  * Document adding new dependencies
  * Improve doc section about starting webserver from Git
  * Move testing with production data to database section
  * Improve documentation about OPENQA_BASEDIR
  * Replay cmds in devel mode console only if connected to os-autoinst
  * Make sure all four levels of API access have named routes for plugins and tests
  * Add undef to return
  * Prevent cleaning pool directory in worker availability check
  * Add helper script 'openqa-label-all'
  * Set log for failing to stop cmd srv to info level
  * Do not fail fullstack test when connection closed
  * Split api request to own route
  * Extend unit tests for OpenQA::Worker
  * Do not stop current job twice when stopping during setup
  * Remove unused function from worker
  * Remove check for cpu_opmode from worker test
  * Stop job directly with reason 'api-failure' on API failures
  * Give the API authentication routes plugins will use names and test them
  * Log sent commands in the developer console as well
  * Replay commands send though developer console while offline
  * Add put method with disabled test
  * Fix test doing an equality check on an exception instead of a regular expression comparison
  * Fix html
  * Adapt codecov target to current coverage
  * Small tweaks
  * Default to HTTPS instead of HTTP with openqa-client
  * Add Operator menu item
  * Remove duplicate use
  * Small CR adjustment
  * Make routes restricted
  * Add ObsRsync plugin
  * Expand Machine and Medium Type settings when creating job with 'jobs post' When users created jobs using 'client jobs post', the jobs settings did not expand Machine and Medium Type settings. This PR is used to support to expand settings from Machine and Medium Type when creating jobs with 'jobs post'.
  * .travis.yml: Save travis CI some testing time
  * Add Test::More based error handler to SeleniumTest

-------------------------------------------------------------------
Thu Aug 22 17:14:16 UTC 2019 - coolo@suse.com

- Update to version 4.6.1566476274.5f4e21fe:
  * Render a diff of the job group YAML in preview/ save
  * Use purple for blocked jobs
  * Distinguish scheduled and  blocked jobs on test result overview
  * Delete vim footer in files that still have it
  * Makefile: Allow again to select single test cases with PROVE_ARGS
  * Preserve QEMU PID file on pool dir cleanup if QEMU still running
  * Improve tests for triggering pool directory cleanup
  * Test support for non-ASCII chars in needle JSON only in description
  * Handle newline characters in form parameters correctly
  * Always include the group property editor
  * Do not delete assets based on empty size
  * job cancel: Explicitly return a number to avoid warning
  * Fix warning about undefined $testresdir
  * Fix flaky test t/api/11-bugs.t
  * scheduler: Fix warnings about undefined variables
  * Fix rendering of the openqa.cmd
  * openqa-bootstrap: Fix logic of git clone
  * Add machine filter in 'Test result overview'
  * docs: Mention most simple installation instructions and "clone-job" first
  * docs: Add documentation for immediate bootstrap+clone
  * docs: Fix internal link
  * branding: Prevent undefined flavor in external_reporting.html.ep
  * apparmor: Allow virtio_console based on named PIPE
  * apparmor: Allow loading of client.conf in usual home of geekotest
  * apparmor: Allow loading override templates in /etc/openqa/templates/
  * branding: Prevent warnings about undefined $distri in external_reporting.html.ep
  * Test worker behavior if _upload_log_file fails
  * Improve needle editor test
  * Improve calculating preferred machine
  * Fix error when saving needle JSON with non-ASCII characters
  * Modify workaround property to support adding reason
  * Fix 30-test_parser.t warnings
  * Remove exported functions from OpenQA::File and stop using private methods as part of the public API
  * docs: Fix explanation for masquerading which is needed on all involved zones
  * docs: Simplify firewalld commands by using the runtime variants
  * docs: Make the current "firewalld" approach more prominent than old SuSEfirewall2
  * Fix PROVE_ARGS in spec file
  * docs: Remove obsolete section about "wicked < 0.6.23"
  * load_templates: fix --clean and reading perl templates
  * Do not handle arguments in reverse and move OpenQA::Files class into a proper package
  * Make worker retry-delay configurable
  * Test retry behavior of worker
  * Extend retry delay of worker to 60 seconds if web UI busy
  * Adapt codecov target to current coverage of 85%
  * Allow * placeholders in product names
  * docs: Fix marking for 2nd level list about "wicked pros"
  * Prevent over-escaping of bug titles in test result overview
  * Adjust web socket server test
  * Avoid 'return;' in web socket code
  * Fix sending web socket message when job not exists
  * Improve transaction handling in web socket server
  * AMQP: allow no message prefix
  * Fix '--no-cleanup' on worker start regression
  * Remove OpenQA::Schema::Result::Jobs::set_scheduling_worker
  * Replace Text::Markdown and HTML::Restrict with CommonMark for much better comment rendering speed and security
  * Adding a new parameter to support not schedule parent test suite
  * Timeout for wait_for_ajax
  * Let prove handle @INC for us
  * Expose saving and hiding of the legacy editor in the UI
  * Scrub dangerous HTML from comments
  * Abstract out markdown handling into a new class
  * worker: Consider ws disconnects as uncritical during job execution
  * Fix worker crash when sending job ID
  * YAML: don't merge scenarios with multiple machines with defaults
  * Add dependency on CommonMark, which will soon replace Text::Markdown for a 1000% performance increase (#2228)
  * Ignore cpu_modelname in worker test
  * Let worker pass current job ID on re-registration
  * Allow worker to pass its current job on registration
  * Improve test for checking job status and output
  * Improve error message when rejecting status update
  * Add YAML support to {dump,load}_templates
  * Add systemd timer to trigger daily audit event cleanup
  * Delete old audit events according to configured storage duration
  * AMQP: don't encode message body to JSON before publishing
  * Handle reusing existing connection in devel fullstack test
  * Improve documentation about running test of openQA itself
  * Timeout for wait_for_developer_console_contains_log_message
  * Override default exception handler in extra daemons
  * Fix default route of live handler to prevent template errors
  * Docs for the job group editor and YAML REST
  * AMQP: allow passing headers to publish_amqp
  * Add note about openQA's CLI interface
  * openqa-bootstrap: Fix lookup of configure-web-proxy
  * Improve rendering summary in test result overview
  * t/api/03-auth.t: don't actually wipe asset files from disk
  * Mojo::Pg 4.14 requires the "delete $dbh->{private_...}" feature from DBI 1.632
  * Log errors when reading worker config
  * Add type/additionalProperties to products spec
  * spec: Fix SLE12 build with patched out python subpackage
  * Start a documentation section on how to build openQA plugins
  * templates: Update references to documentation in help texts
  * docs: Update references to target versions in our issue tracker
  * Document adding new dependencies
  * Improve doc section about starting webserver from Git
  * Move testing with production data to database section
  * Improve documentation about OPENQA_BASEDIR
  * Replay cmds in devel mode console only if connected to os-autoinst
  * Make sure all four levels of API access have named routes for plugins and tests
  * Add undef to return
  * Prevent cleaning pool directory in worker availability check
  * Add helper script 'openqa-label-all'
  * Set log for failing to stop cmd srv to info level
  * Do not fail fullstack test when connection closed
  * Split api request to own route
  * Extend unit tests for OpenQA::Worker
  * Do not stop current job twice when stopping during setup
  * Remove unused function from worker
  * Remove check for cpu_opmode from worker test
  * Stop job directly with reason 'api-failure' on API failures
  * Give the API authentication routes plugins will use names and test them
  * Log sent commands in the developer console as well
  * Replay commands send though developer console while offline
  * Add put method with disabled test
  * Fix test doing an equality check on an exception instead of a regular expression comparison
  * Fix html
  * Adapt codecov target to current coverage
  * Small tweaks
  * Default to HTTPS instead of HTTP with openqa-client
  * Add Operator menu item
  * Remove duplicate use
  * Small CR adjustment
  * Make routes restricted
  * Add ObsRsync plugin
  * Expand Machine and Medium Type settings when creating job with 'jobs post' When users created jobs using 'client jobs post', the jobs settings did not expand Machine and Medium Type settings. This PR is used to support to expand settings from Machine and Medium Type when creating jobs with 'jobs post'.
  * .travis.yml: Save travis CI some testing time
  * Add Test::More based error handler to SeleniumTest

