Index: opal-3.10.5/opal.m4
===================================================================
--- opal-3.10.5-orig/opal.m4	2012-04-26 06:56:25.000000000 +0200
+++ opal-3.10.5/opal.m4	2012-05-18 23:31:36.454174440 +0200
@@ -855,9 +855,11 @@
           AC_CHECK_LIB(gsm, gsm_create, opal_gsm=yes)
           if test "x$opal_gsm" = "xyes"; then
             AC_MSG_CHECKING(if system GSM library has WAV49)
+            old_CFLAGS=$CFLAGS
             old_LIBS=$LIBS
             opal_gsm=no
 
+            CFLAGS="$CFLAGS -I${prefix}/include/gsm"
             LIBS="$LIBS -lgsm"
             AC_RUN_IFELSE(
             [AC_LANG_PROGRAM([[
@@ -868,6 +870,7 @@
             return (gsm_option(handle, GSM_OPT_WAV49, &option) == -1) ? 1 : 0;
  ]])], opal_gsm=yes) 
             LIBS=$old_LIBS
+            CFLAGS=$old_CFLAGS
             AC_MSG_RESULT($opal_gsm)
 
             if test "x${opal_gsm}" = "xyes" ; then

Index: opal-3.10.5/plugins/configure
===================================================================
--- opal-3.10.5-orig/plugins/configure	2012-04-26 06:56:03.000000000 +0200
+++ opal-3.10.5/plugins/configure	2012-05-18 23:43:55.375857903 +0200
@@ -6963,9 +6963,11 @@
           if test "x$opal_gsm" = "xyes"; then
             { $as_echo "$as_me:${as_lineno-$LINENO}: checking if system GSM library has WAV49" >&5
 $as_echo_n "checking if system GSM library has WAV49... " >&6; }
+            old_CFLAGS=$CFLAGS
             old_LIBS=$LIBS
             opal_gsm=no
 
+            CFLAGS="$CFLAGS -I${prefix}/include/gsm" 
             LIBS="$LIBS -lgsm"
             if test "$cross_compiling" = yes; then :
   { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
@@ -6998,6 +7000,7 @@
 fi
 
             LIBS=$old_LIBS
+            CFLAGS=$old_CFLAGS
             { $as_echo "$as_me:${as_lineno-$LINENO}: result: $opal_gsm" >&5
 $as_echo "$opal_gsm" >&6; }
 
@@ -7070,9 +7073,11 @@
           if test "x$opal_gsm" = "xyes"; then
             { $as_echo "$as_me:${as_lineno-$LINENO}: checking if system GSM library has WAV49" >&5
 $as_echo_n "checking if system GSM library has WAV49... " >&6; }
+            old_CFLAGS=$CFLAGS
             old_LIBS=$LIBS
             opal_gsm=no
 
+            CFLAGS="$CFLAGS -I${prefix}/include/gsm"
             LIBS="$LIBS -lgsm"
             if test "$cross_compiling" = yes; then :
   { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5

