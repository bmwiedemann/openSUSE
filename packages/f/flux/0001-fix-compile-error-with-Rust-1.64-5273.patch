From 1ab653ce4b5e10ecd7867498074206c348d15900 Mon Sep 17 00:00:00 2001
From: Yureka <yuka@yuka.dev>
Date: Wed, 12 Oct 2022 17:15:59 +0200
Subject: [PATCH] fix: compile error with Rust 1.64 (#5273)

As of rustc 1.64, Box::from_raw is #[must_use].
---
 libflux/flux/src/cffi.rs            |   2 +-
 libflux/go/libflux/buildinfo.gen.go | Bin 98986 -> 98986 bytes
 2 files changed, 1 insertion(+), 1 deletion(-)

diff --git a/libflux/flux/src/cffi.rs b/libflux/flux/src/cffi.rs
index f3865b8..37e8d3b 100644
--- a/libflux/flux/src/cffi.rs
+++ b/libflux/flux/src/cffi.rs
@@ -97,7 +97,7 @@ pub extern "C" fn flux_free_error(_err: Option<Box<ErrorHandle>>) {}
 /// function is called twice on the same raw pointer.
 #[no_mangle]
 pub unsafe extern "C" fn flux_free_bytes(cstr: *mut c_char) {
-    Box::from_raw(cstr);
+    drop(Box::from_raw(cstr));
 }
 
 /// A buffer of flux source.
-- 
2.37.3

