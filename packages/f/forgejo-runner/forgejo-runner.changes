-------------------------------------------------------------------
Mon Oct 20 18:16:02 UTC 2025 - Richard Rahl <rrahl0@opensuse.org>

- update to version 11.2.0:
  * feat: allow --memory in workflow container options
  * feat: disambiguate cloud emoji
  * feat: improve readability of error messages from ParseRawOn
  * fix: use automatic IP detection instead of cache proxy host config value
    for internal cache server
  * fix: prevent premature token revocation in reusable workflows
  * fix: don't prepend server URL with https:// if it's an empty string
  * fix: allow mapping into env variable INPUT_N from ${{ inputs.n }}
  * fix: don't panic on cacheproxy startup failure
  * fix: log error for why cache couldn't be started
  * fix: remove LXC backend leftovers when the job completes
  * fix: make the creation of LXC templates atomic so they cannot be
    interrupted while building

-------------------------------------------------------------------
Tue Oct  7 11:54:22 UTC 2025 - Richard Rahl <rrahl0@opensuse.org>

- update to version 11.1.2:
  * feat: support evaluating workflow-level concurrency blocks in jobparser
  * fix(security): a multiline secret may be found in a single log entry
  * fix: improve logging to diagnose mystery job terminations
  * fix: modifying a cache secret does not invalidate cached entries
  * fix: allow GC & cache operations to operate concurrently
  * fix: do not attempt to run the LXC stop script with self-hosted
  * fix: event.pull_request.action == closed can use the cache of the base
    repository
  * fix: Correctly override the value of Forgejo-Cache-Host when
    ACTIONS_CACHE_URL is overridden
  * fix: a composite action must not change the result of the calling step
    before it completes

-------------------------------------------------------------------
Sat Sep 20 14:56:00 UTC 2025 - Richard Rahl <rrahl0@opensuse.org>

- update to version 11.1.1:
  * fix: outputs are only set when the job is successful
  * document that DOCKER_HOST should be used instead of
    --container-daemon-socket
- update to version 11.1.0:
  * feat: validate --directory alternative to --repository to not clone
  * feat: the forgejo context is equivalent to the github context
  * fix: schema validation must accept aliases and merges
  * fix: forgejo-runner validate exit with error when validation fails
  * fix: do not save .runner unless it is modified
  * fix: remove LXC working directory when it completes
  * fix: send job outputs & job result to Forgejo in sync with each other
  * fix: if the Forgejo instance failed a job, cancel it
  * fix: enforce job..timeout-minutes
  * fix: use a fixed runner name for old (<= v1.20) Forgejo instances
  * fix: docker-compose example: allow the runner to keep its labels

-------------------------------------------------------------------
Wed Sep 17 09:49:16 UTC 2025 - Richard Rahl <rrahl0@opensuse.org>

- update to version 11.0.0:
  * license: change from MIT to GPL-3.0-or-later
  * fix: shutdown the runner when the cache fails with a non recoverable error
  * fix: also cascade if run-*-test is set when the PR is open
  * fix: graceful shutdown of tasks being interrupted by signal
  * fix: lxc-systemd example: export INPUTS_SERIAL
  * fix: allow inputs context in action defaults
  * fix: an expression in with: for a reusable workflow call can use env
- update to version 10.0.1:
  * fix: pull_request_target events can share the cache of the repository
- update to version 10.0.0:
  * fix(security): prevent on: pull_request actions from mutating caches of
    other workflow events
  * fix(security): ensure unique names for container images created by actions

-------------------------------------------------------------------
Fri Aug 29 12:19:16 UTC 2025 - Richard Rahl <rrahl0@opensuse.org>

- update to version 9.1.1:
  * fix: an error from a SKIPPED job does not transform it into a FAILURE
  * fix: artifact cache DB not using indexes for searching
  * ix: RunsOn in jobparser is not used by the runner but it is used by Forgejo
  * chore: fix 'false positive' data race detection in Id/Number default init

-------------------------------------------------------------------
Sun Aug 17 11:21:02 UTC 2025 - Richard Rahl <rrahl0@opensuse.org>

- update to version 9.1.0:
  * feat: support actions with 'using: node24'
  * feat: fail when using an invalid label during non interactive registration
  * feat: added support for dereferenced map properties
  * feat: support evaluation of concurrency clauses in runner
  * feat: log parsed commands and step summary
  * feat: added info log when container image platform mismatched
  * feat: wait for services to be healthy before starting a job
  * fix: report the job as failed when the [runner].timeout expires
  * fix: data race in 'runs-on' expressions causes incorrect job labels during
    execution
  * fix: race condition in matrix job result state may result in failed jobs
    being marked as successful
  * fix: ensure unique container names for reusable workflows
  * fix: data race condition causing incorrect shell on a task step if it
    referenced a matrix variable
  * fix: use a unique random name to derive network and volumes for a job
  * fix: the configuration must not be used as temporary storage
  * fix: container removal is the runner responsibility
  * fix: update reusable workflow input handling
  * fix(security): multline secrets trivially transformed are redacted
  * fix: prevent unintended input replacement in reusable workflows with
    workflow_dispatch when using workflow_call
  * fix: composite action input pollution
  * fix: prevent space prefix/suffix in runner labels
  * fix: valueMasker concurrent map write
  * fix: short sha has at least four digits

-------------------------------------------------------------------
Mon Aug 11 11:51:33 UTC 2025 - Richard Rahl <rrahl0@opensuse.org>

- update to version 9.0.3:
  * feat: --health-* options are allowed in job.<id>.services.<id>.options
  * fix: log the URL of the action when it fails schema validation
  * fix: lingering services/volumes/networks after jobs if cleanup takes >1min
- update to version 9.0.2:
  * PR: feat: use cache-{from,to}: type=gha in the docker/build-push-action example
  * PR: feat: add an LXC based example of docker/build-push-action usage
  * PR: fix: vars context is allowed in default values of action inputs

-------------------------------------------------------------------
Thu Jul 31 17:34:08 UTC 2025 - Richard Rahl <rrahl0@opensuse.org>

- update to version 9.0.1:
  * chore: to allow the runner to be imported, v9 needs to be in the go module
- update to version 9.0.0:
  * feat!: remove support for using an artifact server via CLI
  * feat: the new forgejo-runner validate command
  * fix: allow expressions in action descriptions and incomplete action inputs
  * fix: the vars context is allowed in an action step env
  * fix: allow expressions in step and job uses:

-------------------------------------------------------------------
Sun Jul 27 21:36:22 UTC 2025 - rrahl0@opensuse.org

- Update to version 8.0.1:
  * fix: tolerate strings for fail-fast, max-parallel, timeout-minutes,
    cancel-timeout-minutes

-------------------------------------------------------------------
Sat Jul 26 16:14:33 UTC 2025 - rrahl0@opensuse.org

- Update to version 8.0.0:
  * Breaking change: workflows files go through a schema validation and will
    not run if they do not pass
  * Breaking change: in the absence of a label or a label, default to
    docker://node:22-bookworm instead of docker://node:20-bullseye or host
  * Breaking change: bash fallback to sh if it is not available
  * Breaking change: sanitize network aliases to be valid DNS names
  * secrets that contain multiple lines are masked from the output
  * sum256 the container name so derivations do not overflow

-------------------------------------------------------------------
Fri Jul 11 13:30:51 UTC 2025 - Richard Rahl <rrahl0@opensuse.org>

- Update to version 7.0.0:
  * Update module code.forgejo.org/forgejo/act to v1.29.0
  * chore(docs): update v7.0.0 release notes
  * chore: remove gitea from variable names etc. with no functional change
  * fix!: replace CLI --gitea-instance with --forgejo-instance
  * chore: remove unused code and comments including gitea
  * chore: update LICENSE year

-------------------------------------------------------------------
Mon Jun 30 16:59:32 UTC 2025 - Richard Rahl <rrahl0@opensuse.org>

- Update to version 6.4.0:
  * chore(docs): update release notes to 6.4.0
  * fix: unify data.forgejo.org/forgejo/forgejo-build-publish
  * chore: fix typos and add type checking to port/addr args
  * Remove unused header
  * chore(renovate): drop explicit config in favor of preset
  * chore(renovate): enable indirect gomod deps
  * fix: if insecure == true, get proxy too
  * fix: use v11 for the docker-compose example
  * update dependencies
- remove patch fix-CVE-2025-22869.patch, as upstream updated the dependencies

-------------------------------------------------------------------
Wed Mar 26 21:40:10 UTC 2025 - rrahl0@opensuse.org

- Update to version 6.3.1:
  * Fixed an issue which caused data races and timeouts in certain cases, which
    would cause cache storing and retrieval to fail.


-------------------------------------------------------------------
Sat Mar 22 12:52:50 UTC 2025 - rrahl0@opensuse.org

- Update to version 6.3.0:
  * Caches are now correctly scoped to repositories. Require authentication for
    cache requests, and set up cache proxy to provide authentication
    transparently and automatically.

-------------------------------------------------------------------
Wed Mar 12 13:14:02 UTC 2025 - Richard Rahl <rrahl0@opensuse.org>

- add patch fix-CVE-2025-22869.patch, fixes bsc#1239488 bsc#1234574

-------------------------------------------------------------------
Mon Mar 10 23:14:27 UTC 2025 - Marcus Rueckert <mrueckert@suse.de>

- also own the runners file

-------------------------------------------------------------------
Mon Mar 10 21:30:45 UTC 2025 - Marcus Rueckert <mrueckert@suse.de>

- import config handling from the gitea-action-runner package
  the config can contain secrets and we should probably protect
  them with proper default permissions

-------------------------------------------------------------------
Mon Mar 10 16:55:11 UTC 2025 - Marcus Rueckert <mrueckert@suse.de>

- not sure why this was installed as an user service

-------------------------------------------------------------------
Sat Feb 01 00:22:52 UTC 2025 - rrahl0@opensuse.org

- Update to version 6.2.2:
  * LXC systemd service unit example script learned how to upgrade.
- update to version 6.2.1:
  * LXC templates are updated if needed.

-------------------------------------------------------------------
Thu Jan 23 15:36:19 UTC 2025 - Richard Rahl <rrahl0@opensuse.org>

- update to 6.2.0:
  * The container.options allows --hostname.

-------------------------------------------------------------------
Wed Jan 22 13:49:49 UTC 2025 - rrahl0@opensuse.org

- Update to version 6.1.0:
  * chore(release): migrate to invisible.forgejo.org (#444)
  * Update module google.golang.org/protobuf to v1.36.3 (#440)
  * Update actions/setup-forgejo action to v2.0.6
  * fix: upgrade forgejo-build-publish/build@v5.3.1
  * fix: use data.forgejo.org/oci
  * New "one shot" type of execution by adding a new command called one-job. (#423)
  * fix: example uses code.forgejo.org/oci
  * chore(docs): 6.1.0 release notes (#428)
  * expose "ForceRebuild" as a config option

-------------------------------------------------------------------
Sat Jan 18 16:39:13 UTC 2025 - Richard Rahl <rrahl0@opensuse.org>

- update to 6.0.1:
  * Fixes a regression that was introduced in version 6.0.0 by which the
    [container].options config file setting was ignored.
- update to 6.0.0:
  * Security: the container options a job is allowed to specify are limited to
    a predefined allow list.

-------------------------------------------------------------------
Wed Dec 18 00:03:40 UTC 2024 - rrahl0@opensuse.org

- Update to version 5.0.4:
  * feat: use FORGEJO_TOKEN as runtime token

-------------------------------------------------------------------
Wed Nov 27 10:20:13 UTC 2024 - Richard Rahl <rrahl0@opensuse.org>

- update to 5.0.3:
  * fix: it wasn't possible to mount the docker socket in each container

-------------------------------------------------------------------
Thu Nov 21 15:58:43 UTC 2024 - rrahl0@opensuse.org

- Update to version 5.0.2:
  * Fixes a regression that was introduced in version 5.0.0 by which 
    skipped jobs were marked as failed instead

-------------------------------------------------------------------
Wed Nov 20 21:40:40 UTC 2024 - rrahl0@opensuse.org

- Update to version 5.0.1:
  * the /opt/hostedtoolcache directory is now unique to each job instead of
    being shared to avoid a risk of corruption
- move to golang(API) = 1.23

-------------------------------------------------------------------
Sun Nov 17 00:20:51 UTC 2024 - rrahl0@opensuse.org

- Update to version 5.0.0:
  * fix: Update forgejo/forgejo-build-publish action to v5
  * fix: make container.docker_host default to - (part two)
  * Update golang packages to v1.23
  * tests: it make take time for Forgejo to come up
  * Update code.forgejo.org/oci/alpine Docker tag to v3.20
  * ci: use `go-version-file`
  * Update actions/setup-go action to v5
  * ci: don't run on renovate branches
  * ci: Include version number in windows runner build
  * fix: dockerfile casing typo
  * Update module golang.org/x/time to v0.8.0
  * Update module golang.org/x/term to v0.26.0
  * Add support for windows build on GitHub (#312)
  * Update dependency go to v1.23.3
  * Version bump and add release notes
  * Cherry-pick gitea act_runner #543
  * Add simple test
  * Add configurable logging level for jobs

-------------------------------------------------------------------
Fri Nov 01 13:30:01 UTC 2024 - rrahl0@opensuse.org

- Update to version 4.0.1:
  * Do not panic when the number of arguments of a function evaluated
    in an expression is incorect.

-------------------------------------------------------------------
Tue Oct 29 13:01:31 UTC 2024 - rrahl0@opensuse.org

- Update to version 4.0.0:
  * fix: make container.docker_host default to -
  * Update module code.forgejo.org/forgejo/act to v1.21.4
  * chore: add issue templates
  * Update module golang.org/x/time to v0.7.0
  * Update module google.golang.org/protobuf to v1.35.1
  * Update module golang.org/x/term to v0.25.0
  * Update dependency go to v1.23.2
  * Update module connectrpc.com/connect to v1.17.0
  * Fix comments in systemd unit service file (#274)
  * Add example systemd service file (#273)
  * Update module code.forgejo.org/forgejo/act to v1.21.3
  * chore: update the 3.5.2 release notes
  * chore: add test for unexpected YAML type in top level env
  * Update dependency go to v1.23.1
  * Update module golang.org/x/term to v0.24.0
  * Fix typo
  * chore(renovate): disable replaced `nektos/act`
  * chore: update the DOER & TOKEN of the build release workflow

-------------------------------------------------------------------
Sun Aug 25 00:30:50 UTC 2024 - rrahl0@opensuse.org

- Update to version 3.5.1:
  * Fix CVE-2024-24557
  * update vendored dependencies

-------------------------------------------------------------------
Mon Aug  5 07:59:52 UTC 2024 - Johannes Kastl <opensuse_buildservice@ojkastl.de>

- new package forgejo-runner: a daemon that connects to a Forgejo
  instance and runs jobs for continous integration
