-------------------------------------------------------------------
Wed May 31 13:15:32 UTC 2023 - Andreas Schwab <schwab@suse.de>

- Don't compile shared objects with -fPIE and use -pie only for executables
- Reenable LTO on ARM

-------------------------------------------------------------------
Mon Apr 24 17:53:55 UTC 2023 - Bjørn Lie <bjorn.lie@gmail.com>

- Add Update_h264_to_use_new_FFMPEG_API.patch: Update h264 to use
  new FFMPEG API.

-------------------------------------------------------------------
Thu Feb 16 15:05:54 UTC 2023 - Hans-Peter Jansen <hpj@urpla.net>

- Ugraded to freerdp 2.10.0
  * Fix android build scripts, use CMake from SDK
  * Fix connection negotiation with mstsc/msrdc #8426
  * [ntlm]: use rfc5929 binding hash algorithm #8430
  * [channels,printer] Fixed reference counting #8433
  * Fix uwac pixman #8439
  * Fix Rdp security #8457
  * [client,x11] Detect key autorepeat #8522
  * [build] add channel path to RPATH #8551
  * Fix build with BUILTIN_CHANNELS=OFF #8560
  * revert changes so that the osmajortype/osminortype is not
    overwritten #8571
  * [uwac] do not use iso C functions #8604
  * [winpr,sam] fix inalid NULL arguments #8605
  * Fix incompatible function pointer types #8625
  * Fixed issues:
   * Backported #8581: Ignore data PDUs for DVCs that were not
     opened successfully
   * Backported #8498: [channel,urbdrc] fix type of usb hotplug
     callback
   * Backported #8537: Extended info enforce limits
   * Backported #8611: [core] add missing redirection fields
- Patches removed, that were accepted upstream
  + freerdp-builtin-channels-off-link-fix.diff
  + freerdp-fix-rpath-settings.diff

-------------------------------------------------------------------
Fri Dec 16 12:11:10 UTC 2022 - Hans-Peter Jansen <hpj@urpla.net>

- Complement fix for -DBUILTIN_CHANNELS=OFF to fix freerdp-proxy 
  accessing librdpgfx-client.so: freerdp-fix-rpath-settings.diff
  Fixes second part of bnc#1205595.

-------------------------------------------------------------------
Sun Dec 11 06:01:28 UTC 2022 - Konstantin Voinov <kv@kott.no-ip.biz>

- Disable VAAPI feature due bug https://bugzilla.opensuse.org/show_bug.cgi?id=1205595

-------------------------------------------------------------------
Thu Nov 17 08:42:25 UTC 2022 - Johannes Weberhofer <jweberhofer@weberhofer.at>

- Ugraded to freerdp 2.9.0
  * Backported #gh:FreeRDP/FreeRDP#8252: Support sending server redirection PDU
  * Backported #gh:FreeRDP/FreeRDP#8406: Ensure X11 client cursor is never
    smaller 1x1
  * Backported #gh:FreeRDP/FreeRDP#8403: Fixed multiple client side input
    validation issues - boo#1205512
    (CVE-2022-39316, CVE-2022-39317, CVE-2022-39318, CVE-2022-39319,
     CVE-2022-39320, CVE-2022-41877, CVE-2022-39347)
  * Backported #7282: Proxy server now discards input events sent before
    activation was received
  * Backported #gh:FreeRDP/FreeRDP#8324: Internal replacements for md4,
    md5 and hmac-md5
    For the time being the RDP protocol requires these outdated hash
    algorithms. So any distribution that wants to ship a working
    FreeRDP should check the options WITH_INTERNAL_MD4 (and depending
    on OpenSSL deprecation status WITH_INTERNAL_MD5)

- Fixed issues:
  * Backported #gh:FreeRDP/FreeRDP#8341: Null checks in winpr_Digest_Free
  * Backported #gh:FreeRDP/FreeRDP#8335: Missing NULL return
    in winpr_Digest_New
  * Backported #gh:FreeRDP/FreeRDP#8192: Support for audin
    version 2 microphone channel
  * Backported #gh:FreeRDP/FreeRDP#7282: Discard input events before
    activation (Fixes #8374)

-------------------------------------------------------------------
Mon Nov  7 11:44:38 UTC 2022 - Johannes Weberhofer <jweberhofer@weberhofer.at>

- Ugraded to freerdp 2.8.1
  * Fixed CVE-2022-39282 - boo#1204258
    using the `/parallel` command line switch might read uninitialized data
  * Fixed CVE-2022-39283 - boo#1204257
    using the `/video` command line switch might read uninitialized data
  * Added missing commit for backported #gh:FreeRDP/FreeRDP#8041:
    Remove ALAW/ULAW codecs from linux backends (unreliable)
  * Added hash checks for android build script dependencies

- Fixed issues:
  * #gh:FreeRDP/FreeRDP#8190: Fix build break with newer FFMPEG versions
  * #gh:FreeRDP/FreeRDP#8234: Updated flatpak with build script
  * #gh:FreeRDP/FreeRDP#8210: Better execinfo support check for android
  * #gh:FreeRDP/FreeRDP#7708: Header now defines DumpThreadHandles
  * #gh:FreeRDP/FreeRDP#8176: Check fullscreen state and not setting
  * #gh:FreeRDP/FreeRDP#8236: Send resize on window state change
  * #gh:FreeRDP/FreeRDP#7611: Audin macOS monterey fix
  * #gh:FreeRDP/FreeRDP#8291: Android build script update
  * Fix length checks and initialization in the deprecated
    (disabled per default) tsmf channel

-------------------------------------------------------------------
Mon Aug  8 09:55:40 UTC 2022 - Bjørn Lie <bjorn.lie@gmail.com>

- Ugraded to freerdp 2.8.0
  * Backported API to get peer accepted channel option flags
  * Backported API to get peer accepted channel names
  * Backported Stream_CheckAndLogRequiredLength
  * Backported #7954: Add server side handling for [MS-RDPET]
  * Backported #8010: Add server side handling for [MS-RDPECAM]
  * Backported #8041: Remove ALAW/ULAW codecs from linux backends (unreliable)
  * Backported #8051: Relieve CLIPRDR filename restriction when connecting to non-MS Windows servers
  * Backported #8048: TLS version control
  * Backported #7987: Add a new command line arg to enforce tls1.2

- Fixed issues:
  * Fixed #7837: Prevent out of bound reads for FFMPEG
  * Backported #7859 and #7861: Unwind support for backtrace generation
  * Backported #7440: wlfreerdp appid
  * Backported #7832: RAIL window restore
  * Backported #7833: Refactored WinPR thread locking
  * Backported #7893: Mac rdpsnd memory leak fixes
  * Backported #7895: Mac audin memory leak fixes
  * Backported #7898: Automatic android versioning
  * Backported #7916: GFX 10.7 capability support
  * Backported #7949: Server RDPSND API improvements
  * Backported #7957: Server DVC API improvements
  * Backported #7760: Fixed osMinorType values
  * Backported #8013: Add missing osMajorType values
  * Backported #8076: Fix wrong usage of subband diffing flag (tile artifact fix)

-------------------------------------------------------------------
Tue Apr 26 06:02:24 UTC 2022 - Johannes Weberhofer <jweberhofer@weberhofer.at>

- Upgraded to freerdp 2.7.0
  * OpenSSL3 gateway support (#gh:FreeRDP/FreeRDP#7822)
  * various NTLM fixes
  * WINPR_ASSERT to ease future backports

- Fixed issues:
  * #gh:FreeRDP/FreeRDP#6786: Use /network:auto by default
  * #gh:FreeRDP/FreeRDP#7714: Workaround for broken surface frame marker
  * #gh:FreeRDP/FreeRDP#7733: Support 10bit X11 color (BGRX32 only)
  * #gh:FreeRDP/FreeRDP#7745: GFX progressive double free
  * #gh:FreeRDP/FreeRDP#7808: Disable websockets with /gt:rpc
  * #gh:FreeRDP/FreeRDP#7815: RAIL expect LOGON_MSG_SESSION_CONTINUE

-------------------------------------------------------------------
Tue Mar  8 10:34:50 UTC 2022 - Johannes Weberhofer <jweberhofer@weberhofer.at>

- Upgraded to freerdp 2.6.1
  * Decreased logging verbosity, now freerdp is much less verbose by default
  * Backported freerdp_abort_connect during freerdp_connect fix (#gh:FreeRDP/FreeRDP#7700)
  * Backported improved version dection see docs/version_detection.md for details
  * Backported various rdpsnd fixes (#gh:FreeRDP/FreeRDP#7695)

-------------------------------------------------------------------
Wed Feb 23 12:07:48 UTC 2022 - Johannes Weberhofer <jweberhofer@weberhofer.at>

- Upgraded to freerdp 2.6.0
  * Backported android FFMPEG build scripts
  * Updated android build dependencies
  * Backported AINPUT channel

  Fixed issues:
  * Backported #gh:FreeRDP/FreeRDP#7303: Fix PDU length for RDPINPUT_PROTOCOL_V300
  * Backported #gh:FreeRDP/FreeRDP#7658: Sanitize optional physical monitor size values
  * Backported #gh:FreeRDP/FreeRDP#7426: Wayland memory corruption
  * Backported #gh:FreeRDP/FreeRDP#7293: Remove unused codec x264
  * Backported #gh:FreeRDP/FreeRDP#7541: Allow resolutions larger 2048x2048
  * Backported #gh:FreeRDP/FreeRDP#7574: FFMPEG 5.0 support
  * Backported #gh:FreeRDP/FreeRDP#7578: FFMPEG 5.0 support
  * Backported #gh:FreeRDP/FreeRDP#7580: Fixed device hotplugging
  * Backported #gh:FreeRDP/FreeRDP#7583: GetUserNameExA: Prefer getpwuid_r over getlogin_r over getlogin
  * Backported #gh:FreeRDP/FreeRDP#7585: Android Mediacodec support


-------------------------------------------------------------------
Mon Jan 24 15:02:08 UTC 2022 - Predrag Ivanović <predivan@mts.rs>

- Enable FFmpeg support for Leap-15.2+

-------------------------------------------------------------------
Thu Jan 13 10:33:45 UTC 2022 - Johannes Weberhofer <jweberhofer@weberhofer.at>

- Upgraded to freerdp 2.5.0
  * Fixed smartcard login in case a redirection occurs the pin was lost
  * Backported windows client drawing fixes
  * Backported improved macOS keyboard layout detection
  * Backported TcpConnectTimeout
  * Backported LibreSSL compatibility patches
  * Backported signal handler backtrace
  * Backported OpenSSL 3.0 support
  * Backport #gh:FreeRDP/FreeRDP#7539: Wayland client clipboard issues
  * Backport #gh:FreeRDP/FreeRDP#7509: Various fixes regarding registry
    emulation, addin loader and updated locale detection
  * Backport #gh:FreeRDP/FreeRDP#7466: Android android_register_pointer
    missing initialization

-------------------------------------------------------------------
Thu Dec  2 15:02:32 UTC 2021 - Fabian Vogt <fvogt@suse.com>

- Add patch to fix connecting without H.264-enabled FFmpeg (boo#1190823):
  * 0001-Make-H.264-codec-optional-during-runtime.patch
- Use %autosetup

-------------------------------------------------------------------
Thu Oct 21 10:15:38 UTC 2021 - Johannes Weberhofer <jweberhofer@weberhofer.at>

- Upgraded to freerdp 2.4.1

  Important security issues, boo#1191895:
  *  CVE-2021-41159: Improper client input validation for gateway connections allows to overwrite memory
  *  CVE-2021-41160: Improper region checks in all clients allow out of bound write to memory
 
  Noteworthy changes:
  * Refactored RPC gateway parsing code
  * OpenSSL 3.0 compatibility fixes
  * USB redirection: fixed transfer lengths

  Fixed issues:
  * #gh:FreeRDP/FreeRDP#7363: Length checks in ConvertUTF8toUTF16
  * #gh:FreeRDP/FreeRDP#7349: Added checks for bitmap width and heigth values

- Force library update to the latest, renamed versions (followup to
  boo#1191755)

-------------------------------------------------------------------
Wed Oct 20 06:56:31 UTC 2021 - Johannes Weberhofer <jweberhofer@weberhofer.at>

- Renamed libraries to follow packaging standards as requested in
  boo#1191755

-------------------------------------------------------------------
Thu Oct  7 17:15:54 UTC 2021 - Hans-Peter Jansen <hpj@urpla.net>

- Finally nailed it: CMAKE_INSTALL_LIBDIR is absolute on Leaps and
  relative on TW, but freerdp requires the relative variant.
  Fixes boo#1190919

-------------------------------------------------------------------
Wed Oct  6 10:43:11 UTC 2021 - Hans-Peter Jansen <hpj@urpla.net>

- Remove freerdp-fix-plugin-path.patch again, the problem was 
  introduced/fixed by cmake changes

-------------------------------------------------------------------
Sat Sep 18 10:21:29 UTC 2021 - Hans-Peter Jansen <hpj@urpla.net>

- Create an explicit freerdp dependency for libwinpr

-------------------------------------------------------------------
Fri Sep 17 16:37:13 UTC 2021 - Hans-Peter Jansen <hpj@urpla.net>

- Add preliminary patch freerdp-fix-plugin-path.patch to fix dynamic
  addin loading

-------------------------------------------------------------------
Fri Sep 17 10:27:03 UTC 2021 - Johannes Weberhofer <jweberhofer@weberhofer.at>

- Modified spec to satisfy because obs-service-source_validator does not
  support elif

-------------------------------------------------------------------
Wed Sep 15 17:18:29 UTC 2021 - Hans-Peter Jansen <hpj@urpla.net>

- Fix the spec-cleaner mess
- Enable a few options on TW
- Build for 15.3 required another lib
- Remove X264 option, no related backend exists and enabling it fails
  in cmake creation stage

-------------------------------------------------------------------
Fri Aug 20 13:27:31 UTC 2021 - Hans-Peter Jansen <hpj@urpla.net>

- Reorganize build flags
- Apply fix for -DBUILTIN_CHANNELS=OFF: freerdp-builtin-channels-off-link-fix.diff
- Add plugins to libwinpr

-------------------------------------------------------------------
Wed Aug 11 10:51:40 UTC 2021 - Johannes Weberhofer <jweberhofer@weberhofer.at>

- Updated to release 2.4.0
  Noteworthy changes:
  * Backported multithreaded progressive decoder (#7036)
  * Backported clipboard fixes (#6924)
  * Fixed remote file read (#7185)

  Fixed issues:
  * #gh:FreeRDP/FreeRDP#6938: RAILS clipboard remote -> local
  * #gh:FreeRDP/FreeRDP#6985: Support newer FFMPEG builds
  * #gh:FreeRDP/FreeRDP#6989: Use OpenSSL default certificate store settings
  * #gh:FreeRDP/FreeRDP#7073: Planar alignment fixes

-------------------------------------------------------------------
Mon Mar 15 13:51:17 UTC 2021 - Johannes Weberhofer <jweberhofer@weberhofer.at>

- Updated to release 2.3.2
  Noteworthy changes:
  * Fixed autoreconnect printer backend loading
  * Fixed compilation on older mac os versions < 10.14
  * Fixed mouse pointer move with smart-sizing
  * Added command line option to disable websocket gateway support
  * Fixed drive hotplugging issues with windows
  * Fixed smartcard issues on mac

Fixed issues:
  * #gh:FreeRDP/FreeRDP#6900: Transparency issues with aFreeRDP
  * #gh:FreeRDP/FreeRDP#6848: Invalid format string in smartcard trace
  * #gh:FreeRDP/FreeRDP#6846: Fixed static builds
  * #gh:FreeRDP/FreeRDP#6888: Crash due to missing bounds checks
  * #gh:FreeRDP/FreeRDP#6882: Use default sound device on mac


-------------------------------------------------------------------
Mon Mar  1 12:50:24 UTC 2021 - Johannes Weberhofer <jweberhofer@weberhofer.at>

- Updated to release 2.3.1
  Noteworthy changes:
  * This is a compatibility bugfix release readding some (deprecated)
    symbols/defines
  * Also add some more EXPERIMENTAL warnings to CMake flags as some were not
    clear enough.
  * Fixed a memory leak in xfreerdp (mouse pointer updates)
  * No longer activating some compile time debug options with
    -DWITH_DEBUG_ALL=ON which might leak sensitive information.
  * Added -DDEFINE_NO_DEPRECATED for developers to detect use of
    deprecated symbols

-------------------------------------------------------------------
Thu Feb 25 09:46:34 UTC 2021 - Johannes Weberhofer <jweberhofer@weberhofer.at>

- Updated to release 2.3.0
  Noteworthy changes:
  * Websocket support for proxy connections
  * Progressive codec improvements. Reduces graphical glitches against windows
    and ogon servers
  * Fixed +glyph-cache, now working properly without disconnects
  * Huge file support in clipboard
  * XWayland support for xfreerdp (keyboard grabbing)
  * Improved wlfreerdp (wayland client)
  * Option to allow keyboard scancodes to be remapped manually
  * Improved mouse wheel behaviour when scrolling
  * Improved dynamic channel behaviour, more stable event detection
  * New connection state PubSub notification: Clients can now monitor current
    connection state

  Fixes:
  * gh#FreeRDP/FreeRDP/6626: Fixed parsing of FastGlyph order.
    gh#FreeRDP/FreeRDP/6624: Added support for xwayland keyboard grab
    gh#FreeRDP/FreeRDP/6492: Added clipboard CB_HUGE_FILE_SUPPORT_ENABLED flag
    gh#FreeRDP/FreeRDP/6428: Improve NLA error code logging.
    gh#FreeRDP/FreeRDP/6416: Http gateway message support
    gh#FreeRDP/FreeRDP/6753: List of pull requests to backport for stable-next

- Added freerdp-rpmlintrc to supress a false positive as gethostbyname() is
  a windows-function call not a unix one.
 
-------------------------------------------------------------------
Mon Jul 20 14:22:07 UTC 2020 - Johannes Weberhofer <jweberhofer@weberhofer.at>

- Updated to release 2.2.0 (boo#1174321, gh#FreeRDP/FreeRDP#6381)
  * SECURITY: CVE-2020-15103 - Integer overflow due to missing input sanitation in rdpegfx channel
  * Sound & mic - filter GSM codec for microphone redirection (gh#FreeRDP/FreeRDP#6263)
  * windows client title length (gh#FreeRDP/FreeRDP#6335)
  * "Alternate Secondary Drawing Order UNKNOWN" (gh#FreeRDP/FreeRDP#6370)
  * remoteapp with dialog is disconnecting when it loses focus (gh#FreeRDP/FreeRDP#6298)
  * v2.1.2: Can't connect to Windows7 (gh#FreeRDP/FreeRDP#6299)

  * fix: memory leak in nsc
  * urbdrc: some fixes and improvements
  * build: use cmake to detect getlogin_r, improve asan checks/detection
  * server/proxy:
    - new: support for heartbeats
    - new: support for rail handshake ex flags
    - fix: possible race condition with redirects
  * Drop upstream fixed patch: freerdp-CVE-2020-15103.patch

- Removed freerdp_Mask_CACHED_BRUSH_when_checking_brush_style.patch

-------------------------------------------------------------------
Fri Jul 17 08:19:56 UTC 2020 - QK ZHU <qkzhu@suse.com>

- Drop BuildRequires of libavcodec for Leap/SLE (bsc#1174200) 

-------------------------------------------------------------------
Thu Jul  2 06:57:31 UTC 2020 - Johannes Weberhofer <jweberhofer@weberhofer.at>

- Added freerdp_Mask_CACHED_BRUSH_when_checking_brush_style.patch 
  which fixed frequent crashes described in boo#1173605 and gh#FreeRDP/FreeRDP#6298

-------------------------------------------------------------------
Mon Jun 22 12:59:59 UTC 2020 - Johannes Weberhofer <jweberhofer@weberhofer.at>

- Updated to release 2.1.2 (boo#1173247)
  * CVE-2020-4033 Out of bound read in RLEDECOMPRESS
  * CVE-2020-4031 Use-After-Free in gdi_SelectObject
  * CVE-2020-4032 Integer casting vulnerability in `update_recv_secondary_order`
  * CVE-2020-4030 OOB read in `TrioParse`
  * CVE-2020-11099 OOB Read in license_read_new_or_upgrade_license_packet
  * CVE-2020-11098 Out-of-bound read in glyph_cache_put
  * CVE-2020-11097 OOB read in ntlm_av_pair_get
  * CVE-2020-11095 Global OOB read in update_recv_primary_order
  * CVE-2020-11096 Global OOB read in update_read_cache_bitmap_v3_order
  * Gateway RPC fixes for windows
  * Fixed resource fee race resulting in double free in USB redirection
  * Fixed wayland client crashes
  * Fixed X11 client mouse mapping issues (X11 mapping on/off)
  * Some proxy related improvements (capture module)
  * Code cleanup (use getlogin_r, ...)

- Removed obsolete upstream patch freerdp-bug-6205.patch

-------------------------------------------------------------------
Wed May 20 15:14:52 UTC 2020 - Johannes Weberhofer <jweberhofer@weberhofer.at>

- Updated to release 2.1.1 (boo#1171441)
  * CVE-2020-13396: GHSL-2020-100 OOB Read in ntlm_read_ChallengeMessage
  * CVE-2020-13397: GHSL-2020-101 OOB Read in security_fips_decrypt due to uninitialized value
  * CVE-2020-13398: GHSL-2020-102 OOB Write in crypto_rsa_common
  * Enforce synchronous legacy RDP encryption count (#6156)
  * Fixed some leaks and crashes missed in 2.1.0
  * Removed dynamic channel listener limits
  * Lots of resource cleanup fixes (clang sanitizers)
  * A couple of performance improvements
  * Various small annoyances eliminated (typos, prefilled username for windows client, ...)

- Removed freerdp-bug-6175.patch and freerdp-bug-6207.patch because included in upstream

-------------------------------------------------------------------
Wed May 20 12:34:27 UTC 2020 - Johannes Weberhofer <jweberhofer@weberhofer.at>

- Added freerdp-bug-6205.patch to fix reading newline on certificate accept gh#FreeRDP/FreeRDP#6205
- Added freerdp-bug-6175.patch to fix Certificate Checking Recently Broke gh#FreeRDP/FreeRDP#6148
- Added freerdp-bug-6207.patch to fix Abort on first possible certificate validation error gh#FreeRDP/FreeRDP#6207

-------------------------------------------------------------------
Fri May  8 09:51:06 UTC 2020 - Johannes Weberhofer <jweberhofer@weberhofer.at>

- Updated to release 2.1.0 (boo#1171441)

  * Fixed CVEs:
    - CVE-2020-11039
    - CVE-2020-11038
    - CVE-2020-11043
    - CVE-2020-11040
    - CVE-2020-11041
    - CVE-2020-11019
    - CVE-2020-11017
    - CVE-2020-11018

  * Fixed leak and crashing issues:
    - gh#FreeRDP/FreeRDP#6129
    - gh#FreeRDP/FreeRDP#6128
    - gh#FreeRDP/FreeRDP#6127
    - gh#FreeRDP/FreeRDP#6110
    - gh#FreeRDP/FreeRDP#6081
    - gh#FreeRDP/FreeRDP#6077

  * Noteworthy features and improvements:
    - Fixed sound issues (gh#FreeRDP/FreeRDP#6043)
    - New expert command line options /tune and /tune-list to modify all client
      settings in a generic way.
    - Fixes for smartcard cache, this improves compatibility of smartcard devices
      with newer smartcard channel.
    - Shadow server can now be instructed to listen to multiple interfaces.
    - Improved server certificate support (gh#FreeRDP/FreeRDP#6052)
    - Various fixes for wayland client (fullscreen, mouse wheel, ...)
    - Fixed large mouse pointer support, now mouse pointers > 96x96 pixel are visible.
    - USB redirection command line improvements (filter options)
    - Various translation improvements for android and ios clients

- Removed upstream patches fix-freerdp-2.0.0-usbdk-build.patch
  and fix-URBDRC_DEVICE_ADD_FLAG-definitions.patch

-------------------------------------------------------------------
Fri Apr 17 12:51:02 UTC 2020 - Johannes Weberhofer <jweberhofer@weberhofer.at>

- Updated and reviewed make command and added fix-freerdp-2.0.0-usbdk-build.patch
  to fix boo#1169679 and make USB working again
- Fixed build for SLE_12
- Cleaned up spec file

-------------------------------------------------------------------
Fri Apr 17 09:37:36 UTC 2020 - Martin Liška <mliska@suse.cz>

- Add fix-URBDRC_DEVICE_ADD_FLAG-definitions.patch in order
  to fix boo#1169748.

-------------------------------------------------------------------
Mon Apr 13 05:23:54 UTC 2020 - Johannes Weberhofer <jweberhofer@weberhofer.at>

- Added cairo support for scaling
- Cleaned up spec

-------------------------------------------------------------------
Sun Apr 12 06:06:44 UTC 2020 - Johannes Weberhofer <jweberhofer@weberhofer.at>

- Removed patch freerdp-Fix-realloc-return-handling.patch
- Added pkgconfig(libusb-1.0) for building
- Added new package for freerdp-proxy
- Cleaned up spec file

- Updated to release 2.0.0

  * Fixed CVEs:
    - CVE-2020-11521
    - CVE-2020-11522
    - CVE-2020-11523
    - CVE-2020-11524
    - CVE-2020-11525
    - CVE-2020-11526

  * Fixed security related issues:
    - gh#FreeRDP/FreeRDP#6005
    - gh#FreeRDP/FreeRDP#6006
    - gh#FreeRDP/FreeRDP#6007
    - gh#FreeRDP/FreeRDP#6008
    - gh#FreeRDP/FreeRDP#6009
    - gh#FreeRDP/FreeRDP#6010
    - gh#FreeRDP/FreeRDP#6011
    - gh#FreeRDP/FreeRDP#6012
    - gh#FreeRDP/FreeRDP#6013

  * sha256 is now used instead of sha1 to fingerprint certificates. This will
    invalidate all hosts in FreeRDP known_hosts2 file and causes a prompt if a
    new connection is established after the update

  * First version of the RDP proxy was added (gh#FreeRDP/FreeRDP#5372)
    thanks to @kubistika
  * Smartcard received some refactoring. Missing functions were added and input
    validation was improved (gh#FreeRDP/FreeRDP#5884)
  * A new option /cert that unifies all certificate related options (gh#FreeRDP/FreeRDP#5880)  
    The old options (cert-ignore, cert-deny, cert-name, cert-tofu) are still
    available but marked as deprecated
  * Support for Remote Assistance Protocol Version 2 [MS-RA]
  * The DirectFB client was removed because it was unmaintained
  * Unified initialization of OrderSupport
  * Fix for licensing against Windows Server 2003
  * Font smoothing is now enabled per default
  * Smart scaling for Wayland using libcairo was added (gh#FreeRDP/FreeRDP#5215)
  * Unified update->BeginPaint and update->EndPaint
  * An image scaling API for software drawing was added
  * Rail was updated to the latest spec version 28.0
  * Support for H.264 in the shadow server is now detected at runtime
  * Add mask=<value> option for /gfx and /gfx-h264  (gh#FreeRDP/FreeRDP#5771)
  * A new option /timeout was added to adjust the TCP ACK timeout (gh#FreeRDP/FreeRDP#5987)

-------------------------------------------------------------------
Fri Mar 20 07:09:25 UTC 2020 - Guillaume GARDET <guillaume.gardet@opensuse.org>

- Disable LTO on aarch64 and %arm to fix build

-------------------------------------------------------------------
Mon Oct 28 08:03:35 UTC 2019 - Felix Zhang <fezhang@suse.com>

- Add freerdp-Fix-realloc-return-handling.patch: Fix realloc return
  handling that results in memory leaks (boo#1153163, boo#1153164,
  gh#FreeRDP/FreeRDP#5645, CVE-2019-17177, CVE-2019-17178)

-------------------------------------------------------------------
Wed Apr 17 06:50:28 UTC 2019 - Felix Zhang <fezhang@suse.com>

- Add Requires: lib%{name}%{major_version} = %{version}-%{release}:
  freerdp should depend on the same release of libfreerdp2
  (boo#1129193)

-------------------------------------------------------------------
Tue Nov 20 10:28:44 UTC 2018 - jweberhofer@weberhofer.at

- upgrade to version 2.0.0-rc4 (FATE#326739)

  * Fix the following issues:
    - CVE-2018-8784, boo#1116708
    - CVE-2018-8785, boo#1117967
    - CVE-2018-8786, boo#1117966
    - CVE-2018-8787, boo#1117964
    - CVE-2018-8788, boo#1117963
    - CVE-2018-8789, boo#1117965
    - CVE-2018-1000852, boo#1120507
  * Security and stability improvements, including boo#1103557 and boo#1112028
  * Refactored ntlm_av_pairs API
  * gateway: multiple fixes and improvements
  * client/X11: support for rail (remote app) icons was added
  * the licensing code was re-worked: Per-device licenses are now saved on the
    client and used on re-connect: WARNING: this is a change in FreeRDP
    behavior regarding licensing
      WARNING: this is a change in FreeRDP behavior regarding licensing. If the old
      behavior is required, or no licenses should be saved use the
      new command line option +old-license (gh#/FreeRDP/FreeRDP#4979)
  * improve order handling -  only orders that were enabled
    during capability exchange are accepted.
      WARNING and NOTE: some servers do improperly send orders that weren't negotiated,
      for such cases the new command line option /relax-order-checks was added to
      disable the strict order checking. If connecting to xrdp the options
      /relax-order-checks *and* +glyph-cache are required. (gh#/FreeRDP/FreeRDP#4926)
  * /smartcard has now support for substring filters (gh#/FreeRDP/FreeRDP#4840)
    for details see https://github.com/FreeRDP/FreeRDP/wiki/smartcard-logon
  * add new command line option /smartcard-logon to allow
    smartcard login (currently only with RDP security)
  * add support to set tls security level (for openssl >= 1.1.0)
    - default level is set to 1
    - the new command line option /tls-seclevel:[LEVEL] allows to set
      a different level if required
  * new command line option: /window-position to allow positioning
    the window on startup
  * client/X11: set window title before mapping
  * rdpsnd/audin (mostly server side) add support for audio re-sampling using soxr or ffmpeg

-------------------------------------------------------------------
Wed Aug  8 07:07:01 UTC 2018 - jweberhofer@weberhofer.at

- upgrade to version 2.0.0-rc3
  See: https://github.com/FreeRDP/FreeRDP/milestone/9?closed=1

  * Improved and cleaned up the command line interface
  * Fixed automount issues
  * Fixed several audio and microphone related issues
  * Implemented AAC and MP3 codecs
  * Added Wave2 support
  * Addedd dynamic resolution with full screen toggle support
  * Improved redirection handling and certificate issues
  * Improved automatic reconnects
  * Improced connection error handling
  * Fixed invalid pointer, double-free, integer underflow,
    buffer overflows issues as well as other memory leaks
  * fixed X11 Right-Ctrl ungrab feature
  * winpr: Updates time zone data to April 2018
  * added libressl compatibility

-------------------------------------------------------------------
Mon May 14 15:56:41 UTC 2018 - jweberhofer@weberhofer.at

- removed SLE11 condition
- removed no_connection_to_windows_10_17101.patch
- removed -DBUILTIN_CHANNELS=OFF switch
- explicitly set -DCHANNEL_GEOMETRY=ON
- Disable the new X264 and OPENH264 codecs because openSUSE does
  not provide them

- upgrade to version 2.0.0-rc2
  See: https://github.com/FreeRDP/FreeRDP/milestone/8

  Noteworthy features and improvements:
  * IMPORTANT: add support CredSSP v6 - this fixes KB4088776 see #4449, #4488
  * basic support for the "Video Optimized Remoting Virtual Channel
    Extension" (MS-RDPEVOR) was added
  * many smart card related fixes and cleanups #4312
  * fix ccache support
  * add support for memory and thread sanitizer
  * support for dynamic resloution changes was added in xfreerdp #4313
  * support for gateway access token (command line option /gat) was added
  * initial support for travis-ci.org was added
  * SSE optimization version of RGB to AVC444 frame split was added
  * build: -msse2/-msse3 are not enabled globally anymore

  Fixed github issues (excerpt):
  * #4227 Convert settings->Password to binary blob
  * #4231 freerdp-2.0.0_rc0: 5 tests failed out of 184 on ppc
  * #4276 Big endian fixes
  * #4291 xfreerdp “Segmentation fault” when connecting to freerdp-shadow-cli
  * #4293 [X11] shadow server memory corruption with /monitors:2 #4293
  * #4296 drive redirection - raise an error if the directory can't be found
  * #4306 Cannot connect to shadow server with NLA auth:
    SEC_E_OUT_OF_SEQUENCE (boo#1085416, boo#1087240, boo#1104918,
    CVE-2018-0886)
  * #4457 Fix /size: /w: /h: with /monitors: (Fix custom sizes)
  * #4527 pre-connection blob (pcb) support in .rdp files
  * #4552 Fix Windows 10 cursors drawing as black
  * smartcard related: #3521, #3431, #3474, #3488, #775, #1424

-------------------------------------------------------------------
Tue Apr 24 08:59:06 UTC 2018 - bruno@ioda-net.ch

- Fix boo#1090677 activate pulse optional component

-------------------------------------------------------------------
Thu Mar 15 07:33:40 UTC 2018 - jweberhofer@weberhofer.at

- Added no_connection_to_windows_10_17101.patch to fix
  Windows-connection-problem after Windows march 2018 updates.
  This fix is related to boo#1085416

-------------------------------------------------------------------
Mon Mar 12 19:26:30 UTC 2018 - crrodriguez@opensuse.org

- Do not use xorg-x11-devel, instead buildrequire individual
  x components.
- Only attempt to ge rid of __DATE__ and __TIME__ if
  SOURCE_DATE_EPOCH is not set.

-------------------------------------------------------------------
Thu Jan 11 08:10:58 UTC 2018 - jweberhofer@weberhofer.at

- Users can connect only once wo windows sessions due to
  #gh/FreeRDP/FreeRDP/4348
  Therefore WITH_GSSAPI has been disabled until that issue has been
  solved

-------------------------------------------------------------------
Thu Nov 30 15:56:24 UTC 2017 - jweberhofer@weberhofer.at

- Updated to 2.0.0-rc1

Noteworthy features and improvements:

* support for FIPS mode was added (option +fipsmode)
* initial client side kerberos support (run cmake with WITH_GSSAPI)
* support for ssh-agent redirection (as rdp channel)
* the man page(s) and /help were updated an improved
* add support for ICU for unicode conversion (-DWITH_ICU=ON)
* client add option to force password prompt before connection (/from-stdin[:force])
* extend /size to allow width or height percentages (#gh/FreeRDP/FreeRDP/4146)
* add support for "password is pin"
* clipboard is now enabled per default (use -clipboard to disable)

Fixed github issues (excerpt):

* #gh/FreeRDP/FreeRDP/4281: Added option to prefer IPv6 over IPv4
* #gh/FreeRDP/FreeRDP/3890: Point to OpenSSL doc for private CA
* #gh/FreeRDP/FreeRDP/3378: support 31 static channels as described in the spec
* #gh/FreeRDP/FreeRDP/4253: Rfx decode tile width.
* #gh/FreeRDP/FreeRDP/3267: fix parsing of drivestoredirect
* #gh/FreeRDP/FreeRDP/4257: Proper error checks for /kbd argument
* #gh/FreeRDP/FreeRDP/4249: Corruption due to recursive parser
* #gh/FreeRDP/FreeRDP/4111: 15bpp color handling for brush.
* #gh/FreeRDP/FreeRDP/3509: Added Ctrl+Alt+Enter description
* #gh/FreeRDP/FreeRDP/3211: Return freerdp error from main.
* #gh/FreeRDP/FreeRDP/3513: add better description for drive redirection
* #gh/FreeRDP/FreeRDP/4199: ConvertFindDataAToW string length
* #gh/FreeRDP/FreeRDP/4135: client/x11: fix colors on big endian
* #gh/FreeRDP/FreeRDP/4089: fix h264 context leak when DeleteSurface
* #gh/FreeRDP/FreeRDP/4117: possible segfault
* #gh/FreeRDP/FreeRDP/4091: fix a regression with remote program

-------------------------------------------------------------------
Mon Sep  4 11:05:25 UTC 2017 - jengelh@inai.de

- Remove extraneous Obsoletes for packages that never existed
  in openSUSE:Factory or X11:RemoteDesktop.
- Rename libuwac0-devel to uwac0-devel and libwinpr-devel to
  winpr-devel, as that seems to be their upstream name which
  packages are encouraged to stick to.
- Remove duplicated pkgconfig requires (these are autodetected).

-------------------------------------------------------------------
Fri Sep  1 11:51:54 UTC 2017 - jweberhofer@weberhofer.at

- Fixed download location

-------------------------------------------------------------------
Fri Sep  1 06:43:47 UTC 2017 - jweberhofer@weberhofer.at

- Switched to official RC0
- Create wayland client package and libuwac0 package
- Create separate libwinpr2 to be used in other packages
- enabled gstreamer (currently disabled for tumbleweed)
- enabled kerberos authentication

- Update to official RC0
  Fix the following issues identified by the CISCO TALOS project:
  * TALOS-2017-0336 CVE-2017-2834 boo#1050714
  * TALOS-2017-0337 CVE-2017-2835 boo#1050712
  * TALOS-2017-0338 CVE-2017-2836 boo#1050699
  * TALOS-2017-0339 CVE-2017-2837 boo#1050704
  * TALOS-2017-0340 CVE-2017-2838 boo#1050708
  * TALOS-2017-0341 CVE-2017-2839 boo#1050711

-------------------------------------------------------------------
Sun Jun 11 16:46:11 UTC 2017 - bruno@ioda-net.ch

- Redo history by using changelog url
- Update to version 2.0.0~git.1497095982.1dbd2d28d:
  See https://github.com/freerdp/freeRDP/compare/043243f...1dbd2d28d
  for full details.
- Packaging :
  + Move to xz tarball in _service
  + Remove 3472.patch merged upstream
- Update to version 2.0.0~git.1496304402.c42ccb508:
  See https://github.com/freerdp/freeRDP/compare/043243f...c42ccb508
  for changes.

-------------------------------------------------------------------
Sat Jun 10 12:27:53 UTC 2017 - meissner@suse.com

- Forcefully enable PIE in CFLAGS as the automatism did not work.

-------------------------------------------------------------------
Tue Jan 17 13:11:08 UTC 2017 - bruno@ioda-net.ch

- Add 3472.patch until upstream #3472 isssue is fixed and PR merged
  this fix boo#1004108

-------------------------------------------------------------------
Wed Oct 26 20:14:14 UTC 2016 - dimstar@opensuse.org

- Update to version 2.0.0~git.1477034991.043243f:
  * fixed kerberos authentication
  * shadow/rdpsnd: Fix race condition in rdpsnd channel server.
    The output buffer and format parameters are not protected.
  * wfreerdp: fix invalid VerifyCertificate callback
  * rdpsnd/server: decrease audio latency and make it configurable.
  * Add an environment variables section to the man
  * protocol violation: rdp_read_extended_info_packet
  * Added support for OpenH264 1.6
  * freerdp: fix sending of TLS alert on NLA failure, add better
    handling of server-side NLA in shadow server
  * freerdp: add configurable NTLM SAM file option for
    server-side NLA
  * freerdp: make modifications to NLA server-side fixes according
    to PR comments
  * Fixed a windows 8.1 issue.

-------------------------------------------------------------------
Wed May 18 08:44:26 UTC 2016 - jengelh@inai.de

- Kill off __DATE__ from built sources.

-------------------------------------------------------------------
Tue May 17 10:25:00 UTC 2016 - fezhang@suse.com

- Update to GNOME 3.20.2 FATE#318572
- Add obs git integration.
- Update to version 2.0.0git.1463131968.4e66df7:
  + Fixed memory leaks.
  + wfreerdp: fix name build without client interface
  + libfreerdp-codec: fix xcrush decompression, revert remote
    control fix
  + KB3153731: May 2016 DST update for Azerbaijan, Chile, Haiti and
    Morocco
  + libfreerdp-codec: make proper xcrush context reset fix

-------------------------------------------------------------------
Wed May  4 12:06:22 UTC 2016 - fezhang@suse.com

- Update to version 2.0.0, git master branch id a7ca42e
  (FATE#319661), no upstream changelog available.
  * Warning: This is a git snapshot regarded as technical preview
    by upstream.
  * Warning: For xfreerdp, new /long-option commandline interfaces
    have replaced the old --long-option interfaces. Existing user
    scripts need to migrate to the new interfaces to avoid
    breakages.
    For more details, see:
    https://github.com/FreeRDP/FreeRDP/wiki/CommandLineInterface
  * Add Network Level Ahthentication support.
  * Add Windows Portable Runtime. For more details, see:
    http://www.freerdp.com/2012/05/24/winpr-windows-portable-runtime
  * Obsolete libfreerdp-1_0-plugins.
- Drop FindALSA.cmake: deprecated
- Drop freerdp_branch-1.0.x_fix-kpdivide-issue831.patch:
  fixed upstream, implemention now in include/freerdp/scancode.h.
- Drop freerdp-CVE-2014-0250.patch (bnc#880317):
  fixed upstream 532c420.
- Drop freerdp-CVE-2014-0791.patch (bnc#857491):
  fixed upstream f1d6afc.
- Drop freerdp-fix-FindPCSC-macro.patch:
  fixed upstream 9148af3.
- Drop freerdp-handle-null-device-name.patch (bnc#785437):
  deprecated, related implementation dropped.
  was: freerdp-fix-pulse-no-device-name.patch

-------------------------------------------------------------------
Mon Jun 23 03:05:37 UTC 2014 - fezhang@suse.com

- Add freerdp-CVE-2014-0791.patch to fix bnc#857491
  backported from upstream commit f1d6afc

-------------------------------------------------------------------
Thu Jun 12 20:50:36 UTC 2014 - dliang@suse.com

- Add freerdp-CVE-2014-0250.patch to fix bnc#880317
  solves CVE-2014-0250, backport from upstream

-------------------------------------------------------------------
Thu Oct 31 17:58:21 UTC 2013 - lnt-sysadmin@lists.lrz.de

- Allow build on SLES11:
  * converted pkgconfig() BuildRequires to package names
  * added FindALSA.cmake
  * use 'make install' instead of '%make_install' macro

-------------------------------------------------------------------
Thu Sep 12 07:03:02 UTC 2013 - crrodriguez@opensuse.org

- build with -DOPENSSL_LOAD_CONF so among other things
 the application respects the system's openSSL configuration.

-------------------------------------------------------------------
Thu Mar  7 09:10:15 UTC 2013 - bruno@ioda-net.ch

- Added patch for issue #811 fixing divide key (/) on keypad for
  1.0x series,
  commit https://github.com/bmiklautz/FreeRDP/commit/e0cc1e60657b5883a907e5da2f70eb27bf0b91f1

- Added changelog

  FreeRDP 1.0.2 is a maintenance release which contains several bug
  and stability fixes.
  * xfreerdp:
  * new parameter --from-stdin - prompts for unspecified arguments
    username, password, domain and host.
  * fix compability with x2go
  * fix keyboard state in remote app
  * documentation fixes
  * fixed crash when started with --authonly (#843)

  * libfreerdp-core:
  * several memory leaks and double frees were fixed
  * support for FastPath PDUs up to 32767
  * register audio only if plugin is registered
  * load extensions after argument parsing

  * libfreerdp-utils:
  * fixed crash when HOME environment variable wasn't set

  * xfreerdp-server:
  * deadlock fixed
  * accept TLSv1 and SSLv3

  * smartcard:
  * don't incorrectly set SCARD_STATE_IGNORE

  * libfreerdp-codec:
  * performance improvement

  * libfreerdp-gdi:
  * support for PatBlt DPa operation

  * plugin:
  * ignore CHANNEL_FLAG_SUSPEND/CHANNEL_FLAG_RESUME to prevent
    possible crash

  For a detailed list of changes use "git log 1.0.1..1.0.2"
  known problems:

  * If windows input language is set to german pressing the divde
    key (/) on the keypad results in minus (-) (see issue #811)

-------------------------------------------------------------------
Thu Jan 24 14:42:37 UTC 2013 - kkaempf@suse.com

- update to 1.0.2
  - bugfix release (no changelog posted)
  - drop patches that are upstream

-------------------------------------------------------------------
Fri Dec 28 21:59:58 UTC 2012 - dmueller@suse.com

- only enable SSE2 on x86*

-------------------------------------------------------------------
Fri Dec 28 20:52:03 UTC 2012 - dvaleev@suse.com

- disable SSE2 for ARM as well

-------------------------------------------------------------------
Fri Dec 28 17:29:45 UTC 2012 - dvaleev@suse.com

- disable SSE2 for powerpc

-------------------------------------------------------------------
Thu Dec 27 15:27:06 UTC 2012 - gber@opensuse.org

- build with WITH_SSE2=ON as freerdp now uses runtime detection
  (bnc#793611)

-------------------------------------------------------------------
Thu Nov  1 13:07:27 UTC 2012 - gber@opensuse.org

- added freerdp-fix-pulse-no-device-name.patch in order to fix a
  segfault in case device name is not provided (bnc#785437)

-------------------------------------------------------------------
Wed Oct 17 15:04:32 UTC 2012 - gber@opensuse.org

- added freerdp-fix-linking-with-libpulse.patch in order to link
  correctly with libpulse
  (https://github.com/FreeRDP/FreeRDP/issues/418, bnc#785437)

-------------------------------------------------------------------
Sun Apr 29 14:01:04 UTC 2012 - zawertun@gmail.com

- added freerdp-fix-incorrect-numlock-state.patch which fixes
  incorrect num lock state when connecting
  (https://github.com/FreeRDP/FreeRDP/pull/564)

-------------------------------------------------------------------
Sun Apr 22 18:07:53 UTC 2012 - gber@opensuse.org

- added freerdp-fix-FindPCSC-macro.patch which fixes the build by
  setting PCSC_LIBRARIES and PCSC_INCLUDE_DIRS variables explicitly
  which are otherwise empty
  (https://github.com/FreeRDP/FreeRDP/issues/562)

-------------------------------------------------------------------
Thu Apr 19 15:31:06 UTC 2012 - gber@opensuse.org

- applied fix for a bug in freerdp-fix-bitmap-cache.patch from
  upstream git

-------------------------------------------------------------------
Fri Mar 30 12:23:29 UTC 2012 - zawertun@gmail.com

- added freerdp-fix-bitmap-cache.patch fixing a problem with the
  bitmap cache resulting in garbled images
  (https://github.com/FreeRDP/FreeRDP/issues/348)

-------------------------------------------------------------------
Wed Mar 28 09:37:04 UTC 2012 - gber@opensuse.org

- split off -plugins subpackage
- specfile cleanup

-------------------------------------------------------------------
Tue Mar  6 19:55:41 UTC 2012 - gankov@opensuse.org

- rewrote spec for using cmake.
- update to version 1.0.1
  - FreeRDP 1.x series is a complete rewrite now licensed under
    the Apache License 2.0
  - RemoteFX
    - Both encoder and decoder
    - SSE2 and NEON optimization
  - NSCodec
  - RemoteApp
    - Working, minor glitches
  - Multimedia Redirection
    - ffmpeg support
  - Network Level Authentication (NLA)
    - NTLMv2
  - Certificate validation
  - FIPS-compliant RDP security
  - new build system (cmake)
  - added official logo and icon

-------------------------------------------------------------------
Fri Dec  2 13:02:52 UTC 2011 - gber@opensuse.org

- add explicit dependency on libtool

-------------------------------------------------------------------
Thu Dec  1 17:05:39 UTC 2011 - coolo@suse.com

- add automake as buildrequire to avoid implicit dependency

-------------------------------------------------------------------
Thu Sep 22 15:31:28 UTC 2011 - gber@opensuse.org

- cleanup to comply with the packaging policy
  - add header
  - use the correct license format
  - remove %clean section
  - simplify the manipulation of PLUGIN_PATH
  - remove %debug_package
  - add meaningful description
  - do not recompres the source tarball any more
  - corrected URLs

-------------------------------------------------------------------
Tue Jun  7 22:21:56 UTC 2011 - pascal.bleser@opensuse.org

- fix bnc#688484 by passing --with-sound=alsa and alsa-devel in
  BuildRequires

-------------------------------------------------------------------
Wed Nov 17 11:35:04 UTC 2010 - pascal.bleser@opensuse.org

- rewrote most of the spec file (wrong group, wrong subpackages,
  ldconfig called on devel package, shlibs inj devel package, ...)

- update to 0.8.2:
  * libfreerdp:
    + fix buffer overflow when local timezone doesn't fit in 32
      bytes
    + fix data corruption after TLS license package
    + free TLS resources to avoid memory leaks
  * mcs:
    + fix connecting to VirtualBox with extra channels
  * rdpsnd plugin:
    + ensure the ALSA device is closed when freeing resources
  * rdpdr plugin:
    + fix various memory leaks
    + fix a segfault in multi-session environment

-------------------------------------------------------------------
Wed Oct 27 00:00:00 UTC 2010 - hrustov@gmail.com

- initial build

