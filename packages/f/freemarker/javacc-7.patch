--- freemarker-2.3.31/build.xml	2022-04-30 08:33:06.203800972 +0200
+++ freemarker-2.3.31/build.xml	2022-04-30 08:33:37.727960663 +0200
@@ -146,18 +146,26 @@
 
     <mkdir dir="${_javaccOutputDir}" />
     <ivy:retrieve conf="parser" pattern="build/javacc-home.tmp/[artifact].[ext]" />
+    <!-- avoid usage of word template which is now a keyword in javacc -->
+    <copy file="src/main/javacc/FTL.jj" tofile="${_javaccOutputDir}/FTL.jj"/>
+    <replace
+      file="${_javaccOutputDir}/FTL.jj"
+      token="template"
+      value="xtemplate"
+      />
     <javacc:generate
-      target="src/main/javacc/FTL.jj"
+      target="${_javaccOutputDir}/FTL.jj"
       outputdirectory="${_javaccOutputDir}"
       javacchome="build/javacc-home.tmp"
     />
     <delete dir="build/javacc-home.tmp" />
-    
+    <!-- undo template keyword replacement -->
     <replace
-      file="${_javaccOutputDir}/FMParser.java"
-      token="private final LookaheadSuccess"
-      value="private static final LookaheadSuccess"
+      dir="${_javaccOutputDir}"
+      token="xtemplate"
+      value="template"
     />
+
     <replace
       file="${_javaccOutputDir}/FMParserConstants.java"
       token="public interface FMParserConstants"
