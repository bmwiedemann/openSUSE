-------------------------------------------------------------------
Mon Dec 12 21:18:30 UTC 2022 - Dirk Müller <dmueller@suse.com>

- build for x86_64 subarchs the same way like for baseline 

-------------------------------------------------------------------
Thu Dec  8 11:27:56 UTC 2022 - Callum Farmer <gmbr3@opensuse.org>

- Enable librist support on TW: enables usage of RIST encoded MPEG-TS
  streams and is used by OBS Studio

-------------------------------------------------------------------
Tue Dec  6 16:01:30 UTC 2022 - Jan Engelhardt <jengelh@inai.de>

- Drop BuildRequire on SDL2 to break a dependency loop; with this,
  /usr/bin/ffplay is no longer built.

-------------------------------------------------------------------
Wed Nov 16 01:32:19 UTC 2022 - Alynx Zhou <alynx.zhou@suse.com>

- Add ffmpeg-CVE-2022-3964.patch: Backport from upstream to fix
  out of bounds read in update_block_in_prev_frame() (bsc#1205388).

-------------------------------------------------------------------
Sat Oct 15 17:22:52 UTC 2022 - Neal Gompa <ngompa@opensuse.org>

- Refresh Fedora OpenH264 dlopen patch and sources for OpenH264 2.3.1
  * Patch: ffmpeg-dlopen-openh264.patch
  * Source: ffmpeg-dlopen-headers.tar.xz
  * Source: ffmpeg_get_dlopen_headers.sh

-------------------------------------------------------------------
Wed Oct  5 17:00:38 UTC 2022 - Luigi Baldoni <aloisio@gmx.com>

- Enable AMF conditionally

-------------------------------------------------------------------
Mon Sep 26 18:44:55 UTC 2022 - C J <c.j@tuta.io>

- Update to release 5.1.2
  * Add more field checks, add checks against overflows,
    or outright use larger integer types.
  * avformat/dashdec: Fix crash on invalid input/ENOMEM, fix leak
  * lavc/videotoolbox: do not pass AVCodecContext to decoder
    output callback
  * lavc/pthread_frame: always transfer stashed hwaccel state
  * avcodec/arm/sbcenc: avoid callee preserved vfp registers
  * avformat/riffdec: don't unconditionally overwrite
    WAVEFORMATEXTENSIBLE layout
  * avfilter/vf_scale: overwrite the width and height expressions
    with the original values
  * lavc/pthread_frame: avoid leaving stale hwaccel state in
    worker threads

-------------------------------------------------------------------
Sun Sep  4 11:45:19 UTC 2022 - Jan Engelhardt <jengelh@inai.de>

- Update to release 5.1.1
  * avformat/asfdec_o: limit recursion depth in asf_read_unknown()
  * libavformat/iff: Check for overflow in body_end calculation
  * avformat/avidec: Prevent entity expansion attacks
  * avcodec/h263dec: Sanity check against minimal I/P frame size
  * avcodec/libvpx: fix assembling vp9 packets with alpha channel
  * avcodec/libspeexdec: Fix use of uninitialized value
  * avcodec/alac: don't fail if channels aren't set during init()
    when extradata is valid
  * avformat/mov: Check count sums in build_open_gop_key_points()
    [CVE-2022-2566] [boo#1203441]

-------------------------------------------------------------------
Tue Jul 26 18:55:46 UTC 2022 - Jan Engelhardt <jengelh@inai.de>

- Enable libjxl

-------------------------------------------------------------------
Sat Jul 23 15:29:58 UTC 2022 - Callum Farmer <gmbr3@opensuse.org>

- Update ffmpeg-chromium.patch from upstream

-------------------------------------------------------------------
Sat Jul 23 08:35:20 UTC 2022 - Jan Engelhardt <jengelh@inai.de>

- Update to release 5.1
  * AVIF image muxer support for the AV1-based image format
  * JPEG-XL image support
  * Removed the X-Video Motion Compensation (XvMC) hardware
    acceleration
  * IPFS/IPNS protocol support
  * PCM-Bluray encoder support
- Drop vmaf-trim-usr-local.patch (obsolete),
  ffmpeg-openh264-averr-on-bad-version.patch (merged)
- Add work-around-abi-break.patch

-------------------------------------------------------------------
Sat Apr  9 22:36:13 UTC 2022 - Dirk Müller <dmueller@suse.com>

- update to 5.0.1:
  * avcodec/exr: Avoid signed overflow in displayWindow
  * avcodec/diracdec: avoid signed integer overflow in global mv
  * avcodec/takdsp: Fix integer overflow in decorrelate_sf()
  * avcodec/apedec: fix a integer overflow in long_filter_high_3800()
  * avdevice/dshow: fix regression
  * avfilter/vf_subtitles: pass storage size to libass
  * avcodec/vp9_superframe_split_bsf: Don't read inexistent data
  * avcodec/vp9_superframe_split_bsf: Discard invalid zero-sized frames
  * avcodec/vp9_superframe_bsf: Check for existence of data before reading it
  * avcodec/vp9_raw_reorder_bsf: Check for existence of data before reading it
  * avformat/imf: fix packet pts, dts and muxing
  * avformat/imf: open resources only when first needed
  * avformat/imf: cosmetics
  * avformat/imf_cpl: do not use filesize when reading XML file
  * avformat/imfdec: Use proper logcontext
  * avformat/imfdec: do not use filesize when reading XML file
  * doc/utils: add missing 22.2 layout entry
  * avcodec/av1: only set the private context pix_fmt field if get_pixel_format() succeeds
  * avformat/aqtitledec: Skip unrepresentable durations
  * avformat/cafdec: Do not store empty keys in read_info_chunk()
  * avformat/mxfdec: Do not clear array in mxf_read_strong_ref_array() before writing
  * avformat/mxfdec: Check for avio_read() failure in mxf_read_strong_ref_array()
  * avformat/mxfdec: Check count in mxf_read_strong_ref_array()
  * avformat/hls: Check target_duration
  * avcodec/pixlet: Avoid signed integer overflow in scaling in filterfn()
  * avformat/matroskadec: Check pre_ns
  * avcodec/sonic: Use unsigned for predictor_k to avoid undefined behavior
  * avcodec/libuavs3d: Check ff_set_dimensions() for failure
  * avcodec/speexdec: Align some comments
  * avcodec/speexdec: Use correct doxygen comments
  * avcodec/mjpegbdec: Set buf_size
  * avformat/matroskadec: Use rounded down duration in get_cue_desc() check
  * avcodec/argo: Check packet size
  * avcodec/g729_parser: Check channels
  * avformat/avidec: Check height
  * avformat/rmdec: Better duplicate tags check
  * avformat/mov: Disallow empty sidx
  * avformat/argo_cvg:: Fix order of operations in error check in argo_cvg_write_trailer()
  * avformat/argo_asf: Fix order of operations in error check in argo_asf_write_trailer()
  * avcodec/movtextdec: add () to CMP() macro to avoid unexpected behavior
  * avformat/matroskadec: Check duration
  * avformat/mov: Corner case encryption error cleanup in mov_read_senc()
  * avcodec/jpeglsdec: Fix if( code style
  * avcodec/jpeglsdec: Check get_ur_golomb_jpegls() for error
  * avcodec/motion_est: fix indention of ff_get_best_fcode()
  * avcodec/motion_est: Fix xy indexing on range violation in ff_get_best_fcode()
  * avformat/hls: Use unsigned for iv computation
  * avcodec/jpeglsdec: Increase range for N in ls_get_code_runterm() by using unsigned
  * avformat/matroskadec: Check desc_bytes
  * avformat/utils: Fix invalid NULL pointer operation in ff_parse_key_value()
  * avformat/matroskadec: Fix infinite loop with bz decompression
  * avformat/utils: keep chapter monotonicity on chapter updates
  * avformat/mov: Check size before subtraction
  * avcodec/cfhd: Avoid signed integer overflow in coeff
  * avcodec/libdav1d: free the Dav1dData packet on dav1d_send_data() failure
  * avcodec/h264_parser: don't alter decoder private data
  * configure: link to libatomic when it's present
  * fate/ffmpeg: add missing samples dependency to fate-shortest 

-------------------------------------------------------------------
Thu Mar 10 13:37:06 UTC 2022 - Bjørn Lie <bjorn.lie@gmail.com>

- Drop pkgconfig(celt) BuildRequires and stop passing
  --enable-libcelt to configure and drop celt from enable_decoders,
  abandoned upstream for opus.
- Drop pkgconfig(libv4l2) BuildRequires and stop passing
  --enable-libv4l2 to configure, only needed very old devices and
  may cause problems for others for those needing it, use
  LD_PRELOAD pointing on libv4l2.
- Drop pkgconfig(librtmp) BuildRequires and stop passing
  conditional --enable-librtmp to configure, built-in RTMP support
  is better, and has listen mode.
- Drop bcond conditionals for libaom, srt, lv2, soxr,
  zmq, zimg and openmpt, build unconditionally for all supported
  versions of openSUSE.
- Drop pkgconfig(enca) BuildRequires: Seems unused.

-------------------------------------------------------------------
Sat Feb 19 13:26:41 UTC 2022 - Enrico Belleri <idesmi@protonmail.com>

- Use Shaderc instead of separate glslang/SPIRV-Tools for Vulkan support

-------------------------------------------------------------------
Fri Feb 18 22:32:41 UTC 2022 - Neal Gompa <ngompa@opensuse.org>

- Add patch to fix error returned with bad versions of OpenH264
  * Patch: ffmpeg-openh264-averr-on-bad-version.patch
- Enable OpenH264 as an H.264 codec via dlopen using patch from Fedora
  * Patch: ffmpeg-dlopen-openh264.patch
- Add source and script for headers for dlopening OpenH264
  * Source: ffmpeg-dlopen-headers.tar.xz
  * Source: ffmpeg_get_dlopen_headers.sh

-------------------------------------------------------------------
Wed Feb 16 18:46:55 UTC 2022 - Dominique Leuenberger <dimstar@opensuse.org>

- Disamble libsmbclient usage (can always be built with
  --with-smbclient): the usecase of ffmpeg directly accessing
  smb:// shares is quite constructed (most users will have their
  smb shares mounted).

-------------------------------------------------------------------
Sun Jan 30 20:07:03 UTC 2022 - Jan Engelhardt <jengelh@inai.de>

- Enable building with glslang. (Should enable video blending
  with GLSL.)
- Unconditionalize ffnvcodec (like vmaf already is).

-------------------------------------------------------------------
Sun Jan 16 12:09:57 UTC 2022 - Callum Farmer <gmbr3@opensuse.org>

- Add ffmpeg-chromium.patch: allows Chromium to use the now
  internalised field first_dts

-------------------------------------------------------------------
Fri Jan 14 23:16:18 UTC 2022 - Jan Engelhardt <jengelh@inai.de>

- Based on ffmpeg-4.0.spec, update to 5.0
  * New Vulkan-powered filters for video horizontal/vertical
    flipping.
  * Speex decoder.
  * Various new muxers/demuxers.
  * An AV1 low-overhead bitstream format muxer is added.
  * Swscale slice threading support.
  * New audio and video filters.
- Drop soversion.diff (for now; it may very well be reintroduced,
  depending on how 5.1 is released).
