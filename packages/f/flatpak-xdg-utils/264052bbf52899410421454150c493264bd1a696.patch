From 264052bbf52899410421454150c493264bd1a696 Mon Sep 17 00:00:00 2001
From: Simon McVittie <smcv@collabora.com>
Date: Fri, 10 Jun 2022 17:25:17 +0100
Subject: [PATCH] flatpak-spawn: Fix memory leak when receiving
 NameOwnerChanged

Signed-off-by: Simon McVittie <smcv@collabora.com>
---
 src/flatpak-spawn.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/src/flatpak-spawn.c b/src/flatpak-spawn.c
index 2bdd76d..18c0891 100644
--- a/src/flatpak-spawn.c
+++ b/src/flatpak-spawn.c
@@ -284,7 +284,7 @@ name_owner_changed (G_GNUC_UNUSED GDBusConnection *connection,
                     G_GNUC_UNUSED gpointer         user_data)
 {
   const char *name, *from, *to;
-  g_variant_get (parameters, "(sss)", &name, &from, &to);
+  g_variant_get (parameters, "(&s&s&s)", &name, &from, &to);
 
   /* Check if the service dies, then we exit, because we can't track it anymore */
   if (strcmp (name, service_bus_name) == 0 &&
