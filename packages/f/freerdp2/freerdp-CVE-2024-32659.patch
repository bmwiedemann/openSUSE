From a7f83e9e13addee21e6c3840d20fc467776fbb56 Mon Sep 17 00:00:00 2001
From: akallabeth <akallabeth@posteo.net>
Date: Sun, 21 Apr 2024 10:18:43 +0200
Subject: [PATCH] [codec,color] fix out of bound read

---
 libfreerdp/codec/color.c | 3 +++
 1 file changed, 3 insertions(+)

diff --git a/libfreerdp/codec/color.c b/libfreerdp/codec/color.c
index 00919983c..f8467c295 100644
--- a/libfreerdp/codec/color.c
+++ b/libfreerdp/codec/color.c
@@ -613,6 +613,9 @@ BOOL freerdp_image_copy(BYTE* pDstData, DWORD DstFormat, UINT32 nDstStep, UINT32
 	if (!pDstData || !pSrcData)
 		return FALSE;
 
+	if ((nWidth == 0) || (nHeight == 0))
+		return TRUE;
+
 	if (nDstStep == 0)
 		nDstStep = nWidth * GetBytesPerPixel(DstFormat);
 
-- 
2.45.0

