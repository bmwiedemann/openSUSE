From 1c5c74223179d425a1ce6dbbb6a3dd2a958b7aee Mon Sep 17 00:00:00 2001
From: akallabeth <akallabeth@posteo.net>
Date: Mon, 26 Jan 2026 10:14:08 +0100
Subject: [PATCH] [channels,audin] fix audin_server_recv_formats cleanup

---
 channels/audin/server/audin.c | 6 +-----
 1 file changed, 1 insertion(+), 5 deletions(-)

Only in freerdp-2.11.7/channels/audin/client: audin_main.c.orig
diff -urp freerdp-2.11.7.orig/channels/audin/server/audin.c freerdp-2.11.7/channels/audin/server/audin.c
--- freerdp-2.11.7.orig/channels/audin/server/audin.c	2024-04-22 04:26:59.000000000 -0500
+++ freerdp-2.11.7/channels/audin/server/audin.c	2026-02-18 15:31:34.941700297 -0600
@@ -215,7 +215,7 @@ static UINT audin_server_recv_formats(au
 
 		if (!audio_format_read(s, format))
 		{
-			audio_formats_free(audin->context.client_formats, i);
+			audio_formats_free(audin->context.client_formats, audin->context.num_client_formats);
 			audin->context.client_formats = NULL;
 			WLog_ERR(TAG, "expected length at least 18, but got %" PRIu32 "", length);
 			return ERROR_INVALID_DATA;
