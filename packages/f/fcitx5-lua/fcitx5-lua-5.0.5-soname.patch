diff -urN fcitx5-lua-5.0.5/CMakeLists.txt fcitx5-lua-5.0.5.new/CMakeLists.txt
--- fcitx5-lua-5.0.5/CMakeLists.txt	2021-05-04 23:20:57.951634200 +0800
+++ fcitx5-lua-5.0.5.new/CMakeLists.txt	2022-02-14 22:12:37.904355085 +0800
@@ -33,6 +33,27 @@
     endif()
 endif()
 
+function(_RESOLVE_LIBRARY_PATH _FILE_NAME _LIBRARY_PATH)
+    if (CMAKE_OBJDUMP)
+        execute_process (
+            COMMAND ${CMAKE_OBJDUMP} -p "${_LIBRARY_PATH}"
+            RESULT_VARIABLE STATUS
+            OUTPUT_VARIABLE OBJDUMP_RESULT
+            ERROR_QUIET
+        )
+        string(REGEX REPLACE ".*SONAME +([^ ]+)\n.*$" "\\1" SONAME_OUT "${OBJDUMP_RESULT}")
+        if (SONAME_OUT)
+            set(_FILE_NAME_OUT "${SONAME_OUT}")
+        endif ()
+    endif()
+    if (NOT _FILE_NAME_OUT)
+        get_filename_component(_FILE_NAME_OUT "${_LIBRARY_PATH}" NAME)
+    endif()
+    set(${_FILE_NAME} ${_FILE_NAME_OUT} PARENT_SCOPE)
+endfunction()
+
+_RESOLVE_LIBRARY_PATH(LUA_LIBRARY_PATH  ${LUA_LIBRARY})
+
 configure_file(config.h.in config.h)
 include_directories(${CMAKE_CURRENT_BINARY_DIR})
 add_definitions(-DFCITX_GETTEXT_DOMAIN=\"fcitx5-lua\")
diff -urN fcitx5-lua-5.0.5/config.h.in fcitx5-lua-5.0.5.new/config.h.in
--- fcitx5-lua-5.0.5/config.h.in	2020-05-17 13:02:03.974142800 +0800
+++ fcitx5-lua-5.0.5.new/config.h.in	2022-02-14 22:12:37.904355085 +0800
@@ -7,7 +7,7 @@
 #ifndef _FCITX5_LUA_CONFIG_H_
 #define _FCITX5_LUA_CONFIG_H_
 
-#cmakedefine LUA_LIBRARY "@LUA_LIBRARY@"
+#cmakedefine LUA_LIBRARY_PATH "@LUA_LIBRARY_PATH@"
 #cmakedefine USE_DLOPEN
 
 #endif // _FCITX5_LUA_CONFIG_H_
diff -urN fcitx5-lua-5.0.5/src/addonloader/luaaddonloader.h fcitx5-lua-5.0.5.new/src/addonloader/luaaddonloader.h
--- fcitx5-lua-5.0.5/src/addonloader/luaaddonloader.h	2021-03-23 08:10:19.809094400 +0800
+++ fcitx5-lua-5.0.5.new/src/addonloader/luaaddonloader.h	2022-02-14 22:22:02.031855049 +0800
@@ -22,7 +22,7 @@
     AddonInstance *load(const AddonInfo &info, AddonManager *manager) override;
 
 private:
-    Library luaLibrary_{LUA_LIBRARY};
+    Library luaLibrary_{LUA_LIBRARY_PATH};
 };
 
 class LuaAddonLoaderAddon : public AddonInstance {
