-------------------------------------------------------------------
Sat Feb  8 19:51:39 UTC 2025 - Richard Rahl <rrahl0@opensuse.org>

- update to 10.0.1:
  * Verify the ID of Forgejo Actions web endpoints belongs to the repository to
    prevent the deletion of runners or variables or the modification of
    variables
  * Enforce permissions on publicly available user or organizations projects to
    not leak information from issues and pull requests that belong to private
    repositories
  * fix(ui): display verified icon for default gpg key
  * fix: load settings for valid user and email check
  * Teach the doctor to remove orphaned two_factor with forgejo doctor check --run check-db-consistency --fix
  * fix: listing tokens must not require basic auth

-------------------------------------------------------------------
Thu Jan 16 15:16:58 UTC 2025 - Richard Rahl <rrahl0@opensuse.org>

- update to 10.0.0:
  full changelog at https://codeberg.org/forgejo/forgejo/src/branch/forgejo/release-notes-published/10.0.0.md
  * Fix and refactor markdown rendering
  * migrate TOTP secrets to keying
  * Ensure source_id parameter is not skipped when set to 0 and correctly
    filter users in /api/v1/admin/users endpoint
  * Rework user profile settings
  * Rework new repository dialog
  * Show repository size on mobile
  * Add links to commit lists in contributors graph page
  * Add copy path button to file view
  * Put issue actions in a single row on mobile
  * Don't display email in profile settings when hidden
  * Highlight user mention in comments and commit messages
  * When bleve is used for issue search, a fuzzy search now applies to each
    word instead of all of them, as if they were a phrase
  * Add search to releases page
  * Combine review requests comments
  * If you select a portion of a comment and use the 'Quote reply' feature in
    the context menu, only that portion will be quoted
  * Set "your repositories" as the default filter for org dashboards
  * Add button to create a Markdown table in a comment
  * Add a bullet symbol between author and committer
  * Added link to show all Issues/PullRequests
  * Fix Action log UI race condition that occasionally prevents logs from loading
  * Fix wiki search overflowing on wide screens
  * Move "forgot_password"-link to fix login tab order
  * Update help links on page with no workflows
  * Add Low German to list of default languages
  * i18n: Add dummy language for checking translation keys
  * Updates for translations
  * Add summary card for repos and releases
  * Implement update branch API
  * Allow changing default branch update style
  * Add sorting functionality to /api/v1/admin/users endpoint
  * Add Swift login endpoint
  * Make LFS http_client parallel within a batch
  * Improve performance of notifications page for MySQL
  * Filepath filter for code search
  * Add option to disable builtin authentication
  * Add github compatible tarball download API endpoints
  * Improve performance of allowed org repo creation query
  * Allow the actions user to login via the jwt token
  * Add a "summary card" to issues & PRs for consumption by OpenGraph clients
  * Add a doctor check to disable the "Actions" unit for mirrors
  * Make AVIF Images work with Forgejo
  * Trim spaces from repo names on form submission
  * Add new [lfs_client].BATCH_SIZE and [server].LFS_MAX_BATCH_SIZE config settings.
  * Add setting to block disposable emails
  * mermaid: Add the Kanban board diagram type.
  * mermaid: Class diagram includes a new "classBox" shape, classDef statement,
    support for styling the default class and lollipop interfaces.
  * Add DISABLE_ORGANIZATIONS_PAGE and DISABLE_CODE_PAGE settings for explore pages
  * Add branch deletion for scheduled PRs
  * The requested_reviewers data is included in more webhook events.
  * Support migrating GitHub/GitLab PR draft status.
  * Language detection in the repository learned about the following languages:
    - Java Template Engine, Noir, Cylc, iCalendar, vCard (aka. VCF: Virtual
      Contact File) and Variant Call Format (VCF), B4X, Carbon, LiveCode
      Script, Dune (OCaml build system)
  * Allow filtering pull requests by poster in the API.
  * Add support for searching users by email.
  * New mermaid flowchart shapes.
  * Code search results when using the bleve indexer are sorted by relevance.
  * Add bin to Composer Metadata.
  * Support regexp in git-grep search
  * Git notes can be modified via the API or the UI

-------------------------------------------------------------------
Fri Dec 13 05:19:57 UTC 2024 - Richard Rahl <rrahl0@opensuse.org>

- update to 9.0.3:
  * When Forgejo is configured to run the internal ssh server with
    [server].START_SSH_SERVER=true, it was possible for a registered user to
    impersonate another user
  * Revert "allow synchronizing user status from OAuth2 login providers" Fix
  * wiki search overflowing on wide screens Do not rewrite ssh keys files when
  * deleting a user without one fix: doctor fails with pq: syntax error at or
  * near "." whilst counting
    Authorization token without existing User
  * fix: Do not delete global Oauth2 applications Strict matching of allowed
  * content for sanitizer for asciicast
    and csv rendering
  * fix: remove softbreak from github legacy callout fix: correct permission
  * loading for limited organisation fix: clean up log files that no longer
  * exist fix: return correct type in GetSubModule Improve Swagger documentation
  * for user endpoints fix: normalize guessed languages from enry Show page
  * titles in wiki search results fix(test): TestGitAttributeCheckerError must
  * allow broken pipe fix: check read permissions for code owner review requests
  * fix: use better code to group UID and stopwatches fix: api repo compare with
  * commit hashes bug: correctly generate oauth2 jwt signing key
- disable gpg verification for this release

-------------------------------------------------------------------
Sat Nov 16 03:16:51 UTC 2024 - Richard Rahl <rrahl0@opensuse.org>

- update to 9.0.2:
  * it was possible to use a token sent via email for secondary email validation
    to reset the password instead. In other words, a token sent for a given
    action (registration, password reset or secondary email validation) could
    be used to perform a different action.
  * a fork of a public repository would show in the list of forks, even if its
    owner was not a public user or organization.
  * the members of an organization team with read access to a repository (e.g.
    to read issues) but no read access to the code could read the RSS or atom
    feeds which include the commit activity. Reading the RSS or atom feeds is
    now denied unless the team has read permissions on the code.
  * the tokens used when replying by email to issues or pull requests were
    weaker than the rfc2104 recommendations.
  * a registered user could modify the update frequency of any push mirror.
  * it was possible to use basic authorization (i.e. user:password) for requests
    to the API even when security keys were enrolled for a user.
  * some markup sanitation rules were not as strong as they could be.
  * when Forgejo is configured to enable instance wide search (e.g. with bleve),
    results found in the repositories of private or limited users were displayed
    to anonymous visitors.
  * fix: handle renamed dependency for cargo registry.
  * support www.github.com for migrations.
  * move forgot_password-link to fix login tab order.
  * code owners will not be mentioned when a pull request comes from a forked
    repository.
  * labels are missing in the pull request payload removing a label.
  * in a Forgejo Actions workflow, the unlabeled event type for pull requests
    was incorrectly mapped to the labeled event type.
  * when a Forgejo Actions issue or pull request workflow is triggered by an
    labeled or unlabeled event type, it misses information about the label added
    or removed. It is now available in the label data member of the event payload.
  * pull request workflow must always update the head SHA commit status.
  * fix git-grep for code search when git version is below 2.38.

-------------------------------------------------------------------
Mon Oct 28 17:09:05 UTC 2024 - Richard Rahl <rrahl0@opensuse.org>

- update to 9.0.1:
  * Forgejo generates a token which is used to authenticate web endpoints that
    are only meant to be used internally, for instance when the SSH daemon is
    used to push a commit with Git. The verification of this token was not done
    in constant time and was susceptible to timing attacks.
  * Because of a missing permission check, the branch used to propose a pull
    request to a repository can always be deleted by the user performing the merge.
  * Fix boolean inputs in workflow_dispatch
  * package arch database not updating when uploading "any" architecture
  * correct SQL query for active issues
  * specify default value for EXPLORE_DEFAULT_SORT.
  * fix: Add recentupdated as recognized sort option
  * Update dependency mermaid to v11.3.0 (v9.0/forgejo)
  * Always update expiration time when creating an artifact
  * Update scheduled tasks even if changes are pushed by "ActionsUser"
  * Fix disable 2fa bug
  * i18n: update of translations from Codeberg Translate
  * fix: make branch protection work for new branches
  * link to security policy in security.txt
  * fix: don't show truncated comments in RSS/Atom feeds
  * fix: typo on releases for source code downloads
  * Revert "add gap between branch dropdown and PR button"
  * fix: Don't double escape delete branch text
  * fix: Add server logging for OAuth server errors
  * forgejo-cli is now a symlink and cannot be used for sanity checks
  * fix: correct documentation for non 200 responses in swagger
- forgejo is since 9.0.0 GPL-3.0-or-later

-------------------------------------------------------------------
Thu Oct 17 14:52:33 UTC 2024 - Richard Rahl <rrahl0@opensuse.org>

- update to 9.0.0:
  * OIDC integrations that POST to /login/oauth/introspect without sending HTTP
    basic authentication will now fail
  * The public scope of an application token does not filter out private repositories,
    organizations or packages in some cases
  * Drop support to build Forgejo with the optional go-git Git backend
  * Set created_by as the default filter for /issues and /pulls
  * Set fuzzy as default for issue search.
  * Improve commit graph layout.
  * Add support for iconify icons.
  * Allow multi-line relationship labels.
  * Adds architecture diagrams which allows users to show relations between services.
  * Improve diffs generated by Forgejo.
  * Add rel="nofollow" to in-list labels.
  * Distinguish between new tags, releases and pre-releases on activity page.
  * Highlighted code search results.
  * Refactor repo migration items.
  * Add package counter to repo/user/org overview pages.
  * Replace vue-bar-graph with chart.js.
  * Add more emoji and code block rendering in issues.
  * Bad spacing on new release page.
  * Milestone assignment in new issue.
  * git-grep: ensure bounded default for MatchesPerFile.
  * Incorrect go to citation button.
  * Incorrect HTMX support for profile card.
  * Accessibility keyboard support for test actions.
  * Update pull request icons.
  * "Assign to me" button on PR and Issues.
  * Add architecture-specific removal support for arch package.
  * Add bin to Composer Metadata.
  * Internationalization user experience improvements on team permissions and issue closing.
  * Support allowed hosts for migrations to work with proxy.
  * Trivial default quota configuration.
  * Language detection in the repository learned about the following languages:
    Luau, BQN, Cron table, NMODL, Pkl, templ, FIRRTL, Julia REPL, Caddyfile.
  * The following extensions or filenames in a repository are associated with the matching language:
    .sublime-color-scheme, MODULE.bazel.lock, Cargo.toml.orig, tsx, justfile, .zig.zon, .envrc.
  * Remove support for Couchbase as a session provider; it instead will now fallback to the file provider.
  * git-grep: allow searching for words with initial dashes.
  * git-grep: skip binary files.
  * Forgejo Actions logs are compressed by default.
  * Support grouping by any path for arch package.
  * Remove expensive nearest branch calculatations ($.BranchName) from commit diff view
  * Allow push mirrors to use a SSH key as the authentication method for the mirroring action
    instead of using user:password authentication.
  * Use UTC as a timezone when running scheduled actions tasks.
  * The actions logs older than [actions].LOG_RETENTION_DAYS days are removed (the default is 365).
  * Add signature support for the RPM module.
  * Allow color and background-color style properties for table cells.
  * support pull_request_target event for commit status.
  * support delete user email in admin panel.
  * Notify owner about TOTP enrollment.
  * Email notifications are now sent when account security changes are made: password changed
  * Enable INVALIDATE_REFRESH_TOKENS.
  * Sort milestones by name by default instead of the due date.
  * allow synchronizing user status from OAuth2 login providers.
  * add option to change mail from user display name.
  * issue Templates: add option to have dropdown printed list.
  * the default setting attachment.ALLOWED_TYPES was adjusted to allow .webp attachments in issues
  * Convert milestone to HTMX.
  * Use the full user name in emails to address the recipient, when available.
  * Enhancing OAuth2 Provider with Granular Scopes for Resource Access.
  * Display URLs in .sh-session files.
  * The caching of contributor stats was improved
  * Add support for LFS server implementations which have batch API responses in an older/deprecated schema.
  * Forgejo Actions artifacts support range requests to resume a download.
  * Added the foundations of a flexible, configurable quota system.
  * Logs journald integration.
  * A release asset can be a URL instead of a file.
  * Don't allow owner team with incorrect unit access (includes doctor fix).
  * Schedule workflows are canceled when pushing to the default branch.
  * Incorrect Discord webhook JSON for issue events.
  * wrong last modify time.
  * Repo Activity: count new issues that were closed.
  * incorrect /tokens API.
  * Do not escape relative path in RPM primary index.
  * Handle invalid target when creating releases using API.
  * /repos/{owner}/{repo}/pulls/{index}/files endpoint not populating previous_filename.
  * Improve textarea paste.
  * Handle "close" actionable references for manual merges.
  * Team admins are allowed to search team members via the API.
  * Don't return 500 if mirror url contains special chars.
  * Agit automerge is not working properly.
  * Improve the display of PR & issue short links.
  * Migrate scoped GitLab labels as scoped Forgejo labels.
  * /repos/{owner}/{repo}/pulls/{index} requested_reviewers contains null for teams.
  * Validate title length when updating an issue.
  * Hide the "Details" link of commit status when the user cannot access actions.
  * Runner registration token via API is broken for repo level runners.
  * Deleted projects causes bad popover text on issues.
  * Distinguish LFS object errors to ignore missing objects during migration.
  * When viewing the revision history of wiki pages, the pagination links are broken
  * Also rename the head branch of open pull requests when renaming a branch.
  * add return type to GetRawFileOrLFS and GetRawFile.
  * properly filter issue list given no assignees filter.
  * Cron task to cleanup dangling container images with version sha256:*.
  * Allow updates to runners' secrets.
  * Do not fire webhook notifications for updates and deletions of comments that are part of an ongoing review
  * Fixed social media previews for links to wiki pages.
  * Updated translations
  * Improve the clarity of confirmation in email messages.
  * Fine tune language for units.
  * Improve translation strings for webhook events.
  * Allow different translations of creation links and titles.
  * English strings improvements for internationalization.

-------------------------------------------------------------------
Wed Oct  9 13:22:28 UTC 2024 - Richard Rahl <rrahl0@opensuse.org>

- add dont-strip.patch for not stripping the main binary (so we can
  create debuginfo package)

-------------------------------------------------------------------
Wed Oct  9 05:46:17 UTC 2024 - Tuukka Pasanen <tuukka.pasanen@ilmi.fi>

- Add package environment-to-ini for OCI containers

-------------------------------------------------------------------
Tue Sep 10 07:49:29 UTC 2024 - Richard Rahl <rrahl0@opensuse.org>

- update to 8.0.3:
  * replace v-html with v-text in branch search inputbox for XSS protection
  * mitigate CVE-2024-43788 (upgrade webpack)
  * Translation updates

-------------------------------------------------------------------
Thu Aug 29 16:06:05 UTC 2024 - Richard Rahl <rrahl0@opensuse.org>

- update to 8.0.2:
  * Overflow for images on project cards.
  * Allow unreacting from comment popover.
  * The scope of application tokens is not verified when writing
    containers or Conan packages.
  * When a Forgejo Actions workflow includes a workflow_dispatch with
    inputs and other events (for instance push), it is silently ignored
    because of a parsing error.
  * Automerge on AGit pull requests is ignored.
  * Show lock owner instead of repo owner on LFS setting page.
  * Render plain text file if the LFS object doesn't exist.
  * Panic of ssh public key page after deletion of an auth source.
  * Add missing repository type filter parameters to pager.
  * Reverted a change from Gitea which prevented allow/reject reviews on
    merged or closed PRs. This change was not considered by the Forgejo
    UI team and there is a consensus that it feels like a regression,
    since it interferes with workflows known to be used by Forgejo users
    without providing a tangible benefit.
  * Run full PR checks on AGit push.
  * Updated translations

-------------------------------------------------------------------
Fri Aug  9 21:25:45 UTC 2024 - Richard Rahl <rrahl0@opensuse.org>

- update to 8.0.1:
  * A change introduced in Forgejo v1.21 allows a Forgejo user with write
    permission on a repository description to inject a client-side script into
    the web page viewed by the visitor. This XSS allows for href in anchor
    elements to be set to a javascript: URI in the repository description,
    which will execute the specified script upon clicking (and not upon
    loading). AllowStandardURLs is now called for the repository description
    policy, which ensures that URIs in anchor elements are mailto:, http:// 
    or https:// and thereby disallowing the javascript: URI.
  * Do not include trailing EOL character when counting lines
  * Add background to reactions on hover
  * Prevent uppercase in header of dashboard context selector
  * Fix page layout in admin settings
  * Ensure all filters are persistent in issue filters
  * Allow 4 charachter SHA in /src/commit
- update to 8.0.0:
  full changelog at https://codeberg.org/forgejo/forgejo/src/branch/forgejo/RELEASE-NOTES.md#8-0-0

  Highlights:
    * remove Microsoft SQL Server support
    * introduce a branch/tag dropdown in the code search page
    * added support for fuzzy searching in /user/repo/issues and /user/repo/pulls
    * API endpoints for managing tag protection.
    * add Reviewed-on and Reviewed-by variables to the merge template
    * display an error when an issue comment is edited simultaneously by
      two users instead of silently overriding one of them
    * when installing Forgejo through the built-in installer, open
      (self-) registration is now disabled by default
    * add support for the reddit and Hubspot OAuth providers.
    * CERT management was improved when ENABLE_ACME=true
    * language detection in the repository got additional languages
    * add an immutable tarball link to archive download headers for Nix
    * Show the AGit label on merged pull requests
- fix apparmor profile
- set sqlite3 as the default installation database
- add a rule for firewalld


-------------------------------------------------------------------
Fri Aug  9 18:13:59 UTC 2024 - Johannes Kastl <opensuse_buildservice@ojkastl.de>

- update to 7.0.7:
  This is a security release. See the documentation for more
  information on the upgrade procedure.
  * Security
    - A change introduced in Forgejo v1.21 allows a Forgejo user
      with write permission on a repository description to inject a
      client-side script into the web page viewed by the visitor.
      This XSS allows for href in anchor elements to be set to a
      javascript: URI in the repository description, which will
      execute the specified script upon clicking (and not upon
      loading). AllowStandardURLs is now called for the repository
      description policy, which ensures that URIs in anchor
      elements are mailto:, http:// or https:// and thereby
      disallowing the javascript: URI.
  * Bug fixes
    - PR (backported): disallow javascript: URI in the repository
      description
  * Localization
    - PR (backported): i18n: backport of #4568 #4668 and #4783 to
      v7

-------------------------------------------------------------------
Thu Aug  1 10:50:53 UTC 2024 - Johannes Kastl <opensuse_buildservice@ojkastl.de>

- update to 7.0.6:
  * Two frontend features were removed because a license
    incompatibility was discovered. Read more in the companion blog
    post.
    - PR (backported from): Mermaid rendering: %%{init:
      {"flowchart": {"defaultRenderer": "elk"}} }%% will now fail
      because ELK is no longer included.
    - PR (backported from): Repository citation: Removed the
      ability to export citations in APA format.
  * User Interface bug fixes
    - PR (backported from): Replace vue-bar-graph with chart.js
    - PR (backported from): Show AGit label on merged PR
    - PR (backported from): Fix mobile UI for organisation creation
  * Bug fixes
    - PR (backported from): fix(api): issue state change is not
      idempotent
    - PR (backported from): Reserve the devtest username
    - PR (backported from): fix(actions): no edited event triggered
      when a title is changed
    - PR (backported from): Load attachments for
      /issues/comments/{id}
    - PR (backported from): When searching for users, page the
      results by default, and respect the default paging limits
    - PR (backported from): the "View command line instructions"
      link in pull requests and the "Copy content" button in file
      editor are not accessible
    - PR (backported from): Use correct SHA in GetCommitPullRequest
  * Localization
    - PR (backported from): Update of translations from Weblate
    - PR: Update of translations from Weblate
    - PR (backported from): 3 translation updates from Weblate - PR
      1, PR 2, PR 3

-------------------------------------------------------------------
Mon Jul 15 06:28:18 UTC 2024 - Johannes Kastl <opensuse_buildservice@ojkastl.de>

- fix typo Environemnt in forgejo.service

-------------------------------------------------------------------
Fri Jul  5 07:13:38 UTC 2024 - Richard Rahl <rrahl0@opensuse.org>

- update to 7.0.5:
  * Fixed: CVE-2024-24791 - GO-2024-2963 Denial of service due to improper 
    100-continue handling in net/http
  * Fixed: authentication Source Administration page wrongfully handles the "Custom URLs Instead 
    of Default URLs" checkbox (missing checkbox, irrelevant fields).
  * Fixed: git push to an adopted repository fails.
  * Fixed: markdown doesn't render math within brackets
  * Fixed: selecting the "No Project" filter in the issue/pull request list has no effect
  * Fixed: error 500 when processing crafted TIFF files.
  * Fixed: wrong placeholder text in the form for adding repository collaborator.

-------------------------------------------------------------------
Sun Jun 16 12:52:27 UTC 2024 - Richard Rahl <rrahl0@disroot.org>

- update to 7.0.4:
  * Fixed: CVE-2024-24789: the archive/zip package's handling of certain types
    of invalid zip files differs from the behavior of most zip implementations.
    This misalignment could be exploited to create an zip file with contents that
    vary depending on the implementation reading the file.
  * the OAuth2 implementation does not always require authentication for public
    clients, a requirement of RFC 6749 Section 10.2
  * forgejo migrate-storage --type actions-artifacts always fails because it picks the wrong path.
  * avatar files can be found in storage while they do not exist in the database.
  * repository admins are always denied the right to force merge and instance admins
    are subject to restrictions to merge that must only apply to repository admins.
  * non conformance with the Nix tarball fetcher immutable link protocol.
  * migrated activities (such as reviews) are mapped to the user who initiated the
    migration rather than the Ghost user, if the external user cannot be mapped to a
    local one. This mapping mismatch leads to internal server errors in some cases.
  *  a v7.0.0 regression causes [admin].SEND_NOTIFICATION_EMAIL_ON_NEW_USER=true to always be ignored.
  * using a subquery for user deletion is a performance bottleneck when using mariadb 10
    because only mariadb 11 takes advantage of the available index.
  * a v7.0.3 regression causes the expanding diffs in pull requests to fail with a 404 error.
  * SourceHut Builds webhook fail when the triggers field is used.
  * the label list rendering in the issue and pull request timeline is displayed on
    multiple lines instead of a single one.
  * Git hooks of this repository seem to be broken." warning when pushing more than one branch at a time.
  * automerge does not happen when the approval count reaches the required threshold.
  * the FORCE_PRIVATE=true setting is not consistently enforced.
  * CSRF validation errors when OAuth is not enabled.
  * headlines in rendered org-mode do not have a margin on the top

-------------------------------------------------------------------
Wed May 22 20:41:58 UTC 2024 - Richard Rahl <rrahl0@disroot.org>

- update to 7.0.3:
  * CVE-2024-24788: a malformed DNS message in response to a query can
    cause the lookup functions to get stuck in an infinite loop
  * backticks in mermaid block diagram labels are not sanitized properly
  * migration of a repository from gogs fails when it is hosted at a subpath.
  * when creating an OAuth2 application the redirect URLs are not enforced to
    be mandatory
  * the API incorrectly excludes repositories where code is not enabled
  * "Allow edits from maintainers" cannot be modified via the pull request web UI
  * repository activity feeds (including RSS and Atom feeds) contain
    repeated activities
  * uploading maven packages with metadata being uploaded separately will fail
  * the mail notification sent about commits pushed to pull requests are empty
  * inline emails attachments are not properly handled when commenting on an
    issue via email
  * the links to .zip and tar.gz on the tag list web UI fail
  * expanding code diff while previewing a pull request before it is created fails
  * the CLI is not able to migrate Forgejo Actions artifacts
  * when adopting a repository, the default branch is not taken into account
  * when using reverse proxy authentication, logout will not be taken into
    account when immediately trying to login afterwards
  * pushing to the master branch of a sha256 repository fails
  * a very long project column name will make the action menu inaccessible
  * a useless error is displayed when the title of a merged pull request is
    modified
  * workflow badges are not working for workflows that are not running on push
    (such as scheduled workflows, and ones that run on tags and pull requests)

-------------------------------------------------------------------
Fri May  3 00:35:37 UTC 2024 - Richard Rahl <rrahl0@disroot.org>

- update to 7.0.2:
  * regression where subscribing to or unsubscribing from an issue in a
    repository with no code produced an internal server error.
  * regression makes all the refs sent in Gitea webhooks to be full refs and
    might break Woodpecker CI pipelines triggered on tag (CI_COMMIT_TAG
    contained the full ref). This issue has been fixed in the main branch of
    Woodpecker CI as well.
  *  the webhook branch filter wrongly applied the match on the full ref for
     branch creation and deletion (wrongly skipping events).
  * toggling the WIP state of a pull request is possible from the sidebar,
    but not from the footer.
  * when mentioning a user, the markup post-processor does not handle the case
    where the mentioned user does not exist: it tries to skip to the next node,
    which in turn, ended up skipping the rest of the line.
  * excessive and unnecessary database queries when a user with no repositories
    is viewing their dashboard.
  * duplicate status check contexts show in the branch protection settings.
  * profile info fails to render german singular translation.
  * inline attachments of incoming emails (as they occur for example with Apple
    Mail) are not attached to comments.

-------------------------------------------------------------------
Sat Apr 27 14:53:09 UTC 2024 - Richard Rahl <rrahl0@disroot.org>

- update to 7.0.1:
  * LFS data corruption when running the forgejo doctor check --fix CLI command
    or setting [cron.gc_lfs].ENABLED=true (the default is false)
  * non backward compatible change in the forgejo admin user create CLI command
  * error 500 because of an incorrect evaluation of the template when visiting
    the LFS settings of a repository
  * GET /repos/{owner}/{name} API endpoint always returns an empty string for
    the object_format_name field
  * fuzzy search may fail with bleve

-------------------------------------------------------------------
Thu Apr 25 02:27:22 UTC 2024 - Richard Rahl <rrahl0@disroot.org>

- update to 7.0.0:
  This is only an excerpt from the full changelog, which you can find
  in your RELEASE-NOTES.md or at
  https://codeberg.org/forgejo/forgejo/src/branch/forgejo/RELEASE-NOTES.md#7-0-0
  * MySQL 8.0 or PostgreSQL 12 are the minimum supported versions.
    The database must be migrated before upgrading.
    The requirements regarding SQLite did not change.
  * The per_page parameter is no longer a synonym for limit in the
    /repos/{owner}/{repo}/releases API endpoint.
  * The date format of the created and last_update fields of the 
    /repos/{owner}/{repo}/push_mirrors and /repos/{owner}/{repo}/push_mirrors
    API endpoint changed to be timestamps instead of numbers.
  * Labels used by pprof endpoint have been changed
  * The fogejo admin user create CLI command requires a password change
    by default when creating the first user

-------------------------------------------------------------------
Sat Apr 20 12:39:56 UTC 2024 - Richard Rahl <rrahl0@disroot.org>

- update to 1.21.11-1:
  * error 500 on tag creation when a workflow exists

- update to 1.21.11-0:
  * Fixed a privilege escalation through git push options that
    allows any user to change the visibility of any repository they can see,
    regardless of their level of access.
  * Fixed a bug that allows user-supplied, non-sandboxed JavaScript to be run
    from the same domain as the forge, via
    /{owner}/{repo}/render/branch/{branch}/{filename} URLs.
  * Close file in upload function
  * Prevent registering runners for deleted repositories.
    Prevents 500 Internal Server Error in admin interface.
  * More reliable pagination support when migrating from gitbucket
  * Fix automerge when used with actions

- fix apparmor profile

-------------------------------------------------------------------
Fri Apr  5 18:39:07 UTC 2024 - Richard Rahl <rrahl0@proton.me>

- update to 1.21.10-0:
  * CVE-2023-45288 which permits an attacker to cause an HTTP/2 endpoint to
    read arbitrary amounts of header data
  * Fix to not remove repository avatars when the doctor runs with --fix
    on the repository archives.
  * Detect protected branch on branch rename.
  * Don't delete inactive emails explicitly.
  * Fix user interface when a review is deleted without refreshing.
  * Fix paths when finding files via the web interface that were not escaped.
  * Respect DEFAULT_ORG_MEMBER_VISIBLE setting when adding creator to org.
  * Fix duplicate migrated milestones.
  * Fix inline math blocks can't be preceeded/followed by alphanumerical
    characters.

-------------------------------------------------------------------
Thu Mar 28 06:58:20 UTC 2024 - Richard Rahl <rrahl0@proton.me>

- increase golang dep to 1.22, to imitate the CI/CD of forgejo
- revise how the apparmor package gets build + add selinux

-------------------------------------------------------------------
Sat Mar 23 21:21:28 UTC 2024 - Richard Rahl <user@localhost>

- update to 1.21.8-0:
  * Fix /api/v1/{owner}/{repo}/issue_templates which was always failing with a
    500 error.
  * Prevent error 500 on /user/settings/security when SignedUser has a linked
    account from a deactivated authentication source.
  * Fix error 500 when pushing release to an empty repo.
  * Fix incorrect rendering csv file when file size is larger than UI.CSV.MaxFileSize.
  * Fix error 500 when deleting account with incorrect password or unsupported login type.
  * handle user-defined name anchors like [Link](#link) linking to <a name="link"></a>Link.
  * Use correct head commit for CODEOWNER.
  * Fix manual merge button.
  * Make meilisearch do exact search for issues.
  * Fix PR creation via api between branches of same repo with head field namespaced.

-------------------------------------------------------------------
Fri Mar  8 07:35:29 UTC 2024 - Richard Rahl <rrahl0@proton.me>

- add apparmor profile leeched off of the gitea packaging

- update to 1.21.7-0:
  * Fix tarball/zipball download bug.
  * Ensure HasIssueContentHistory takes into account comment_id.
  * The google.golang.org/protobuf module was bumped to version v1.33.0 to fix
    a bug in the google.golang.org/protobuf/encoding/protojson package which
    could cause the Unmarshal function to enter an infinite loop when handling
    some invalid inputs

-------------------------------------------------------------------
Fri Feb  9 10:07:58 UTC 2024 - Richard Rahl <rrahl0@proton.me>

- initial packaging
