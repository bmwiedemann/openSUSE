From 28c841380880fb95f3096c42dc89fa0487504a45 Mon Sep 17 00:00:00 2001
From: Hannes Reinecke <hare@suse.de>
Date: Tue, 13 May 2014 09:44:17 +0200
Subject: fipvlan: fixup return value on error

fipvlan should return 1 on error or ENODEV (=19) if no interfaces
were found.

Signed-off-by: Hannes Reinecke <hare@suse.de>
---
 fipvlan.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/fipvlan.c b/fipvlan.c
index 2059276..a8d18b7 100644
--- a/fipvlan.c
+++ b/fipvlan.c
@@ -981,7 +981,7 @@ int main(int argc, char **argv)
 
 	ns = rtnl_socket(RTMGRP_LINK);
 	if (ns < 0) {
-		rc = ns;
+		rc = 1;
 		goto ns_err;
 	}
 	pfd_add(ns);
@@ -1001,7 +1001,7 @@ int main(int argc, char **argv)
 				    "no interfaces to perform discovery on");
 		else
 			FIP_LOG("no interfaces to perform discovery on");
-		exit(1);
+		exit(ENODEV);
 	}
 
 	do_vlan_discovery();
-- 
2.6.6

