From a82e555c0fdd07a8038696b740207fd8943cd65c Mon Sep 17 00:00:00 2001
From: Lipu Fei <lipu.fei815@gmail.com>
Date: Thu, 8 Aug 2019 13:29:15 +0200
Subject: [PATCH 2/2] Fix Python3_SITEARCH for old cmake

---
 cmake/FindSIP.cmake | 13 +++++++++++++
 1 file changed, 13 insertions(+)

diff --git a/cmake/FindSIP.cmake b/cmake/FindSIP.cmake
index 3ca9a9f..815a16d 100644
--- a/cmake/FindSIP.cmake
+++ b/cmake/FindSIP.cmake
@@ -48,6 +48,19 @@ if(${CMAKE_VERSION} VERSION_LESS 3.12)
     else()
         message(FATAL_ERROR "Failed to get Python3_SITELIB. Error: ${_process_output}")
     endif()
+
+    execute_process(
+        COMMAND ${Python3_EXECUTABLE} -c
+                "import distutils.sysconfig; print(distutils.sysconfig.get_python_lib(plat_specific=True,standard_lib=False))"
+        RESULT_VARIABLE _process_status
+        OUTPUT_VARIABLE _process_output
+        OUTPUT_STRIP_TRAILING_WHITESPACE
+    )
+    if(${_process_status} EQUAL 0)
+        string(STRIP ${_process_output} Python3_SITEARCH)
+    else()
+        message(FATAL_ERROR "Failed to get Python3_SITEARCH. Error: ${_process_output}")
+    endif()
 else()
     # Use FindPython3 for CMake >=3.12
     find_package(Python3 3.4 REQUIRED COMPONENTS Interpreter Development)
-- 
2.23.0

