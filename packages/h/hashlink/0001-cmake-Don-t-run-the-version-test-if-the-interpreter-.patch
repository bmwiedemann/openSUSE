From 0bcdfac6782485dd8b3ba218e9f5b0e3b1bfe58f Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Jaime=20Marqui=CC=81nez=20Ferra=CC=81ndiz?=
 <jaime.marquinez.ferrandiz@fastmail.net>
Date: Sat, 21 May 2022 13:55:11 +0200
Subject: [PATCH] cmake: Don't run the version test if the interpreter is not
 enabled
Upstream: submitted
References: gh#HaxeFoundation/hashlink#521

---
 CMakeLists.txt | 14 +++++++-------
 1 file changed, 7 insertions(+), 7 deletions(-)

diff --git a/CMakeLists.txt b/CMakeLists.txt
index e073af1..77c7c46 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -292,6 +292,13 @@ if(BUILD_TESTING)
         add_test(NAME uvsample.hl
             COMMAND hl ${CMAKE_RUNTIME_OUTPUT_DIRECTORY}/test/uvsample.hl
         )
+        add_test(NAME version
+            COMMAND hl --version
+        )
+        set_tests_properties(version
+            PROPERTIES
+            PASS_REGULAR_EXPRESSION "${HL_VERSION}"
+        )
     endif()
     add_test(NAME hello
         COMMAND hello
@@ -302,13 +309,6 @@ if(BUILD_TESTING)
     add_test(NAME uvsample
         COMMAND uvsample
     )
-    add_test(NAME version
-        COMMAND hl --version
-    )
-    set_tests_properties(version
-        PROPERTIES
-        PASS_REGULAR_EXPRESSION "${HL_VERSION}"
-    )
 
 endif()
 
-- 
2.36.1

