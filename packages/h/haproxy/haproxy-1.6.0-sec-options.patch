commit 88413472b09e2ecd4ad2b4a00992184c14d5723c
Author: Kristoffer Gronlund <kgronlund@suse.com>
Date:   Mon Jun 17 13:00:08 2019 +0000

    SUSE: Makefile sec options

diff --git a/Makefile b/Makefile
index 33fa6338..3777ad6d 100644
--- a/Makefile
+++ b/Makefile
@@ -675,6 +675,35 @@ endif
 endif
 endif
 
+# PIE
+ifneq ($(USE_PIE),)
+OPTIONS_CFLAGS  += -DUSE_PIE
+BUILD_OPTIONS   += $(call ignore_implicit,USE_PIE)
+OPTIONS_LDFLAGS += -pie
+# still need to figure out how to express this conditional in the makefile
+# %ifarch s390 s390x %sparc
+# PIEFLAGS="-fPIE"
+# %else
+# PIEFLAGS="-fpie"
+# %endif
+# PIE_FLAGS.s390 = -fPIE
+# PIE_FLAGS.i386 = -fpie
+# SEC_FLAGS     += $(PIE_FLAGS.$(ARCH))
+OPTIONS_CFLAGS  += -fpie
+endif
+
+ifneq ($(USE_STACKPROTECTOR),)
+OPTIONS_CFLAGS  += -DUSE_STACKPROTECTOR
+BUILD_OPTIONS   += $(call ignore_implicit,USE_STACKPROTECTOR)
+OPTIONS_CFLAGS  += -fstack-protector
+endif
+
+ifneq ($(USE_RELRO_NOW),)
+OPTIONS_CFLAGS  += -DUSE_RELRO_NOW
+BUILD_OPTIONS   += $(call ignore_implicit,USE_RELRO_NOW)
+OPTIONS_LDFLAGS += -Wl,-z,relro,-z,now
+endif
+
 # This one can be changed to look for ebtree files in an external directory
 EBTREE_DIR := ebtree
 
