From: Thomas Andrejak <thomas.andrejak@gmail.com>
Date: 2017-10-04 07:00:00 +0100
References: http://prelude-siem.org/issues/867
Upstream: submitted
Subject: Fix undefined non weak symbol

--- ./bindings/c++/Makefile.in	2016-09-15 08:59:47.230000884 +0200
+++ ./bindings/c++/Makefile.in.n	2017-01-10 22:40:52.430934642 +0100
@@ -986,7 +986,7 @@
 @HAVE_EASY_BINDINGS_TRUE@lib_LTLIBRARIES = libpreludedbcpp.la
 @HAVE_EASY_BINDINGS_TRUE@libpreludedbcpp_ladir = ${prefix}/lib
 @HAVE_EASY_BINDINGS_TRUE@libpreludedbcpp_la_SOURCES = preludedb.cxx preludedb-sql.cxx preludedb-error.cxx
-@HAVE_EASY_BINDINGS_TRUE@libpreludedbcpp_la_LDFLAGS = -no-undefined -version-info @LIBPRELUDEDBCPP_SONAME@
+@HAVE_EASY_BINDINGS_TRUE@libpreludedbcpp_la_LDFLAGS = -no-undefined -version-info @LIBPRELUDEDBCPP_SONAME@ @LIBPRELUDE_LDFLAGS@ @LIBPRELUDECPP_LDFLAGS@ 
 @HAVE_EASY_BINDINGS_TRUE@libpreludedbcpp_la_LIBADD = $(top_builddir)/src/.libs/libpreludedb.la
 @HAVE_EASY_BINDINGS_TRUE@libpreludedbcpp_la_CPPFLAGS = -I$(top_builddir) -I$(top_builddir)/src/include -I$(top_srcdir)/src/include -I$(top_builddir)/bindings/c++/include -I$(top_srcdir)/bindings/c++/include @LIBPRELUDE_CFLAGS@
 all: all-recursive
--- ./configure	2016-09-15 08:59:45.293000884 +0200
+++ ./configure	2017-01-11 07:17:38.116104467 +0100
@@ -1450,6 +1450,7 @@
 LIBPRELUDE_PREFIX
 LIBPRELUDE_LIBS
 LIBPRELUDE_LDFLAGS
+LIBPRELUDECPP_LDFLAGS
 LIBPRELUDE_PTHREAD_CFLAGS
 LIBPRELUDE_CFLAGS
 LIBPRELUDE_CONFIG
@@ -17062,6 +17063,7 @@
   else
     LIBPRELUDE_CFLAGS=`$LIBPRELUDE_CONFIG $libprelude_config_args --cflags`
     LIBPRELUDE_LDFLAGS=`$LIBPRELUDE_CONFIG $libprelude_config_args --ldflags`
+    LIBPRELUDECPP_LDFLAGS='-lpreludecpp'
     LIBPRELUDE_LIBS=`$LIBPRELUDE_CONFIG $libprelude_config_args --libs`
     LIBPRELUDE_PREFIX=`$LIBPRELUDE_CONFIG $libprelude_config_args --prefix`
     LIBPRELUDE_CONFIG_PREFIX=`$LIBPRELUDE_CONFIG $libprelude_config_args --config-prefix`
