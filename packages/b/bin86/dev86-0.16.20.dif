Index: Makefile
===================================================================
--- Makefile.orig	2011-01-31 14:05:24.200314716 +0100
+++ Makefile	2011-01-31 14:05:43.854324546 +0100
@@ -18,7 +18,7 @@
 INCLDIR= $(PREFIX)/lib/bcc
 ASLDDIR= $(BINDIR)
 MANDIR=	 $(PREFIX)/man
-CFLAGS=  -O
+CFLAGS=  -O2 -fno-strength-reduce
 IFDEFNAME= ifdef
 
 # Some makes take the last of a list as the default ...
Index: ar/ar.c
===================================================================
--- ar/ar.c.orig	2011-01-31 14:05:24.200314716 +0100
+++ ar/ar.c	2011-01-31 14:05:43.855324398 +0100
@@ -500,7 +500,7 @@ main (argc, argv)
 	break;
 
     default:
-	usage ("invalid operation %d", operation);
+	usage ("invalid operation %d", (char *) operation);
     }
 
   exit (0);
@@ -2003,8 +2003,7 @@ Usage: %s [d|m|p|q|r|t|x [[abi [position
 /* Print error message and exit.  */
 
 void
-fatal (s1, s2)
-     char *s1, *s2;
+fatal (char *s1, char *s2)
 {
   error (s1, s2);
   exit (1);
Index: bcc/bcc.c
===================================================================
--- bcc/bcc.c.orig	2011-01-31 14:05:24.200314716 +0100
+++ bcc/bcc.c	2011-01-31 14:05:43.855324398 +0100
@@ -600,9 +600,13 @@ void
 command_reset()
 {
 #ifndef MAXPATHLEN
-#define MAXPATHLEN 1024
+#define MAXPATHLEN 4096
 #endif
+#ifdef PATH_MAX
+   char buf[PATH_MAX];
+#else
    char buf[MAXPATHLEN];
+#endif
    char ** prefix;
    char * saved_cmd;
 
Index: bcc/dbprintf.c
===================================================================
--- bcc/dbprintf.c.orig	2011-01-31 14:05:24.200314716 +0100
+++ bcc/dbprintf.c	2011-01-31 14:05:43.856314460 +0100
@@ -1,6 +1,7 @@
 
 #include <sys/types.h>
 #include <fcntl.h>
+#include <string.h>
 
 #if defined(__STDC__) && !defined(__FIRST_ARG_IN_AX__)
 #include <stdarg.h>
Index: bootblocks/Makefile
===================================================================
--- bootblocks/Makefile.orig	2011-01-31 14:05:24.200314716 +0100
+++ bootblocks/Makefile	2011-01-31 14:05:43.856314460 +0100
@@ -42,7 +42,7 @@
        freedosboot.zip freedos.h
 
 install: makeboot
-	install -m 755 -s makeboot $(DIST)$(PREFIX)/bin/makeboot
+	install -m 755 makeboot $(DIST)$(PREFIX)/bin/makeboot
 
 monitor.com: $(MOBJ)
 	$(CC) $(CFLAGS) $(LDFLAGS) $(MONDEFS) -d $(MOBJ) -o monitor.com -M > monitor.sym
Index: dis88/Makefile
===================================================================
--- dis88/Makefile.orig	2011-01-31 14:05:24.201314489 +0100
+++ dis88/Makefile	2011-01-31 14:05:43.886623617 +0100
@@ -28,6 +28,7 @@
 CFLAGS=-O
 LDFLAGS=
 PREFIX=/usr
+MANDIR=$(PREFIX)/man
 
 OBJ = disrel.o dismain.o distabs.o dishand.o disfp.o
 
@@ -37,8 +38,8 @@ dis88:	$(OBJ)
 	$(CC) $(LDFLAGS) -o dis88 $(OBJ)
 
 install:	dis88
-	install -m 755 -s dis88   $(DIST)$(PREFIX)/bin/dis86
-	install -m 644    dis88.1 $(DIST)$(PREFIX)/man/man1/dis86.1
+	install -m 755 dis88   $(DIST)$(PREFIX)/bin/dis86
+	install -m 644    dis88.1 $(DIST)$(MANDIR)/man1/dis86.1
 
 $(OBJ): dis.h a.out.h
 
Index: elksemu/Makefile
===================================================================
--- elksemu/Makefile.orig	2011-01-31 14:05:24.201314489 +0100
+++ elksemu/Makefile	2011-01-31 14:05:43.886623617 +0100
@@ -42,7 +42,7 @@ dummy:
 # to redirect.
 install: elksemu
 	install -d $(DIST)/lib
-	install -s -o root -g root -m 4555 elksemu $(DIST)/lib/elksemu
+	install -o root -g root -m 4555 elksemu $(DIST)/lib/elksemu
 
 clean realclean:
 	rm -f $(OBJ) binfmt_elks.o elksemu call_tab.v defn_tab.v efile.h
Index: ld/dumps.c
===================================================================
--- ld/dumps.c.orig	2011-01-31 14:05:24.201314489 +0100
+++ ld/dumps.c	2011-01-31 14:05:43.887314335 +0100
@@ -2,6 +2,7 @@
 
 /* Copyright (C) 1994 Bruce Evans */
 
+#include <string.h>
 #include "syshead.h"
 #include "const.h"
 #include "obj.h"
Index: makefile.in
===================================================================
--- makefile.in.orig	2011-01-31 14:05:24.201314489 +0100
+++ makefile.in	2011-01-31 14:05:43.887314335 +0100
@@ -78,7 +78,7 @@ CFLAGS += -no-cpp-precomp
 
 # Install files with the userid of the currently running process.
 INDAT=-m 644
-INEXE=-m 755 -s
+INEXE=-m 755
 INSCR=-m 755
 
 #ifdef __CYGWIN__
Index: as/type.h
===================================================================
--- as/type.h.orig	2011-01-31 14:05:24.201314489 +0100
+++ as/type.h	2011-01-31 14:05:43.887314335 +0100
@@ -149,7 +149,7 @@ struct macro_s
 
 struct sym_listing_s
 {
-    char name[SYMLIS_NAMELEN];
+    char name[SYMLIS_NAMELEN + 1];
     char zname[2];
     char segm[1];
     char pad1[1];
