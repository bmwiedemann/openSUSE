From e2ff1acbe2db9a69227406ea100a7394d6d201c0 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Jelmer=20Vernoo=C4=B3?= <jelmer@jelmer.uk>
Date: Thu, 11 Jun 2020 00:45:23 +0000
Subject: [PATCH] Fix more tests.

---
 breezy/git/remote.py | 8 +++++---
 1 file changed, 5 insertions(+), 3 deletions(-)

diff --git a/breezy/git/remote.py b/breezy/git/remote.py
index 29256e1b91..f151dc1ca5 100644
--- a/breezy/git/remote.py
+++ b/breezy/git/remote.py
@@ -232,11 +232,13 @@ def parse_git_hangup(url, e):
         return e
     interesting_lines = [
         line for line in stderr_lines
-        if line and line.replace('=', '')]
+        if line and line.replace(b'=', b'')]
     if len(interesting_lines) == 1:
         interesting_line = interesting_lines[0]
-        return parse_git_error(url, interesting_line)
-    return RemoteGitError('\n'.join(stderr_lines))
+        return parse_git_error(
+            url, interesting_line.decode('utf-8', 'surrogateescape'))
+    return RemoteGitError(
+        b'\n'.join(stderr_lines).decode('utf-8', 'surrogateescape'))
 
 
 class GitSmartTransport(Transport):
