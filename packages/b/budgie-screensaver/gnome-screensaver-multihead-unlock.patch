Index: src/gs-window-x11.c
===================================================================
--- a/src/gs-window-x11.c.orig
+++ b/src/gs-window-x11.c
@@ -661,7 +661,7 @@ setup_xvkbd_window (GSWindow *gswindow,
 {
 	gs_debug ("Setting up xvkbd_window from window %d", (int) window);
 
-	xvkbd_window = gdk_x11_window_foreign_new_for_display (gtk_widget_get_display (widget), window);
+	xvkbd_window = gdk_x11_window_foreign_new_for_display (gtk_widget_get_display (GTK_WIDGET(window)), window);
         gdk_window_hide (xvkbd_window);
         gdk_window_set_override_redirect (xvkbd_window, TRUE);
         gdk_window_set_events (xvkbd_window, gdk_window_get_events (xvkbd_window) | GDK_STRUCTURE_MASK);
@@ -1094,6 +1094,7 @@ static void
 lock_plug_added (GtkWidget *widget,
                  GSWindow  *window)
 {
+        gs_window_raise (window);
         gtk_widget_show (widget);
 }
 
