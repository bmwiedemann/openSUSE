From 01166acb9da9ea2aea40349c44d78764f8e2f3cd Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Tapani=20P=C3=A4lli?= <tapani.palli@intel.com>
Date: Mon, 5 Sep 2011 10:42:38 -0400
Subject: [PATCH 1/4] make: Fixes paraller building like 'make -j16'

---
 ChangeLog     | 4 ++++
 test/Makefile | 6 +++---
 2 files changed, 7 insertions(+), 3 deletions(-)

diff --git a/ChangeLog b/ChangeLog
index 2a00346..65dff9b 100644
--- a/ChangeLog
+++ b/ChangeLog
@@ -1,3 +1,7 @@
+2011-09-05 Jiri Olsa <olsajiri@gmail.com>
+	* Fixes paraller building like 'make -j16'
+	  (contributed by Tapani PÃ¤lli <tapani.palli@intel.com>)
+
 -------------------------------------------------------------------------------
 latrace 0.5.11
 
diff --git a/test/Makefile b/test/Makefile
index 418760e..4ae134c 100644
--- a/test/Makefile
+++ b/test/Makefile
@@ -16,16 +16,16 @@ lib-test-libsym2.so: test/lib-test-libsym2.o
 lib-test-libsym3.so: test/lib-test-libsym3.o
 	$(QUIET_LD)$(CC) $(CFLAGS) -fPIC -shared $(LDFLAGS) -o $@ $^
 
-test-common: test/test-lib.o test/test-common.o
+test-common: lib-test-common.so test/test-lib.o test/test-common.o
 	$(QUIET_LD)$(CC) $(CFLAGS) $(LDFLAGS) -o $@ $^ lib-test-common.so
 
-test-args: test/test-lib.o test/test-args.o test/sysdeps/$(CONFIG_SYSDEP_DIR)/test-args.o
+test-args: lib-test-args.so test/test-lib.o test/test-args.o test/sysdeps/$(CONFIG_SYSDEP_DIR)/test-args.o
 	$(QUIET_LD)$(CC) $(CFLAGS) $(LDFLAGS) -o $@ $^ lib-test-args.so
 
 test-kill: test/test-kill.o
 	$(QUIET_LD)$(CC) $(CFLAGS) $(LDFLAGS) -o $@ $^
 
-test-libsym: test/test-libsym.o test/test-lib.o
+test-libsym: lib-test-libsym1.so lib-test-libsym2.so lib-test-libsym3.so test/test-libsym.o test/test-lib.o
 	$(QUIET_LD)$(CC) $(CFLAGS) $(LDFLAGS) -o $@ $^ lib-test-libsym1.so lib-test-libsym2.so lib-test-libsym3.so
 
 OBJS+=test/test-lib.o
-- 
2.35.3

