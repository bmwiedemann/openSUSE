-------------------------------------------------------------------
Fri Jan 31 10:16:27 UTC 2020 - Aleksa Sarai <asarai@suse.com>

- Backport https://github.com/canonical/dqlite/pull/207 to fix boo#1156336.
  + boo1156336-0001-vfs-vfs__delete-fix-double-unlock-of-root-mutex.patch

-------------------------------------------------------------------
Fri Jan 31 00:33:47 UTC 2020 - Aleksa Sarai <asarai@suse.com>

- Update to LXD 3.20. The full upstream changelog is available from:
  https://discuss.linuxcontainers.org/t/lxd-3-20-has-been-released/6673
  boo#1162299
  + Server side support of API collections
  + New unix-hotplug device type
  + Support for standby cluster members
- Update packaging to use GOPATH="_dist" rather than trying to move everything
  to vendor/. This is the recommended approach by upstream (and makes our
  specfile marginally less horrific).

-------------------------------------------------------------------
Fri Jan 17 05:17:53 UTC 2020 - Aleksa Sarai <asarai@suse.com>

- Update to LXD 3.19. The full upstream changelog is available from:
  https://discuss.linuxcontainers.org/t/lxd-3-19-has-been-released/6529
  boo#1161615
  + Virtual machine support
  + Reworked storage layer
  + Routed networking mode
  + Custom mount options for disk devices
  + Interception of the mount system call
  + Multi-architecture clustering
  + ...
- Rework package handling to fake Go module builds.

-------------------------------------------------------------------
Wed Dec 11 23:55:40 UTC 2019 - Aleksa Sarai <asarai@suse.com>

- Support older SLE systems which don't have "usermod -w -v".

-------------------------------------------------------------------
Thu Oct  3 01:53:53 UTC 2019 - Aleksa Sarai <asarai@suse.com>

- Update to LXD 3.18. The full upstream changelog is available from:
  https://discuss.linuxcontainers.org/t/lxd-3-18-has-been-released/5869
  boo#1152846
  + New /1.0/instances endpoint
  + Support for storing VM images
  + Extended disk resources information
  + Modification of image expiry date
  + Clustering roles
  + IPv4 configuration when in Fan mode

-------------------------------------------------------------------
Wed Sep 25 11:03:42 UTC 2019 - Aleksa Sarai <asarai@suse.com>

- Clean up a few remaining specfile bits left over from the 3.17 update.

-------------------------------------------------------------------
Tue Sep 24 12:31:21 UTC 2019 - Aleksa Sarai <asarai@suse.com>

- Completely drop all stripping -- it appears to cause all sorts of problems
  with unresolved symbol errors.
- Update to LXD 3.17. The full upstream changelog is available from:
  https://discuss.linuxcontainers.org/t/lxd-3-17-has-been-released/5679
  boo#1151874
  + Storage pool backed image tarballs and backups
  + Container configuration as YAML on lxc init and lxc launch
  * Ported to final Dqlite 1.0
  * Database rework
  * Container devices rework
  * Storage rework

-------------------------------------------------------------------
Mon Jul 15 06:40:30 UTC 2019 - Aleksa Sarai <asarai@suse.com>

- Update to LXD 3.15. The full upstream changelog is available from:
  https://discuss.linuxcontainers.org/t/lxd-3-15-has-been-released/5218
  + Switch to dqlite 1.0.
  * Reworked DHCP lease handling
  * Reworked cluster heartbeat handling
  * Better syscall interception framework
  * More reliable unix socket proxying
  + Hardware VLAN and MAC filtering on SR-IOV
  + New storage-size option for lxd-p2c
  + IPv4 and IPv6 filtering (spoof protection)
  * Reworked resources API (host hardware)
  + Control over uid, gid and cwd during command execution
  + Quota support for custom storage volumes on dir backend
  * Lots of bug fixes...

-------------------------------------------------------------------
Wed Jun 19 07:21:29 UTC 2019 - Aleksa Sarai <asarai@suse.com>

- Update to LXD 3.14. The full upstream changelog is available from:
  https://discuss.linuxcontainers.org/t/lxd-3-14-has-been-released/5045
  boo#1138770
  + Cluster: Re-worked DNS forwarding
  + Script to factory reset LXD
  + Improvements to syscall interception
  * Lots of bug fixes...

-------------------------------------------------------------------
Wed Jun 19 03:16:40 UTC 2019 - Aleksa Sarai <asarai@suse.com>

- Update build to use go_nostrip, in order to attempt to fix the broken
  binaries on Leap 15.1. boo#1138769

-------------------------------------------------------------------
Sun Jun  9 08:21:19 UTC 2019 - Aleksa Sarai <asarai@suse.com>

- Explicitly require lxcfs-hooks-lxc. LXD supports lxcfs but it requires tha
  the LXC configuration files be present.

-------------------------------------------------------------------
Sun Jun  2 17:22:35 UTC 2019 - Jan Engelhardt <jengelh@inai.de>

- Trim filler wording from description.
- Remove --with-pic which often has no point with --disable-static.
- Avoid bash-specific sh code.

-------------------------------------------------------------------
Thu May  9 20:28:55 UTC 2019 - Aleksa Sarai <asarai@suse.com>

- Update to LXD 3.13. The full upstream changelog is available from:
  https://discuss.linuxcontainers.org/t/lxd-3-13-has-been-released/4738
  boo#1138031
  + Cluster: Improved heartbeat interval
  + Cluster Internal container copy
  + Initial syscall interception support
  + Role Based Access Control
  + IPVLAN support
  + Quota support on dir storage backend
  + Routes on container NIC devices
  + Configurable NAT source address
  + LXC features exported in API
  * Lots of bug fixes...

-------------------------------------------------------------------
Mon Apr  8 13:18:50 UTC 2019 - Jan Engelhardt <jengelh@inai.de>

- %pre bash features: replace by POSIX equivalents.
- %build bash features: add %_buildshell definition for it.
- Do not ignore errors from groupadd.

-------------------------------------------------------------------
Fri Apr  5 19:13:48 UTC 2019 - Aleksa Sarai <asarai@suse.com>

- Update to LXD 3.12. The full upstream changelog is available from:
  https://discuss.linuxcontainers.org/t/lxd-3-12-has-been-released/4483
  + Cluster: Aggregated DHCP leases
  + Cluster: Events now show location
  + Cluster: Operations now show location
  + Cluster: Support for --target in more commands
  + Shiftfs support
  + Kernel features now exported over API
  + Improved CPU reporting
  + GPU reporting
  + Snapshot expiry now visible in lxc info
  * Lots of bug fixes...

-------------------------------------------------------------------
Thu Mar 28 01:54:01 UTC 2019 - Aleksa Sarai <asarai@suse.com>

- Make sqlite+dqlite both shared libs to avoid bloating RSS. In order to avoid
  issues with packaging new versions of libsqlite3 there are a bunch of
  DT_SONAME and DT_NEEDED hacks to ensure that rpm doesn't cause false-positive
  conflicts or other issues. This requires a new lxd-rpmlintrc to work on older
  SLE versions.

-------------------------------------------------------------------
Tue Mar 26 02:44:05 UTC 2019 - Aleksa Sarai <asarai@suse.com>

- Initial packaging of LXD 3.11.
