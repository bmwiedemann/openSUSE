From 723636ee8c3326eb1fb192db20991816b67fc275 Mon Sep 17 00:00:00 2001
From: Teresa Johnson <tejohnson@google.com>
Date: Fri, 18 Jan 2019 20:41:49 +0000
Subject: [PATCH] Make ThinLTO test run single threaded to try to avoid
 flakiness

To see if this helps flaky bot failures in PR40351.

llvm-svn: 351589
---
 llvm/test/ThinLTO/X86/cfi-devirt.ll | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/llvm/test/ThinLTO/X86/cfi-devirt.ll b/llvm/test/ThinLTO/X86/cfi-devirt.ll
index a4a0c6bdd9a..3fd0486c7e8 100644
--- a/llvm/test/ThinLTO/X86/cfi-devirt.ll
+++ b/llvm/test/ThinLTO/X86/cfi-devirt.ll
@@ -49,7 +49,7 @@
 ; that does not have a split LTO Unit.
 ; RUN: opt -thinlto-bc -o %t2.o %S/Inputs/empty.ll
 ; RUN: not llvm-lto2 run %t.o %t2.o -save-temps -pass-remarks=. \
-; RUN:   -verify-machineinstrs=0 \
+; RUN:   -verify-machineinstrs=0 -thinlto-threads=1 \
 ; RUN:   -o %t3 \
 ; RUN:   -r=%t.o,test,px \
 ; RUN:   -r=%t.o,_ZN1A1nEi,p \
-- 
2.23.0

