---
 lutf8lib.c |    6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

Index: luautf8-0.1.6/lutf8lib.c
===================================================================
--- luautf8-0.1.6.orig/lutf8lib.c	2025-10-12 03:12:28.128159114 +0200
+++ luautf8-0.1.6/lutf8lib.c	2025-10-12 03:27:47.904089867 +0200
@@ -626,7 +626,7 @@
         if (fixedup) {
           /* The preceding starter/combining mark sequence was bad; convert fixed-up codepoints
            * to UTF-8 bytes */
-          if (starter != -1)
+          if (starter != (utfint)-1)
             add_utf8char(buff, starter);
           for (unsigned int i = 0; i < vec_size; i++)
             add_utf8char(buff, vector[i] >> 8);
@@ -643,7 +643,7 @@
         }
         vec_size = 0; /* Clear vector of combining marks in readiness for next such sequence */
         fixedup = 0;
-      } else if (starter != -1) {
+      } else if (starter != (utfint)-1) {
         /* This starter was preceded immediately by another starter
          * Check if this one should combine with it */
         fixedup = 0;
@@ -725,7 +725,7 @@
 
   if (vec_size)
     goto process_combining_marks; /* Finish processing trailing combining marks */
-  if (starter != -1)
+  if (starter != (utfint)-1)
     add_utf8char(buff, starter);
 
   if (vector != onstack)
