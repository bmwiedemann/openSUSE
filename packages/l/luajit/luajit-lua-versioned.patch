---
 Makefile      |    9 +++++----
 etc/luajit.pc |    2 +-
 src/Makefile  |    3 ++-
 src/luaconf.h |    2 +-
 4 files changed, 9 insertions(+), 7 deletions(-)

--- a/Makefile
+++ b/Makefile
@@ -16,13 +16,14 @@
 MAJVER=  2
 MINVER=  1
 ABIVER=  5.1
+SUFFIX= 5_1
 
 # LuaJIT uses rolling releases. The release version is based on the time of
 # the latest git commit. The 'git' command must be available during the build.
 RELVER= $(shell cat src/luajit_relver.txt 2>/dev/null || : )
 # Note: setting it with := doesn't work, since it will change during the build.
 
-MMVERSION= $(MAJVER).$(MINVER)
+MMVERSION= $(SUFFIX)-$(MAJVER).$(MINVER)
 VERSION= $(MMVERSION).$(RELVER)
 
 ##############################################################################
@@ -51,7 +52,7 @@ INSTALL_MAN= $(INSTALL_SHARE)/man/man1
 INSTALL_PKGCONFIG= $(INSTALL_LIB)/pkgconfig
 
 INSTALL_TNAME= luajit-$(VERSION)
-INSTALL_TSYMNAME= luajit
+INSTALL_TSYMNAME= luajit-$(SUFFIX)
 INSTALL_ANAME= libluajit-$(ABIVER).a
 INSTALL_SOSHORT1= libluajit-$(ABIVER).so
 INSTALL_SOSHORT2= libluajit-$(ABIVER).so.$(MAJVER)
@@ -89,7 +90,7 @@ ifneq ($(INSTALL_DEFINC),$(INSTALL_INC))
   SED_PC+= -e "s|^includedir=.*|includedir=$(INSTALL_INC)|"
 endif
 
-FILE_T= luajit
+FILE_T= luajit-$(SUFFIX)
 FILE_A= libluajit.a
 FILE_SO= libluajit.so
 FILE_MAN= luajit.1
@@ -136,7 +137,7 @@ install: $(INSTALL_DEP)
 	  ( $(LDCONFIG) $(INSTALL_LIB) || : ) && \
 	  $(SYMLINK) $(INSTALL_SONAME) $(INSTALL_SHORT1) && \
 	  $(SYMLINK) $(INSTALL_SONAME) $(INSTALL_SHORT2) || :
-	cd etc && $(INSTALL_F) $(FILE_MAN) $(INSTALL_MAN)
+	cd etc && $(INSTALL_F) $(FILE_MAN) $(INSTALL_MAN)/luajit-$(SUFFIX).1
 	cd etc && $(SED_PC) $(FILE_PC) > $(FILE_PC).tmp && \
 	  $(INSTALL_F) $(FILE_PC).tmp $(INSTALL_PC) && \
 	  $(RM) $(FILE_PC).tmp
--- a/etc/luajit.pc
+++ b/etc/luajit.pc
@@ -10,7 +10,7 @@ multilib=lib
 exec_prefix=${prefix}
 libdir=${exec_prefix}/${multilib}
 libname=luajit-${abiver}
-includedir=${prefix}/include/luajit-${majver}.${minver}
+includedir=${prefix}/include/luajit-5_1-${majver}.${minver}
 
 INSTALL_LMOD=${prefix}/share/lua/${abiver}
 INSTALL_CMOD=${prefix}/${multilib}/lua/${abiver}
--- a/src/Makefile
+++ b/src/Makefile
@@ -14,6 +14,7 @@ MAJVER=  2
 MINVER=  1
 ABIVER=  5.1
 NODOTABIVER= 51
+SUFFIX= 5_1
 
 ##############################################################################
 #############################  COMPILER OPTIONS  #############################
@@ -520,7 +521,7 @@ LIB_VMDEFP= $(LIB_VMDEF)
 LUAJIT_O= luajit.o
 LUAJIT_A= libluajit.a
 LUAJIT_SO= libluajit.so
-LUAJIT_T= luajit
+LUAJIT_T= luajit-$(SUFFIX)
 
 ALL_T= $(LUAJIT_T) $(LUAJIT_A) $(LUAJIT_SO) $(HOST_T)
 ALL_HDRGEN= lj_bcdef.h lj_ffdef.h lj_libdef.h lj_recdef.h lj_folddef.h \
--- a/src/luaconf.h
+++ b/src/luaconf.h
@@ -37,7 +37,7 @@
 #endif
 #define LUA_LROOT	"/usr/local"
 #define LUA_LUADIR	"/lua/5.1/"
-#define LUA_LJDIR	"/luajit-2.1/"
+#define LUA_LJDIR	"/luajit-5_1-2.1/"
 
 #ifdef LUA_ROOT
 #define LUA_JROOT	LUA_ROOT
