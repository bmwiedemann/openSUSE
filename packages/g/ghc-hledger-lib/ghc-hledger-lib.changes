-------------------------------------------------------------------
Fri Jan 15 08:56:01 UTC 2021 - psimons@suse.com

- Update hledger-lib to version 1.20.3.
  # 1.20.3 2021-01-14

  - See hledger.

-------------------------------------------------------------------
Tue Dec 29 21:16:20 UTC 2020 - psimons@suse.com

- Update hledger-lib to version 1.20.2.
  # 1.20.2 2020-12-28

  - Fix the info manuals' node structure.

  - Drop unused parsec dependency.

-------------------------------------------------------------------
Thu Dec 17 12:20:00 UTC 2020 - Ondřej Súkup <mimi.vx@gmail.com>
 
- disable %{ix86} build
 
-------------------------------------------------------------------
Wed Dec 16 17:26:09 UTC 2020 - psimons@suse.com

- Update hledger-lib to version 1.20.1.
  # 1.20.1 2020-12-15

  - renamed: updateReportSpecFromOpts -> updateReportSpec[With]

-------------------------------------------------------------------
Sun Dec  6 13:33:45 UTC 2020 - psimons@suse.com

- Update hledger-lib to version 1.20.
  # 1.20 2020-12-05

  - added: journalApplyAliases, transactionApplyAliases, postingApplyAliases

  - a new more robust price lookup implementation, fgl library dropped (#1402)

  - Reverted a stripAnsi change in 1.19.1 that caused a 3x slowdown of amount rendering
    in terminal reports. (#1350)

  - Amount and table rendering has been improved, so that stripAnsi is no longer needed.
    This speeds up amount rendering in the terminal, speeding up some reports by 10% or more since 1.19.
    (Stephen Morgan)

  - global commodity display styles can now be set in InputOpts or Journal,
    overriding all others (declared or inferred). This is used by the import
    command and probably command-line options in future.

  - Journal keeps a new piece of parsing state, a decimal mark character,
    which can optionally be set to force the number format expected by all
    amount parsers.

  - Remove Empty Query constructor, which does nothing and has done so for a very long time. (Stephen Morgan)

  - In ReportOpts, store query terms term-by-term in a list in querystring_. (Stephen Morgan)
    This helps deal with tricky quoting issues, as we no longer have to make
    sure everything is quoted properly before merging it into a string.

  - Implement concat(Top|Bottom)Padded in terms of renderRow, allowing them to be width aware. (Stephen Morgan)

  - Expand Tabular.AsciiWide to allow multiline, custom-width,
    vertically/horizontally-aligned cells, and optional table borders.
    (Stephen Morgan)

  - Introduce showMixed*Unnormalised, eliminate most direct calls of strWidth. (Stephen Morgan)

  - showMixedAmountElided now makes better use of space, showing as many
    Amounts possible as long as they and the elision string fit within
    32 characters. (Stephen Morgan)

  - Add Functor instance for CompoundPeriodicReport. (Stephen Morgan)

  - Generalise CBCSubreportSpec to allow more subreport control. (Stephen Morgan)

  - Export some MultiBalanceReport helper functions. (Stephen Morgan)

  - Make Default instances clearer, remove Default instance for Bool. (Stephen Morgan)

  - Many ReportOpts-related changes, such as the addition of ReportSpec, aimed
    at preventing runtime errors (from parsing: regexps, dates, format strings;
    from not having today's date set; etc.)
    ReportSpec holds a ReportOpts, the day of the report, and the Query generated from these.

  - StringFormat now takes an optional overline width, which is
    currently only used by defaultBalanceLineFormat. (Stephen Morgan)

  - quoteIfNeeded should not escape the backslashes in unicode code points. (Stephen Morgan)

  - Export OrdPlus and constructors. (Stephen Morgan)

  - Debug output now uses pretty-simple instead pretty-show.
    This hopefully gives overall nicer debug output (eg in colour),
    including for values which don't have Read-able Show output.
    This means that we can start removing custom Show instances
    that were a workaround for pretty-show. Eg account names
    in debug output no longer show their colons as underscores.

    Here's some old pretty-show output:

     CsvRules
       { rdirectives = [ ( "skip" , "1" ) ]
       , rcsvfieldindexes = [ ( "date" , 1 ) , ( "amount" , 2 ) ]
       , rassignments = [ ( "amount" , "%2" ) , ( "date" , "%1" ) ]
       , rconditionalblocks = []
       }

    And the new pretty-simple output:

     CsvRules
       { rdirectives=
         [ ( "skip", "1" ) ]
       , rcsvfieldindexes=
         [ ( "date", 1 ), ( "amount", 2 ) ]
       , rassignments=
         [ ( "amount", "%2" ), ( "date", "%1" ) ]
       , rconditionalblocks= []
       }

    We require pretty-simple 4.0.0.0 to get this compact output.
    It's a little less compact than pretty-show, but not too bad.
    Non-compact pretty-simple output would be:

     CsvRules
         { rdirectives=
             [
                 ( "skip"
                 , "1B"
                 )
             ]
         , rcsvfieldindexes=
             [
                 ( "date"
                 , 1
                 )
             ,
                 ( "amount"
                 , 2
                 )
             ]
         , rassignments=
             [
                 ( "amount"
                 , "%2"
                 )
             ,
                 ( "date"
                 , "%1"
                 )
             ]
         , rconditionalblocks=[]
         }

-------------------------------------------------------------------
Tue Sep  8 02:00:51 UTC 2020 - psimons@suse.com

- Update hledger-lib to version 1.19.1.
  # 1.19.1 2020-09-07

  - Allow megaparsec 9

  - stripAnsi: correctly strip ansi sequences with no
    numbers/semicolons. (Stephen Morgan)

  - Added case-insensitive accountNameToAccountRegexCI,
    accountNameToAccountOnlyRegexCI, made the default account type
    queries case insensitive again. (#1341)

-------------------------------------------------------------------
Thu Sep  3 02:00:42 UTC 2020 - psimons@suse.com

- Update hledger-lib to version 1.19.
  # 1.19 2020-09-01

  - Added a missing lower bound for aeson, making cabal installs more
    reliable. (#1268)

  - The Regex type alias has been replaced by the Regexp ADT, which
    contains both the compiled regular expression (so is guaranteed to
    be usable at runtime) and the original string (so can be serialised,
    printed, compared, etc.) A Regexp also knows whether is it case
    sensitive or case insensitive. The Hledger.Utils.Regex API has
    changed. (#1312, #1330).

  - Typeable and Data instances are no longer derived for hledger's
    data types; they were redundant/no longer needed.

  - NFData instances are no longer derived for hledger's data types.
    This speeds up a full build by roughly 7%. But it means we can't
    deep-evaluate hledger values, or time hledger code with Criterion.
    https://github.com/simonmichael/hledger/pull/1330#issuecomment-684075129
    has some ideas on this.

  - Query no longer has a custom Show instance

  - Hledger.Utils.String: quoteIfNeeded now actually escapes quotes in
    strings. escapeQuotes was dropped. (Stephen Morgan)

  - Hledger.Utils.Tree: dropped some old utilities

  - Some fromIntegral calls have been replaced with safer code, removing
    some potential for integer wrapping bugs (#1325, #1326)

  - Parsing numbers with more than 255 decimal places now gives an error
    instead of silently misparsing (#1326)

  - Digit groups are now limited to at most 255 digits each. (#1326)

  - Exponents are parsed as Integer rather than Int.
    This means exponents greater than 9223372036854775807 or less than
    -9223372036854775808 are now parsed correctly, in theory. (In
    practice, very large exponents will cause hledger to eat all your
    memory, so avoid them for now.) (#1326)

  - AmountStyle's asprecision is now a sum type with Word8, instead of
    an Int with magic values.

  - DigitGroupStyle uses Word8 instead of Int.

  - Partial helper function parsedate has been dropped, use fromGregorian instead.

  - Partial helper function mkdatespan has been dropped.

  - Helper function transaction now takes a Day instead of a date string. (Stephen Morgan)

  - Old CPP directives made redundant by version bounds have been
    removed. (Stephen Morgan)

  - Smart dates are now represented by the SmartDate type, and are
    always well formed. (Stephen Morgan)

  - accountTransactionsReport (used for hledger aregister and
    hledger-ui/hledger-web registers) now filters transactions more
    thoroughly, so eg transactions dated outside the report period will
    not be shown. Previously the transaction would be shown if it had
    any posting dated inside the report period. Possibly some other
    filter criteria now get applied that didn't before. I think on
    balance this will give slightly preferable results.

  - The old BalanceReport code has been dropped at last, replaced by
    MultiBalanceReport so that all balance reports now use the same
    code. (Stephen Morgan, #1256).

    - The large multiBalanceReport function has been split up and refactored
      extensively.
    - Tabular data formerly represented as [[MixedAmount]] is now HashMap
      AccountName (Map DateSpan Account). Reports with many columns are now faster.
    - Calculating starting balances no longer calls the whole balanceReport,
      just the first few functions.
    - displayedAccounts is completely rewritten. Perhaps one subtle thing to
      note is that in tree mode it no longer excludes nodes with zero inclusive
      balance unless they also have zero exclusive balance.
    - Simon's note: "I'll mark the passing of the old multiBalanceReport, into
      which I poured many an hour :). It is in a way the heart (brain ?) of
      hledger - the key feature of ledgerlikes (balance report) and a key
      improvement introduced by hledger (tabular multiperiod balance reports)
      ...
      Thanks @Xitian9, great work."

-------------------------------------------------------------------
Mon Aug 31 09:34:31 UTC 2020 - psimons@suse.com

- Update hledger-lib to version 1.18.1 revision 1.
  Upstream has revised the Cabal build instructions on Hackage.

-------------------------------------------------------------------
Tue Aug 18 10:45:01 UTC 2020 - Peter Simons <psimons@suse.com>

- Replace %setup -q with the more modern %autosetup macro.

-------------------------------------------------------------------
Thu Jul 23 12:41:08 UTC 2020 - Michel Normand <normand@linux.vnet.ibm.com>

- Add _constraints default 4GB disk space

-------------------------------------------------------------------
Mon Jun 22 02:00:23 UTC 2020 - psimons@suse.com

- Update hledger-lib to version 1.18.1.
  # 1.18.1 2020-06-21

  - fix some doc typos (Martin Michlmayr)

-------------------------------------------------------------------
Tue Jun  9 09:26:37 UTC 2020 - psimons@suse.com

- Add hledger-lib at version 1.18.

