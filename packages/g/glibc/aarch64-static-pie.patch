From d4136903a29baabeec8987b53081def8b4a49826 Mon Sep 17 00:00:00 2001
From: Guillaume Gardet <guillaume.gardet@arm.com>
Date: Mon, 14 Dec 2020 15:38:22 +0000
Subject: [PATCH] aarch64: fix static PIE start code for BTI [BZ #27068]

A bti c was missing from rcrt1.o which made all -static-pie
binaries fail at program startup on BTI enabled systems.

Fixes bug 27068.
---
 sysdeps/aarch64/start.S | 1 +
 1 file changed, 1 insertion(+)

Index: glibc-2.32/sysdeps/aarch64/start.S
===================================================================
--- glibc-2.32.orig/sysdeps/aarch64/start.S
+++ glibc-2.32/sysdeps/aarch64/start.S
@@ -101,6 +101,7 @@ _start:
 	   because crt1.o and rcrt1.o share code and the later must avoid the
 	   use of GOT relocations before __libc_start_main is called.  */
 __wrap_main:
+	BTI_C
 	b	main
 #endif
 
