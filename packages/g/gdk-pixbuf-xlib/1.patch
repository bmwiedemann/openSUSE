From 54eaae9772cc0d3bb4972eea3fdeb1ddfceeddbf Mon Sep 17 00:00:00 2001
From: Jan Tojnar <jtojnar@gmail.com>
Date: Thu, 11 Jun 2020 14:54:36 +0200
Subject: [PATCH] build: Fix Cflags

Headers are installed to the gdk-pixbuf-2.0 subdir for backwards
compatibility but the Cflags in the pkg-config file did not match that.
---
 gdk-pixbuf-xlib/meson.build | 2 +-
 meson.build                 | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/gdk-pixbuf-xlib/meson.build b/gdk-pixbuf-xlib/meson.build
index 2209ede..a19476d 100644
--- a/gdk-pixbuf-xlib/meson.build
+++ b/gdk-pixbuf-xlib/meson.build
@@ -12,7 +12,7 @@ gdkpixbuf_xlib_headers = [
 
 gdkpixbuf_xlib_inc = include_directories('.')
 
-gdkpixbuf_xlib_api_path = join_paths('gdk-pixbuf-@0@'.format(api_version), 'gdk-pixbuf-xlib')
+gdkpixbuf_xlib_api_path = join_paths(api_name, 'gdk-pixbuf-xlib')
 
 install_headers(gdkpixbuf_xlib_headers, subdir: gdkpixbuf_xlib_api_path)
 
diff --git a/meson.build b/meson.build
index b8256ee..4c3c009 100644
--- a/meson.build
+++ b/meson.build
@@ -21,7 +21,7 @@ version_minor = version_arr[1].to_int()
 version_micro = version_arr[2].to_int()
 
 api_version = '@0@.0'.format(version_major)
-api_name = '@0@-@1@'.format(meson.project_name(), api_version)
+api_name = 'gdk-pixbuf-@0@'.format(api_version)
 
 if version_minor.is_odd()
   interface_age = 0
-- 
GitLab

