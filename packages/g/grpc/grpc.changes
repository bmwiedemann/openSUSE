-------------------------------------------------------------------
Wed Oct 28 08:17:46 UTC 2020 - Jan Engelhardt <jengelh@inai.de>

- Update to release 1.33.2
  * Deprecate GRPC_ARG_HTTP2_MIN_SENT_PING_INTERVAL_WITHOUT_DATA_MS.
  * Expose Cronet error message to the application layer.
  * Remove grpc_channel_ping from surface API.
  * Do not send BDP pings if there is no receive side activity.

-------------------------------------------------------------------
Tue Oct 27 12:31:44 UTC 2020 - Jan Engelhardt <jengelh@inai.de>

- Use -DgRPC_ABSL_PROVIDER=package
  (https://github.com/grpc/grpc/issues/24476)

-------------------------------------------------------------------
Thu Oct 22 11:15:31 UTC 2020 - Atri Bhattacharya <badshah400@gmail.com>

- Update to version 1.33.1
  * Core
    - Deprecate
      GRPC_ARG_HTTP2_MIN_SENT_PING_INTERVAL_WITHOUT_DATA_MS
      (gh#grpc/grpc#24063).
    - Expose Cronet error message to the application layer
      (gh#grpc/grpc#24083).
    - Remove grpc_channel_ping from surface API
      (gh#grpc/grpc#23894).
    - Do not send BDP pings if there is no receive side activity
      (gh#grpc/grpc#22997).
  * C++
    - Makefile: only support building deps from submodule
      (gh#grpc/grpc#23957).
- Drop grpc-find-re2-via-pkgconfig.patch: incorporated upstream
  (commit 45e413d).
- Bump so version from 12 to 13 in keeping with upstream.

-------------------------------------------------------------------
Sun Oct 11 16:14:38 UTC 2020 - Atri Bhattacharya <badshah400@gmail.com>

- Specify gRPC_INSTALL_LIBDIR and gRPC_INSTALL_CMAKEDIR to
  correctly configure install paths for libraries and cmake files
  instead of moving them after the installation.
- Add grpc-correct-pkgconfig-path.patch to fix install path for
  pkgconfig file relative to gRPC_INSTALL_LIBDIR.
- Add Requires: pkgconfig(libcares) for the -devel pkg.

-------------------------------------------------------------------
Tue Sep 22 16:37:51 UTC 2020 - Michał Rostecki <mrostecki@suse.com>

- Add new subpackages - libupb and upb-devel. Currently, grpc
  sources include also upb sources. Before this change, libupb and
  upb-devel used to be included in a separate package - upb.

-------------------------------------------------------------------
Fri Sep 18 19:53:23 UTC 2020 - Atri Bhattacharya <badshah400@gmail.com>

- Add pkgconfig(re2) to list of Requires for grpc-devel package.

-------------------------------------------------------------------
Thu Sep 17 13:14:42 UTC 2020 - Jan Engelhardt <jengelh@inai.de>

- Fixup 1.32.0 update with wrong grpc-devel ->
  libgrpc-support-plugin1 require.

-------------------------------------------------------------------
Sat Sep 12 22:11:30 UTC 2020 - Jan Engelhardt <jengelh@inai.de>

- Drop now-obsolescent Conflicts.

-------------------------------------------------------------------
Thu Sep 10 14:33:01 UTC 2020 - Atri Bhattacharya <badshah400@gmail.com>

- Update to version 1.32.0:
  * Core
    - Remove stream from stalled lists on remove_stream
      (gh#grpc/grpc#23984).
    - Do not cancel RPC if send metadata size if larger than
      peer's limit (gh#grpc/grpc#23806).
    - Don't consider receiving non-OK status as an error for HTTP2
      (gh#grpc/grpc#19545).
    - Keepalive throttling (gh#grpc/grpc#23313).
    - Include the target_uri in "target uri is not valid" error
      messages (gh#grpc/grpc#23782).
    - Fix "cannot send compressed message large than 1024B" in
      cronet_transport (gh#grpc/grpc#23219).
    - Receive SETTINGS frame on clients before declaring
      subchannel READY (gh#grpc/grpc#23636).
    - Enabled GPR_ABSEIL_SYNC (gh#grpc/grpc#23372).
    - Experimental xDS v3 support (gh#grpc/grpc#23281).
  * C++
    - Upgrade bazel used for all tests to 2.2.0
      (gh#grpc/grpc#23902).
    - Remove test targets and test helper libraries from Makefile
      (gh#grpc/grpc#23813).
    - Fix repeated builds broken by re2's cmake
      (gh#grpc/grpc#23587).
    - Log the peer address of grpc_cli CallMethod RPCs to stderr
      (gh#grpc/grpc#23557).
- Use cmake to configure and cmake macros to build and install.
- New BuildRequires: abseil-cpp-source and pkgconfig(re2); copy
  abseil-cpp-source contents into source's third_party dir and
  build it as a module (since we don't have the actual abseil-cpp
  library built for openSUSE.
- Add grpc-find-re2-via-pkgconfig.patch to enable finding system
  Re2 library via pkg-config; taken from upstream PR
  gh#grpc/grpc#24088.
- Split out new shared lib package libgrpc_plugin_support1 for
  supporting grpc plugins.

-------------------------------------------------------------------
Wed Sep  9 22:43:27 UTC 2020 - Atri Bhattacharya <badshah400@gmail.com>

- Drop python modules provided by python-grpcio source package in
  openSUSE:Factory.

-------------------------------------------------------------------
Thu Mar 12 06:53:27 UTC 2020 - Tomáš Chvátal <tchvatal@suse.com>

- Add conditional to build without python2 if needed

-------------------------------------------------------------------
Thu Jan  9 11:39:15 UTC 2020 - Michał Rostecki <mrostecki@opensuse.org>

- Remove patch for Bazel files, which is not needed anymore:
  * 0001-bazel-Replace-boringssl-with-openssl.patch

-------------------------------------------------------------------
Mon Dec 16 23:36:51 UTC 2019 - Jan Engelhardt <jengelh@inai.de>

- Update to release 1.25
  * Change RR to consider a subchannel in TF if it has failed
    since it was READY.
  * Do not create streams after a GOAWAY has been received.
  * Prevent HTTP2 parser from queueing a lot of induced frames.
- Drop gettid.patch

-------------------------------------------------------------------
Mon Nov 11 15:37:45 UTC 2019 - Michał Rostecki <mrostecki@opensuse.org>

- Define BoringSSL as a Bazel dependency in WORKSPACE instead of
  grpc_deps.bzl - using new_local_repository function is now always
  allowed in imported modules.

-------------------------------------------------------------------
Tue Nov  5 00:43:17 UTC 2019 - Michał Rostecki <mrostecki@opensuse.org>

- Add patch which replaces BoringSSL with OpenSSL as the SSL
  library when grpc is used as a Bazel dependency:
  * 0001-bazel-Replace-boringssl-with-openssl.patch

-------------------------------------------------------------------
Thu Oct 10 00:23:16 UTC 2019 - Michał Rostecki <mrostecki@opensuse.org>

- Make sure that patches are included in the source package.
- Filter out several rpmlintrc warnings for the source package.

-------------------------------------------------------------------
Wed Oct  2 18:39:47 UTC 2019 - Jan Engelhardt <jengelh@inai.de>

- Update to release 1.23.1
  * Unspecific refinements, improvements, and bug fixes.
- Add gettid.patch
- Split libgrpc into libgrpc++ because that has a SO version
  group of its own.
- Bump libgrpc6 to libgrpc7 as there is actually .so.7 files.
  Add suitable Conflicts markers.

-------------------------------------------------------------------
Thu Aug 22 18:28:15 UTC 2019 - Jan Engelhardt <jengelh@inai.de>

- Disable LTO because it's broken.

-------------------------------------------------------------------
Sun Aug 18 16:29:43 UTC 2019 - Jan Engelhardt <jengelh@inai.de>

- Update to new upstream release 1.23 [boo#1144068]
  * Fixed a bug where POST_RECV_MESSAGE was not being triggered.
  * Renamed root certificate bundle in gRPC-C++ pod.
  * Increased lower bound on DNS re-resolution period to 30 seconds.
  * Fixed a segfault when forking while using gevent.
  * Added channel idleness support
  * Added threadpool support

-------------------------------------------------------------------
Wed Jun  5 18:52:46 UTC 2019 - Jan Engelhardt <jengelh@inai.de>

- Update to new upstream release 1.21.3
  * Add SPIFFE security stack to gRPC.
  * Re-enable ALPN check in gRPC C core SSL stack.

-------------------------------------------------------------------
Fri Apr 12 18:26:00 CEST 2019 - sbrabec@suse.com

- Fix typo in Groups.

-------------------------------------------------------------------
Sat Mar 16 17:39:59 UTC 2019 - Jan Engelhardt <jengelh@inai.de>

- Update to new upstream release 1.19.1
  * Use 32-bit nanopb fields.
  * Avoid SRV and TXT lookups for localhost.
  * Set c-ares as the default resolver.

-------------------------------------------------------------------
Mon Jan  7 11:39:15 UTC 2019 - Michał Rostecki <mrostecki@suse.de>

- Add grpc-source package - some Go programs using gRPC need
  protobuf definitions which are included inside the source code,
  but are not included in the devel package.

-------------------------------------------------------------------
Sun Nov 11 17:57:35 UTC 2018 - Jan Engelhardt <jengelh@inai.de>

- Update to new upstream release 1.16
  * Keepalive watchdog firing should return status UNAVAILABLE.
  * Set TCP_USER_TIMEOUT socket option for Linux.
  * Turn loading system root certificate as default.
  * Change pick_first to not unref unselected subchannels.
  * cmake: prevent C core from depending on libstdc++.
  * Implement Watch method in health check service.

-------------------------------------------------------------------
Sun Nov 11 10:57:12 UTC 2018 - Thomas Bechtold <tbechtold@suse.com>

- update to 1.15.1:
  * Document SSL portability and performance considerations. See
    https://github.com/grpc/grpc/blob/master/doc/ssl-performance.md .
  * Simplify call arena size growth.
  * PF: Check connectivity state before watching.
  * Added system roots feature to load roots from OS trust store.
  * Fix re-resolution in pick first.
  * Allow error strings in final_info to propagate to filters on
    call destruction.
  * Add resolver executor.
  * Data race fix for lockfree_event.
  * Channelz: Expose new Core API.
  * cmake: disable assembly optimizations only when necessary.
  * C++ sync server: Return status RESOURCE_EXHAUSTED if no
    thread quota available.
  * Use correct target name for gflags-config.cmake.
  * Make should generate pkg-config file for gpr as well.
  * Restrict the number of threads in C++ sync server.
  * Allow reset of connection backoff.
- update to 1.14.2:
  * Add TROUBLESHOOTING.md guide
  * Fixed gRPC channels blocking indefinitely and not respecting
    deadlines on network disconnect.
  * Add user guide for keepalive.
  * Fix GRPC_ARG_HTTP2_MIN_RECV_PING_INTERVAL_WITHOUT_DATA_MS doc
    to restrict usage to server.
  * Fixed ordering in adding pending picks to Round Robin LB.
  * Implement local channel/server credentials for UDS connections.
  * Allow extra copy in zero-copy protector integrity-only mode.
  * Update to use the canonical version of LB proto.
  * Prefer using https_proxy over http_proxy.
  * Refactor to put c-ares queries under a combiner.
  * Remove already_closed parameter from fd_orphan.
  * Add channel arg to enable/disable http proxy.
  * Fix shutdown of closed fd when c-ares opens a second fd.
  * Fixed segmentation fault when product name from BIOS is empty.
  * Introduce server-side load reporting service.
  * Reorder steps in ServerBuilder::BuildAndStart().
  * Support Per-Method Codegen Generic on Server Side.
  * Protobuf-related headers are available in a subspec of
    gRPC-C++ podspec.
- update to 1.13.1:
  * gRPC stats will only be collected for debug builds or if
    GRPC_COLLECT_STATS is defined. It will be disabled for opt
    builds.
  * Fix for Issue #13553. Unlimited can now be set as the max
    receive message length.
  * cmake install now also installs should also installs the
    roots.pem file.
- Drop 0001-Allow-building-the-python-module-with-system-openssl.patch
  Applied upstream
- Drop 0002-Allow-building-the-python-module-with-system-zlib.patch
  Applied upstream
- 0003-Allow-building-the-python-module-with-system-cares.patch
  Applied upstream

-------------------------------------------------------------------
Sat Jun 23 09:33:15 UTC 2018 - jengelh@inai.de

- Throw out silly -Werror in release builds.

-------------------------------------------------------------------
Fri May 25 05:34:36 UTC 2018 - tbechtold@suse.com

- build grpc python module for python2 and python3
  * add 0001-Allow-building-the-python-module-with-system-openssl.patch
  * add 0002-Allow-building-the-python-module-with-system-zlib.patch
  * add 0003-Allow-building-the-python-module-with-system-cares.patch

-------------------------------------------------------------------
Fri May 18 14:55:27 UTC 2018 - jengelh@inai.de

- Switch to plain makefiles since they generate more shared libs.
- Remove grpc-build.diff, grpc-versioning.diff.

-------------------------------------------------------------------
Fri May 18 13:26:45 UTC 2018 - tbechtold@suse.com

- update to 1.12.0:
  Core:
  * Update protobuf submodule to 3.5.2 (#15114)
  * Make GrpcBuffer{Reader|Writer} Public (#14541)
  * Compile Out Tracers Option (#15108)
  * Fix bug in an address sorting comparison (#15208)
  * Fix: Check retry timer before starting resolving (#15156)
  * Fix c-ares resolution with default authority (#15073)
  * Fix c-ares resolver crash when DNS server unreachable (#15134)
  * Performance: Avoid low severity log message construction (#14945)
  * Peformance: Enable SIO_LOOPBACK_FAST_PATH on Windows (#14905)
  C#:
  * Add RpcException.StatusCode property (#15140)
  * Improvements to C# build instructions (#15178)
  Python:
  * Eliminate grpcio package dependency on protobuf package (#15034).
    Please pay extra attention if you are using gRPC with Protocol Buffers and
    your deployment scripts do not explicitly list the correct dependencies
    and used to rely on the transitive Python package dependency from grpcio to protobuf.
  * A new grpc.Channel.close method is introduced and correct use of gRPC
    Python now requires that channels be closed after use. No existing code
    should observably break when upgrading to 1.12 but code that creates
    channels but does not close them will not be supported in 1.13 and later.
  Core:
  * Fix: Check retry timer before starting resolving (#15156)
  * Fix c-ares resolution with default authority (#15073)
  * Fix c-ares resolver crash when DNS server unreachable (#15134)
  * Add core underpinnings for TLS session ticket support (#14483)
  * Experimental support for configurable retries (use at your own risk) (#10684)
  * Fail calls with wait_for_ready=false on transient resolver failure (#14733)
  * Fix a call stack ref flake (#14681)
  * c-ares DNS resolver sorts resolved addresses per RFC 6724 (#13290)
  * Use socklen_t instead of size_t for address length (fixes use case for some
    big endian systems) (#14464)
  * Initial part of channel tracing implementation (#13883, #14746, #14751)
  * Avoid crashes on environments with hot-plugged CPUs (#14712)
  * When building from source, Makefile now checks for minimum protobuf
    version 3.5.0 instead 3.0.0 (#14821)
  * gRPC Core public header no longer includes inttypes.h (#14676)
  * CMake improvements:
    * Add well-commented examples and continuous test for various ways of
      building gRPC as a dependency (via ExternalProject_Add in #14822,
      via add_subdirectory in #14864)
    *     Remove internal tools from binaries installed by cmake install (#14850)
    *     Simplify Android build example (#14885)
  * Enable SO_REUSEPORT in IPv6-only environments as well (#14748)
  C#:
  * Improvements in experimental support for Unity - added useful resources
    and improved support for loading grpc_csharp_ext on Unity (#14576, #14605)
  * Further prevent name collisions by using only fully qualified type
    names in C# code generator (#14524)
  * Fix C# connectivity watcher shutdown race (#14776)
  Objective-C:
  * Support for Keep-Alive (#14781)
  * Experimental C++ podspec now supports Apple framework (#14480)
  * Allow discarding generated implementation (leaving only protocol)
    with macro (#14490)
  * Better handling of network error (#14554)
  PHP:
  * Add missing -O2 compilation flag for pecl (#14768)
  * Update the reserved variable list to check in PHP code generator to
    match protobuf 3.5.0 (#13580)
  Python:
  * Progress towards full Beta API elimination (Beta API is and has been
    unsupported and will go away completely):
    Remove _face_interface_test tests for the Beta API (#14702)
  * Remove Python background poller thread (#14448)
    Note there is a small change in behavior. Before, clients would
    detect disconnected channels immediately.
  * Initial gevent compatibility (EXPERIMENTAL) (#14561)
  * Release the GIL when calling grpc_call_start_batch to improve
    performance under multithreaded scenarios. (#14801)
  Ruby:
  * Correct handling of underscores in package names by Protocol Buffers code
    generator for Ruby (#13634)
  * Source code and locally compiled (not cross-compiled) shared libraries
    (grpc_c.so files) are removed from the linux binary packages. This includes
    the packages targeting the x86_64-linux and x86-linux platforms (#14634)
  * Bug fix for a use-after-free related to access to a garbage collected
    object (#14809)
  * Get rid of the -Wno-format argument to compilation of the ruby extension
  * Documentation improvements (#14535)
  * Don’t raise GRPC::Core::CallErrors for failed reads or writes of bidi
    streaming calls (#14922)
  * Fix a race condition in an interrupt handler that could cause an
    assertion failure (#14953)

-------------------------------------------------------------------
Wed Mar 28 14:30:53 UTC 2018 - jengelh@inai.de

- Update to new upstream release 1.10.0
  * Several features of core have been removed from the surface
    or GPR API as they were not used in any wrapped language
    (except C++) or in external applications.
  * Changed resolver and LB policy APIs to C++
  * C++ headers are moved from <grpc++/> to <grpcpp/>.

-------------------------------------------------------------------
Mon Feb  5 22:36:18 UTC 2018 - jengelh@inai.de

- Update to new upstream release 1.9.0
  * LB policies request re-resolution without shutting down
  * On server, include receiving HTTP/2 settings in handshake
    timeout.
  * Add thread naming support on platforms that support it.

-------------------------------------------------------------------
Tue Jan 30 21:44:51 UTC 2018 - jengelh@inai.de

- Update to new upstream release 1.8.6
  * Fix server segfault on invalid HTTP/2

-------------------------------------------------------------------
Fri Jan 19 16:06:46 UTC 2018 - jengelh@inai.de

- Update to new upstream release 1.8.5
  * Fix a couple of memory leak issues in the PHP parts

-------------------------------------------------------------------
Tue Jan 16 11:20:00 UTC 2018 - jengelh@inai.de

- Update to new upstream release 1.8.4
  * Fix HTTP/2 PING issues
  * Fix issues with poll engine

-------------------------------------------------------------------
Tue Jan  2 12:11:18 UTC 2018 - crrodriguez@opensuse.org

- version 1.8.3
  * Eliminate superfluous log error messages

-------------------------------------------------------------------
Thu Dec 21 12:05:39 UTC 2017 - jengelh@inai.de

- Update to new upstream release 1.8.2
  * Several LB policies fixes (grpclb and pick_first)

-------------------------------------------------------------------
Mon Dec 11 23:23:19 UTC 2017 - jengelh@inai.de

- Update to new upstream release 1.7.3
  * Bugfixes in Load Balancing policies
  * Add flow-control and bugfixes to in-process transport
  * (C++) Async API extensions to improve multithreading support
    and reduce the need for explicit synchronization
  * (C++) Unary call API for generic (non-protobuf) RPCs
- Drop grpc-zlib.diff, grpc-protobuf.diff (fix included upstream)
- Add grpc-build.diff

-------------------------------------------------------------------
Wed Apr 19 11:57:55 UTC 2017 - jengelh@inai.de

- Initial package (version 1.2.3) for build.opensuse.org
