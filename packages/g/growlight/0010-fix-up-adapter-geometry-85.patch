From 95272c91d5dd38fe867d1520ac049728234472b8 Mon Sep 17 00:00:00 2001
From: nick black <dankamongmen@gmail.com>
Date: Tue, 18 Aug 2020 04:21:29 -0400
Subject: [PATCH 10/13] fix up adapter geometry #85

---
 src/notcurses/notcurses.c | 5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)

diff --git a/src/notcurses/notcurses.c b/src/notcurses/notcurses.c
index ff97cf5..0eee918 100644
--- a/src/notcurses/notcurses.c
+++ b/src/notcurses/notcurses.c
@@ -1378,6 +1378,7 @@ adapter_box(const adapterstate* as, struct ncplane* nc, int abovetop,
   int attrs;
 
   ncplane_dim_yx(nc, NULL, &cols);
+  --cols;
   if(current){
     hcolor = UHEADING_COLOR; // plus NCSTYLE_BOLD
     bcolor = SELBORDER_COLOR;
@@ -1477,14 +1478,14 @@ print_adapter_devs(struct ncplane* n, const adapterstate *as, bool drawfromtop){
   if(as->expansion == EXPANSION_NONE){
     return 0;
   }
-  int maxx, maxy;
-  ncplane_dim_yx(n, &maxy, &maxx);
   // First, print the selected device (if there is one), and those above
   cur = as->selected;
   line = as->selline;
   int rows, cols;
   ncplane_dim_yx(n, &rows, &cols);
 //fprintf(stderr, "START WITH %p at %ld of %d\n", cur, line, rows);
+  --rows;
+  --cols;
   while(cur && line + (long)device_lines(as->expansion, cur) >= drawfromtop){
     p = print_dev(n, as, cur, line, rows, cols, drawfromtop);
     printed += p;
-- 
2.28.0

