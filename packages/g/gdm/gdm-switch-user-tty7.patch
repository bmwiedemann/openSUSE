From 89aa8f63555dd2e4a6b9fcdc49553e9feb231768 Mon Sep 17 00:00:00 2001
From: Xiaoguang Wang <xwang@suse.com>
Date: Tue, 5 Nov 2019 15:03:05 +0800
Subject: [PATCH] session-worker: Select GDM_INITIAL_VT tty for greeter session

Closes #532
---
 daemon/gdm-session-worker.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

Index: gdm-43.0/daemon/gdm-session-worker.c
===================================================================
--- gdm-43.0.orig/daemon/gdm-session-worker.c
+++ gdm-43.0/daemon/gdm-session-worker.c
@@ -2208,7 +2208,7 @@ set_up_for_new_vt (GdmSessionWorker *wor
                 return FALSE;
         }
 
-        if (worker->priv->display_is_initial) {
+        if (strcmp (worker->priv->service, "gdm-launch-environment") == 0) {
                 session_vt = GDM_INITIAL_VT;
         } else {
 
