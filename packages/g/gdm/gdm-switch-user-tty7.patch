From 89aa8f63555dd2e4a6b9fcdc49553e9feb231768 Mon Sep 17 00:00:00 2001
From: Xiaoguang Wang <xwang@suse.com>
Date: Tue, 5 Nov 2019 15:03:05 +0800
Subject: [PATCH] session-worker: Select GDM_INITIAL_VT tty for greeter session

Closes #532
---
 daemon/gdm-session-worker.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/daemon/gdm-session-worker.c b/daemon/gdm-session-worker.c
index 1319907e..0ca3dd0c 100644
--- a/daemon/gdm-session-worker.c
+++ b/daemon/gdm-session-worker.c
@@ -2201,7 +2201,7 @@ set_up_for_new_vt (GdmSessionWorker *worker)
                 return FALSE;
         }
 
-        if (worker->priv->display_is_initial) {
+        if (strcmp (worker->priv->service, "gdm-launch-environment") == 0) {
                 session_vt = GDM_INITIAL_VT;
         } else {
                 if (ioctl(fd, VT_OPENQRY, &session_vt) < 0) {
-- 
2.16.4

