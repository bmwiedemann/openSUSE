From de6a642d171890fb0360fed67fd7313f13ea4b37 Mon Sep 17 00:00:00 2001
From: Jan Fajerski <jfajerski@suse.com>
Date: Fri, 8 Feb 2019 09:17:06 +0100
Subject: [PATCH] Do not force the pure Go name resolver

Revert to Go's default mechanism that will decide between the `netgo`
pure-Go implementation and the `netcgo` cgo-based implementation depending
on OS and environment variables.

This allows, among other things, to use Prometheus to scrape mDNS targets.

Signed-off-by: Jan Fajerski <jfajerski@suse.com>
Signed-off-by: Johannes Kastl <kastl@b1-systems.de>
---
 .promu.yml | 3 +--
 1 file changed, 1 insertion(+), 2 deletions(-)

diff --git a/.promu.yml b/.promu.yml
index f724dc34f..ccce0d5a2 100644
--- a/.promu.yml
+++ b/.promu.yml
@@ -12,13 +12,12 @@ build:
           path: ./cmd/promtool
     tags:
         all:
-            - netgo
             - builtinassets
             - stringlabels
         windows:
             - builtinassets
             - stringlabels
-    flags: -a
+    flags: -mod=vendor -a
     ldflags: |
         -X github.com/prometheus/common/version.Version={{.Version}}
         -X github.com/prometheus/common/version.Revision={{.Revision}}
-- 
2.40.1

