[matz: removed hunks that are exclusive to binutils]
commit 46e292ab0af65d13675b54f808fa24e12999e405
Author: Andreas Krebbel <krebbel@linux.ibm.com>
Date:   Tue Oct 8 11:23:57 2019 +0200

    S/390: Add support for z15 as CPU name.
    
    So far z15 was identified as arch13. After the machine has been
    announced we can now add the real name.
    
    gas/ChangeLog:
    
    2019-10-08  Andreas Krebbel  <krebbel@linux.ibm.com>
    
    	* config/tc-s390.c (s390_parse_cpu): Add z15 as alternate CPU
    	name.
    	* doc/as.texi: Add z15 to CPU string list.
    	* doc/c-s390.texi: Likewise.
    
    opcodes/ChangeLog:
    
    2019-10-08  Andreas Krebbel  <krebbel@linux.ibm.com>
    
    	* s390-mkopc.c (main): Enable z15 as CPU string in the opcode
    	table.

diff --git a/opcodes/s390-mkopc.c b/opcodes/s390-mkopc.c
index 0d07678..fe21ea1 100644
--- a/opcodes/s390-mkopc.c
+++ b/opcodes/s390-mkopc.c
@@ -377,7 +377,8 @@ main (void)
       else if (strcmp (cpu_string, "z14") == 0
 	       || strcmp (cpu_string, "arch12") == 0)
 	min_cpu = S390_OPCODE_ARCH12;
-      else if (strcmp (cpu_string, "arch13") == 0)
+      else if (strcmp (cpu_string, "z15") == 0
+	       || strcmp (cpu_string, "arch13") == 0)
 	min_cpu = S390_OPCODE_ARCH13;
       else {
 	fprintf (stderr, "Couldn't parse cpu string %s\n", cpu_string);
