-------------------------------------------------------------------
Sun Jul 03 18:16:17 UTC 2022 - bjorn.lie@gmail.com

- Update to version 42.3:
  + egl-thread: Release EGL context before destroying it.
  + rdp-graphics-pipeline: Fix uninitialized caps mutex.
  + session-rdp: Use trivial boolean value for condition in
    graphics thread.
  + rdp/nw-auto: Turn assertion into normal conditional statement.

-------------------------------------------------------------------
Mon May 30 12:11:18 UTC 2022 - dimstar@opensuse.org

- Update to version 42.2:
  + rdp-graphics-pipeline: Measure bandwidth when sending frame
    updates.
  + session-rdp: Handle queued bandwidth measure stop operations.
  + rdp/nw-auto: Add APIs for bandwidth measurement.
  + rdp/nw-auto: Also notify client about network characteristics
    results.
  + rdp/nw-auto: Turn ping info condition into assertion.
  + rdp/nw-auto: Assert RTT consumer != NONE, when removing RTT
    consumer.
  + rdp/nw-auto: Remove superfluous if condition.
  + rdp/nw-auto: Fix initial ping source not being created.
  + rdp/rdpgfx: Create RTT pause source while GFX mutex is locked.
  + Updated translations.

-------------------------------------------------------------------
Wed Apr 27 11:50:09 UTC 2022 - Dominique Leuenberger <dimstar@opensuse.org>

- Update to version 42.1.1:
  + session-vnc: Don't leak the socket source
  + hwaccel-nvidia: Degrade a warning to a normal message
  + context: Initialize EGL thread when daemon is ready
  + rdp: Perform basic error checking in SAM file creation
  + session-rdp: Always check return values of API calls
  + Updated translations.

-------------------------------------------------------------------
Mon Apr 25 09:10:38 UTC 2022 - Dominique Leuenberger <dimstar@opensuse.org>

- Update to version 42.1:
  + vnc: Retrieve frame members before stealing frame pointer.
  + rdp: Retrieve frame members before stealing frame pointer.
  + daemon: Only start servers, when they are not started yet.
  + settings: Don't crash, when parsing the credentials string
    fails.
  + egl: Use Wayland platform instead of surfaceless.
  + session-rdp: Only show NSC disable message, when NSC is
    available.
  + session-rdp: Fix typo in warning message.
  + systemd: Autostart as part of gnome-session.target.
  + daemon: Handle SIGINT and SIGTERM signals properly.
  + Updated translations.

-------------------------------------------------------------------
Tue Mar 22 09:14:28 UTC 2022 - Dominique Leuenberger <dimstar@opensuse.org>

- Add explicit pkgconfig(libdrm), pgkconfig(gbm), and
  pkgconfig(gudev-1.0) BuildRequires: meson checks for them. We
  should not rely on any other package pulling it in.

-------------------------------------------------------------------
Mon Mar 21 08:49:44 UTC 2022 - bjorn.lie@gmail.com

- Update to version 42.0:
  * Updated translations.

-------------------------------------------------------------------
Tue Mar 08 08:07:54 UTC 2022 - bjorn.lie@gmail.com

- Update to version 42.rc:
  * Add 'grdctl'
  * build:
    - Bump nv-codec-headers version requirement
    - Stop making the nv-codec-headers optional
  * Cleanup server stopping
  * ctl:
    - Add --show-credentials to status
    - Add 'status' command
  * egl-thread:
    - Add methods to upload data to the GPU
    - Also allow bound dma-bufs to be mapped
    - Don't require callback function for custom tasks
  * Explicitly enable/disable backends via a setting
  * hwaccel-nvidia:
    - Add APIs to allocate and free device memory
    - Add CUDA kernels for damage region detection
    - Add methods to get CUDA functions and damage-kernels
    - Add utility functions for accessing GL resources
    - Also return aligned size when creating NVENC session
    - Load extra CUDA functions for GL PBO mappings
    - Push and pop CUDA context to and from the EGL thread
    - Reduce global memory access in BGRX_TO_YUV420 kernel
    - Unload modules before releasing CUDA context
    - Use a block dim of 16x16x1 for BGRX_TO_YUV420 kernel
    - Use mapped CUDA pointer for AVC420 encodings
  * pipewire-utils: Add functions to check whether PipeWire buffer
    has data
  * rdp:
    - Adapt to GrdRdpBuffer
    - Adapt to GrdRdpDamageDetector
    - Adapt to RDP buffer pool
    - Add classes for damage region detection
    - Add CUDA damage detector class
    - Add display control class
    - Add RDP buffer
    - Add RDP buffer pool
    - Add RDP monitor config
    - Allocate and register GL resources for each RDP buffer
    - Allow dma-bufs again when CUDA is available
    - Allow passing virtual monitor settings to pipewire-stream
      instance
    - Always upload frame data to framebuffer on GPU, if possible
    - Avoid local copy if possible
    - Defer cairo region creation if possible
    - Disable dma-buf support for now, if CUDA is supported
    - Only initialize clipboard if CLIPRDR channel is joined
    - Split up AVC420 encoding
    - Stop reallocating NV12 buffer every frame
    - Track and use rdp_surface reference in stream class
    - Unref frame when success is FALSE
    - Use internal enum for RDP errors
  * rdp-buffer: Add API to unmap resources
  * rdp-buffer-pool:
    - Prefer buffers without mapped resources
    - Unmap buffer resources with low priority GSource
  * rdp-gfx-surface: Add way to override the render surface
  * rdp-graphics-pipeline: Create separate render surface when
    needed
  * rdp-pipewire-stream:
    - Add API to resize stream
    - Don't miss any buffer data
    - Don't queue chosen PipeWire buffer
  * rdp/rdpgfx:
    - Adapt to RDPGFX frame controller
    - Add RDPGFX frame controller
    - Allow GFX surfaces to have their own aligned size
    - Allow surfaces to be created without an hwaccel session
    - Forbid protocol resets without AVC support by the client
    - Target render surface, when encoding data with AVC
  * rdp-server:
    - Cleanup resources directly when stopping the server
    - Tear down NVENC after sessions
  * rdp-surface: Create CUDA damage detector, if CUDA is available
  * session: Also clear signal handler, when the session proxy is
    closed
  * session-rdp:
    - Add API to submit new monitor configurations
    - Add support for monitor layout changes during a session
    - Add support for sessions with virtual monitors
  * settings:
    - Add new screenshare mode setting for the RDP backend
    - Move Secret schemas into a separate file
  * utils: Add helper to calculate aligned sizes
  * vnc-pipewire-stream:
    - Don't miss any buffer data
    - Don't queue chosen PipeWire buffer
  * vnc-server: Cleanup resources directly when stopping the server
  * vnc: Unref frame when success is FALSE
  * Updated translations.

-------------------------------------------------------------------
Wed Feb 16 12:38:47 UTC 2022 - bjorn.lie@gmail.com

- Update to version 42.beta:
  * Add DMA buffer downloading support to EGL thread
  * Add grd-utils
  * build: Bump FreeRDP version requirement
  * ci:
    - Build mutter from git to have the updated screen cast API
    - Install soon to be needed dependencies
  * context: Hook up the EGL thread
  * cuda: Fix out-of-bounds source read in BGRX_TO_YUV420 kernel
  * egl-thread:
    - Add API to query format modifiers
    - Add API to run external functions in EGL thread
    - Add fallback with EGL_PLATFORM_DEVICE_EXT
    - Add sync function
  * hwaccel-nvidia: Use compute devices retrieved from EGL thread
  * Introduce an EGL thread
  * pipewire-utils: Remove unused sync function
  * rdp-gfx-surface: Don't forget to set the surface serial
  * rdp-pipewire-stream:
    - Add support for explicit DMA buffer modifiers
    - Fetch cursor state before framebuffer content
    - Make buffer processing a bit more async
    - Make GrdRdpFrame ref counted
    - Move pixel copy loop to a helper
    - Use a helper variable for the pending frame
    - Use EGL thread for DMA buffer downloads
  * remote-desktop: Synchronize remote-desktop API with API in mutter
  * Remove semi colon after GType macros
  * Rename GrdRdpNvEnc to GrdHwAccelNvidia
  * screen-cast: Synchronize screencast API with API in mutter
  * session:
    - Add methods to create streams on-the-fly
    - Add method to notify subclasses when session is started
    - Port record behaviour to new API
    - Require stream for absolute pointer motion events
  * session-rdp: Move on_pipewire_stream_closed() down a bit
  * settings:
    - Fix test RDP username override
    - Unify code style in gsettings schema
  * vnc-pipewire-stream:
    - Add support for explicit DMA buffer modifiers
    - Do not allocate frame data twice
    - Do not leak pending frame, when destroying stream
    - Do not resize framebuffer when client is gone
    - Make buffer processing callback based
    - Make GrdVncFrame reference counted
    - Move format details helper to common area
    - Simplify buffer merging
    - Use EGL thread to download DMA buffers
    - Use GSource to invoke main thread
  * vnc-server: Make refusing VNC clients more explicit
  * Updated translations.
- Add pkgconfig(epoxy) BuildRequires: New dependency.

-------------------------------------------------------------------
Thu Dec 09 12:36:19 UTC 2021 - bjorn.lie@gmail.com

- Update to version 41.2:
  + stream: Add method to disconnect proxy signals
  + session:
    - Stop trying to stop the session, when it is already destroyed
    - Disconnect num/caps lock changed signals when stopping
    - Fix small style issue
    - Only handle Selection* signals when clipboard is enabled
  + settings:
    - Clear settings of type string before setting new values  
    - Don't leak credentials, when username or password is NULL
    - Set error if username or password is NULL
  + clipboard-rdp:
    - Make a warning message a little bit more explicit
    - Make SelectionTransfer requests async
    - Fix error message, when runtime directory creation fails
    - Fix small style issues
  + clipboard:
    - Split up SelectionTransfer handling
    - Also clear GMutexes and GConds on destruction
  + context: Clear proxies before setting new proxies
  + daemon: Also clear context on destruction
  + rdp/nw-auto:
    - Only create ping source if required and non-existent
    - Also clear GMutexes on destruction
  + rdp-graphics-pipeline: Also clear gfx_mutex on destruction
  + rdp-fuse-clipboard: Also clear GMutexes on destruction
  + rdp-event-queue: Also clear event_mutex on destruction
  + rdp-pipewire-stream: Also clear frame_mutex on destruction
  + session-rdp: Also clear GMutexes and GConds on destruction
  + Updated translations.

-------------------------------------------------------------------
Sat Oct 30 14:40:59 UTC 2021 - bjorn.lie@gmail.com

- Update to version 41.1:
  + vnc-pipewire-stream: Take frame data from pending frame, when
    needed
  + rdp-pipewire-stream: Take frame data from pending frame, when
    needed
  + rdp/rdpgfx: Unref surface serial after looking up surface
    context
  + rdp-graphics-pipeline: Fix small style issue
  + rdp-fuse-clipboard:
    - Fix potential race when accessing FuseFile path
    - Fix small style issue
  + clipboard-rdp: Always check return value of ConvertFromUnicode
  + session-rdp: Only signal GCond, when all encode jobs are
    complete

-------------------------------------------------------------------
Mon Sep 20 16:56:32 UTC 2021 - Bjørn Lie <bjorn.lie@gmail.com>

- Update to version 41.0:
  + Updated translations.
- Set .changes to be filled via service file, since upstream fails
  to provide a changelog/NEWS file.

-------------------------------------------------------------------
Wed Sep 15 15:43:41 UTC 2021 - Dominique Leuenberger <dimstar@opensuse.org>

- Update to version 41.rc:
  + No changelog provided by upstream.
- Add pkgconfig(ffnvcodec) BuildRequires: new dependency.

-------------------------------------------------------------------
Wed Sep 15 15:43:17 UTC 2021 - Bjørn Lie <bjorn.lie@gmail.com>

- Update to version 40.2:
  + rdp-fuse-clipboard: Handle FUSE lifetime object in FUSE thread
  + tests: Use bash from environment instead of hardcoded path
- Changes from version 40.1:
  + clipboard-rdp:
    - Also output client capabilities  
    - Add dummy handling for the Temporary Directory PDU
    - Advertise clipboard data locking  
    - Adapt to data locking changes
    - Add APIs to lock/unlock the clients clipboard data
    - Implement clipboard data locking
    - clipboard-rdp: Use g_idle_add() instead of g_timeout_add()
  + rdp: Allow submitting clipDataIds for FileContentsRequests  
  + rdp-fuse-clipboard:
    - Remove the old API
    - Use notify_delete() instead of notify_inval_entry()
    - Be more verbose with file range requests
    - Read files until the very end
    - Handle all file lists via clipDataIds
  + rdp-sam: Remove stray trailing whitespaces
  + pipewire-stream: Don't leak GSource's
  + build:
    - Add missing new line
    - Explicitly depend on glib >= 2.68

-------------------------------------------------------------------
Sun Mar 21 16:31:51 UTC 2021 - Dominique Leuenberger <dimstar@opensuse.org>

- Update to version 40.0:
  + rdp: Add support for FreeRDP 2.3, support 2.3, requires at
    least 2.2.
  + Manu bugfixes.
- Add pkgconfig(freerdp-client2), pkgconfig(freerdp-server2),
  pkgconfig(fuse3), pkgconfig(libvncclient),
  pkgconfig(libvncserver), and pkgconfig(xkbcommon) BuildRequires:
  better align with what meson looks for.
- Change _service file to point to the proper upstream git repo
  (gitlab.gnome.org/GNOME/gnome-remote-desktop).
- Drop gnutls-anontls.patch,
  0001-vnc-Copy-pixels-using-the-right-destination-stride.patch
  0001-vnc-Drop-frames-if-client-is-gone.patch: fixed upstream:
  fixed upstream.

-------------------------------------------------------------------
Fri Jan  8 15:37:47 UTC 2021 - Frederic Crozat <fcrozat@suse.com>

- Update to version 0.1.9:
  + add support for RDP (requires freerdp2)
  + many bugfixes
- Add pkgconfig(freerdp2), pkgconfig(winpr2), pkgconfig(cairo) as
  BuildRequires.
- Bump pipewire minimum version to 0.3.0.
- Update url to GNOME main project.
- Add0001-vnc-Drop-frames-if-client-is-gone.patch
  Avoid race condition on disconnect (glgo#GNOME/gnome-remote-desktop#43)
- Add gnutls-anontls.patch (Fedora), requires patched libVNCServer.
- Add 0001-vnc-Copy-pixels-using-the-right-destination-stride.patch:
  Copy using the right destination stride (glgo#GNOME/gnome-remote-desktop!21)

-------------------------------------------------------------------
Sun Mar 22 14:01:33 UTC 2020 - Bjørn Lie <bjorn.lie@gmail.com>

- Update to version 0.1.8:
  + Port to pipewire-0.3.
- Replace pkgconfig(libpipewire-0.2) with
  pkgconfig(libpipewire-0.3) BuildRequires.

-------------------------------------------------------------------
Fri Oct 18 19:47:55 UTC 2019 - Bjørn Lie <bjorn.lie@gmail.com>

- Update to version 0.1.7:
  + vnc-pipewire-stream:
    - Assume no bitmap offset means no bitmap change.
    - Close session when disconnected.
  + vnc:
    - Request cursor sprite as PipeWire metadata.
    - Detach source when client is gone.
  + session/vnc:
    - Set rfbScreenPtr pointer earlier.
    - Update server format earlier too.
    - Always set pixel format translate functions.
    - Don't requeue close session idle.
  + Use type safety feature of glib 2.58.
  + meson.build: Use default C standard.
  + Remove autogen.sh and Makefile.
  + meson.build: Bump pipewire requirement to 0.2.2.
- Drop pipewire-bump.patch: Fixed upstream.

-------------------------------------------------------------------
Wed Sep 26 21:18:49 UTC 2018 - bjorn.lie@gmail.com

- Update to version 0.1.6:
  + Please see https://gitlab.gnome.org/jadahl/gnome-remote-desktop
- Add pkgconfig(libnotify), pkgconfig(libpipewire-0.2) and
  pkgconfig(libsecret-1) BuildRequires: New dependencies.
- Drop gnome-remote-desktop-bad-meson-option.patch: Fixed upstream.
- Add pipewire-bump.patch: Fix build with new pipewire.

-------------------------------------------------------------------
Thu May 17 01:03:37 UTC 2018 - hpj@suse.com

- Initial package.
