---
 grub-core/Makefile.core.def |    1 +
 grub-core/tpm2/module.c     |    2 +-
 util/grub-protect.c         |    2 +-
 3 files changed, 3 insertions(+), 2 deletions(-)

--- a/grub-core/Makefile.core.def
+++ b/grub-core/Makefile.core.def
@@ -2569,6 +2569,7 @@
   common = tpm2/mu.c;
   common = tpm2/tpm2.c;
   efi = tpm2/tcg2.c;
+  enable = efi;
 };
 
 module = {
--- a/util/grub-protect.c
+++ b/util/grub-protect.c
@@ -542,7 +542,7 @@
       if (pcr_values.digests[i].size != pcr_digest_len)
         {
           fprintf (stderr,
-                   _("Bad PCR value size: expected %lu bytes but got %u bytes.\n"),
+                   _("Bad PCR value size: expected %" PRIuGRUB_SIZE " bytes but got %u bytes.\n"),
                    pcr_digest_len, pcr_values.digests[i].size);
           goto exit2;
         }
--- a/grub-core/tpm2/module.c
+++ b/grub-core/tpm2/module.c
@@ -195,7 +195,7 @@
   if (sealed_key_size > buf.cap)
     {
       grub_dprintf ("tpm2", "Sealed key file is larger than decode buffer "
-                            "(%lu vs %lu bytes).\n", sealed_key_size, buf.cap);
+                            "(%" PRIuGRUB_SIZE " vs %" PRIuGRUB_SIZE " bytes).\n", sealed_key_size, buf.cap);
       return GRUB_ERR_BAD_ARGUMENT;
     }
 
