From: Nick Le Mouton <nick@noodles.net.nz>
Date: Tue, 18 Aug 2015 13:09:28 +1200
Git-commit: ab0d0337550cc3e23e06a23c4f600214bb2abfc9
References: bsc#1087487
Subject: [PATCH] Ignore hostname line in Apache 2.4.16

Acked-by: John Jolly <jjolly@suse.de>
---
 gmond/python_modules/apache_status/apache_status.py | 4 ++++
 1 file changed, 4 insertions(+)

diff --git a/gmond/python_modules/apache_status/apache_status.py b/gmond/python_modules/apache_status/apache_status.py
index e33e5ea9..580e8931 100755
--- a/gmond/python_modules/apache_status/apache_status.py
+++ b/gmond/python_modules/apache_status/apache_status.py
@@ -86,6 +86,10 @@ def get_metrics():
                     for sck in split_line[1]:
                         metrics[ Scoreboard_bykey[sck] ] += 1
                 else:
+                    # Apache > 2.4.16 inserts the hostname as the first line, so ignore
+                    if len(split_line) == 1:
+                        continue
+                    
                     if long_metric_name in Metric_Map:
                         metric_name = Metric_Map[long_metric_name]
                     else:
-- 
2.13.6

