From ea1da8fef7d78e4780059728fd352c6d2869a54c Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Aurimas=20=C4=8Cernius?= <aurisc4@gmail.com>
Date: Sun, 3 May 2020 12:54:53 +0300
Subject: [PATCH] Fix start note creation and importing on first run

Fixes https://gitlab.gnome.org/GNOME/gnote/-/issues/36
---
 src/notemanager.cpp | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

diff --git a/src/notemanager.cpp b/src/notemanager.cpp
index 5c58ee25..ff7375ed 100644
--- a/src/notemanager.cpp
+++ b/src/notemanager.cpp
@@ -50,8 +50,9 @@ namespace gnote {
   void NoteManager::init(const Glib::ustring & directory)
   {
     Glib::ustring backup = directory + "/Backup";
-    NoteManagerBase::init(directory, backup);
+    // Before base init, after it will be false already
     bool is_first_run = first_run();
+    NoteManagerBase::init(directory, backup);
 
     Glib::RefPtr<Gio::Settings> settings = m_preferences.get_schema_settings(Preferences::SCHEMA_GNOTE);
     // Watch the START_NOTE_URI setting and update it so that the
-- 
2.26.2


