diff -u -r libXpm-3.5.15.orig/configure.ac libXpm-3.5.15/configure.ac
--- libXpm-3.5.15.orig/configure.ac	2023-04-03 22:10:42.223223000 +0200
+++ libXpm-3.5.15/configure.ac	2023-04-03 22:11:35.264112000 +0200
@@ -74,7 +74,6 @@
 if test x$OPEN_ZFILE = xno ; then
         AC_DEFINE(NO_ZPIPE, 1, [Define to 1 to disable decompression via pipes])
 else
-        XPM_PATH_PROG([XPM_PATH_COMPRESS], [compress])
         XPM_PATH_PROG([XPM_PATH_UNCOMPRESS], [uncompress])
         XPM_PATH_PROG([XPM_PATH_GZIP], [gzip])
         AC_CHECK_FUNCS([closefrom close_range], [break])
diff -u -r libXpm-3.5.15.orig/src/WrFFrI.c libXpm-3.5.15/src/WrFFrI.c
--- libXpm-3.5.15.orig/src/WrFFrI.c	2023-04-03 22:10:41.615310000 +0200
+++ libXpm-3.5.15/src/WrFFrI.c	2023-04-03 22:17:45.861160000 +0200
@@ -342,8 +342,7 @@
 #ifndef NO_ZPIPE
 	len = strlen(filename);
 	if (len > 2 && !strcmp(".Z", filename + (len - 2))) {
-	    mdata->stream.file = xpmPipeThrough(fd, XPM_PATH_COMPRESS, NULL, "w");
-	    mdata->type = XPMPIPE;
+	    mdata->stream.file = NULL;
 	} else if (len > 3 && !strcmp(".gz", filename + (len - 3))) {
 	    mdata->stream.file = xpmPipeThrough(fd, XPM_PATH_GZIP, "-q", "w");
 	    mdata->type = XPMPIPE;
