From: Bruce Rogers <brogers@suse.com>
Date: Tue, 28 May 2019 14:23:37 -0600
Subject: configure: only populate roms if softmmu

Currently roms are mistakenly getting built in a linux-user only
configuration. Add check for softmmu in all places where our list of
roms is being added to.

Signed-off-by: Bruce Rogers <brogers@suse.com>
---
 configure | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/configure b/configure
index 7c08c18358becf49779c876b0f3d..a35b63b2106900e6f7ff46d2b8da 100755
--- a/configure
+++ b/configure
@@ -2725,7 +2725,7 @@ fi
 
 # Only build s390-ccw bios if we're on s390x and the compiler has -march=z900
 # or -march=z10 (which is the lowest architecture level that Clang supports)
-if test "$cpu" = "s390x" ; then
+if test "$cpu" = "s390x" && test "$softmmu" = yes ; then
   write_c_skeleton
   compile_prog "-march=z900" ""
   has_z900=$?
