-------------------------------------------------------------------
Fri Aug 24 09:06:19 UTC 2018 - mcalabkova@suse.com

- removed useless patch qpid-cpp-DisableWerror.patch
  * it can be solved by giving additional parameter to cmake

-------------------------------------------------------------------
Wed Aug 22 13:28:29 UTC 2018 - mcalabkova@suse.com

- Update to upstream 1.38.0
  * define test script dependencies in CMake so make test picks up 
    changes
  * add a CMake switch to allow -Werror to be switched off
    + -Werror switched off by patch qpid-cpp-DisableWerror.patch
  * various documentation fixes and added man pages
    + manual pages added to packages client-devel and 
      qpid-qmf-devel
  * remove the obsolete Python management API
    + obsolete package python-qpid-qmf removed
- Added patches:
  * qpid-cpp-DisableWerror.patch (see above)
- Removed patches:
  * Suppress-maybe-uninitialized-warning.diff (obsolete)
  * qpid-cpp-0.30-cmake.patch (obsolete)

-------------------------------------------------------------------
Fri Jan 19 11:51:09 UTC 2018 - fstrba@suse.com

- Update to upstream 1.37.0
  * New features and improvements
    + QPID-7574 - Make management libraries Python 3 compatible
    + QPID-7629 - Use CMake "SYSTEM" keyword when including headers
    + QPID-7666 - [linearstore] Enhancements to the write buffer
      default and per-queue options
    + QPID-7677 - [C++ broker] broker requires much more memory for
      AMQP1.0 subscription than for 0-10 one
    + QPID-7698 - Minor doc improvements
    + QPID-7714 - Suppress auto_ptr warnings
    + QPID-7715 - [linearstore] Documentation on upgrading from
      pre-partition to partitioned version of store
    + QPID-7861 - [cpp] Provide systemd scripts for Fedora
    + QPID-7874 - qpid-route performs an unnecessary link check
      when adding routes
    + QPID-7875 - qpid-route fetches links multiple times when
      deleting routes
    + QPID-8041 - [Messaging] Allow virtualhost to be specified
      when form an AMQP 0-10 connection
  * Bugs fixed
    + QPID-7595 - [C++ Windows] CMake required version is too low
      for installation
    + QPID-7651 - [linearstore] Using write page cache sizes of 1
      and 2 (kiB) cause floating point exception on startup
    + QPID-7669 - Unintended UI changes from switch to swigged
      Python client for management tools
    + QPID-7671 - Problem building on debian (unstable)
      distribution:
    + QPID-7674 - Broker bulid problem with GCC 7
    + QPID-7693 - SSL client socket leaks a file descriptor
    + QPID-7702 - Use of 'return NULL' in swig binding leaks memory
    + QPID-7713 - Clang build fails with link error
    + QPID-7786 - qpidd segfaults during startup when SSL
      certificate cant be read
    + QPID-7788 - Linearstore doesnt move to EFP latest journal
      files when deleting a durable queue
    + QPID-7847 - qmf.client.BrokerAgent does not provide reconnect
      support
    + QPID-7859 - [AMQP 1.0]: sending message to an exchange that
      exceeds the limit of a queue with reject policy results in
      connection being closed
    + QPID-7860 - [cpp] Build produces deprecation warnings on
      recent Fedora
    + QPID-7871 - Batch file for Windows is missing from qpid-tools
      setup package
    + QPID-7876 - qpid-route does not properly consider src-local
      when matching bridges
    + QPID-7893 - compilation failure on Fedora 26
    + QPID-7895 - [linearstore] Excessive CPU utilization for some
      kernel clocksources
    + QPID-7901 - Prevent endless detach cycle
    + QPID-7929 - [c++ broker] missing extern fails compile on
      Windows
    + QPID-7975 - [linearstore] Sending durable messages using AMQP
      1.0 and 0-10 concurrently causes high latency for 1.0 messages
    + QPID-7991 - Segfault in broker while processing active bridges
    + QPID-8037 - Compile error on Windows, Visual Studio 2017
  + Tasks
    + QPID-7920 - Qpid C++ 1.37.0 release tasks
- Removed patches:
  * 0001-QPID-7674-Broker-bulid-problem-with-GCC-7.patch
  * 0001-QPID-7714-Suppress-very-verbose-warnings.patch
  * 0001-QPID-7629-Use-the-CMake-SYSTEM-keyword-when-includin.patch
    + Fixed upstream
- Modified patch:
  * Suppress-maybe-uninitialized-warning.diff
    + Adapt to changed context

-------------------------------------------------------------------
Wed Jun 28 11:10:28 UTC 2017 - mlin@suse.com

- Add patches to fix build failure
  * 0001-QPID-7674-Broker-bulid-problem-with-GCC-7.patch
    - Fix build problem in broker.
  * 0001-QPID-7714-Suppress-very-verbose-warnings.patch
    - Suppress warnings per gcc7.
  * 0001-QPID-7629-Use-the-CMake-SYSTEM-keyword-when-includin.patch
    - Fix compile with newer nss and sasl.
  * Suppress-maybe-uninitialized-warning.diff
    - Suppress -Werror=maybe-uninitialized if gcc version great than 7.

-------------------------------------------------------------------
Fri Mar  3 02:47:14 UTC 2017 - sflees@suse.de

- Fix typo server-ha had 2 %service_del_preun and no 
  %service_del_postun

-------------------------------------------------------------------
Wed Feb 22 08:15:53 UTC 2017 - fstrba@suse.com

- Update to upstream 1.36.0
  * New features and improvements
    + QPID-7430 - Allow qpid::messaging addresses to be passed
      through to server
    + QPID-7432 - Make python management tools work over AMQP 1.0
    + QPID-7439 - Proton-based library for QMF management.
    + QPID-2549 - Port qpid to FreeBSD
    + QPID-4397 - C++ Broker Improve log statement for expired
      messages
    + QPID-6391 - [C++ Broker] [AMQP 1.0] add support for a
      'no-local' filter
    + QPID-6665 - update hello_world.cpp example to use
      setContentObject
    + QPID-6730 - Make the journal flush timeout configurable in
      the C++ broker
    + QPID-6757 - [linearstore] Add qpid-txtest mode to
      qpid-qls-analyze which extracts message number from message
      body
    + QPID-6783 - qpidd should dynamically set the SASL service
      name based on protocol.
    + QPID-7130 - qpid C++ with SSL authentication returning dummy
      string from Connection::getAuthenticatedUsername()
    + QPID-7171 - Allow disable-auto-decode to be set via env var
      or conf file
    + QPID-7281 - Get the tests running on Windows
  * Bugs fixed
    + QPID-7406 - release doesn't reset cursors for active consumers
      on LVQ
    + QPID-7415 - [AMQP 1.0]: reject, release & modified ignored by
      qpid::messaging
    + QPID-7494 - Invocation of check_dependencies.py fails on CMake
      2.8.11
    + QPID-7500 - [AMQP 1.0] session close is not synchronous
    + QPID-7501 - [AMQP 1.0] sessions and links should be freed
      under lock
    + QPID-5855 - JAVA Client Can not recieve message with qpid ha
      cluster "Session exception occured while trying to commit"
    + QPID-6308 - [C++ Messaging] Server example never sends utf8
      responses
    + QPID-6435 - No error info logged for io errors with ssl
    + QPID-6491 - qpid-route map does not use any authentication
      when querying other brokers
    + QPID-6577 - HA - backup broker messages are larger than
      primary messages.
    + QPID-6639 - Incoming connection using "cut-through" ANONYMOUS
      SASL fails
    + QPID-6648 - Spelling, grammar errors in
      qpid::messaging::Receiver API doc
    + QPID-6654 - mgmt-disable option set to false causes segv on
      CentOS 6.3
    + QPID-6659 - [AMQP 1.0] qpid::messaging can't handle
      multi-frame transfers
    + QPID-6660 - [AMQP 1.0] broker attempts to process incoming
      messages for closed session
    + QPID-6661 - [AMQP 1.0] heartbeat anomalies
    + QPID-6668 - [C++] INSTALL-WINDOWS is out of date
    + QPID-6698 - [amqp1.0] connections drop when heartbeat is used
      and the time of day changes
    + QPID-6714 - Add support for JMSHeaders in selectors
    + QPID-6717 - selector can match incorrectly due to different
      type for values
    + QPID-6718 - parsing errors for integer literals in selectors
    + QPID-6767 - qpidd tools don't allow sasl service name to be
      changed
    + QPID-6790 - qpidd crashes in the interop_tests unit test.
    + QPID-6834 - allow lifetime of delete-on-close in queue policy
    + QPID-6858 - Port all python swig input files to support
      python 3 and 2
    + QPID-6870 - [AMQP 1.0]: qpidd does not honour the
      undeliverable-here field of MODIFIED disposition
    + QPID-6924 - Qpidd fails to compile against trunk 0.12-SNAPSHOT
      proton-c
    + QPID-6966 - C++ broker and client to support TLS1.1 and TLS1.2
      by default
    + QPID-7010 - assertion failure if disposition sent for
      previously settled delivery
    + QPID-7020 - uint16 AMQP0-10 message properties decoded as
      uint8
    + QPID-7100 - qpid-perftest divide by zero when mode is shared
      and nsubs is zero
    + QPID-7127 - [C++ broker] Setting large idle timeout cause
      confuses timers in the C++ broker
    + QPID-7131 - snd-settle-mode advertised is always 'mixed'
    + QPID-7134 - [C++ client] Message::setContent("") does not work
    + QPID-7137 - Abi tests fail with new libstdc++ abi
    + QPID-7145 - auto_ptr is deprecated from C++11 and onwards and
      its use causes a warning with GCC 6
    + QPID-7147 - When compiling with C++11/14 bind() use gets found
      as std::bind()
    + QPID-7149 - [HA] active HA broker memory leak when ring queue
      discards overflow messages
    + QPID-7182 - [C++ broker] high CPU usage on backup brokers
      following QPID-7149 scenario
    + QPID-7225 - PriorityQueue doesn't check that released message
      is acquired
    + QPID-7233 - qpid-receive uses 0 prefetch unless an explicit
      message count is provided
    + QPID-7234 - client does not update credit for expired messages
    + QPID-7235 - Observers should have a virtual destructor
    + QPID-7240 - acquired messages are not evicted from
      priority-ring queue
    + QPID-7250 - Durable message that exceeds page queue size
      prevents broker restart
    + QPID-7302 - race between auto-delete and re-declare/consume
    + QPID-7306 - Fix memory bugs and race conditions found in a
      Qpid HA deployment
    + QPID-7324 - [AMQP 1.0] support 'undeliverable-here' field for
      MODIFIED outcome
    + QPID-7326 - Memory bloat on HA primary broker
    + QPID-7329 - [AMQP 1.0]: support message-annotations field for
      MODIFIED outcome
    + QPID-7357 - c++ HA Backup crash during re-connect in failover
    + QPID-7361 - [AMQP-1.0] sender sometimes waits for credit
      without flushing buffered transfers to disk
    + QPID-7373 - memory leak in broker with idle worker threads
    + QPID-7376 - fetch with capacity=0 can hang or timeout if
      fetched message expires client-side
    + QPID-7383 - [linearstore] Overwrite-before-return causes
      latencies for clients
    + QPID-7393 - Unavailable buffers in Windows SSL
  * Tasks
    + QPID-7581 - update the 'tested proton version' check prior to
      release
- Removed patches:
  * qpid-boost-test-message.patch
  * qpid-cpp-0.34-gcc6.patch
    + integrated upstream

-------------------------------------------------------------------
Thu Feb  2 12:03:45 UTC 2017 - adam.majer@suse.de

- use individual libboost-*-devel packages instead of boost-devel

-------------------------------------------------------------------
Mon Jul 11 12:26:56 UTC 2016 - i@marguerite.su

- refreshed patch: qpid-cpp-0.34-gcc6.patch
  * use upstream fix: https://issues.apache.org/jira/browse/QPID-7146
    because removal of -Werror may have side effects.
  * this patch contains several upstream commits including:
    + Fix function binding error
    + Remove (via preprocessor) unused code
    + Fix indentation error picked up by compiler
    + Renamed bind to avoid clash with (new for C++11/14) std::bind -
      The compiler was finding std::bind in preference due to argument
      dependent lookup
    + Don't warn for using deprecated declarations (auto_ptr is now 
      deprecated)
  * should be dropped next release

-------------------------------------------------------------------
Fri Jun 17 15:47:48 UTC 2016 - fstrba@suse.com

- Added patch:
  * qpid-cpp-0.34-gcc6.patch
    - Disable -Werror in order to be able to build with the new
      GCC6 warnings.

-------------------------------------------------------------------
Mon Aug 31 08:53:46 UTC 2015 - fstrba@suse.com

- Update to upstream 0.34
  * New features and improvements
    - QPID-6492 - When AMQP 1.0 link attach triggers an ACL error,
      the link should be refused
    - QPID-6592 - [amqp1.0] Add identifying information to the
      connection properties advertised to the client
  * Bugs fixed
    - QPID-6256 - Improved control over AMQP versions tried
    - QPID-6368 - Coverity 1262251 - double free in ~PersistableQueue
    - QPID-6392 - [C++ Broker] [AMQP 1.0] the broker didnt respond
      to a link detach request
    - QPID-6397 - [C++ broker] segfault when processing QMF method
      during periodic processing
    - QPID-6399 - Windows run_test.ps1 script needs revamp to match
      run_test
    - QPID-6409 - Taking address of a 0-length vector throws
      exception
    - QPID-6463 - WinSDK script fails - Proton components have moved
    - QPID-6470 - FieldValue::getFloatingPointValue() converts endian
      each time it is called
    - QPID-6484 - AccessViolationException when creating queues
    - QPID-6493 - cmake install (TARGET ...) component syntax is
      incorrect in the src/CMakeLists.txt
    - QPID-6511 - [C++ Broker, clients] AMQP 0-10 windows clients
      can not connect to --no-auth broker
    - QPID-6521 - [AMQP 1.0] messages received pre-settled are never
      settled locally causing memory build up in client
    - QPID-6524 - [C++ broker]: Fix for QPID-5107 incomplete for
      queues
    - QPID-6526 - [AMQP 1.0]: race condition in creating
      senders/receivers
    - QPID-6529 - [C++ Client] Fails to compile with Proton 0.10
    - QPID-6532 - make sasl service name configurable
    - QPID-6548 - SYSV init scripts do not work properly with
      SSL-only broker.
    - QPID-6549 - service qpidd status returns 1 - hidden error is
      "ConnectionError: connection-forced: Connection must be
      encrypted.(320)"
    - QPID-6551 - [C++ broker]: linearstore raising
      JERR_LFCR_SEQNUMNOTFOUND after sending many DTX transactions
    - QPID-6559 - NullSaslClient only support ANONYMOUS
    - QPID-6563 - [amqp1.0] broker does not clean up closed sessions
      or links
    - QPID-6568 - [amqp1.0] bump the minimum required proton version
      to 0.7
    - QPID-6602 - [AMQP 1.0] prefetch is not always accurate
- Added patch:
  * qpid-boost-test-message.patch
    - Fix build with boost 1.59

-------------------------------------------------------------------
Wed Mar 25 09:28:06 UTC 2015 - fstrba@suse.com

- Mention qpid-cpp-rpmlintrc in the spec file

-------------------------------------------------------------------
Wed Mar 25 09:06:48 UTC 2015 - fstrba@suse.com

- Update to upstream 0.32
- Removed integrated patches:
  * 0002-NO-JIRA-Remove-dead-unused-code.patch
  * 0003-QPID-6128-Fix-compiling-SocketAddress-on-ARM.patch

-------------------------------------------------------------------
Wed Feb 25 09:00:03 UTC 2015 - fstrba@suse.com

- Update to upstream 0.30
- Rename the packate from qpid to qpid-cpp
  * correspond to the upstream packaging
- Removed patches:
  * 0002-NO-JIRA-Remove-unused-code.patch
  * 0003-QPID-3650-Avoid-unaligned-memory-access.patch
  * 0004-QPID-3650-Avoid-unaligned-memory-access.patch
  * qpid-0.24-defaultstart.patch
  * qpid-0.24-initdir.patch
  * qpid-0.24-tests.patch
  * qpid-0.28-cmake.patch
- Added patches:
  * 0002-NO-JIRA-Remove-dead-unused-code.patch
  * 0003-QPID-6128-Fix-compiling-SocketAddress-on-ARM.patch
  * qpid-cpp-0.30-cmake.patch
  * qpid-cpp-initdir.patch
  * qpid-cpp-tests.patch

-------------------------------------------------------------------
Thu Jul 24 08:23:29 UTC 2014 - fstrba@suse.com

- Update to upstream 0.28
- Removed integrated patches:
  * 0002-QPID-4984-Fix-for-recovery-ambiguity-issue-other-cod.patch
  * 0003-QPID-5556-Provide-the-right-Perl-packages-in-top-lev.patch
  * 0004-QPID-5499-Fix-Ruby-Perl-bindings-when-built-with-Wer.patch
- Add new upstream patches:
  * 0002-NO-JIRA-Remove-unused-code.patch
  * 0003-QPID-3650-Avoid-unaligned-memory-access.patch
  * 0004-QPID-3650-Avoid-unaligned-memory-access.patch
- Rediff patch to correspond to the new sources
  * qpid-0.26-cmake.patch -> qpid-0.28-cmake.patch
- Add patch to fix aarch64 build
  * qpid-cpp-aarch64.patch
- Don't build qpid-tools as noarch since it contains two new binary
  tools

-------------------------------------------------------------------
Mon May 26 23:25:53 UTC 2014 - fstrba@suse.com

- Move things from /var/run to /run

-------------------------------------------------------------------
Mon Apr 14 09:35:07 UTC 2014 - fstrba@suse.com

- Update to upstream 0.26
- Removed patches:
  * 02-QPID-4670-Move-to-proton-0.5-remove-dummy-string-in-.patch
  * 03-QPID-5122-cleaner-encoding-of-index-for-delivery-tag.patch
  * 05-QPID-5016-Zero-rmgr-struct-element-with-correct-size.patch
  * 06-QPID-5126-Fix-for-building-legacy-store-on-ARM-platf.patch
- New patches from Fedora:
  * 0001-NO-JIRA-qpidd.service-file-for-use-on-Fedora.patch
  * 0002-QPID-4984-Fix-for-recovery-ambiguity-issue-other-cod.patch
  * 0003-QPID-5556-Provide-the-right-Perl-packages-in-top-lev.patch
  * 0004-QPID-5499-Fix-Ruby-Perl-bindings-when-built-with-Wer.patch
- Build fix with newer versions of cmake
  * qpid-0.26-cmake.patch

-------------------------------------------------------------------
Mon Jan  6 13:30:35 UTC 2014 - fridrich.strba@suse.com

- Own some directories to avoid post-build errors

-------------------------------------------------------------------
Mon Sep 30 12:53:36 UTC 2013 - fridrich.strba@suse.com

- Add BuildRoot line to fix build on older systems
- Depend on oldest swig known to work

-------------------------------------------------------------------
Mon Sep 30 12:17:33 UTC 2013 - fridrich.strba@suse.com

- Fix packaging of store.so* and thus build with debuginfo flag

-------------------------------------------------------------------
Fri Sep 20 14:25:02 UTC 2013 - fridrich.strba@suse.com

- Initial package based on Fedora's qpid-cpp package

