From: Simon Vogl <simon.vogl@gmx.net>
Date: Mon, 17 Jul 2020 21:15:29 UTC
Subject: [PATCH] Fix broken python detection of QMPlay2 when it tries to launch youtube-dl

This patch is required to prevent QMPlay2 from always preferring python2 over python3 which can lead to crashes in certain cases.
It also adds openSUSE branding to the about screen.

--- a/src/qmplay2/YouTubeDL.cpp
+++ b/src/qmplay2/YouTubeDL.cpp
@@ -458,25 +458,7 @@
         const int idx = shebang.lastIndexOf("python");
         if (shebang.startsWith("#!") && idx > -1)
         {
-            const auto pythonCmd = shebang.mid(idx);
-            if (!QStandardPaths::findExecutable(pythonCmd).endsWith(pythonCmd))
-            {
-                QStringList pythonCmdsToCheck {
-                    "python",
-                    "python2",
-                    "python3",
-                };
-                pythonCmdsToCheck.removeOne(pythonCmd);
-                for (auto &&pythonCmd : qAsConst(pythonCmdsToCheck))
-                {
-                    if (QStandardPaths::findExecutable(pythonCmd).endsWith(pythonCmd))
-                    {
-                        args.prepend(program);
-                        program = pythonCmd;
-                        break;
-                    }
-                }
-            }
+            const auto pythonCmd = "python3";
         }
         ytDlFile.close();
     }

--- a/src/gui/AboutWidget.cpp
+++ b/src/gui/AboutWidget.cpp
@@ -43,6 +43,7 @@
     labelText += "<b>QMPlay2:</b> " + tr("video and audio player");
     labelText += "<br/><b>" + tr("Programmer") + ":</b> <a href='mailto:spaz16@wp.pl'>Błażej Szczygieł</a>";
     labelText += "<br/><b>" + tr("Version") + ":</b> " + QMPlay2Core.getSettings().getString("Version") + " (" + QSysInfo::buildCpuArchitecture() + ")";
+    labelText += "<br/><b>This release was supplied by SUSE/openSUSE.</b>";
     QLabel *label = new QLabel(labelText);
 
     QLabel *iconL = new QLabel;
