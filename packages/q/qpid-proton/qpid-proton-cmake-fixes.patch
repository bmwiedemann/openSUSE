Index: qpid-proton-0.17.0/proton-c/bindings/node/CMakeLists.txt
===================================================================
--- qpid-proton-0.17.0.orig/proton-c/bindings/node/CMakeLists.txt
+++ qpid-proton-0.17.0/proton-c/bindings/node/CMakeLists.txt
@@ -57,7 +57,11 @@ include_directories("${NODE_ROOT_DIR}/de
 set(CMAKE_CXX_CREATE_SHARED_MODULE ${CMAKE_CXX_CREATE_SHARED_LIBRARY})
 set(CMAKE_SWIG_FLAGS "-node;-I${CMAKE_CURRENT_SOURCE_DIR}/../../include")
 set_source_files_properties(javascript.i PROPERTIES CPLUSPLUS ON)
-swig_add_module(cproton javascript javascript.i)
+if ((${CMAKE_MAJOR_VERSION} EQUAL 3) AND (${CMAKE_MINOR_VERSION} LESS 7))
+  swig_add_module(cproton javascript javascript.i)
+else()
+  swig_add_library(cproton LANGUAGE javascript SOURCES javascript.i)
+endif ((${CMAKE_MAJOR_VERSION} EQUAL 3) AND (${CMAKE_MINOR_VERSION} LESS 7))
 set_target_properties (cproton PROPERTIES LINKER_LANGUAGE CXX)
 list(APPEND SWIG_MODULE_cproton_javascript_EXTRA_DEPS
   ${CMAKE_CURRENT_SOURCE_DIR}/../../proton-c/include/proton/cproton.i
Index: qpid-proton-0.17.0/proton-c/bindings/perl/CMakeLists.txt
===================================================================
--- qpid-proton-0.17.0.orig/proton-c/bindings/perl/CMakeLists.txt
+++ qpid-proton-0.17.0/proton-c/bindings/perl/CMakeLists.txt
@@ -53,10 +53,15 @@ list(APPEND SWIG_MODULE_cproton_perl_EXT
     ${CMAKE_SOURCE_DIR}/proton-c/include/proton/cproton.i
     ${PROTON_HEADERS}
 )
-swig_add_module(cproton_perl perl perl.i)
+if ((${CMAKE_MAJOR_VERSION} EQUAL 3) AND (${CMAKE_MINOR_VERSION} LESS 7))
+  swig_add_module(cproton_perl perl perl.i)
+else()
+  swig_add_library(cproton_perl LANGUAGE perl SOURCES perl.i)
+endif ((${CMAKE_MAJOR_VERSION} EQUAL 3) AND (${CMAKE_MINOR_VERSION} LESS 7))
 swig_link_libraries(cproton_perl ${BINDING_DEPS} ${PERL_LIBRARY})
 
-if ((${CMAKE_MAJOR_VERSION} EQUAL 2) AND (${CMAKE_MINOR_VERSION} LESS 8))
+if (((${CMAKE_MAJOR_VERSION} EQUAL 2) AND (${CMAKE_MINOR_VERSION} LESS 8)) OR
+    ((${CMAKE_MAJOR_VERSION} GREATER 2) AND (${CMAKE_MINOR_VERSION} GREATER 8)))
   install(FILES ${CMAKE_CURRENT_BINARY_DIR}/cproton_perl.so
         DESTINATION ${PERL_VENDORARCH_DIR}/auto/cproton_perl
         COMPONENT Perl
@@ -67,7 +72,8 @@ else()
         DESTINATION ${PERL_VENDORARCH_DIR}/auto/cproton_perl
         COMPONENT Perl
         )
-endif ((${CMAKE_MAJOR_VERSION} EQUAL 2) AND (${CMAKE_MINOR_VERSION} LESS 8))
+endif (((${CMAKE_MAJOR_VERSION} EQUAL 2) AND (${CMAKE_MINOR_VERSION} LESS 8)) OR
+       ((${CMAKE_MAJOR_VERSION} GREATER 2) AND (${CMAKE_MINOR_VERSION} GREATER 8)))
 
 install(FILES ${CMAKE_CURRENT_BINARY_DIR}/cproton_perl.pm
         DESTINATION ${PERL_VENDORARCH_DIR}
Index: qpid-proton-0.17.0/proton-c/bindings/php/CMakeLists.txt
===================================================================
--- qpid-proton-0.17.0.orig/proton-c/bindings/php/CMakeLists.txt
+++ qpid-proton-0.17.0/proton-c/bindings/php/CMakeLists.txt
@@ -34,7 +34,11 @@ list(APPEND SWIG_MODULE_cproton_EXTRA_DE
     ${CMAKE_SOURCE_DIR}/proton-c/include/proton/cproton.i
     ${PROTON_HEADERS}
 )
-swig_add_module(cproton php ${CMAKE_CURRENT_SOURCE_DIR}/php.i)
+if ((${CMAKE_MAJOR_VERSION} EQUAL 3) AND (${CMAKE_MINOR_VERSION} LESS 7))
+  swig_add_module(cproton php ${CMAKE_CURRENT_SOURCE_DIR}/php.i)
+else ()
+  swig_add_library(cproton LANGUAGE php SOURCES ${CMAKE_CURRENT_SOURCE_DIR}/php.i)
+endif ((${CMAKE_MAJOR_VERSION} EQUAL 3) AND (${CMAKE_MINOR_VERSION} LESS 7))
 set_source_files_properties(${swig_generated_file_fullname} PROPERTIES COMPILE_FLAGS "${PHP_INCLUDES}")
 swig_link_libraries(cproton ${BINDING_DEPS})
 # PHP modules must be linked with unresolved symbols as they are presumably satisfied only when loaded by php itself
Index: qpid-proton-0.17.0/proton-c/bindings/python/CMakeLists.txt
===================================================================
--- qpid-proton-0.17.0.orig/proton-c/bindings/python/CMakeLists.txt
+++ qpid-proton-0.17.0/proton-c/bindings/python/CMakeLists.txt
@@ -39,8 +39,11 @@ list(APPEND SWIG_MODULE_cproton_EXTRA_DE
     ${CMAKE_SOURCE_DIR}/proton-c/include/proton/cproton.i
     ${PROTON_HEADERS}
 )
-
-swig_add_module(cproton python cproton.i)
+if ((${CMAKE_MAJOR_VERSION} EQUAL 3) AND (${CMAKE_MINOR_VERSION} LESS 7))
+  swig_add_module(cproton python cproton.i)
+else ()
+  swig_add_library(cproton LANGUAGE python SOURCES cproton.i)
+endif ((${CMAKE_MAJOR_VERSION} EQUAL 3) AND (${CMAKE_MINOR_VERSION} LESS 7))
 swig_link_libraries(cproton ${BINDING_DEPS} ${PYTHON_LIBRARIES})
 set_target_properties(${SWIG_MODULE_cproton_REAL_NAME}
     PROPERTIES
Index: qpid-proton-0.17.0/proton-c/bindings/ruby/CMakeLists.txt
===================================================================
--- qpid-proton-0.17.0.orig/proton-c/bindings/ruby/CMakeLists.txt
+++ qpid-proton-0.17.0/proton-c/bindings/ruby/CMakeLists.txt
@@ -26,7 +26,11 @@ list(APPEND SWIG_MODULE_cproton-ruby_EXT
 )
 
 include_directories (${RUBY_INCLUDE_PATH})
-swig_add_module(cproton-ruby ruby ruby.i)
+if ((${CMAKE_MAJOR_VERSION} EQUAL 3) AND (${CMAKE_MINOR_VERSION} LESS 7))
+  swig_add_module(cproton-ruby ruby ruby.i)
+else ()
+  swig_add_library(cproton-ruby LANGUAGE ruby SOURCES ruby.i)
+endif ((${CMAKE_MAJOR_VERSION} EQUAL 3) AND (${CMAKE_MINOR_VERSION} LESS 7))
 swig_link_libraries(cproton-ruby ${BINDING_DEPS} ${RUBY_LIBRARY})
 
 # set a compiler macro to relay the Ruby version to the extension.
