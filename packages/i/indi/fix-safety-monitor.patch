From 7891ede769f350db0b8117e2a3182b204230a055 Mon Sep 17 00:00:00 2001
From: Jasem Mutlaq <mutlaqja@ikarustech.com>
Date: Thu, 4 Dec 2025 11:34:13 +0300
Subject: [PATCH] Fix critical bug in safety monitor where client status check
 did not trigger a callback

---
 drivers/auxiliary/safetymonitor_client.cpp | 15 ++++++---------
 1 file changed, 6 insertions(+), 9 deletions(-)

diff --git a/drivers/auxiliary/safetymonitor_client.cpp b/drivers/auxiliary/safetymonitor_client.cpp
index 7f1893daf3..a38fe652ef 100644
--- a/drivers/auxiliary/safetymonitor_client.cpp
+++ b/drivers/auxiliary/safetymonitor_client.cpp
@@ -106,16 +106,13 @@ void SafetyMonitorClient::updateProperty(INDI::Property property)
 {
     if (property.getDeviceName() == m_DeviceName && property.isNameMatch("SAFETY_STATUS"))
     {
-        if (m_SafetyStatusLP.getState() != property.getState())
-        {
-            m_SafetyStatusLP = property;
-            LOGF_INFO("Safety Monitor Client: Updated safety status from %s, state: %s",
-                      m_DeviceName.c_str(), pstateStr(m_SafetyStatusLP.getState()));
+        m_SafetyStatusLP = property;
+        LOGF_INFO("Safety Monitor Client: Updated safety status from %s, state: %s",
+                  m_DeviceName.c_str(), pstateStr(m_SafetyStatusLP.getState()));
 
-            // Notify parent driver of status change
-            if (m_StatusCallback)
-                m_StatusCallback();
-        }
+        // Notify parent driver of status change
+        if (m_StatusCallback)
+            m_StatusCallback();
     }
 }
 
