From c5a9c41602328ef380ffc40144d4eca3672beb0c Mon Sep 17 00:00:00 2001
From: Jarno Rajahalme <jarno@covalent.io>
Date: Tue, 3 Dec 2019 15:45:42 -0800
Subject: [PATCH 2/6] test: Fix mocks

Add missing mocks.

Signed-off-by: Jarno Rajahalme <jarno@covalent.io>
---
 envoy/test/mocks/server/mocks.cc | 4 +++-
 envoy/test/mocks/server/mocks.h  | 1 +
 2 files changed, 4 insertions(+), 1 deletion(-)

diff --git a/envoy/test/mocks/server/mocks.cc b/envoy/test/mocks/server/mocks.cc
index 8f5153a4a..be811c276 100644
--- a/envoy/test/mocks/server/mocks.cc
+++ b/envoy/test/mocks/server/mocks.cc
@@ -144,7 +144,9 @@ MockInstance::MockInstance()
       singleton_manager_(new Singleton::ManagerImpl(Thread::threadFactoryForTest())),
       grpc_context_(stats_store_.symbolTable()), http_context_(stats_store_.symbolTable()),
       server_factory_context_(
-          std::make_shared<NiceMock<Configuration::MockServerFactoryContext>>()) {
+          std::make_shared<NiceMock<Configuration::MockServerFactoryContext>>()),
+      transport_socket_factory_context_(
+          std::make_shared<NiceMock<Configuration::MockTransportSocketFactoryContext>>()){
   ON_CALL(*this, threadLocal()).WillByDefault(ReturnRef(thread_local_));
   ON_CALL(*this, stats()).WillByDefault(ReturnRef(stats_store_));
   ON_CALL(*this, grpcContext()).WillByDefault(ReturnRef(grpc_context_));
diff --git a/test/mocks/server/mocks.h b/test/mocks/server/mocks.h
index de0efffe4..3fd1bedd3 100644
--- a/envoy/test/mocks/server/mocks.h
+++ b/envoy/test/mocks/server/mocks.h
@@ -498,6 +498,7 @@ public:
   ~MockFactoryContext() override;
 
   MOCK_CONST_METHOD0(getServerFactoryContext, ServerFactoryContext&());
+  MOCK_CONST_METHOD0(getTransportSocketFactoryContext, TransportSocketFactoryContext&());
   MOCK_METHOD0(accessLogManager, AccessLog::AccessLogManager&());
   MOCK_METHOD0(clusterManager, Upstream::ClusterManager&());
   MOCK_METHOD0(dispatcher, Event::Dispatcher&());
-- 
2.16.4

