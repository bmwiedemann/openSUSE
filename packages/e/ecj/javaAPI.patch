Index: ecj-4.22/build.xml
===================================================================
--- ecj-4.22.orig/build.xml
+++ ecj-4.22/build.xml
@@ -18,16 +18,20 @@
 	<property name="output" value="bin" />
 	<property name="jar_file" value="ecj.jar" />
 
+	<path id="build.path">
+		<pathelement path="${javaapi}"/>
+	</path>
 	<target name="build">
 		<delete file="${basedir}/${jar_file}" failonerror="no" />
 		<delete dir="${output}" failonerror="no" />
 		<mkdir dir="${output}" />
 
 		<javac srcdir="${basedir}" destdir="${output}"
+					encoding="utf-8"
 					debuglevel="lines,source"
 					debug="true"
 					release="11">
-			<compilerarg line="-Xlint:none --patch-module java.compiler=javax17api.jar"/>
+			<compilerarg line="-Xlint:none --patch-module java.compiler=${toString:build.path}"/>
 		</javac>
 
 		<delete file="${basedir}/META-INF/MANIFEST.MF" failonerror="false"/>
