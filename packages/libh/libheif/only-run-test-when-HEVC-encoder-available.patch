diff -purN a/tests/CMakeLists.txt b/tests/CMakeLists.txt
--- a/tests/CMakeLists.txt	2024-11-01 11:56:56.000000000 +0100
+++ b/tests/CMakeLists.txt	2024-11-03 22:35:11.344681868 +0100
@@ -47,9 +47,12 @@ endif()
 # --- tests that only access the public API
 
 add_libheif_test(encode)
-add_libheif_test(extended_type)
 add_libheif_test(region)
 
+if ((WITH_X265 OR WITH_KVAZAAR) AND SUPPORTS_HEIC_ENCODING)
+    add_libheif_test(extended_type)
+endif()
+
 if (WITH_OPENJPH_ENCODER AND SUPPORTS_J2K_HT_ENCODING)
     add_libheif_test(encode_htj2k)
 else()
