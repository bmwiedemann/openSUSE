From 65886f5c2c568572602f6d82f4717508cb720f10 Mon Sep 17 00:00:00 2001
From: Dmitry Vedenko <vedenko@gmail.com>
Date: Fri, 18 Jun 2021 20:29:22 +0300
Subject: [PATCH] Fixes wxwidgets fixup script

---
 .../cmake-modules/dependencies/wxwidgets.cmake         | 10 +++++++++-
 1 file changed, 9 insertions(+), 1 deletion(-)

diff --git a/cmake-proxies/cmake-modules/dependencies/wxwidgets.cmake b/cmake-proxies/cmake-modules/dependencies/wxwidgets.cmake
index 2def9ae85..4b35e8947 100644
--- a/cmake-proxies/cmake-modules/dependencies/wxwidgets.cmake
+++ b/cmake-proxies/cmake-modules/dependencies/wxwidgets.cmake
@@ -1,4 +1,10 @@
-if( ${_OPT}use_wxwidgets STREQUAL "system" ) 
+if( ${_OPT}use_wxwidgets STREQUAL "system" OR NOT ${_OPT}conan_enabled )
+    # DV: find_package will be scoped, as FindwxWidgets.cmake is rather outdated.
+    # Still - let's perform the sanity check first.
+    if( NOT wxWidgets_FOUND )
+        find_package( wxWidgets REQUIRED COMPONENTS adv base core html qa xml net )
+    endif()
+
     if( NOT TARGET wxwidgets::wxwidgets )
         add_library( wxwidgets::wxwidgets INTERFACE IMPORTED GLOBAL)
     endif()
@@ -74,6 +80,8 @@ if( ${_OPT}use_wxwidgets STREQUAL "system" )
 
     set( toolkit "${wxWidgets_LIBRARIES}" )
 
+    message(STATUS "Trying to retrieve GTK version from ${toolkit}")
+
     if( "${toolkit}" MATCHES ".*gtk2.*" )
         set( gtk gtk+-2.0 )
         set( glib glib-2.0 )
-- 
2.26.2

