From ebf5213cd61824b10bcaf67c570919e2a9ea0e1f Mon Sep 17 00:00:00 2001
From: Jaroslav Kysela <perex@perex.cz>
Date: Wed, 15 Jan 2020 10:40:01 +0100
Subject: [PATCH 62/63] ucm: remove MAX_FILE definition and use correct
 PATH_MAX

Signed-off-by: Jaroslav Kysela <perex@perex.cz>
---
 src/ucm/parser.c    | 6 +++---
 src/ucm/ucm_local.h | 1 -
 2 files changed, 3 insertions(+), 4 deletions(-)

diff --git a/src/ucm/parser.c b/src/ucm/parser.c
index 1bfde0be327d..6c13fafdabbf 100644
--- a/src/ucm/parser.c
+++ b/src/ucm/parser.c
@@ -1167,7 +1167,7 @@ static int parse_verb_file(snd_use_case_mgr_t *uc_mgr,
 	snd_config_t *n;
 	struct use_case_verb *verb;
 	snd_config_t *cfg;
-	char filename[MAX_FILE];
+	char filename[PATH_MAX];
 	int err;
 
 	/* allocate verb */
@@ -1582,7 +1582,7 @@ static int get_by_card(snd_use_case_mgr_t *mgr, const char *ctl_name, char *long
 static int load_master_config(snd_use_case_mgr_t *uc_mgr,
 			      const char *card_name, snd_config_t **cfg, int longname)
 {
-	char filename[MAX_FILE];
+	char filename[PATH_MAX];
 	int err;
 
 	if (strnlen(card_name, MAX_CARD_LONG_NAME) == MAX_CARD_LONG_NAME) {
@@ -1733,7 +1733,7 @@ static int is_component_directory(const char *dir)
  */
 int uc_mgr_scan_master_configs(const char **_list[])
 {
-	char filename[MAX_FILE], dfl[MAX_FILE];
+	char filename[PATH_MAX], dfl[PATH_MAX];
 	char *env = getenv(ALSA_CONFIG_UCM2_VAR);
 	const char **list, *d_name;
 	snd_config_t *cfg, *c;
diff --git a/src/ucm/ucm_local.h b/src/ucm/ucm_local.h
index 63e0f3bf1697..fa9fc16661bb 100644
--- a/src/ucm/ucm_local.h
+++ b/src/ucm/ucm_local.h
@@ -42,7 +42,6 @@
 
 #define SYNTAX_VERSION_MAX	2
 
-#define MAX_FILE		256
 #define MAX_CARD_SHORT_NAME	32
 #define MAX_CARD_LONG_NAME	80
 
-- 
2.16.4

