From 1654f38a29e635ce69a30c6c95ec1ca773ecee37 Mon Sep 17 00:00:00 2001
From: Jaroslav Kysela <perex@perex.cz>
Date: Wed, 4 Mar 2020 11:27:12 +0100
Subject: [PATCH 4/5] configure: add --embed for python3-config (python 3.8)

Fixes: https://github.com/alsa-project/alsa-lib/issues/33

Signed-off-by: Jaroslav Kysela <perex@perex.cz>
---
 configure.ac | 5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)

diff --git a/configure.ac b/configure.ac
index 0f9fb01631f1..4b5ab6628bff 100644
--- a/configure.ac
+++ b/configure.ac
@@ -423,7 +423,10 @@ if test "$build_python" = "yes" -a "$build_mixer_pymodules" = "yes"; then
   pythonlibs0=
   pythoninc0=
   if test "$build_python2" != "yes"; then
-    pythonlibs0=$(python3-config --libs)
+    pythonlibs0=$(python3-config --libs --embed 2> /dev/null)
+    if test -z "$pythonlibs0"; then
+      pythonlibs0=$(python3-config --libs)
+    fi
     pythoninc0=$(python3-config --includes)
   fi
   if test -z "$pythonlibs0"; then
-- 
2.16.4

