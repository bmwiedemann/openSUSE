From 485930ea5dc8a14e0d215de44557372ca41b15f4 Mon Sep 17 00:00:00 2001
From: Jaroslav Kysela <perex@perex.cz>
Date: Tue, 30 Jun 2020 09:22:12 +0200
Subject: [PATCH 01/32] ucm: substitution - remove duplicate allow_empty
 assignment

Signed-off-by: Jaroslav Kysela <perex@perex.cz>
---
 src/ucm/ucm_subs.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/src/ucm/ucm_subs.c b/src/ucm/ucm_subs.c
index a154aa510ee8..d40e5478b084 100644
--- a/src/ucm/ucm_subs.c
+++ b/src/ucm/ucm_subs.c
@@ -303,7 +303,6 @@ __std:
 		} else if (value[1] != '{') {
 			goto __std;
 		}
-		allow_empty = false;
 		fcn2 = NULL;
 		MATCH_VARIABLE(value, "${OpenName}", rval_open_name, false);
 		MATCH_VARIABLE(value, "${ConfTopDir}", rval_conf_topdir, false);
@@ -365,7 +364,8 @@ __rval:
 			}
 			strncpy(r, value, idsize);
 			r[idsize] = '\0';
-			uc_error("variable '%s' is not defined in this context!", r);
+			uc_error("variable '%s' is %s in this context!", r,
+				 rval ? "empty" : "not defined");
 			err = -EINVAL;
 			goto __error;
 		}
-- 
2.16.4

