-------------------------------------------------------------------
Sun Sep 29 19:45:59 UTC 2024 - Fridrich Strba <fstrba@suse.com>

- Fix build after removal of the default %%{java_home} define

-------------------------------------------------------------------
Tue Sep 17 15:42:27 UTC 2024 - Fridrich Strba <fstrba@suse.com>

- Modified patch:
  * reproducible-jar-mtime.patch
    + try different approach to get bit-reproducible builds

-------------------------------------------------------------------
Tue Aug 13 14:43:30 UTC 2024 - Fridrich Strba <fstrba@suse.com>

- Modified patches:
  * reproducible-jar-mtime.patch
    + attempt more normalization of mtimes in jar files
  * reproducible-javadoc.patch
    + fix the patch to work with custom doclets too

-------------------------------------------------------------------
Thu Jul 18 12:09:04 UTC 2024 - Fridrich Strba <fstrba@suse.com>

- Added patches:
  * reproducible-jar-mtime.patch
    + make the modification times of files in a jar file
      reproducible
  * reproducible-javadoc.patch
    + make javadoc generation reproducible: don't generate
      timestamps, and normalize locale and encoding

-------------------------------------------------------------------
Sat May  4 00:54:38 UTC 2024 - Anton Shvetz <shvetz.anton@gmail.com>

- Add forgotten open-test-reporting/events to
  %{_sysconfdir}/ant.d/junitlauncher

-------------------------------------------------------------------
Sat Apr 27 11:36:31 UTC 2024 - Fridrich Strba <fstrba@suse.com>

- Put hamcrest on the classpath of ant-junit module

-------------------------------------------------------------------
Tue Feb 20 13:32:02 UTC 2024 - Fridrich Strba <fstrba@suse.com>

- Use %patch -P N instead of deprecated %patchN.

-------------------------------------------------------------------
Fri Jan 26 20:37:50 UTC 2024 - Anton Shvetz <shvetz.anton@gmail.com>

- Add forgotten univocity-parsers to
  %{_sysconfdir}/ant.d/junitlauncher (needed to run unit tests
  annotated with @CsvSource and @CsvFileSource)

-------------------------------------------------------------------
Mon Sep 11 12:50:03 UTC 2023 - Fridrich Strba <fstrba@suse.com>

- Added patch:
  * reproducible-propertyfile-task.patch
    + Debian patch to improve propertyfile task in RPM builds by
      using the date specified by the SOURCE_DATE_EPOCH variable
      in the header of the .properties file generated

-------------------------------------------------------------------
Thu Aug 31 06:49:53 UTC 2023 - Fridrich Strba <fstrba@suse.com>

- Update to 1.10.14:
  * Changes that could break older environments:
    + Resource#compareTo now invokes getName rather than toString as
      the later may be costly (for example in the case of a
      StringResource).
    + When using Java 18 or higher, Ant will no longer use Java
      SecurityManager because it has been deprecated for removal and
      by default is disallowed to be set at runtime
      https://openjdk.org/jeps/411.
      This will mean that the "<permissions>" type is no longer
      functional when using Java 18 or higher.
      Furthermore, when using Java 18 or higher, if the build
      executes tasks that call "java.lang.System.exit()" and if
      those tasks aren't running in a forked VM of their own, then
      such tasks will now kill the entire Ant build process. It is
      recommended that such tasks be updated to launch in a forked 
      VM so that the System.exit() call will not impact the JVM in
      which Ant process runs.
  * Fixed bugs:
    + log only the stylesheet name in the xslt task.
    + junitlauncher task's "test" and "listener" elements which take
      a "outputDir" property were incorrectly resolving the
      outputDir against the current working directory instead of the
      project's basedir.
    + regexmapper would, in some cases, incorrectly consume
      backslash characters from the "to" attribute, resulting in
      missing backslashes in the output.
    + <fixcrlf>, <replace> and <replaceregexp> now try to preserve
      the file permissions of the files they modify.
    + junitlauncher task would fail if a forked test timed out even
      if haltOnFailure was set to false.
    + fixes a bug in org.apache.tools.zip.ZipOutputStream where,
      even when "zip64Mode" is set to "always", ZipOutputStream may
      not create a CEN extra field data for the entry.
    + legacy-xml listener of junitlauncher task wouldn't report
      certain failures involving junit jupiter dynamic tests.
    + allow.class which was introduced in Ant 1.10.13 release, has
      been removed from this 1.10.14 release. This class was
      introduced in context of the SecurityManager changes in
      Ant 1.10.13, which have now been reverted in Ant 1.10.14,
      since they caused several regressions.
  * Other changes:
    + <fork> element of the junitlauncher task now has a new
      optional "java" attribute which can be used to point to a
      different Java installation for runnning the forked tests.
    + made sure <echoproperties> sorts the echoed properties on
      JDK9+ as well.
    + org.apache.tools.ant.taskdefs.Recorder class now introduces a
      setLogLevel(LogLevel level) method.
    + The <fork> element of junitlaunchertask now allows a
      "forkMode" attribute. forkMode=perTestClass can now be used to
      launch each test class in a separate forked JVM.

-------------------------------------------------------------------
Thu May  4 12:48:37 UTC 2023 - Frederic Crozat <fcrozat@suse.com>

- Add _multibuild to define additional spec files as additional
  flavors.
  Eliminates the need for source package links in OBS.

-------------------------------------------------------------------
Thu Jan 26 06:54:09 UTC 2023 - Fridrich Strba <fstrba@suse.com>

- Package and distribute the new ant-jakartamail

-------------------------------------------------------------------
Wed Jan 18 09:18:50 UTC 2023 - David Anes <david.anes@suse.com>

- Update ant keyring with new developer keys.

- Update to 1.10.13:
  * Breaking changes:
    - <get> has a new attribute authenticateOnRedirect that can be 
      used to prevent Ant from sending the configured credentials 
      when following a redirect. It is false by default, which means
      builds that rely on credentials being used on the redirected 
      URI may break.
  * Fixed bugs:
    - the PropertyEnumerator change introduced in 1.10.9 proved to 
      be not fully backwards compatible when combined with certain 
      custom PropertyHelper implementations - for example when using
      AntXtras.
    - legacy-xml reporter of the junitlauncher task now escapes ]]>
      when writing CDATA.
    - <scp> may leak connections when trying to preserve the last 
      modified timestamps of files transferred recursively from a 
      server.
    - tstamp task would in certain cases parse the SOURCE_DATE_EPOCH
      environment variable value to an incorrect date. This has now 
      been fixed.
    - fetch.xml didn't set up non-default repositories propery and 
      thus failed to download JAI.
    - When building and installing Ant distribution from source, the
      build script would change permissions on unrelated files in 
      the destination directory. This is now fixed and such 
      unrelated files in the destination directory will be left 
      untouched.
    - parsing tar entries with multiple NUL bytes in their name 
      would include garbage bytes as the name included all bytes up
      to the last NUL rather than the first.
    - loadresource might log warnings even though quiet was set to 
      true
    - javac task would add paths constructs containing wildcards to
      the internally created argument file where wildcards are not
      allowed
  * Other changes:
    - added an implementation of the MIME Mail sender based on the
      repackaged Jakarta Mail package rather than javax Mail.  
    - The "listener" element in the junitlauncher task now supports
      an "extension" attribute to control the filename extension
      of the generated output file from the listener.
    - <ftp> now supports FTPs.
    - DirectoryScanner avoids listing directory contents when it
      known it will never use the information retrieved. This may
      improve performance in some special cases.
    - <manifest> will now create the parent directory of the
      manifestFile attribute if it doesn't exist.
    - org.apache.tools.ant.BuildLogger now has a new method 
      getMessageOutputLevel() which returns the currently set 
      message output level.

-------------------------------------------------------------------
Mon May  9 09:33:15 UTC 2022 - Fridrich Strba <fstrba@suse.com>

- Disable a test failing to compile with junit5 5.8.x

-------------------------------------------------------------------
Tue Feb 22 19:15:02 UTC 2022 - Fridrich Strba <fstrba@suse.com>

- Do not build against the log4j12 packages, use the new reload4j

-------------------------------------------------------------------
Wed Dec 15 16:19:12 UTC 2021 - David Anes <david.anes@suse.com>

- Update to 1.10.12:
 * The update includes fixes for the following CVEs:
   CVE-2021-36374, bsc#1188469 
      Excessive memory allocation when reading a specially 
      crafted ZIP archive or a derived formats.
   CVE-2021-36373, bsc#1188468
      Excessive memory allocation when reading a specially 
      crafted TAR archive.
 * The http condition would follow redirects even when "followRedirects" attribute
   was set to "false". This has now been fixed. Bugzilla Report 65489
 * Made sure setting build.compiler to the fully qualified classname
   that corresponds to extJavac or modern has the same effect as using
   the shorter alias names. Bugzilla Report 65539
 * Prevent potential deadlocks in org.apache.tools.ant.IntrospectionHelper. 
   Bugzilla Report 65424
 * The implementation of AntClassLoader#findResources() has been changed to optimize 
   it for potential performance issues, as those noted at https://issues.jenkins.io/browse/JENKINS-22310?focusedCommentId=197405&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-197405
   Github Pull Request #151
 * AntClassLoader now implements the ClassLoader#findResource(String) method.
   Github Pull Request #150
 * Ant tries to avoid file name canonicalization when possible.
   Bugzilla Report 65499
 * javadoc task will now look for warning messages in the STDERR stream too
   when "failonwarning" is set to true to account for changes in JDK 17+
 * The tar task now preserves symlinks of nested tarfilesets.
   Github Pull Request #142

- Changes from 1.10.11:
 * a race condition could lead to NullPointerExceptions when running
   tasks in parallel.
   Bugzilla Report 65316
 * fixed potential OutOfMemory errors when reading broken archives
   using the tar or zip formats or formats derived from zip.
 * org.apache.tools.ant.taskdefs.optional.junitlauncher.confined.JUnitLauncherTask now
   has a new protected createExecuteWatchdog() method for allowing it to be overriden.
   Github Pull Request #147
 * Upgraded AntUnit to 1.4.1.

-------------------------------------------------------------------
Thu Jun  3 16:17:46 UTC 2021 - Pedro Monreal <pmonreal@suse.com>

- Update to 1.10.10
  * SCP (with sftp=true) task would fail if fetching file located
    in root directory.
  * Fixed: javac task would fail if the arguments file it
    (internally) created didn't quote the # character.
  * Make sure LegacyXmlResultFormatter encodes characters illegal
    in XML the same way JUnit5's built-in formatter would.
  * LegacyXmlResultFormatter no longer double-encodes <>& in
    system-err and system-out.
  * Fixes a bug in junitlauncher task's legacy-xml formatter,
    where the testcase representing a @Parameterized JUnit4 test
    wasn't being reported in the XML.
  * Fixes a bug where the ant-testutil-sources.jar that gets
    published to Maven central repository didn't contain any
    source files.
  * The <http> condition didn't follow redirects from http to https.
  * ZipOutputStream now overrides write(int) in order to make sure
    single byte writes get the same treatment as array writes.
  * Fixes a potential deadlock in junitlauncher task when using
    legacy-xml reporter.
  * javaversion condition now has a new "atmost" attribute. See
    the javaversion manual for more details
  * The "listener" nested element of the "junitlauncher" task now
    has a new "useLegacyReportingName" attribute which can be used
    to control the test identifiers names that get reported by the
    listener. See the junitlauncher manual for more details. Note that
    this change also introduces a new "setUseLegacyReportingName" method
    on the org.apache.tools.ant.taskdefs.optional.junitlauncher.TestResultFormatter
    interface. This will break backward compatibility with any of your custom
    result formatters which implemented this interface and such implementations
    are now expected to implement this new method.
  * A new attribute preserveduplicates allows <resourcelist> to
    return the same resource multiple times when set to true.
  * A new attribute filterbeforeconcat in <concat> can be used to
    decide whether the filterchain should be applied to the
    concatenated content (the default) or each nested resource
    individually before concatenating them.
  * The ssh tasks now share a new nested element additionalConfig that can
    be used to set config values for the jsch Session used by the task.
  * Added new discardOutput and discardError properties to redirector
    and the exec, apply and java tasks which can be used to completely
    discard any (error) output. This is a platform independent
    alternative to directiong output to any kind of null device.
  * junitlauncher now prints a more useful and instantaneous summary of
    tests being run, closely matching the junit task's summary.

-------------------------------------------------------------------
Thu Oct  1 15:38:21 UTC 2020 - Pedro Monreal <pmonreal@suse.com>

- Update to 1.10.9
  * Security fix: [bsc#1177180, CVE-2020-11979]
    - Insecure temporary file vulnerability
  * Fixed bugs:
    - The ftp task could throw a NullPointerException if an
      error occured.
    - Propertyset now also sees in-scope local properties.
    - Replaced ReaderInputStream with the version of Apache
      Commons IO due to problems with surrogate pairs.
    - <fixcrlf> will no longer remove the temporary file it
      just created before writing to it.
    - <sshexec> and <scp> didn't deal with wildcard hostnames
      in shs config files properly.
  * Other changes:
    - Ant will no longer log a warning if it doesn't find tools.jar.
    - The <jar> task accepts now a nested <indexjarsmapper>
      element that can be used to perform custom filename
      transformations for the <indexjars> archives.
    - Added a new PropertyEnumerator interface that extensions can
      provide if they are managing properties unknown to the Ant project.
    - Added some special code to support GraalVM JavaScript as
      javax.script scripting engine for JavaScript. In particular we
      relax some security settings of GraalVM so that scripts can access
      Ant objects.
    - Also Ant enables Nashorn compatibility mode by default, you can
      disable that by setting the magic Ant property
      ant.disable.graal.nashorn.compat to true.
    - If the magic property ant.tmpdir hasn't been set and Ant can
      control the permissions of directories it creates it will create an
      owner-owned temporary directory unaccessible to others as default
      tempdir as soon as a temporary file is created for the first time.

-------------------------------------------------------------------
Thu May 14 17:31:18 UTC 2020 - Pedro Monreal Gonzalez <pmonrealgonzalez@suse.com>

- Update to 1.10.8
 * Security fix: [CVE-2020-1945, bsc#1171696]
   - A new property ant.tmpdir provides improved control over the
     location Ant uses to create temporary files
 * sshexec failed to write output to a file if the file didn't exist
 * Fixes a regression in javac task involving command line argument files.
 * sshexec, sshsession and scp now support a new sshConfig parameter.
   It specified the SSH configuration file (typically ${user.home}/.ssh/config)
   defining the username and keyfile to be used per host.
 * "legacy-xml" formatter of junitlauncher task wasn't writing out
   exceptions that happen in @BeforeAll method of a test.
 * Fixes a potential ConcurrentModificationException in XMLLogger.
 * Fixes a bug in junitlauncher task in forked mode, where if a listener element
   was used as a sibling element for either the test or testclasses element,
   then the forked mode launch would fail.
 * Fixes an issue in AntStructure where an incorrect DTD was being generated.
 * Fixes an incorrect variable name usage in junit-frames-xalan1.xsl.
 * The runant.py script should now work with Python 3.
 * rmic has been removed from Java 15. The task will now throw an
   exception if you try to use it while running Java 15 or newer.
- Remove ant-python3.patch fixed upstream

-------------------------------------------------------------------
Wed May  6 16:49:40 UTC 2020 - Pedro Monreal Gonzalez <pmonrealgonzalez@suse.com>

- Add rhino to the ant-apache-bsf optional tasks [bsc#1134001]

-------------------------------------------------------------------
Wed May  6 16:45:22 UTC 2020 - Pedro Monreal Gonzalez <pmonrealgonzalez@suse.com>

- Remove jakarta-commons-* dependencies [bsc#1133997]
  * Use apache-commons-logging and apache-commons-net in optional tasks

-------------------------------------------------------------------
Tue Jan 14 07:03:37 UTC 2020 - Fridrich Strba <fstrba@suse.com>

- Use xml-commons-apis-bootstrap as jar in classpath instead of
  the common xml-apis jar, since we are forcing build against
  the bootstrap package

-------------------------------------------------------------------
Fri Nov  8 11:15:20 UTC 2019 - Fridrich Strba <fstrba@suse.com>

- Upgrade to upstream version 1.10.7
- Modified patches:
  * apache-ant-bootstrap.patch
  * apache-ant-no-test-jar.patch
  * apache-ant-xml-apis.patch
  * reproducible-build-manifest.patch
    + rediff
- Fix ant-xz.jar to be non-empty and split it from the ant-antlr
  package

-------------------------------------------------------------------
Tue Oct  1 08:34:33 UTC 2019 - Fridrich Strba <fstrba@suse.com>

- Build against the new compatibility packages log4j12/log4j12-mini

-------------------------------------------------------------------
Mon Sep 30 08:08:49 UTC 2019 - Fridrich Strba <fstrba@suse.com>

- Remove references to parent poms from all artifacts and do not
  distribute the ant-parent, since we don't need it

-------------------------------------------------------------------
Tue Apr  9 10:48:23 UTC 2019 - Fridrich Strba <fstrba@suse.com>

- Require directly xerces-j2 and not its virtual provide
  jaxp_parser_impl

-------------------------------------------------------------------
Mon Mar 18 17:30:12 UTC 2019 - Jan Engelhardt <jengelh@inai.de>

- Make "if" statements in build recipe POSIX sh compatible.

-------------------------------------------------------------------
Fri Feb  8 08:51:41 UTC 2019 - Fridrich Strba <fstrba@suse.com>

- Create an ant-junit5 package to build junit5 optional tasks
  when they become resolved
- Add a simple pom file for ant-bootstrap.jar  

-------------------------------------------------------------------
Fri Feb  8 07:26:44 UTC 2019 - Fridrich Strba <fstrba@suse.com>

- Add compatibility links ant/ant*.jar for bootstrap build

-------------------------------------------------------------------
Tue Feb  5 09:49:54 UTC 2019 - Fridrich Strba <fstrba@suse.com>

- BuildRequire hamcrest for ant-junit and ant-antlr, since junit4
  depends strictly on hamcrest-core only.

-------------------------------------------------------------------
Fri Feb  1 16:19:10 UTC 2019 - Fridrich Strba <fstrba@suse.com>

- Build ant against xml-commons-apis-bootstrap and
  xml-commons-resolver-bootstrap in order to break build cycle

-------------------------------------------------------------------
Mon Dec 10 08:22:18 UTC 2018 - Fridrich Strba <fstrba@suse.com>

- Don't build against a particular xml-apis/xml-resolver provider,
  but against the generic virtual provider. This allows easier
  bootstrapping.
- Added patch:
  * apache-ant-xml-apis.patch
    + look for the xml-apis.jar and xml-resolver.jar when composing
      classpath; they are symlinks provided by several packages.

-------------------------------------------------------------------
Mon Nov 26 08:07:13 UTC 2018 - Fridrich Strba <fstrba@suse.com>

- Let ant-antlr provide ant-xz too, since it contains the
  corresponding jar. 

-------------------------------------------------------------------
Wed Oct 31 10:20:23 UTC 2018 - Fridrich Strba <fstrba@suse.com>

- Add aliases to some maven artifacts so that packages out there
  resolve then correctly

-------------------------------------------------------------------
Fri Oct 26 09:54:04 UTC 2018 - Pedro Monreal Gonzalez <pmonrealgonzalez@suse.com>

- Update to 1.10.5 [bsc#1113136]
  * Same version as in 1.9.13 but with additional features and
    requires Java8 or higher.
  * Dropped patch to build with java8+ already fixed in this version
    - apache-ant-1.9.9-sourcetarget.patch
  * Refreshed patch:
    - apache-ant-class-path-in-manifest.patch

-------------------------------------------------------------------
Sun Oct 21 08:08:23 UTC 2018 - antoine.belvire@opensuse.org

- Add reproducible-build-manifest.patch: Use less detailed version
  string for manifest's "Created-by" field (boo#1110024).

-------------------------------------------------------------------
Wed Oct 17 19:40:22 UTC 2018 - Fridrich Strba <fstrba@suse.com>

- Require javapackages-local in order to generate correctly the
  maven requires and provides
- Install maven artifacts

-------------------------------------------------------------------
Fri Aug 24 20:20:20 UTC 2018 - Jason Sikes <jsikes@suse.de>

- Update to 1.9.13
  * Fixes a regression in the "get" task where redirects
    from a HTTP resource to a HTTPS resource started throwing
    an exception.
    Bugzilla Report 62499

  * the new allowFilesToEscapeDest didn't work when set to false and
    archive entries contained relative paths with so many ".."
    segnments that the resulting path would go beyond the file system
    root.
    Bugzilla Report 62502, bsc#1100053, CVE-2018-10886

-------------------------------------------------------------------
Tue May 15 05:02:22 UTC 2018 - fstrba@suse.com

- Build with source and target 8 to prepare for a possible removal
  of 1.6 compatibility
- Modified patch:
  * apache-ant-1.9.9-sourcetarget.patch
    - Build with source/target 8

-------------------------------------------------------------------
Fri Feb 23 10:24:31 UTC 2018 - ecsos@opensuse.org

- fix build error for Leap 42.3

-------------------------------------------------------------------
Thu Feb 22 11:43:31 UTC 2018 - tchvatal@suse.com

- Add patch to run scripts with python3 if applicable bsc#1082202:
  * ant-python3.patch

-------------------------------------------------------------------
Thu Feb 22 11:26:23 UTC 2018 - tchvatal@suse.com

- Update to 1.9.10:
  * Various fixes for java10
  * Small fixes all around
- Remove merged patch reproducible.patch

-------------------------------------------------------------------
Sat Oct 28 16:17:19 UTC 2017 - jengelh@inai.de

- Simply use find -delete over xargs.
- Make description neutral.

-------------------------------------------------------------------
Tue Oct 24 11:26:36 UTC 2017 - bwiedemann@suse.com

- Add reproducible-build-date.patch to allow to have fixed build dates
  to make other packages build more reproducibly

-------------------------------------------------------------------
Wed Oct  4 09:07:19 UTC 2017 - fstrba@suse.com

- Remove dependency on java-1_5_0-gcj-compat-devel and build even
  the bootstrap package with java source and target 1.6

-------------------------------------------------------------------
Fri Sep 29 07:06:59 UTC 2017 - fstrba@suse.com

- Don't condition the maven defines on release version, but on 
  _maven_repository being defined

-------------------------------------------------------------------
Thu Sep 14 05:39:48 UTC 2017 - fstrba@suse.com

- Allow bootstrapping with something else then
  java-1_5_0-gcj-compat, but still require
  java-1_5_0-gcj-compat-devel
- Added patch:
  * apache-ant-bootstrap.patch
    - Add -sourcepath option to fix build breakages with Eclipse
      Compiler for Java(tm)

-------------------------------------------------------------------
Wed Sep  6 17:49:21 UTC 2017 - fstrba@suse.com

- Added patch:
  * apache-ant-1.9.9-sourcetarget.patch
    + Change java source and target versions to 1.6 to allow build
      with jdk9
- For non-boostrap builds require java-devel >= 1.6

-------------------------------------------------------------------
Fri Jun  9 09:05:31 UTC 2017 - tchvatal@suse.com

- Do not generate poms on ant core packages to reduce deps and
  allow bootstrap

-------------------------------------------------------------------
Wed May 31 13:35:49 UTC 2017 - tchvatal@suse.com

- Fix bootstrap to avoid new cycle bsc#1041966

-------------------------------------------------------------------
Fri May 19 08:08:28 UTC 2017 - tchvatal@suse.com

- Disable javadoc completely it is on the web in much better form
- Remove if0 conditions
- Remove patch apache-ant-old-gcj-build.patch for sle11 and unused
- Fix build with split javapackages-tools

-------------------------------------------------------------------
Mon May  8 20:05:59 UTC 2017 - bwiedemann@suse.com

- Version bump to 1.9.9:
  * Read WHATSNEW file for full changelist

-------------------------------------------------------------------
Mon May  8 07:43:51 UTC 2017 - bwiedemann@suse.de

- Add reproducible.patch to allow reproducible builds of ant itself
  and packages built with ant like jcodings

-------------------------------------------------------------------
Mon Feb 20 10:12:01 UTC 2017 - tchvatal@suse.com

- Revert the previous change as it broke the build of most java
  software stack

-------------------------------------------------------------------
Mon Feb 13 15:54:30 UTC 2017 - guoyunhebrave@gmail.com

- Add profile.d scripts to set ANT_HOME

-------------------------------------------------------------------
Fri Jan 15 22:01:37 UTC 2016 - opensuse@dstoecker.de

- junit4 test did not work (bnc#915686)

-------------------------------------------------------------------
Wed Jul 29 11:12:50 UTC 2015 - tchvatal@suse.com

- Add xalan-j2-serializer to ant-antlr requirements

-------------------------------------------------------------------
Tue Jul 28 14:15:24 UTC 2015 - tchvatal@suse.com

- Sync the changes files among the subpkgs
- Version bump to 1.9.6:
  * Read WHATSNEW file for full changelist

-------------------------------------------------------------------
Sun Jun 21 14:05:05 UTC 2015 - jengelh@inai.de

- Do better quoting to get better error messages when it fails

-------------------------------------------------------------------
Wed Mar 18 09:30:13 UTC 2015 - tchvatal@suse.com

- Fix build with new javapackages-tools

-------------------------------------------------------------------
Thu Aug 28 14:30:48 UTC 2014 - coolo@suse.com

- to bootstrap 13.2 we need another split because bsf depends on things
  that depend on junit and as antlr requires bsf, we need a 3rd step ->
  split ant-junit to build in between ant and ant-antlr

-------------------------------------------------------------------
Fri Jul  4 12:47:07 UTC 2014 - tchvatal@suse.com

- Fix building on SLE.
- Added patch:
  * apache-ant-old-gcj-build.patch

-------------------------------------------------------------------
Fri Jul  4 11:54:48 UTC 2014 - tchvatal@suse.com

- Update to 1.9.4:
  * Read WHATSNEW file for full changelist
  * initial support for Java 1.9
  * <junit> has now a threads attribute allowing to run the tests in
    several threads. Bugzilla Report 55925
  * TarInputStream will now read archives created by tar
    implementations that encode big numbers by not adding a trailing
    NUL.

-------------------------------------------------------------------
Thu May 15 13:18:36 UTC 2014 - peter.trommler@ohm-hochschule.de

- fix summary (was antlr summary) 

-------------------------------------------------------------------
Mon May 12 14:00:55 UTC 2014 - darin@darins.net

- SLE_11 specific spec files for ant/ant-antlr. These build with
  openjdk, which introduced bootstrap breakage in Factory.
- Update pre_checkin.sh for SLE_11 specific spec's

-------------------------------------------------------------------
Fri May  2 09:01:02 UTC 2014 - tchvatal@suse.com

- Revert the bootstrap breakage.

-------------------------------------------------------------------
Thu Apr 24 09:54:12 UTC 2014 - dmueller@suse.com

- remove dependency on gpg-offline (blocks rebuilds and
  tarball integrity is checked by source-validator anyway, plus
  it was commented out)
- remove apache-ant-bz163689.patch (was not applied anywhere)

-------------------------------------------------------------------
Wed Apr 23 12:55:35 UTC 2014 - darin@darins.net

- Update packaging to build the openjdk and not gcj 

-------------------------------------------------------------------
Thu Jan  2 08:36:18 UTC 2014 - mvyskocil@suse.com

- Update to 1.9.3
- BugFixes:
  * Ant 1.8 exec task changes have slowed exec to a crawl, apache#54128
  * <parallel> swallowed the status code of nested <fail> tasks,
   apache#55539
  * a race condition could make <fixcrlf> tasks of parallel builds to
    interfere with each other, apache#54393
 * <mail>'s mailport still didn't work properly when using smtps,
   apache#49267
 * using attributes belonging to the if and unless namespaces
   made macrodef fail, apache#55885.
 * Apt is not available under JDK 1.8, apache#55922
- drop unused macros
- add gpg verification

-------------------------------------------------------------------
Wed Dec  4 14:58:13 UTC 2013 - mvyskocil@suse.com

- use requires_eq instead of manual call of rpm -q 

-------------------------------------------------------------------
Wed Oct  2 09:52:33 UTC 2013 - mvyskocil@suse.com

- install compat symlink to /usr/share/ant/bin/antRun to make scala build 

-------------------------------------------------------------------
Mon Sep  9 11:05:25 UTC 2013 - tchvatal@suse.com

- Move from jpackage-utils to javapackage-tools

-------------------------------------------------------------------
Thu Aug 22 07:47:26 UTC 2013 - mvyskocil@suse.com

- Update to 1.9.2
- Incompatible changes:
 * ProjectHelper's implementation import and include tasks
   defaults the targetPrefix to ProjectHelper.USE_PROJECT_NAME_AS_TARGET_PREFIX.
   ProjectHelper2 is not affected, apache#54940.
 * FixCRLF used to treat the EOL value ASIS to convert to the system property
   line.separator. Specified was that ASIS would leave the EOL characters alone,
   the task now really leaves the EOL characters alone. This also implies that
   EOL ASIS will not insert a newline even if fixlast is set to true.
   apache#53036
 * The CommandLauncher hierarchy that used to be a set of inner
   classes of Execute has been extracted to the
   org.apache.tools.ant.taskdefs.launcher package.
 * Any FileResource whose represented File has a parent also has a basedir.
 * Removing the Perforce Ant tasks replaced by tasks supplied by Perforce Inc.
 * Setting the default encoding of StringResource to UTF-8 instead of null
- Bugfixes:
 * <javadoc> post-process generated docs to migitiate frame
    injection attack (CVE-2013-1571) apache#55132
 * Parsing of zip64 extra fields has become more lenient
 * TarInputStream should now properly read GNU longlink entries' names.
   apache#55040.
 * <java> and <exec> used to be too restrictive when evaluating
   whether a given set of options is compatible with spawning the new
   process, apache#55112.
 * Corrected XSLTC error in <junitreport>, apache#54641.
 * and many more, see WHATSNEW for details

-------------------------------------------------------------------
Mon Jan  7 12:15:09 UTC 2013 - mvyskocil@suse.com

- remove xerces-j2-bootstrap depenency (bnc#789163)

-------------------------------------------------------------------
Wed May 30 11:46:44 UTC 2012 - cfarrell@suse.com

- license update: CDDL-1.0
  SPDX format (note that it should CDDL-1.1 if the (c) owner and license
  steward is Oracle)

-------------------------------------------------------------------
Tue May 15 07:02:23 UTC 2012 - mvyskocil@suse.cz

- build ignore java-1_7_0-openjdk as well 

-------------------------------------------------------------------
Wed Feb  1 12:54:47 UTC 2012 - mvyskocil@suse.cz

- revert the Recommends to fix a lot of build fails 

-------------------------------------------------------------------
Wed Jan 25 09:54:17 UTC 2012 - mvyskocil@suse.cz

- use new _mavendepmapfragdir macro instead of hardocded path
- change java-devel Requires to Recommends

-------------------------------------------------------------------
Tue Jan  3 01:01:19 CET 2012 - dmueller@suse.de

- use dist-lite and dist_javadocs to make javadoc build really
  optional
- fix arm check (ifarch does not work in a noarch spec file)

-------------------------------------------------------------------
Thu Dec 15 08:49:28 UTC 2011 - mvyskocil@suse.cz

- use dist and javadocs targets to make javadoc build really configurable
- disable javadoc build on arm to speedup the build of java platform

-------------------------------------------------------------------
Sat Sep 17 11:04:48 UTC 2011 - jengelh@medozas.de

- Remove redundant tags/sections from specfile

-------------------------------------------------------------------
Mon Mar 14 13:02:38 UTC 2011 - mvyskocil@suse.cz

- ignore openjdk for build of core ant 

-------------------------------------------------------------------
Wed Mar  9 08:56:33 UTC 2011 - mvyskocil@suse.cz

- Update to ant 1.8.2 
  * performance improvements in directory scanning
  * XSLT task honors classpath again (bugrep 49271)
  * distinction between core tasks and optional tasks is abolished
  * new task augment allows to add attributes or nested elements to previously
    defined references
  * Lexically scoped local properties, i.e. properties that are only defined
    inside a target, sequential block or similar environment. This is very
    useful inside of <macrodef>s where a macro can now define a temporary
    property that will disappear once the task has finished.
  * <import> can now import from any file- or URL-providing resource - this
    includes <javaresource>. This means <import> can read build file snippets
    from JARs or fixed server URLs. There are several other improvements in the
    area of import.
  * Various improvements to the directory scanning code that help with symbolic
    link cycles (as can be found on MacOS X Java installations for example) and
    improve scanning performance. For big directory trees the improvement is
    dramatic.
  * The way developers can extend Ant's property expansion algorithm has been
    rewritten (breaking the older API) to be easier to use and be more
    powerful. The whole local properties mechanism is implemented using that
    API and could be implemented in a separate library without changes in Ant's
    core. Things like the yet-to-be-released props Antlib can now provide often
    required "scripty" fuctions without touching Ant itself. At the same time
    the if and unless attributes have been rewritten to do the expected thing
    if applied to a property expansion (i.e. if="${foo}" will mean "yes, do it"
    if ${foo} expands to true, in Ant 1.7.1 it would mean "no" unless a
    property named "true" existed). This adds "testing conditions" as a new
    use-case to property expansion.
  * A new top-level element <extension-point> assists in writing re-usable
    build files that are meant to be imported. <extension-point> has a name and
    a dependency-list like <target> and can be used like a <target> from the
    command line or a dependency-list but the importing build file can add
    targets to the <extension-point>'s depends list.
  * Ant now requires Java 1.4 or later new task include provides an alternative
   to <import> that should be preferred when you don't want to override any
   targets
  * numerous bug fixes and improvements as documented in
    Bugzilla and in WHATSNEW
- merge the nodeps and trax packages to main one
- build ant-antlr.spec using openjdk
- add ant-apache-xalan2 and ant-testutil
- remove all pom files, as they are included and build from source tarball

-------------------------------------------------------------------
Fri Apr  9 10:41:42 UTC 2010 - mvyskocil@suse.cz

- fix bnc#595144 - Compiled binary in ant
  remove test.exe from source tarball

-------------------------------------------------------------------
Thu Mar 18 15:58:41 UTC 2010 - mvyskocil@suse.cz

- fix the compat symlinks 

-------------------------------------------------------------------
Wed Mar 17 15:05:43 UTC 2010 - mvyskocil@suse.cz

- return back the /usr/share/ant/lib compat symlinks
  http://lists.opensuse.org/opensuse-java/2010-03/msg00007.html

-------------------------------------------------------------------
Wed Jun 17 10:22:10 CEST 2009 - mvyskocil@suse.cz

- do not use Release number in Requires of subpackages

-------------------------------------------------------------------
Sun May  3 11:37:14 CEST 2009 - ro@suse.de

- do not assume release number for ant and ant-antlr are identical 

-------------------------------------------------------------------
Tue Apr 28 15:03:07 CEST 2009 - mvyskocil@suse.cz

- update to 1.7.1. Upstream changes (full list is in WHATSNEW):
  * String resources only have properties single expanded. If you relied on
  <string> resources being expanded more than once, it no longer happens.
  Bugzilla report 42277.

  * A String resource's encoding attribute was only taken into account when
  set from the resource's OutputStream; the InputStream provided the String's
  binary content according to the platform's default encoding. Behavior has
  been modified to encode outgoing (InputStream) content as well as encoding
  incoming (OutputStream) content.

  * <java> with fork now returns gives -1 instead of 0 as result when
  * failonerror
  is false and some exception (including timeout) occurs. Br 42377. 

  * ant-type attribute has been marked as deprecated and a warning has been
  issued if it is encountered in the build file.
  
  * FileUtils.createTempFile now actually creates the file.
  The TempFile task still does not create the file by default, can be
  instructed to do so however using a new parameter.  Bugzilla report 33969.

- added maven pom files from jpackage project
- synchronized ant.spec with jpackage.org 5.0
- used ant-antlr-prepare.sh for generate of ant-antlr.spec from ant.spec to
  keep them synchronized. Build is branched using value of %%bootstrap macro:
  * bootstrap == 1 means build ant, ant-{jmf,nodeps,scripts,swing,trax}
  * bootstrap == 0 means build rest of ant modules + ant-javadoc

-------------------------------------------------------------------
Mon Nov  3 11:45:06 CET 2008 - mvyskocil@suse.cz

- [bnc#440645] - ant fails without installed jdk:
  - added a java-devel to Recommends:

-------------------------------------------------------------------
Mon Jul 21 16:29:31 CEST 2008 - ro@suse.de

- use xerces-j2-bootstrap to build (as early as possible)
- add java doc dir to filelist of javadoc subpackage to fix build 

-------------------------------------------------------------------
Wed Jul 16 14:11:41 CEST 2008 - coolo@suse.de

- avoid another build cycle

-------------------------------------------------------------------
Wed May  7 10:45:27 CEST 2008 - mvyskocil@suse.cz

- build using gcj, to allow a openjdk6 bootstrap
- change a source and a target level to 1.5 in build.xml

-------------------------------------------------------------------
Tue Aug 14 13:52:03 CEST 2007 - skh@suse.de

- disable junit tests and remove junit from BuildRequires to break
  circular build dependency

-------------------------------------------------------------------
Fri Jul  6 19:24:52 CEST 2007 - dbornkessel@suse.de

- update to version 1.7.0

 major changes are (for a complete list, consult /usr/share/doc/packages/ant/WHATSNEW):

 Changes that could break older environments:
 -------------------------------------------
 
 * Initial support for JDK 6 (JSR 223) scripting.
   <*script*> tasks will now use javax.scripting if BSF is
   not available, or if explicitly requested by using
   a "manager" attribute.
 
 * The -noproxy option which was in the previous 1.7 alpha and beta
   releases has been removed. It is the default behavior and not needed.
 
 * Removed launcher classes from nodeps jar.
 
 * <classconstants> filter reader uses ISO-8859-1 encoding to read
   the java class file. Bugzilla report 33604.
 
 * Defer reference process. Bugzilla 36955, 34458, 37688.
   This may break build files in which a reference was set in a target which was
   never executed. Historically, Ant would set the reference early on, during parse
   time, so the datatype would be defined. Now it requires the reference to have
   been in a bit of the build file which was actually executed. If you get
   an error about an undefined reference, locate the reference and move it somewhere
   where it is used, or fix the depends attribute of the target in question to
   depend on the target which defines the reference/datatype.
 
 * <script> and <scriptdef> now set the current thread context.
 
 * Unrestrict the dbvendor names in the websphere element of the ejbjar task.
   Bugzilla Report 40475.
 
 * <env> nested element in <java>, <exec> and others is now case-insensitive
   for windows OS. Bugzilla Report 28874.
 
 * Removed support for xalan1 completely. Users of Xalan1 for Ant builds will
   have to stay at ant 1.6.5 or upgrade to xalan2.
 
 * Use org.apache.log4j.Logger instead of org.apache.log4j.Category.
   Category has been deprecated for ~2 years and has been removed from
   the log4j code.  Logger was introduced in log4j 1.2 so users of
   log4j 1.1 and log4j 1.0 need to upgrade to a newer version of log4j.
   Bugzilla Report 31951.
 
 * build.sysclasspath now also affects the bootclasspath handling of
   spawned Java VMs.  If you set build.sysclasspath to anything other
   than "ignore" (or leave it unset, since "ignore" is the default when
   it comes to bootclasspath handling), then the bootclasspath of the
   VM running Ant will be added to the bootclasspath you've specified.
 
 * The <java fork="false"> now as per default installs a security manager
   using the default permissions. This is now independent of the
   failonerror attribute.  Bugzilla report 33361.
 
 * <signjar> now notices when the jar and signedjar are equal, and switches
   to the same dependency logic as when signedjar is omitted. This may break
   something that depended upon signing in this situation. However, since
   invoking the JDK jarsigner program with -signedjar set to the source jar
   actually crashes the JVM on our (Java1.5) systems, we don't think any
   build files which actually worked will be affected by the change.
 
 * <signjar> used to ignore a nested fileset when a jar was also provided as an
   attribute, printing a warning message; now it signs files in the fileset.
 
 * An improved method of handling timestamp granularity differences between
   client and server was added to the <ftp> task.  FTP servers typically
   have HH:mm timestamps whereas local filesystems have HH:mm:ss timestamps.
   Previously, this required tweaking with the timediffmillis attribute
   which also was used to handle timezone differences.  Now, there is a new
   timestampgranularity attribute.  The default value for get operations is 0
   since the user has the more powerful preservelastmodified attribute to work
   with.  Since this is not available on put operations the default value
   adds a minute to the server timestamp in order to account for this,
   Scripts which previously used timediffmillis to do this compensation may
   need to be rewritten.  timediffmillis has now been deprecated.
 
 * On Java1.5+, Ant automatically sets the system property
   java.net.useSystemProxies to true, which gives it automatic use of the local
   IE (Windows) or Gnome2 (Unix/Linux) proxy settings. This may break any build
   file that somehow relied on content outside the firewall being unreachable:
   use the -noproxy command-line option to disable this new feature.
   Note that the Java1.5 proxy configuration system still does not
   appear to work reliably on Windows or Linux.
 
 * Support for the XSL:P XML parser has been removed.
   Bugzilla Report 23455.
 
 * Visual Age for Java optional tasks removed.
 
 * Testlet (test) optional task removed.
 
 * Icontract optional task removed.
 
 * Metamata (maudit, mmetrics, and mparse tasks) removed.
 
 * Sitraka (jpcoverage, jpcovmerge, jpcovreport) tasks suppressed.
 
 * <fixcrlf> used \r (Mac) line endings on OS X, whose proper line separator
   is \n (Unix).  Bugzilla report 39585.
 
 * <scp> now optionally supports the sftp protocol, you may need a
   newer jsch.jar.  Bugzilla Report 39373.
 
 * Ant launcher program prints errors to stderr, and exits with a 2 exit code
   value if, for any reason, it cannot actually start Ant proper. This will only
   affect programs/scripts that called the launcher and which did not want to
   receive an error if Ant itself would not start
 
 * All .NET tasks are now deprecated in favor of the new .NET Antlib:
   http://ant.apache.org/antlibs/dotnet/index.html
 
-------------------------------------------------------------------
Fri Sep 22 14:34:40 CEST 2006 - dbornkessel@suse.de

- read in properties in /etc/ant.conf 
- added source=1.4

-------------------------------------------------------------------
Mon May  8 14:54:11 CEST 2006 - dbornkessel@suse.de

- only ant-antlr updates
 

-------------------------------------------------------------------
Thu Feb  2 20:55:06 CET 2006 - dbornkessel@suse.de

- fixed rpmlint errors and warnings 

-------------------------------------------------------------------
Tue Jan 31 17:29:45 CET 2006 - dbornkessel@suse.de

- only ant-antlr updates 

-------------------------------------------------------------------
Fri Jan 27 12:12:48 CET 2006 - dbornkessel@suse.de

- added four missing xsl files
- removed JAVA_HOME magic

-------------------------------------------------------------------
Tue Jan 24 16:55:46 CET 2006 - dbornkessel@suse.de

- Not dependend on xml-commons-apis, which are provided by xerces-j2, which does not 
  depend on ant package (in contrast to old dependency on 
  xml-commons-apis <-> ant)
- optional task are now again in extra spec file ant-antlr
 

-------------------------------------------------------------------
Thu Jan 19 14:10:18 CET 2006 - dbornkessel@suse.de

- Integrated ant and ant-antlr again in one spec file as there is no 
  dependency loop ... jpackage BuildRequires were wrong.
- updated to version 1.6.5

-------------------------------------------------------------------
Mon Dec 19 10:46:33 CET 2005 - dbornkessel@suse.de

- added if statement that hinders unwanted creation of a file within a for loop 

-------------------------------------------------------------------
Thu Sep 29 00:10:39 CEST 2005 - dmueller@suse.de

 - add norootforbuild

-------------------------------------------------------------------
Fri Mar  4 13:53:08 CET 2005 - skh@suse.de

- rely on jpackage-utils' java-functions to set JAVA_HOME correctly

-------------------------------------------------------------------
Sun Sep  5 20:00:07 CEST 2004 - skh@suse.de

- create and add /usr/share/java/ant to file list for optional 
  tasks to put their jars into

-------------------------------------------------------------------
Thu Sep  2 15:58:19 CEST 2004 - skh@suse.de

- renamed from apache-ant to ant
- switched to JPackage 1.5 version
- updated to version 1.6.2
- split off optional tasks into separate package to solve build
  dependency loop in JPackage

