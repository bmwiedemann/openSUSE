-------------------------------------------------------------------
Sat Nov 26 20:48:55 UTC 2022 - Johannes Kastl <kastl@b1-systems.de>

- fix boo#1204320
  - do no longer exclude %{ansible_python_sitelib}/ansible_test
  - create subpackage for ansible-test
  - remove Conflicts for ansible-test

-------------------------------------------------------------------
Fri Nov 25 07:03:33 UTC 2022 - Johannes Kastl <kastl@b1-systems.de>

- rework spec file to define %ansible_python version, which is the
  python version, that ansible is built against, as well as
  %ansible_python_sitelib
- remove duplicate entries for changelog and license
- fix wrong %fdupes

-------------------------------------------------------------------
Wed Nov 23 10:13:04 UTC 2022 - Johannes Kastl <kastl@b1-systems.de>

- add version contraints for both Requires and BuildRequires,
  that upstream defines:
  https://github.com/ansible/ansible/blob/devel/requirements.txt

-------------------------------------------------------------------
Thu Nov 17 13:48:58 UTC 2022 - Johannes Kastl <kastl@b1-systems.de>

- update to 2.14.0:
  Full changelog https://github.com/ansible/ansible/blob/v2.14.0/changelogs/CHANGELOG-v2.14.rst

-------------------------------------------------------------------
Tue Nov 15 10:31:44 UTC 2022 - Johannes Kastl <kastl@b1-systems.de>

- update to 2.13.6:
  Changelog https://github.com/ansible/ansible/blob/v2.13.6/changelogs/CHANGELOG-v2.13.rst
  * Minor Changes
    - ansible-test - Improve consistency of version specific documentation links.
  * Bugfixes
    - BSD network facts - Do not assume column indexes, look for netmask and broadcast for determining the correct columns when parsing inet line (#79117)
    - ansible-galaxy - make initial call to Galaxy server on-demand only when installing, getting info about, and listing roles.
    - ansible-test - Add wheel < 0.38.0 constraint for Python 3.6 and earlier.
    - ansible-test - Fix broken documentation link for aws test plugin error messages.
    - copy module will no longer move 'non files' set as src when remote_src=true.
    - file lookup now handles missing files more gracefully.
    - service_facts - Use python re to parse service output instead of grep (#78541)
    - updated error messages to include 'acl' and not just mode changes when failing to set required permissions on remote.

-------------------------------------------------------------------
Wed Oct 12 04:50:21 UTC 2022 - Johannes Kastl <kastl@b1-systems.de>

- update to 2.13.5:
  Changelog https://github.com/ansible/ansible/blob/v2.13.5/changelogs/CHANGELOG-v2.13.rst
  * Bugfixes
    - ansible-galaxy - remove extra server api call during dependency resolution for requirements and dependencies that are already satisfied (#77443).
    - ansible-test - Allow disabled, unsupported, unstable and destructive integration test targets to be selected using their respective prefixes.
    - ansible-test - Allow unstable tests to run when targeted changes are made and the --allow-unstable-changed option is specified (resolves #74213).
    - apt - Fix module failure when a package is not installed and only_upgrade=True. Skip that package and check the remaining requested packages for upgrades. (#78762)
    - apt module should not traceback on invalid type given as package. issue 78663.
    - known_hosts - do not return changed status when a non-existing key is removed (#78598)
    - paramiko - Add back support for ssh_args, ssh_common_args, and ssh_extra_args for parsing the ProxyCommand (#78750)
    - plugin loader, fix detection for existing configuration before initializing for a plugin

-------------------------------------------------------------------
Wed Oct 12 00:27:53 UTC 2022 - Steve Kowalik <steven.kowalik@suse.com>

- Remove unneeded BuildRequires on python3-mock

-------------------------------------------------------------------
Thu Oct  6 08:53:15 UTC 2022 - Johannes Kastl <kastl@b1-systems.de>

- add Conflict with ansible-test

-------------------------------------------------------------------
Wed Sep 14 05:42:48 UTC 2022 - Johannes Kastl <kastl@b1-systems.de>

- update to 2.13.4:
  Changelog https://github.com/ansible/ansible/blob/v2.13.4/changelogs/CHANGELOG-v2.13.rst
  * Bugfixes
    - Fix for network_cli not getting all relevant connection options
    - ansible-galaxy - Fix detection of --role-file in arguments for implicit role invocation (#78204)
    - ansible-galaxy - Fix exit codes for role search and delete (#78516)
    - ansible-test - Fix change detection for ansible-test's own integration tests.
    - ansible-test - ansible-doc sanity test - Correctly determine the fully-qualified collection name for plugins in subdirectories, resolving #78490.
    - apt - don't actually update the cache in check mode with update_cache=true.
    - apt - don't mark existing packages as manually installed in check mode (#66413).
    - apt - fix package selection to include /etc/apt/preferences(.d) (#77969)
    - urls - Guard imports of urllib3 by catching Exception instead of ImportError to prevent exceptions in the import process of optional dependencies from preventing use of urls.py (#78648)
    - wait_for - Read file and perform comparisons using bytes to avoid decode errors (#78214)

-------------------------------------------------------------------
Wed Sep  7 13:09:23 UTC 2022 - Johannes Kastl <kastl@b1-systems.de>

- update to 2.13.3:
  Changelog https://github.com/ansible/ansible/blob/v2.13.3/changelogs/CHANGELOG-v2.13.rst
  * Bugfixes
    - Avoid 'unreachable' error when chmod on AIX has 255 as return code.
    - Fix PluginLoader to mimic Python import machinery by adding module to sys.modules before exec
    - Fix dnf module documentation to indicate that comparison operators for package version require spaces around them (#78295)
    - ansible-connection - decrypt vaulted parameters before sending over the socket, as vault secrets are not available on the other side.
    - ansible-galaxy - Fix reinitializing the whole collection directory with ansible-galaxy collection init ns.coll --force. Now directories and files that are not included in the collection skeleton will be removed.
    - ansible-galaxy - do not require mandatory keys in the galaxy.yml of source collections when listing them (#70180).
    - ansible-galaxy - fix listing collections that contains metadata but the namespace or name are not strings.
    - ansible-galaxy - fix setting the cache for paginated responses from Galaxy NG/AH (#77911).
    - ansible-test - Delegation for commands which generate output for programmatic consumption no longer redirect all output to stdout. The affected commands and options are shell, sanity --lint, sanity --list-tests, integration --list-targets, coverage analyze
    - ansible-test - Delegation now properly handles arguments given after -- on the command line.
    - ansible-test - Test configuration for collections is now parsed only once, prior to delegation. Fixes issue: #78334
    - ansible-test - The shell command no longer redirects all output to stdout when running a provided command. Any command output written to stderr will be mixed with the stderr output from ansible-test.
    - ansible-test - The shell command no longer requests a TTY when using delegation unless an interactive shell is being used. An interactive shell is the default behavior when no command is given to pass to the shell.
    - dnf - fix output parsing on systems with LANGUAGE set to a language other than English (#78193)
    - if a config setting prevents running ansible it should at least show it's "origin".
    - prevent type annotation shim failures from causing runtime failures (#77860)
    - template module/lookup - fix convert_data option that was effectively always set to True for Jinja macros (#78141)
    - uri - properly use uri parameter use_proxy (#58632)
    - yum - fix traceback when releasever is specified with latest (#78058)

-------------------------------------------------------------------
Wed Jul 20 08:01:46 UTC 2022 - Johannes Kastl <kastl@b1-systems.de>

- package conflicts with ansible < 3, i.e. the old packaging scheme

-------------------------------------------------------------------
Wed Jul 20 06:46:22 UTC 2022 - Johannes Kastl <kastl@b1-systems.de>

- update to 2.13.2:
  * Minor Changes
    - ansible-test - An improved error message is shown when the download of a pip bootstrap script fails. The download now uses urllib2 instead of urllib on Python 2.
  * Bugfixes
    - Move undefined check from concat to finalize (#78156)
    - ansible-doc - no longer list module and plugin aliases that are created with symlinks (#78137).
    - ansible-doc - when listing modules in collections, proceed recursively. This fixes module listing for community.general 5.x.y and community.network 4.x.y (#78137).
    - ansible-doc will not add 'website for' in ":ref:" substitutions as it made them confusing.
    - file backed cache plugins now handle concurrent access by making atomic updates to the files.
    - password lookup does not ignore k=v arguments anymore.
    - user - Fix error "Permission denied" in user module while generating SSH keys (#78017).

- update to 2.13.1:
  * Minor Changes
    - Add an 'action_plugin' field for modules in runtime.yml plugin_routing.
      This fixes module_defaults by supporting modules-as-redirected-actions without redirecting module_defaults entries to the common action.
      With the runtime.yml above for ns.coll, a task such as
      will end up with defaults for eos_facts and eos_command since both modules redirect to the same action.
      To select an action plugin for a module without merging module_defaults, define an action_plugin field for the resolved module in the runtime.yml.
      The action_plugin field can be a redirected action plugin, as it is resolved normally.
      Using the modified runtime.yml, the example task will only use the ns.coll.eos_facts defaults.
    - ansible-galaxy - Support resolvelib versions 0.6.x, 0.7.x, and 0.8.x. The full range of supported versions is now >= 0.5.3, < 0.9.0.
    - ansible-test - Add RHEL 9.0 remote support.
    - ansible-test - Add support for Ubuntu VMs using the --remote option.
    - ansible-test - Add support for exporting inventory with ansible-test shell --export {path}.
    - ansible-test - Add support for multi-arch remotes.
    - ansible-test - Add support for running non-interactive commands with ansible-test shell.
    - ansible-test - Avoid using the mock_use_standalone_module setting for unit tests running on Python 3.8 or later.
    - ansible-test - Blocking mode is now enforced for stdin, stdout and stderr. If any of these are non-blocking then ansible-test will exit during startup with an error.
    - ansible-test - Improve consistency of output messages by using stdout or stderr for most output, but not both.
    - ansible-test - The shell command can be used outside a collection if no controller delegation is required.
  * Bugfixes
    - Add PyYAML >= 5.1 as a dependency of ansible-core to be compatible with Python 3.8+.
    - ansible-config dump - Only display plugin type headers when plugin options are changed if --only-changed is specified.
    - ansible-galaxy - handle unsupported versions of resolvelib gracefully.
    - ansible-test - Fix internal validation of remote completion configuration.
    - ansible-test - Prevent --target- prefixed options for the shell command from being combined with legacy environment options.
    - ansible-test - Sanity test output with the --lint option is no longer mixed in with bootstrapping output.
    - ansible-test - Subprocesses are now isolated from the stdin, stdout and stderr of ansible-test. This avoids issues with subprocesses tampering with the file descriptors, such as SSH making them non-blocking. As a result of this change, subprocess output from unit and integration tests on stderr now go to stdout.
    - ansible-test - Subprocesses no longer have access to the TTY ansible-test is connected to, if any. This maintains consistent behavior between local testing and CI systems, which typically do not provide a TTY. Tests which require a TTY should use pexpect or another mechanism to create a PTY.
    - apt module now correctly handles virtual packages.
    - lookup plugin - catch KeyError when lookup returns dictionary (#77789).
    - pip - fix cases where resolution of pip Python module fails when importlib.util has not already been imported
    - plugin loader - Sort results when fuzzy matching plugin names (#77966).
    - plugin loader will now load config data for plugin by name instead of by file to avoid issues with the same file being loaded under different names (fqcn + short name).
    - psrp connection now handles default to inventory_hostname correctly.
    - winrm connection now handles default to inventory_hostname correctly.

- update to 2.13.0:
  Full changelog see
  https://github.com/ansible/ansible/blob/stable-2.13/changelogs/CHANGELOG-v2.13.rst#v2130

- update to 2.12.7:
  * Minor Changes
    - Add an 'action_plugin' field for modules in runtime.yml plugin_routing.
      This fixes module_defaults by supporting modules-as-redirected-actions without redirecting module_defaults entries to the common action.
      With the runtime.yml above for ns.coll, a task such as
      will end up with defaults for eos_facts and eos_command since both modules redirect to the same action.
      To select an action plugin for a module without merging module_defaults, define an action_plugin field for the resolved module in the runtime.yml.
      The action_plugin field can be a redirected action plugin, as it is resolved normally.
      Using the modified runtime.yml, the example task will only use the ns.coll.eos_facts defaults.
    - ansible-test - Avoid using the mock_use_standalone_module setting for unit tests running on Python 3.8 or later.
  * Bugfixes
    - pip - fix cases where resolution of pip Python module fails when importlib.util has not already been imported
    - plugin loader - Sort results when fuzzy matching plugin names (#77966).

- update to 2.12.6:
  * Bugfixes
    - Prevent losing unsafe on results returned from lookups (#77535)
    - arg_spec - Fix incorrect no_log warning when a parameter alias is used (#77576)
    - plugin loader will now load config data for plugin by name instead of by file to avoid issues with the same file being loaded under different names (fqcn + short name).
    - variablemanager, more efficient read of vars files

- update to 2.12.5:
  * Bugfixes
    - Ansible.ModuleUtils.SID - Use user principal name as is for lookup in the Convert-ToSID function - #77316
    - Fix traceback when installing a collection from a git repository and git is not installed (#77479).
    - ansible-test - Correctly detect when running as the root user (UID 0) on the origin host. The result of the detection was incorrectly being inverted.
    - ansible-test - Fix skipping of tests marked needs/python on the origin host.
    - ansible-test - Fix skipping of tests marked needs/root on the origin host.
    - ansible-test compile sanity test - do not crash if a column could not be determined for an error (#77465).
    - hostname - use file_get_content() to read the file containing the host name in the FileStrategy.get_permanent_hostname() method. This prevents a TypeError from being raised when the strategy is used (#77025).
    - script - skip in check mode since the plugin cannot determine if a change will occur.
    - shell/command - only skip in check mode if the options creates and removes are both None.
    - winrm - Ensure kinit is run with the same PATH env var as the Ansible process

-------------------------------------------------------------------
Sat Apr 23 19:57:33 UTC 2022 - Johannes Kastl <kastl@b1-systems.de>

- first version of package ansible-core at version 2.12.4
