From 0c025ab9ddb2099b3ee18d5d11cdd3fd318b5609 Mon Sep 17 00:00:00 2001
From: Jaroslav Kysela <perex@perex.cz>
Date: Sat, 23 May 2020 22:28:05 +0200
Subject: [PATCH] ucm2: fix chtrt5650 configuration (ucm-validator)

Signed-off-by: Jaroslav Kysela <perex@perex.cz>
---
 ucm2/chtrt5650/HiFi.conf | 23 +++++++++++------------
 1 file changed, 11 insertions(+), 12 deletions(-)

diff --git a/ucm2/chtrt5650/HiFi.conf b/ucm2/chtrt5650/HiFi.conf
index e9011d4b1bd5..b365bc619e7c 100644
--- a/ucm2/chtrt5650/HiFi.conf
+++ b/ucm2/chtrt5650/HiFi.conf
@@ -3,10 +3,6 @@ SectionVerb {
 	# ALSA PCM
 	Value {
 		TQ "HiFi"
-
-		# ALSA PCM device for HiFi
-		PlaybackPCM "hw:${CardId}"
-		CapturePCM "hw:${CardId}"
 	}
 
 	EnableSequence [
@@ -29,7 +25,8 @@ SectionDevice."Speaker" {
 	Comment "Speaker"
 
 	Value {
-		PlaybackChannels "2"
+		PlaybackPCM "hw:${CardId}"
+		PlaybackPriority 100
 	}
 
 	ConflictingDevice [
@@ -50,7 +47,8 @@ SectionDevice."Headphones" {
 	Comment "Headphones"
 
 	Value {
-		PlaybackChannels "2"
+		PlaybackPCM "hw:${CardId}"
+		PlaybackPriority 200
 		JackControl "Headphone Jack"
 		JackHWMute "Speaker"
 	}
@@ -69,12 +67,12 @@ SectionDevice."Headphones" {
 	]
 }
 
-SectionDevice."Mic" {
+SectionDevice."Mic1" {
 	Comment "Internal Microphone"
 
 	Value {
-		CaptureChannels "2"
-		CapturePriority "150"
+		CapturePCM "hw:${CardId}"
+		CapturePriority 100
 	}
 
 	EnableSequence [
@@ -90,13 +88,14 @@ SectionDevice."Mic" {
 	]
 }
 
-SectionDevice."HSMic" {
+SectionDevice."Mic2" {
 	Comment "Headset Microphone"
 
 	Value {
-		CaptureChannels "2"
+		CapturePCM "hw:${CardId}"
+		CapturePriority 200
 		JackControl "Headset Mic Jack"
-		JackHWMute "Mic"
+		JackHWMute "Mic1"
 	}
 
 	EnableSequence [
-- 
2.16.4

