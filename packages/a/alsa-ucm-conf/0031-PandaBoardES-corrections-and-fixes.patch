From 95f4da477fdb6a06ed321e6f2c0f7fc7d170b2e0 Mon Sep 17 00:00:00 2001
From: Jaroslav Kysela <perex@perex.cz>
Date: Tue, 4 Feb 2020 19:21:47 +0100
Subject: [PATCH 31/36] PandaBoardES: corrections and fixes

Signed-off-by: Jaroslav Kysela <perex@perex.cz>
---
 ucm2/PandaBoardES/FMAnalog.conf  |  9 ++++++---
 ucm2/PandaBoardES/HiFi.conf      | 18 +++++++++++-------
 ucm2/PandaBoardES/HiFiLP.conf    |  8 ++++++--
 ucm2/PandaBoardES/Record.conf    |  8 ++++++--
 ucm2/PandaBoardES/Voice.conf     |  8 ++++++--
 ucm2/PandaBoardES/VoiceCall.conf | 10 +++++++---
 6 files changed, 42 insertions(+), 19 deletions(-)

diff --git a/ucm2/PandaBoardES/FMAnalog.conf b/ucm2/PandaBoardES/FMAnalog.conf
index a4d5a23b7f4f..9920bcc90e21 100644
--- a/ucm2/PandaBoardES/FMAnalog.conf
+++ b/ucm2/PandaBoardES/FMAnalog.conf
@@ -17,10 +17,9 @@ SectionVerb {
                 cset "name='Capture Volume' 0"
 	]
 
-	# Optional TQ and ALSA PCMs
+	# Optional TQ
 	Value {
 		TQ "Music"
-                CapturePCM "hw:${CardId},0"
 	}
 }
 
@@ -38,5 +37,9 @@ SectionDevice."Headset" {
                 cset "name='Analog Right Capture Route' 3"
                 cset "name='Capture Preamplifier Volume' 0"
 	]
-}
 
+	Value {
+		CapturePriority 100
+                CapturePCM "hw:${CardId}"
+	}
+}
diff --git a/ucm2/PandaBoardES/HiFi.conf b/ucm2/PandaBoardES/HiFi.conf
index 856dd9f90262..aa78e47f728e 100644
--- a/ucm2/PandaBoardES/HiFi.conf
+++ b/ucm2/PandaBoardES/HiFi.conf
@@ -26,13 +26,10 @@ SectionVerb {
                 cset "name='Headset Playback Volume' 0"
 	]
 
- 	# Optional TQ and ALSA PCMs
-#	Value {
-#		TQ "Music"
-#		PlaybackPCM "hw:${CardId},0"
-#                PlaybackVolume "name='DL1 Media Playback Volume' 90,90"
-#                PlaybackSwitch "name='DL1 PDM Switch' 1"
-#	}
+ 	# Optional TQ
+	Value {
+		TQ "Music"
+	}
 }
 
 SectionDevice."Headset" {
@@ -49,4 +46,11 @@ SectionDevice."Headset" {
 		cset "name='Headset Left Playback' 0"
                 cset "name='Headset Playback Volume' 0"
 	]
+
+	Value {
+		PlaybackPriority 100
+		PlaybackPCM "hw:${CardId}"
+		# PlaybackVolume "name='DL1 Media Playback Volume' 90,90"
+		# PlaybackSwitch "name='DL1 PDM Switch' 1"
+	}
 }
diff --git a/ucm2/PandaBoardES/HiFiLP.conf b/ucm2/PandaBoardES/HiFiLP.conf
index a6a258d282e7..23164edfdec5 100644
--- a/ucm2/PandaBoardES/HiFiLP.conf
+++ b/ucm2/PandaBoardES/HiFiLP.conf
@@ -18,10 +18,9 @@ SectionVerb {
                 cset "name='SDT DL Volume' 0"
 	]
 
-	# Optional TQ and ALSA PCMs
+	# Optional TQ
 	Value {
 		TQ "Music"
-		PlaybackPCM "hw:${CardId},6"
 	}
 }
 
@@ -39,4 +38,9 @@ SectionDevice."Headset" {
 		cset "name='Headset Left Playback' 0"
                 cset "name='Headset Playback Volume' 0"
 	]
+
+	Value {
+		PlaybackPriority 100
+		PlaybackPCM "hw:${CardId},6"
+	}
 }
diff --git a/ucm2/PandaBoardES/Record.conf b/ucm2/PandaBoardES/Record.conf
index 57ad61261586..8cc6fdf911d3 100644
--- a/ucm2/PandaBoardES/Record.conf
+++ b/ucm2/PandaBoardES/Record.conf
@@ -17,10 +17,9 @@ SectionVerb {
                 cset "name='Capture Volume' 0"
 	]
 
-	# Optional TQ and ALSA PCMs
+	# Optional TQ
 	Value {
 		TQ "Music"
-		CapturePCM "hw:${CardId},0"
 	}
 
 }
@@ -39,4 +38,9 @@ SectionDevice."Headset" {
                 cset "name='Analog Right Capture Route' 3"
                 cset "name='Capture Preamplifier Volume' 0"
 	]
+
+	Value {
+		CapturePriority 100
+		CapturePCM "hw:${CardId}"
+	}
 }
diff --git a/ucm2/PandaBoardES/Voice.conf b/ucm2/PandaBoardES/Voice.conf
index a198c238f657..e37e7ecd15ec 100644
--- a/ucm2/PandaBoardES/Voice.conf
+++ b/ucm2/PandaBoardES/Voice.conf
@@ -18,10 +18,9 @@ SectionVerb {
                 cset "name='SDT DL Volume' 0"
 	]
 
-	# Optional TQ and ALSA PCMs
+	# Optional TQ
 	Value {
 		TQ "Voice"
-		PlaybackPCM "hw:${CardId},2"
 	}
 }
 
@@ -39,4 +38,9 @@ SectionDevice."Headset" {
 		cset "name='Headset Left Playback' 0"
                 cset "name='Headset Playback Volume' 0"
 	]
+
+	Value {
+		PlaybackPriority 100
+		PlaybackPCM "hw:${CardId},2"
+	}
 }
diff --git a/ucm2/PandaBoardES/VoiceCall.conf b/ucm2/PandaBoardES/VoiceCall.conf
index 4aed020c238b..3e6e09212581 100644
--- a/ucm2/PandaBoardES/VoiceCall.conf
+++ b/ucm2/PandaBoardES/VoiceCall.conf
@@ -34,8 +34,6 @@ SectionVerb {
 	# Optional TQ and ALSA PCMs
 	Value {
 		TQ "Voice"
-                CapturePCM "hw:${CardId},2"
-		PlaybackPCM "hw:${CardId},2"
 	}
 }
 
@@ -59,5 +57,11 @@ SectionDevice."Headset" {
 		cset "name='Headset Left Playback' 0"
                 cset "name='Headset Playback Volume' 0"
 	]
-}
 
+	Value {
+		CapturePriority 100
+		CapturePCM "hw:${CardId},2"
+		PlaybackPriority 100
+		PlaybackPCM "hw:${CardId},2"		
+	}
+}
-- 
2.16.4

