From 334b12e9a796cddf70779b68418ee7ad52ba1d14 Mon Sep 17 00:00:00 2001
From: Jaroslav Kysela <perex@perex.cz>
Date: Mon, 16 Nov 2020 11:48:05 +0100
Subject: [PATCH 3/3] sof-soundwire: use the codecs/hda/hdmi.conf macro

Signed-off-by: Jaroslav Kysela <perex@perex.cz>
---
 ucm2/sof-soundwire/Hdmi.conf | 83 ++++++++++--------------------------
 1 file changed, 22 insertions(+), 61 deletions(-)

diff --git a/ucm2/sof-soundwire/Hdmi.conf b/ucm2/sof-soundwire/Hdmi.conf
index d0ba7907e3a3..d5ee9c6b4c49 100644
--- a/ucm2/sof-soundwire/Hdmi.conf
+++ b/ucm2/sof-soundwire/Hdmi.conf
@@ -1,79 +1,40 @@
-# Use case Configuration for sof-soundwire card
+# Use case Configuration for sof-soundwire
 
 If.hdmi1 {
-	Condition {
-		Type ControlExists
-		Control "iface=CARD,name='HDMI/DP,pcm=5 Jack'"
-	}
+	Condition { Type String Empty "" }
 	True {
-		SectionDevice."HDMI1" {
-			Comment "HDMI1/DP1 Output"
-
-			EnableSequence [
-				cset "name='IEC958 Playback Switch' on"
-			]
-
-			DisableSequence [
-				cset "name='IEC958 Playback Switch' off"
-			]
-
-			Value {
-				PlaybackPriority 500
-				PlaybackPCM "hw:${CardId},5"
-				JackControl "HDMI/DP,pcm=5 Jack"
-			}
+		Define {
+			HdmiNum 1
+			HdmiPCM 5
+			HdmiCtlIndex 0
+			HdmiPrio 500
 		}
+		Include.hdmi1.File "/codecs/hda/hdmi.conf"
 	}
 }
 
 If.hdmi2 {
-	Condition {
-		Type ControlExists
-		Control "iface=CARD,name='HDMI/DP,pcm=6 Jack'"
-	}
+	Condition { Type String Empty "" }
 	True {
-		SectionDevice."HDMI2" {
-			Comment "HDMI2/DP2 Output"
-
-			EnableSequence [
-				cset "name='IEC958 Playback Switch',index=1 on"
-			]
-
-			DisableSequence [
-				cset "name='IEC958 Playback Switch',index=1 off"
-			]
-
-			Value {
-				PlaybackPriority 600
-				PlaybackPCM "hw:${CardId},6"
-				JackControl "HDMI/DP,pcm=6 Jack"
-			}
+		Define {
+			HdmiNum 2
+			HdmiPCM 6
+			HdmiCtlIndex 1
+			HdmiPrio 600
 		}
+		Include.hdmi2.File "/codecs/hda/hdmi.conf"
 	}
 }
 
 If.hdmi3 {
-	Condition {
-		Type ControlExists
-		Control "iface=CARD,name='HDMI/DP,pcm=7 Jack'"
-	}
+	Condition { Type String Empty "" }
 	True {
-		SectionDevice."HDMI3" {
-			Comment "HDMI3/DP3 Output"
-
-			EnableSequence [
-				cset "name='IEC958 Playback Switch',index=2 on"
-			]
-
-			DisableSequence [
-				cset "name='IEC958 Playback Switch',index=2 off"
-			]
-
-			Value {
-				PlaybackPriority 700
-				PlaybackPCM "hw:${CardId},7"
-				JackControl "HDMI/DP,pcm=7 Jack"
-			}
+		Define {
+			HdmiNum 3
+			HdmiPCM 7
+			HdmiCtlIndex 2
+			HdmiPrio 700
 		}
+		Include.hdmi3.File "/codecs/hda/hdmi.conf"
 	}
 }
-- 
2.26.2

