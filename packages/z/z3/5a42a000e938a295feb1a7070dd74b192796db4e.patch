From 5a42a000e938a295feb1a7070dd74b192796db4e Mon Sep 17 00:00:00 2001
From: Anton Kochkov <anton.kochkov@gmail.com>
Date: Mon, 18 May 2020 12:35:47 +0800
Subject: [PATCH] Add pkg-config file

---
 CMakeLists.txt |  9 +++++++++
 z3.pc.cmake.in | 13 +++++++++++++
 2 files changed, 22 insertions(+)
 create mode 100644 z3.pc.cmake.in

diff --git a/CMakeLists.txt b/CMakeLists.txt
index a7aee90bb7..1ae3bce9ad 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -568,6 +568,9 @@ write_basic_package_version_file("${PROJECT_BINARY_DIR}/Z3ConfigVersion.cmake"
   COMPATIBILITY SameMajorVersion
 )
 
+configure_file("${CMAKE_CURRENT_SOURCE_DIR}/z3.pc.cmake.in"
+	"${CMAKE_CURRENT_BINARY_DIR}/z3.pc" @ONLY)
+
 ################################################################################
 # Create `Z3Config.cmake` and related files for install tree so clients can use
 # Z3 via CMake.
@@ -610,6 +613,12 @@ install(
   DESTINATION "${CMAKE_INSTALL_Z3_CMAKE_PACKAGE_DIR}"
 )
 
+# Add install rule to install ${PROJECT_BINARY_DIR}/z3.pc
+install(
+  FILES "${PROJECT_BINARY_DIR}/z3.pc"
+  DESTINATION "${CMAKE_INSTALL_PKGCONFIGDIR}"
+)
+
 ################################################################################
 # Examples
 ################################################################################
diff --git a/z3.pc.cmake.in b/z3.pc.cmake.in
new file mode 100644
index 0000000000..af19698649
--- /dev/null
+++ b/z3.pc.cmake.in
@@ -0,0 +1,13 @@
+prefix=@CMAKE_INSTALL_PREFIX@
+exec_prefix=@CMAKE_INSTALL_PREFIX@
+libdir=@CMAKE_INSTALL_LIBDIR@
+sharedlibdir=@CMAKE_INSTALL_LIBDIR@
+includedir=@CMAKE_INSTALL_INCLUDEDIR@
+
+Name: z3
+Description: The Z3 Theorem Prover
+Version: @VERSION@
+
+Requires:
+Libs: -L${libdir} -L${sharedlibdir} -lz3
+Cflags: -I${includedir}
