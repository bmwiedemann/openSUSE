-------------------------------------------------------------------
Tue Aug 27 18:04:07 UTC 2024 - Antonio Teixeira <antonio.teixeira@suse.com>

- Update to 7.2.6:
  - Bug Fixes - Core
    * Fix typo in REGISTER_API macro to prevent segfaults when loading Redis
    modules (#608)
    * Fix the command duration reset issue when clients are blocked and commands
    are reprocessed (#526)
    * Fix the data type conversion error in zrangeResultBeginStore (Redis#13148)
    * Fix a crash caused by quicklist node merges (Redis#13040)
    * Fix crashes in module blocking client timeout cases (Redis#13011)
    * Fix conversion of numbers in Lua args to Redis args
    (Redis#13115, Fixes Redis#13113)
    * Fix crash in LSET command when replacing small list items with larger ones,
    creating listpacks larger than 4GB (Redis#12955, Fixes Redis#12864)
    * Fix blocking command timeout reset issue during reprocessing (Redis#13004)
  - Bug Fixes - Cluster
    * Fix the CLUSTER SHARDS command to display accurate slot information even
    if a primary node fails (#790, Fixes #784)
    * Fix an issue where module authentication failed when the cluster was down
    (#693, Fixes #619)
    * Ensure only primary nodes with slots can mark another node as failed (#634)
    * Improve MEET command reliability under link failures to maintain cluster
    membership symmetry (#461)
    * Allow single primary node to mark potentially failed replica as FAIL in
    single-shard cluster (Redis#12824)
  - Bug Fixes - Sentinel
    * Accept redis-sentinel to start Valkey in sentinel mode (#731, Fixes #719)
  - Bug Fixes - CLI
    * Ensure the --count option in redis-cli works correctly even without
    --pattern (Redis#13092)
    * Fix redis-check-aof misidentifying data in manifest format as MP-AOF
    (Redis#12951)
    * Update redis-check-rdb types to replace stream-v2 with stream-v3
    (Redis#12969)

-------------------------------------------------------------------
Tue Jul  9 14:21:33 UTC 2024 - Antonio Teixeira <antonio.teixeira@suse.com>

- migrate_redis_to_valkey.bash fixes (boo#1227139)
  * Also set group owner for /var/lib/valkey
  * Change logdir option in copied conf files to /var/log/valkey
  * Change owner of copied conf files to root:valkey

-------------------------------------------------------------------
Tue Jul  2 07:52:48 UTC 2024 - Andreas Schwab <schwab@suse.de>

- valkey.logrotate: fix owner of logfiles

-------------------------------------------------------------------
Sat Jun 29 17:32:13 UTC 2024 - Neal Gompa <ngompa@opensuse.org>

- Add legacy symlinks for "redis" executables in sbin to fix
  running valkey in other package test suites using absolute paths

-------------------------------------------------------------------
Wed Jun 26 06:25:23 UTC 2024 - Georg Pfuetzenreuter <georg.pfuetzenreuter@suse.com>

- Repair Redis instance detection (boo#1226986)

-------------------------------------------------------------------
Sat Jun 22 08:42:19 UTC 2024 - Neal Gompa <ngompa@opensuse.org>

- Enable automatic replacement of redis with valkey

-------------------------------------------------------------------
Thu Jun  6 18:26:19 UTC 2024 - Neal Gompa <ngompa@opensuse.org>

- Initial package based on the redis package and Fedora valkey package
- Ported over patch from redis package
  + Added valkey-conf.patch
- Backport patch from upstream submission
  + Added ppc-atomic.patch

