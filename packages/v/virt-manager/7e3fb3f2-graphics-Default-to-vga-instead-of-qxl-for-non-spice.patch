Subject: graphics: Default to 'vga' instead of 'qxl' for non-spice
From: Cole Robinson crobinso@redhat.com Mon Aug 31 13:43:56 2020 -0400
Date: Mon Aug 31 13:43:56 2020 -0400:
Git: 7e3fb3f281835ba6779886a89b27376cc423ef94

qxl doesn't add anything for the VNC case, and qxl is more likely
to be compiled out of qemu since it is dependent on spice, so vga
is the safer default for getting a working config

https://bugzilla.redhat.com/show_bug.cgi?id=1833704

Signed-off-by: Cole Robinson <crobinso@redhat.com>

diff --git a/tests/cli-test-xml/compare/virt-install-x86_64-graphics.xml b/tests/cli-test-xml/compare/virt-install-x86_64-graphics.xml
index ea9b184f..c1b06ca1 100644
--- a/tests/cli-test-xml/compare/virt-install-x86_64-graphics.xml
+++ b/tests/cli-test-xml/compare/virt-install-x86_64-graphics.xml
@@ -48,7 +48,7 @@
     <input type="tablet" bus="usb"/>
     <graphics type="vnc" port="-1"/>
     <video>
-      <model type="qxl"/>
+      <model type="vga"/>
     </video>
     <memballoon model="virtio"/>
     <rng model="virtio">
diff --git a/virtinst/devices/video.py b/virtinst/devices/video.py
index fcca91b6..f9383131 100644
--- a/virtinst/devices/video.py
+++ b/virtinst/devices/video.py
@@ -42,8 +42,6 @@ class DeviceVideo(Device):
         if (guest.is_uefi() and
             guest.lookup_domcaps().supports_video_bochs()):
             return "bochs"
-        if guest.conn.is_qemu():
-            return "qxl"
         return "vga"
 
     def set_defaults(self, guest):
