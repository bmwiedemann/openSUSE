From: Jan Engelhardt <jengelh@inai.de>
Date: 2020-08-29 10:10:12.022296526 +0200

Avoid the installation of a custom xxhash.h header. Since vk_*.h header files
still include xxhash.h (and now would source the system xxhash instead of the
bundled one), it makes sense to build ValidationLayers itself with the system
xxhash as well, so that the ABI matches.

---
 layers/CMakeLists.txt |    5 ++---
 1 file changed, 2 insertions(+), 3 deletions(-)

Index: Vulkan-ValidationLayers-sdk-1.3.211.0/layers/CMakeLists.txt
===================================================================
--- Vulkan-ValidationLayers-sdk-1.3.211.0.orig/layers/CMakeLists.txt
+++ Vulkan-ValidationLayers-sdk-1.3.211.0/layers/CMakeLists.txt
@@ -59,8 +59,6 @@ if(BUILD_LAYER_SUPPORT_FILES)
         vk_layer_utils.h
         vk_layer_utils.cpp
         vk_loader_platform.h
-        xxhash.h
-        xxhash.c
         generated/vk_format_utils.h
         generated/vk_format_utils.cpp
         generated/vk_validation_error_messages.h
@@ -200,7 +198,7 @@ set(CORE_VALIDATION_LIBRARY_FILES
     generated/synchronization_validation_types.cpp
     gpu_validation.cpp
     generated/corechecks_optick_instrumentation.cpp
-    xxhash.c)
+)
 
 set(OBJECT_LIFETIMES_LIBRARY_FILES
     generated/object_tracker.cpp
@@ -307,6 +305,7 @@ if(BUILD_LAYERS)
     endif()
     target_include_directories(VkLayer_khronos_validation PRIVATE ${SPIRV_HEADERS_INCLUDE_DIR})
     target_link_libraries(VkLayer_khronos_validation PRIVATE ${SPIRV_TOOLS_TARGET} SPIRV-Tools-opt)
+    target_link_libraries(VkLayer_khronos_validation PRIVATE -lxxhash)
 
 
     # The output file needs Unix "/" separators or Windows "\" separators On top of that, Windows separators actually need to be doubled
