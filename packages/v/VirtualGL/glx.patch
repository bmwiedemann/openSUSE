From: Adam Mizerski <adam@mizerski.pl>
Date: 2020-02-09T22:21:50+01:00
References: https://github.com/VirtualGL/virtualgl/issues/109
Upstream: sent
Subject: fix after "glx Sync <GL/glxext.h> with Khronos" in Mesa

Index: VirtualGL-2.6.3/server/faker-glx.cpp
===================================================================
--- VirtualGL-2.6.3.orig/server/faker-glx.cpp
+++ VirtualGL-2.6.3/server/faker-glx.cpp
@@ -2192,11 +2192,10 @@ void glXQueryDrawable(Display *dpy, GLXD
 	CATCH();
 }
 
-int glXQueryGLXPbufferSGIX(Display *dpy, GLXPbuffer pbuf, int attribute,
+void glXQueryGLXPbufferSGIX(Display *dpy, GLXPbuffer pbuf, int attribute,
 	unsigned int *value)
 {
 	glXQueryDrawable(dpy, pbuf, attribute, value);
-	return 0;
 }
 
 
@@ -2359,7 +2358,7 @@ void glXSwapBuffers(Display *dpy, GLXDra
 // Returns the transparent index from the overlay visual on the 2D X server
 
 int glXGetTransparentIndexSUN(Display *dpy, Window overlay, Window underlay,
-	long *transparentIndex)
+	unsigned long *transparentIndex)
 {
 	int retval = False;
 	XWindowAttributes xwa;
Index: VirtualGL-2.6.3/server/faker-sym.h
===================================================================
--- VirtualGL-2.6.3.orig/server/faker-sym.h
+++ VirtualGL-2.6.3/server/faker-sym.h
@@ -536,7 +536,7 @@ FUNCDEF2(GLXFBConfigSGIX, glXGetFBConfig
 // GLX_SUN_get_transparent_index
 
 FUNCDEF4(int, glXGetTransparentIndexSUN, Display *, dpy, Window, overlay,
-	Window, underlay, long *, transparentIndex, glXGetTransparentIndexSUN);
+	Window, underlay, unsigned long *, transparentIndex, glXGetTransparentIndexSUN);
 
 
 // GL functions
