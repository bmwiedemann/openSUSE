From 3c04679c2f561097862703eb8c21e17432865913 Mon Sep 17 00:00:00 2001
From: Togan Muftuoglu <toganm@opensuse.org>
Date: Fri, 6 Jul 2012 13:44:29 +0200
Subject: [PATCH] install byte compiled emacs lisp


Signed-off-by: Togan Muftuoglu <toganm@opensuse.org>
---
 Makefile.in |    5 +++--
 1 files changed, 3 insertions(+), 2 deletions(-)

diff --git a/Makefile.in b/Makefile.in
index 6e11d2f..aec60df 100644
--- a/Makefile.in
+++ b/Makefile.in
@@ -49,7 +49,8 @@ install : all installdirs
 	$(INSTALL_SCRIPT) libtool $(DESTDIR)$(repcommonexecdir)
 	$(INSTALL_DATA) rules.mk $(DESTDIR)$(repcommonexecdir)
 	$(INSTALL_SCRIPT) install-aliases $(DESTDIR)$(repcommonexecdir)
-	$(INSTALL_DATA) rep-debugger.el $(DESTDIR)$(emacssitelispdir)
+	emacs -Q -batch -f batch-byte-compile rep-debugger.el
+	$(INSTALL_DATA) rep-debugger.elc $(DESTDIR)$(emacssitelispdir)
 	mkdir -p $(DESTDIR)$(libdir)/pkgconfig
 	$(INSTALL_DATA) $(top_srcdir)/librep.pc $(DESTDIR)$(libdir)/pkgconfig/
 
@@ -68,7 +69,7 @@ uninstall :
 	rm -f $(DESTDIR)$(repcommonexecdir)/rules.mk
 	rm -f $(DESTDIR)$(repcommonexecdir)/install-aliases
 	rm -f $(DESTDIR)$(repcommonexecdir)/libtool
-	rm -f $(DESTDIR)$(emacssitelispdir)/rep-debugger.el
+	rm -f $(DESTDIR)$(emacssitelispdir)/rep-debugger.elc
 	rm -f $(DESTDIR)$(libdir)/pkgconfig/librep.pc
 
 doc-strings : src/repdoc
-- 
1.7.7

