From d8985805ba3c963d9aabbd2c77d15dbd8d7290c5 Mon Sep 17 00:00:00 2001
From: Jose Dapena Paz <jdapena@igalia.com>
Date: Wed, 15 May 2024 18:46:03 +0000
Subject: [PATCH] GCC: explicitly use base::span constructor in
 HttpAuthNtlmMechanism
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

base::span requires explicit construction for several of the
constructors. Theoretically the constructor used here should not
require that but GCC complains.

Bug: 40565911
Change-Id: I452f31ee0862c3e986e15207f89baa043b016da8
Reviewed-on: https://chromium-review.googlesource.com/c/chromium/src/+/5540995
Reviewed-by: Maks Orlovich <morlovich@chromium.org>
Commit-Queue: Jos√© Dapena Paz <jdapena@igalia.com>
Cr-Commit-Position: refs/heads/main@{#1301466}
---
 net/http/http_auth_ntlm_mechanism.cc | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/net/http/http_auth_ntlm_mechanism.cc b/net/http/http_auth_ntlm_mechanism.cc
index ddab00151cda9c..0b103303df56f7 100644
--- a/net/http/http_auth_ntlm_mechanism.cc
+++ b/net/http/http_auth_ntlm_mechanism.cc
@@ -149,7 +149,7 @@ int HttpAuthNtlmMechanism::GenerateAuthToken(
     return ERR_UNEXPECTED;
 
   uint8_t client_challenge[8];
-  g_generate_random_proc(client_challenge);
+  g_generate_random_proc(base::span<uint8_t>(client_challenge));
 
   auto next_token = ntlm_client_.GenerateAuthenticateMessage(
       domain, user, credentials->password(), hostname, channel_bindings, spn,
