-------------------------------------------------------------------
Wed May 29 20:19:39 UTC 2024 - Bruno Pitrus <brunopitrus@hotmail.com>

- New upstream release 29.4.2
  * no user-visible changes

-------------------------------------------------------------------
Thu May 23 19:16:26 UTC 2024 - Bruno Pitrus <brunopitrus@hotmail.com>

- New upstream release 29.4.1
  * no user-visible changes

-------------------------------------------------------------------
Wed May 15 14:58:40 UTC 2024 - Bruno Pitrus <brunopitrus@hotmail.com>

- New upstream release 29.4.0
  * Fix setuid() not affecting libuv's internal io_uring operations (CVE-2024-22017 bsc#1219995)

-------------------------------------------------------------------
Sat May 11 22:35:19 UTC 2024 - Bruno Pitrus <brunopitrus@hotmail.com>

- nodejs-electron-devel:
  * Introduce /usr/libexec/electron-node wrapper scripts
  * Introduce `electron_rebuild`, `electron_check_native`
    and `electron_check_native_unstable` RPM macros to ease packaging Electron apps
  * Correct some injected compiler flags (common.gypi-compiler.patch)

-------------------------------------------------------------------
Thu May  9 05:33:05 UTC 2024 - Bruno Pitrus <brunopitrus@hotmail.com>

- New upstream release 29.3.3
  * Fixed an issue where fs.createWriteStream could write out of order.
  * Avoid some crashes when launching new process if Electron package is upgraded while apps are running
  * Fix use after free in V8 (CVE-2024-3914 bsc#1222958)
  * Fix use after free in Angle (CVE-2024-4558 bsc#1224045)
  * a11y: avoid clearing/resetting focus on an already focused element.

-------------------------------------------------------------------
Wed May  8 19:57:09 UTC 2024 - Bruno Pitrus <brunopitrus@hotmail.com>

- Build all translations for devtools, not just Chinese.
  * more-locales.patch
  * devtools-frontend-compress_files-oom.patch

-------------------------------------------------------------------
Fri May  3 07:59:49 UTC 2024 - Bruno Pitrus <brunopitrus@hotmail.com>

- Change version number to reflect this is a git snapshot.
  Upstream removed the tag (gh#electron/electron#42025) due to their CI being broken (gh#electron/electron#42005)
  but AFAIK there isn't anything wrong with the code itself so we're still publishing it.

-------------------------------------------------------------------
Thu May  2 18:52:39 UTC 2024 - Bruno Pitrus <brunopitrus@hotmail.com>

- New upstream relese 29.3.2
  * Fixes an issue where console.log() in AudioWorkletGlobalScope produced incorrect output.
  * electron doesn't paint on offscreen-render mode after gpu process crashed
  * fix type confusion in ANGLE (CVE-2024-4058)

-------------------------------------------------------------------
Fri Apr 26 19:05:05 UTC 2024 - Bruno Pitrus <brunopitrus@hotmail.com>

- Disable custom malloc due to bizarre segfaults (bsc#1223366)
- x86_64 Tumbleweed and Fedora: increase debuginfo quality

-------------------------------------------------------------------
Fri Apr 19 20:11:24 UTC 2024 - Bruno Pitrus <brunopitrus@hotmail.com>

- Update to electron 29.3.1
  * ABI break: NODE_MODULE_VERSION is now 121
  * Chromium 122.0.6261.156
  * Node 20.9.0
  * V8 12.2
  * The deprecated gpu-process-crashed event on app has been removed.
  * The deprecated renderer-process-crashed event on app and crashed
    event on WebContents and <webview> have been removed.
  * Added WebContentsView and BaseWindow, replacing the now-deprecated BrowserView APIs.
  * Added new webUtils.getPathForFile method to replace File.path augmentation. 
  * see https://www.electronjs.org/blog/electron-29-0 and https://github.com/electron/electron/releases/tag/v29.0.0 for more
  * Security fixes for Angle (CVE-2024-3516) and Compositing (CVE-2024-3157)
- Drop upstreamed patches
  * atspi.patch
  * chromium-117-blink-BUILD-mnemonic.patch
  * local_frame-local_frame_client-incomplete-WebBackgroundResourceFetchAssets.patch
  * node-upgrade-llhttp-to-8.patch
  * policy_templates-deterministic.patch
  * v8-hide-private-symbols.patch
  * web_local_frame_client-incomplete-WebBackgroundResourceFetchAssets.patch
- Add patches to fix build errors
  * aarch64-Xclang.patch
  * absl2023-encapsulated_web_transport-StrCat.patch
  * boringssl-internal-addc-cxx.patch
  * chromium-122-avoid-SFINAE-TypeConverter.patch
  * chromium-122-BookmarkNode-missing-operator.patch
  * distributed_point_functions-aes_128_fixed_key_hash-missing-StrCat.patch
  * distributed_point_functions-evaluate_prg_hwy-signature.patch
  * fake_ssl_socket_client-Wlto-type-mismatch.patch
  * grid_sizing_tree-Wchanges-meaning.patch
  * hit_test_request-missing-optional.patch
  * InternalAllocator-too-many-initializers.patch
  * mt21_util-flax-vector-conversions.patch
  * plus_address_types-missing-optional.patch
  * race_network_request_write_buffer_manager-missing-optional.patch
  * resolution_monitor-missing-bitset.patch
  * script_promise_resolver-explicit-specialization.patch
  * search_engine_choice_service-missing-optional.patch
  * system-yuv.patch
- Replace abseil-remove-unused-targets.patch with chromium-122-abseil-shims.patch
- Remove dead code from third_party/
  * aom-vpx-no-thread-wrapper.patch
  * remove-dawn.patch
  * remove-openscreen.patch
  * remove-password-manager-and-policy.patch
  * remove-puffin.patch
  * remove-rust.patch
  * remove AFL-2.0, BSD-Protection and IJG from licence list,
    because the relevant libraries (xdg-mime, bsdiff and iccjpeg)
    are no longer shipped.
- Leap, Fedora: use bundled re2
  * drop replace-StringPiece-with-string_view.patch
- Fedora 38: use bundled abseil
  * drop pending_task_safety_flag-abseil-2022-nullability.patch
  * drop thread_annotations-fix-build-with-system-abseil.patch
- Leap 15.5: Reverse upstream changes to build with old wayland
  * wayland-proto-31-cursor-shape.patch
- Leap 15.5/6: Reverse upstream changes to build with old ffmpeg
  * Cr122-ffmpeg-new-channel-layout.patch
- aarch64: reduce debuginfo due to linker OOM

-------------------------------------------------------------------
Thu Apr 11 18:55:40 UTC 2024 - Bruno Pitrus <brunopitrus@hotmail.com>

- New upstream release 28.3.0
  * Added proxy configuring support for requests made with net module from utility process.
  * Fix out of bounds memory access in V8 (CVE-2024-3159 bsc#1222260)

-------------------------------------------------------------------
Wed Apr 10 18:21:32 UTC 2024 - Bruno Pitrus <brunopitrus@hotmail.com>

- Add CVE-2024-30261-undici-fetch-integrity.patch (fixes CVE-2024-30261 bsc#1222603)

-------------------------------------------------------------------
Tue Apr  9 16:58:14 UTC 2024 - Bruno Pitrus <brunopitrus@hotmail.com>

- Add backported CVE-2024-30260-undici-clear-proxy-authorization.patch (CVE-2024-30260 bsc#1222530)

-------------------------------------------------------------------
Thu Apr  4 20:35:05 UTC 2024 - Bruno Pitrus <brunopitrus@hotmail.com>

- New upstream release 28.2.10
  * Fixed crash in Notification::Close() under libnotify 0.8.x with portal environment.
  * Fixed usage of Storage.{get|set|clear}Cookies via the Chrome DevTools Protocol.
  * Security fixes (bsc#1222035):
    + Use after free in Angle (CVE-2024-2883)
    + Type confusion in WebAssembly (CVE-2024-2887)
    + Use after free in WebCodecs (CVE-2024-2886)

-------------------------------------------------------------------
Wed Mar 27 21:37:27 UTC 2024 - Bruno Pitrus <brunopitrus@hotmail.com>

- New upstream release 28.2.9
  * Fix object lifecycle issue in V8 (CVE-2024-2625 bsc#1221732)
  * Fixes an issue where the serial-port-added event
    improperly respected filters set by serial.requestPort()
- Fedora 39: use system vulkan-memory-allocator

-------------------------------------------------------------------
Wed Mar 20 20:08:27 UTC 2024 - Bruno Pitrus <brunopitrus@hotmail.com>

- New upstream release 28.2.8
  * no user-visible changes
- Leap 15.6: link libvulkan.so instead of dlopening it

-------------------------------------------------------------------
Sun Mar 17 16:49:00 UTC 2024 - Bruno Pitrus <brunopitrus@hotmail.com>

- aarch64, riscv64: fix build with LLVM 18
  * swiftshader-llvm18-LLVMReactor-getInt8PtrTy.patch gh#llvm/llvm-project#71029
  * swiftshader-llvm18-LLVMJIT-Host.patch             gh#llvm/llvm-project#74261
  * swiftshader-llvm18-LLVMJIT-CodeGenOptLevel.patch  gh#llvm/llvm-project#66295

-------------------------------------------------------------------
Wed Mar 13 17:00:44 UTC 2024 - Bruno Pitrus <brunopitrus@hotmail.com>

- New upstream release 28.2.7
  * Fix out of memory access in V8 (CVE-2024-2173 bsc#1221105)
  * Fixed chrome://process-internals failing to load

-------------------------------------------------------------------
Tue Mar 12 20:06:22 UTC 2024 - Bruno Pitrus <brunopitrus@hotmail.com>

- Correct bogus ASCII unit separator in licence field (bsc#1221251 gh#rpm-software-management/rpm#1644)

-------------------------------------------------------------------
Fri Mar  8 05:33:05 UTC 2024 - Bruno Pitrus <brunopitrus@hotmail.com>

- New upstream release 28.2.6
  * Fixed a crash that can result from some kinds of dynamic imports.
  * Fixed saving traces from devtools performance panel.
- Do not suppress compiler warnings in third_party/electron_node (bsc#1220571 rh#2142177)
  * add node-compiler.patch

-------------------------------------------------------------------
Thu Feb 29 20:47:40 UTC 2024 - Bruno Pitrus <brunopitrus@hotmail.com>

- New upstream release 28.2.5
  * Fix use after free in Mojo (CVE-2024-1670 bsc#1220131)
- aarch64: use bfd linker (bsc#1210687) and enable LTO

-------------------------------------------------------------------
Tue Feb 27 18:33:02 UTC 2024 - Bruno Pitrus <brunopitrus@hotmail.com>

- Update to version 28.2.4:
  * ABI break: NODE_MODULE_VERSION is now 119
  * Chromium 120.0.6099.291
  * Node 18.18.2
  * V8 12.0
  * The ipcRenderer.sendTo() method has been removed.
  * The scroll-touch-{begin,end,edge} events have been removed.
  * Setting backgroundThrottling to false will disable frames throttling in the BrowserWindow for all WebContents displayed by it.
  * Enabled ESM support.
  * The UtilityProcess API now supports ESM entrypoints.
  * Added several properties to the display object including detected, maximumCursorSize, and nativeOrigin.
  * Added support for ELECTRON_OZONE_PLATFORM_HINT environment variable on Linux.
  * see https://www.electronjs.org/blog/electron-28-0 and https://github.com/electron/electron/releases/tag/v28.0.0 for more
- Drop upstreamed patches:
  * absl-make_unique-missing-include.patch
  * async_shared_storage_database_impl-missing-absl-WrapUnique.patch
  * autofill_i18n_parsing_expressions-constexpr.patch
  * chromium-system-libusb.patch
  * computed_style_base-nbsp.patch
  * CVE-2023-38552-node-integrity-checks-according-to-policies.patch
  * CVE-2023-39333-node-create_dynamic_module-code-injection.patch
  * CVE-2023-45143-undici-cookie-leakage.patch
  * decoder_buffer_side_data-missing-uint8_t.patch
  * electron_api_app-GetPathConstant-non-constexpr.patch
  * electron_browser_context-missing-variant.patch
  * flatbuffers.gn
  * libsecret.gn
  * highway.gn
  * kwallet_dbus-missing-uint8_t.patch
  * mojo_ukm_recorder-missing-WrapUnique.patch
  * page_content_annotations_common-remove-tflite.patch
  * Partial-migration-from-imp-to-importlib.patch
  * partition_root-attribute.patch
  * quiche-missing-absl-includes.patch
  * replace_gn_files-system-libs.patch
  * sensor_reading-missing-int64_t-size_t.patch
  * services-network-optional-explicit-constructor.patch
  * simple_font_data-freetype-include.patch
  * utf_string_conversion_utils-missing-numeric_limits.patch
  * vulkan_memory_allocator.gn
  * vulkan_memory_allocator-upgrade.patch
  * vulkan_memory_allocator-vk_mem_alloc-missing-snprintf.patch
- Add patches to fix build errors:
  * atspi.patch
  * local_frame-local_frame_client-incomplete-WebBackgroundResourceFetchAssets.patch
  * v8-instance-type-inl-constexpr-used-before-its-definition.patch
  * web_local_frame_client-incomplete-WebBackgroundResourceFetchAssets.patch
- Adjust brotli-remove-shared-dictionary.patch to disable the offending code which is now live,
  and enable this patch only on systems with old brotli.
- Conditionally add pending_task_safety_flag-abseil-2022-nullability.patch
  to make electron buildable with old abseil.
- Use bundled avif everywhereas chromium now uses features available only in development snapshots.

-------------------------------------------------------------------
Sat Feb 24 18:24:19 UTC 2024 - Bruno Pitrus <brunopitrus@hotmail.com>

- Bundle minizip on Fedora 40 due to the system version not including necessary headers
  (rh#2240599 gh#zlib-ng/minizip-ng#447)
  * add bundled-minizip.patch
- Add backported patches to fix ftbfs with new abseil and icu:
  * quiche-missing-absl-includes.patch
  * text_break_iterator-icu74-breakAllLineBreakClassTable-should-be-consistent.patch

-------------------------------------------------------------------
Wed Feb 21 21:02:49 UTC 2024 - Bruno Pitrus <brunopitrus@hotmail.com>

- New upstream release 27.3.3
  * CSS style -webkit-app-region: drag; has no effect in full screen mode.
  * Fixed an issue where crashes in node::Environment destruction
    potentially wouldn't be propagated to the NodeService exit handler.
  * Fixed an issue where zoom level settings did not persist per-session for webviews.
  * Security fixes (bsc#1219661):
    + heap buffer overflow in Skia (CVE-2024-1283)
    + use after free in Mojo (CVE-2024-1284)
- Fix Angle being incorrectly built without swiftshader support.
- Leap 15.6: use system spirv and avif, disable harfbuzz-replace-{chromium-scoped-type,HbScopedPointer}.patch
  
-------------------------------------------------------------------
Wed Feb  7 15:46:36 UTC 2024 - Bruno Pitrus <brunopitrus@hotmail.com>

- New upstream release 27.3.2
  * Fixed an issue where select-usb-device did not respect the filter option in navigator.usb.requestDevice()
  * Add an extra field to process.versions to attach information about the build vendor
  * Multiple security fixes for Blink, RTC and Network

-------------------------------------------------------------------
Wed Jan 31 20:57:05 UTC 2024 - Bruno Pitrus <brunopitrus@hotmail.com>

- New upstream release 27.3.1
  * Apply module search paths restriction on worker and child process
  * Fix use after free in Web Audio (CVE-2024-0807 bsc#1219118)

-------------------------------------------------------------------
Wed Jan 24 18:59:12 UTC 2024 - Bruno Pitrus <brunopitrus@hotmail.com>

- New upstream release 27.3.0
  * Added net module to utility process

-------------------------------------------------------------------
Wed Jan 24 13:14:48 UTC 2024 - Bruno Pitrus <brunopitrus@hotmail.com>

- Fix crash in media::FFmpegGlue::OpenContext (chromium-118-sigtrap_system_ffmpeg.patch)

-------------------------------------------------------------------
Wed Jan 17 22:17:15 UTC 2024 - Bruno Pitrus <brunopitrus@hotmail.com>

- New upstream release 27.2.3
  * Security fixes for V8 (bsc#1218892):
    CVE-2024-0517 CVE-2024-0518
- Use system spirv on 15.6
- Build using gcc13 on Leap
  * drop keyboard_util-gcc12-invalid-constexpr.patch
- Drop support for 15.4 and Fedora 37
  and remove relevant vendored libraries from tarball.

-------------------------------------------------------------------
Wed Jan 10 20:23:22 UTC 2024 - Bruno Pitrus <brunopitrus@hotmail.com>

- New upstream release 27.2.2
  * Fixed a crash resultant from trying to listen to power-related events
    before the ready event was emitted on Linux
  * Fix multiple vulnerabilities in Chromium (bsc#1218533):
    CVE-2024-0222 CVE-2024-0223 CVE-2024-0224  

-------------------------------------------------------------------
Thu Jan  4 18:01:51 UTC 2024 - Bruno Pitrus <brunopitrus@hotmail.com>

- New upstream release 27.2.1
  * Fix multiple security issues in Chromium and V8 (bsc#1218048):
    CVE-2023-6702 CVE-2023-6703 CVE-2023-6705 CVE-2023-6706 CVE-2023-6707
  * Fix use after free in AVIF (CVE-2023-6704 bsc#1218303) (except Tumbleweed)

-------------------------------------------------------------------
Fri Dec 22 14:10:57 UTC 2023 - Bruno Pitrus <brunopitrus@hotmail.com>

- New upstream release 27.2.0
  * Added an option in protocol.registerSchemesAsPrivileged to allow V8 code cache in custom schemes.
  * Fixed an issue where font requests were incorrectly being sent to dev tools multiple times per resource.
  * Fixed save to file option not working in performance tab of devtools.
  * Fix use after free in MediaStream (CVE-2023-6508)
  * Fix heap buffer overflow in WebRTC (CVE-2023-7024 bsc#1218302)

-------------------------------------------------------------------
Sat Dec  2 00:25:12 UTC 2023 - Bruno Pitrus <brunopitrus@hotmail.com>

- New upstream release 27.1.3
  * Chromium 118.0.5993.159
  * Fix integer overflow in Skia (CVE-2023-6345)
  * Fix use after free in WebAudio (CVE-2023-6346)
  * Fix use after free in Mojo (CVE-2023-6347)
  * [Leap and Fedora only] Fix use after free in avif (CVE-2023-6350 bsc#1217614)
- Hide more private symbols in trap-handler (v8-hide-private-symbols.patch)

-------------------------------------------------------------------
Wed Nov 22 21:33:19 UTC 2023 - Bruno Pitrus <brunopitrus@hotmail.com>

- New upstream release 27.1.2
  * no user-visible changes
- Do not build some unused code in //third_party/perfetto.

-------------------------------------------------------------------
Sat Nov 18 12:34:15 UTC 2023 - Bruno Pitrus <brunopitrus@hotmail.com>

- New upstream release 27.1.0
  * Chromium 118.0.5993.144
  * Added keyboardLock to ses.setPermissionRequestHandler(handler).
  * Fixed "will-navigate" not being emitted when pressing links in chrome: pages.
- Drop chromium-ffmpeg-first-dts.patch also on Fedora 37 (rh#2240127)
- Drop no longer relevant electron-version-from-env.patch
- Add libxml-2.12-xmlCtxtGetLastError-const.patch to fix ftbfs with new libxml (rh#2250062)

-------------------------------------------------------------------
Wed Nov 15 20:57:49 UTC 2023 - Bruno Pitrus <brunopitrus@hotmail.com>

- Fedora 38+: allow using fixed ffmpeg-libs with electron

-------------------------------------------------------------------
Sat Nov 11 21:53:38 UTC 2023 - Bruno Pitrus <brunopitrus@hotmail.com>

- Disable chromium-ffmpeg-first-dts.patch on Fedora 38+ to fix some MP4 videos not playing (rh#2240127)

-------------------------------------------------------------------
Fri Nov 10 20:12:45 UTC 2023 - Bruno Pitrus <brunopitrus@hotmail.com>

- Fix non-deterministic build in cloud_policy.pb.cc (bsc#1041090)
  * add policy_templates-deterministic.patch

-------------------------------------------------------------------
Fri Nov 10 18:26:45 UTC 2023 - Bruno Pitrus <brunopitrus@hotmail.com>

- New upstream release 27.0.4
  * Chromium 118.0.5993.129
  * Fixed an issue where WebViews could sometimes crash on unload
  * obsolete crash_gpu_process_and_clear_shader_cache_when_skia_reports.patch
- Use system jinja2 for building
  * add computed_style_base-nbsp.patch
  * update system-pydeps.patch
- Leap: use python 3.11 for building (was 3.6)

-------------------------------------------------------------------
Tue Nov  7 17:10:19 UTC 2023 - Bruno Pitrus <brunopitrus@hotmail.com>

- Add backported crash_gpu_process_and_clear_shader_cache_when_skia_reports.patch
  * fixes “Skia shader compilation error” after some Mesa updates due to stale shader cache (bsc#1214274)

-------------------------------------------------------------------
Wed Nov  1 20:28:50 UTC 2023 - Bruno Pitrus <brunopitrus@hotmail.com>

- New upstream release 27.0.3
  * Updated Chromium to 118.0.5993.120
  * Fixed an issue where navigator.keyboard.lock() did not work per latest expected behavior

-------------------------------------------------------------------
Thu Oct 26 17:25:56 UTC 2023 - Bruno Pitrus <brunopitrus@hotmail.com>

- v8: Re-enable glibc (as opposed to fdlibm) trigonometry
  which was mistakenly disabled (v8_use_libm_trig_functions)
  and unbundle it (system-libm.patch).

-------------------------------------------------------------------
Sat Oct 21 08:56:56 UTC 2023 - Bruno Pitrus <brunopitrus@hotmail.com>

- New upstream release 27.0.2
  * Functions called over the contextBridge are now called with the expected receiver (this).
- Do not build some Chromium features not used by Electron.

-------------------------------------------------------------------
Thu Oct 19 16:43:42 UTC 2023 - Bruno Pitrus <brunopitrus@hotmail.com>

- New upstream release 27.0.1
  * Updated Chromium to 118.0.5993.89.
  * Fixed an issue where calling loadURL during some webContents url loading events could crash.
  * Fixed an issue where fully occluded windows would return an empty image from webContents.capturePage()
  * Fixed some redundant permission dialogs while screen sharing on Wayland.
- Fix typo installing icon file to wrong folder.

-------------------------------------------------------------------
Thu Oct 19 04:28:56 UTC 2023 - Bruno Pitrus <brunopitrus@hotmail.com>

- Update to 27.0.0:
  * ABI break: NODE_MODULE_VERSION is now 118
  * Chromium 118.0.5993.32
  * Node 18.17.1
  * V8 11.8
  * The deprecated color scheme changed events in systemPreferences have been removed.
  * The systemPreferences.getAppLevelAppearance, systemPreferences.setAppLevelAppearance and systemPreferences.appLevelAppearance APIs have been removed,
    as well as the alternate-selected-control-text value for systemPreferences.getColor.
  * see https://www.electronjs.org/blog/electron-27-0 and https://www.electronjs.org/blog/electron-26-0 for new features
- Drop upstreamed patches
  * absl-uint128-do-not-assume-abi.patch
  * cpu-missing-uint8_t.patch
  * electron-24-components-missing-headers.patch
  * mojom-python3.12-imp.patch
  * re2-11-StringPiece.patch
  * swiftshader-llvm17.patch
- (Fedora) switch to bundled avif as Chromium no longer builds with avif 0.x
  * drop avif_image_decoder-AVIF_PIXEL_FORMAT_COUNT.patch
  * drop avif_image_decoder-libavif-1-mode.patch
  * drop avif_image_decoder-repetitionCount-clli.patch
- Drop no longer relevant chromium-86-fix-vaapi-on-intel.patch
- (Leap and Fedora) reverse upstream changes to build with re2 10
  * replace-StringPiece-with-string_view.patch
- (Fedora <39) reverse upstream changes to build with icu 71
  * v8-icu73-alt_calendar.patch
  * v8-icu73-simple-case-folding.patch
- Reverse upstream changes to build against old brotli
  * brotli-remove-shared-dictionary.patch
- Add patches to fix build errors
  * absl-make_unique-missing-include.patch
  * autofill_i18n_parsing_expressions-constexpr.patch
  * chromium-117-blink-BUILD-mnemonic.patch
  * decoder_buffer_side_data-missing-uint8_t.patch
  * disable-tests.patch
  * keyboard_util-gcc12-invalid-constexpr.patch
  * kwallet_dbus-missing-uint8_t.patch
  * material_color_utilities-tones-missing-round.patch
  * page_content_annotations_common-remove-tflite.patch
  * partition_root-attribute.patch
  * perfetto-numeric_storage-double_t.patch
  * sensor_reading-missing-int64_t-size_t.patch
  * simple_font_data-freetype-include.patch
  * utf_string_conversion_utils-missing-numeric_limits.patch

-------------------------------------------------------------------
Mon Oct 16 17:38:38 UTC 2023 - Bruno Pitrus <brunopitrus@hotmail.com>

- Add backported security patches:
  * CVE-2023-38552 bsc#1216272 CVE-2023-38552-node-integrity-checks-according-to-policies.patch
  * CVE-2023-39333 bsc#1216273 CVE-2023-39333-node-create_dynamic_module-code-injection.patch
  * CVE-2023-45143 bsc#1216205 CVE-2023-45143-undici-cookie-leakage.patch
- Build against Wayland 21 also on Leap 15.4 now that it's available
  * drop wayland-WL-SINCE-VERSION.patch
  * drop wayland_data_drag_controller-WL_SURFACE_OFFSET_SINCE_VERSION.patch

-------------------------------------------------------------------
Mon Oct 16 08:55:17 UTC 2023 - Bruno Pitrus <brunopitrus@hotmail.com>

- Use system simdutf on Fedora ≥38
  * system-simdutf.patch
- Use system vulkan-memory-allocator on Fedora 40/Rawhide
  * vulkan_memory_allocator.gn
  * vulkan_memory_allocator-upgrade.patch

-------------------------------------------------------------------
Thu Oct 12 17:04:40 UTC 2023 - Bruno Pitrus <brunopitrus@hotmail.com>

- New upstream release 25.9.1
  * Fixed an issue where calling loadURL during some webContents url loading events could crash.
  * Fixed deprecated gpu-process-crashed / renderer-process-crashed events being emitted twice and with incorrect arguments.
- Desktop integration cleanup:
  * edit .desktop file to not show Electron in start menu as it is useless when run by itself
  * drop electron-logo-symbolic.svg and instead use upstream supplied icon
  * do not install icon twice (icon.patch)
  * do not create /{etc,usr/share}/webapps directories which do not belong here
  * do not recommend noto-coloremoji-fonts, if an app needs it it should pull it by itself.

-------------------------------------------------------------------
Thu Oct  5 09:13:46 UTC 2023 - Bruno Pitrus <brunopitrus@hotmail.com>

- New upstream release 25.9.0
  * Added support for chrome.scripting extension APIs.
  * Fixed BrowserView.setBounds calls not painting view in new bounds in some cases.
  * Fixed an issue where webContents.print could fail when options is a frozen object.

-------------------------------------------------------------------
Tue Oct  3 17:33:41 UTC 2023 - Bruno Pitrus <brunopitrus@hotmail.com>

- Do not export internal v8 apis used by no known application (v8-hide-private-symbols.patch)

-------------------------------------------------------------------
Sun Oct  1 16:22:35 UTC 2023 - Bruno Pitrus <brunopitrus@hotmail.com>

- Add backported swiftshader-llvm17.patch to fix ftbfs on arm64
- Drop 647d3d2.patch no longer relevant

-------------------------------------------------------------------
Sat Sep 30 16:09:25 UTC 2023 - Bruno Pitrus <brunopitrus@hotmail.com>

- Disable chromium-ffmpeg-first-dts.patch on openSUSE as it breaks playback of some videos and is no longer needed.
  * In its place add chromium-94-ffmpeg-roll.patch for Leap only. 

-------------------------------------------------------------------
Fri Sep 29 07:04:36 UTC 2023 - Bruno Pitrus <brunopitrus@hotmail.com>

- New upstream release 25.8.4
  * Detect system dark theme preference via xdg settings portal on Linux.
  * Fix heap buffer overflow in libvpx (CVE-2023-5217) (only Fedora 37 and Leap)
- Do not build webextensions support which we do not use
  * add backported build-without-extensions.patch

-------------------------------------------------------------------
Thu Sep 28 09:13:23 UTC 2023 - Bruno Pitrus <brunopitrus@hotmail.com>

- New upstream release 25.8.3
  * Fixed a redundant permission popup while fetching screens and windows using desktopCapturer.getSources() on Wayland
  * Fixed crash on shutdown in tls sockets with Node.js HTTP/2 connections.

-------------------------------------------------------------------
Mon Sep 25 16:53:17 UTC 2023 - Bruno Pitrus <brunopitrus@hotmail.com>

- Use icu 73 on Leap
  * drop NumberFormat-icu71-incrementExact.patch
  * drop intl-objects-icu71-UNUM_APPROXIMATELY_SIGN_FIELD.patch
  * drop v8-regexp-parser-UCHAR_BASIC_EMOJI.patch
  * drop v8-icu69-FormattedNumberRange-no-default-constructible.patch
- Fix unresolvable build on Leap 15.6

-------------------------------------------------------------------
Thu Sep 21 17:34:33 UTC 2023 - Bruno Pitrus <brunopitrus@hotmail.com>

- New upstream release 25.8.2
  * Fixed an issue where chrome://gpu failed to load.
  * Fixed an issue where accelerators representing DOM keys were not correctly converted in webContents.sendInputEvent().
- Drop chrome-gpu-does-not-load.patch applied upstream

-------------------------------------------------------------------
Wed Sep 13 20:17:56 UTC 2023 - Bruno Pitrus <brunopitrus@hotmail.com>

- New upstream release 25.8.1
  * Fixed an error where listening to certain chrome.tabs events would throw incorrectly. 
  * Fixed problem with promise resolved to early when browser initiated in-page navigation.
  * Security fixes for Networks (CVE-2023-4763), V8 (CVE-2023-4762) and FedCM (CVE-2023-4761)

-------------------------------------------------------------------
Mon Sep  4 20:30:33 UTC 2023 - Bruno Pitrus <brunopitrus@hotmail.com>

- Update to 25.8.0
  * ABI break: NODE_MODULE_VERSION is now 116
  * Chromium 114.0.5735.289
  * Node 18.15.0
  * V8 11.4
  * Removed BrowserWindow scroll-touch-* events (since Electron 23)
  * Removed webContents.{de,in}crementCapturerCount(stayHidden, stayAwake) (since Electron 23)
  * Removed JXL image format support (since Electron 23)
  * API Changed: nativeImage.createThumbnailFromPath(path, size) (since Electron 24)
- Use bundled aom and vpx on Fedora ≤37 and Leap
- Drop support for Fedora 36 which is EOL
- Drop upstreamed patches
  * CVE-2022-43548.patch
  * aggregatable_attribution_utils-do-not-assume-abseil-ABI.patch
  * angle-ShaderVars-missing-uint32_t.patch
  * attribution_response_parsing-do-not-assume-abseil-ABI.patch
  * blink-gcc13-missing-headers.patch
  * bluetooth_uuid-missing-uint8_t.patch
  * broker_file_permission-missing-uint64_t.patch
  * chromium-108-abseil-shims.patch
  * components-gcc13-missing-headers.patch 
  * crashpad-elf_image_reader-ProgramHeaderTableSpecific-expected-unqualified-id.patch
  * d0aa9ad.patch
  * document_loader-private-DecodedBodyData.patch
  * effect_paint_property_node-Wchanges-meaning.patch
  * electron_serial_delegate-ambiguous-Observer.patch
  * extensions-gcc13-missing-headers.patch
  * first_party_set_parser-IssueWithMetadata-no-known-conversion.patch
  * gpu_feature_info-missing-uint32_t.patch
  * half_float-Wstrict-aliasing.patch
  * ipcz-buffer_id-Wnarrowing.patch
  * ipcz-safe_math-Wuninitialized.patch
  * net-gcc13-missing-headers.patch
  * net-third_party-quiche-gcc13-missing-headers.patch
  * one_writer_seqlock-missing-uintptr_t.patch
  * openscreen-gcc13-missing-headers.patch
  * passwords_counter-Wsubobject-linkage.patch
  * perfetto-uuid-missing-uint8_t.patch
  * print_dialog_gtk-no-kEnableOopPrintDriversJobPrint.patch
  * profiler-missing-uintptr_t.patch
  * reproducible-config.gypi.patch
  * select_file_dialog_linux_kde-Wodr.patch
  * shim_headers-fix-ninja.patch
  * static_constructors-Wstrict-aliasing.patch
  * string_hasher-type-pun-UB-causes-heap-corruption.patch
  * swiftshader-Constants-Wstrict-aliasing.patch
  * swiftshader-Half-Wstrict-aliasing.patch
  * swiftshader-LRUCache-missing-uint64_t.patch
  * target_property-missing-uint32_t.patch
  * ui-gcc13-missing-headers.patch
  * unzip-Wsubobject-linkage.patch
  * v8_initializer-PageAllocator-fpermissive.patch
  * vector_math_impl-Wstrict-aliasing.patch
  * web_contents_impl-Wsubobject-linkage.patch
  * webgl_image_conversion-Wstrict-aliasing.patch
  * webrtc-base64-missing-uint8_t.patch
  * xr_cube_map-Wstrict-aliasing.patch
- Drop no longer relevant patches`
  * chromium-norar.patch
  * electron-13-fix-sql-virtualcursor-type.patch
  * enable-jxl.patch
  * system-jsoncpp.patch
- Add patches to build with system libs
  * abseil-remove-unused-targets.patch
  * highway.gn
  * system-wayland.patch
- Add patches to fix build errors
  * absl-uint128-do-not-assume-abi.patch
  * cpu-missing-uint8_t.patch
  * electron-24-components-missing-headers.patch
  * electron_api_app-GetPathConstant-non-constexpr.patch
  * electron_browser_context-missing-variant.patch
  * mojo_ukm_recorder-missing-WrapUnique.patch
- Conditionally reverse upstream changes to build against stable avif
  * avif_image_decoder-repetitionCount-clli.patch
- …and harfbuzz 4
  * harfbuzz-replace-HbScopedPointer.patch
- …and icu 69
  * v8-regexp-parser-UCHAR_BASIC_EMOJI.patch
- …and wayland 19
  * wayland-WL-SINCE-VERSION.patch
  * wayland_data_drag_controller-WL_SURFACE_OFFSET_SINCE_VERSION.patch
- Add backported chrome-gpu-does-not-load.patch

-------------------------------------------------------------------
Thu Aug 31 19:31:29 UTC 2023 - Bruno Pitrus <brunopitrus@hotmail.com>

- Add avif_image_decoder-libavif-1-mode.patch to fix ftbfs with new libavif

-------------------------------------------------------------------
Thu Aug 31 08:05:16 UTC 2023 - Bruno Pitrus <brunopitrus@hotmail.com>

- New upstream release 22.3.23
  * Security fixes for V8 (CVE-2023-4427) and CSS (CVE-2023-4428)

-------------------------------------------------------------------
Mon Aug 28 15:59:52 UTC 2023 - Bruno Pitrus <brunopitrus@hotmail.com>

- New upstream release 22.3.22
  * Fixed decorations for tiled windows on Wayland.
  * Security fixes for V8 (CVE-2023-4355, CVE-2023-4352), Skia (CVE-2023-4354), ANGLE (CVE-2023-4353), and Network (CVE-2023-4351)
- Clean up third_party/… in tarball.
  * drop chromium-99-pdfium-system-libtiff.patch which is dead code

-------------------------------------------------------------------
Thu Aug 17 16:28:17 UTC 2023 - Bruno Pitrus <brunopitrus@hotmail.com>

- New upstream release 22.3.21
  * Fixed unnecessary package.json check on built-in modules. 
- Disabled video hardware acceleration (vaapi) and use system libvpx everywhere.
  This is not a web browser where users regularly watch 4K videos,
  and i think the need to vendor dependencies and increased buildtime is not worth it.
- Use system dav1d and libjxl on Leap 15.5 as they're available now.
- Fix unreasolvabe build and use llhttp 8 on Fedora 37.

-------------------------------------------------------------------
Thu Aug 10 08:11:33 UTC 2023 - Bruno Pitrus <brunopitrus@hotmail.com>

- New upstream release 22.3.20
  * Security fixes for ipcz (CVE-2023-3732) and WebRTC (CVE-2023-3728).

-------------------------------------------------------------------
Mon Jul 31 18:00:30 UTC 2023 - Bruno Pitrus <brunopitrus@hotmail.com>

- Add backported re2-11-StringPiece.patch to fix FTBFS.

-------------------------------------------------------------------
Sat Jul 22 21:18:28 UTC 2023 - Bruno Pitrus <brunopitrus@hotmail.com>
- New upstream release 22.3.17
  * Security fixes: CVE-2023-3422, CVE-2023-3421, CVE-2023-3420.

-------------------------------------------------------------------
Sun Jul 16 15:29:22 UTC 2023 - Bruno Pitrus <brunopitrus@hotmail.com>
- Add mojom-python3.12-imp.patch and Partial-migration-from-imp-to-importlib.patch to fix ftbfs on Rawhide

-------------------------------------------------------------------
Wed Jun 21 19:37:40 UTC 2023 - Bruno Pitrus <brunopitrus@hotmail.com>
- New upstream release 22.3.14
  * Security fixes for WebRTC: CVE-2023-3215, CVE-2023-0698, CVE-2023-0932
  * Security fix for V8: CVE-2023-3216

-------------------------------------------------------------------
Wed Jun 14 19:07:41 UTC 2023 - Bruno Pitrus <brunopitrus@hotmail.com>
- New upstream release 22.3.13
  * Security fixes: CVE-2023-3079, CVE-2023-2724, CVE-2023-2723,
    CVE-2023-2725, CVE-2023-2721, CVE-2023-2936, CVE-2023-2935,
    CVE-2023-2930

-------------------------------------------------------------------
Thu May 25 05:15:35 UTC 2023 - Bruno Pitrus <brunopitrus@hotmail.com>
- New upstream release 22.3.11
  * Fix ScopedObservation use after free in BubbleDialogDelegate::AnchorWidgetObserver
- Re-enable use of flat_map in ANGLE.

-------------------------------------------------------------------
Wed May 10 18:27:09 UTC 2023 - Bruno Pitrus <brunopitrus@hotmail.com>
- New upstream release 22.3.9
  * Fixed drag-and-drop crash on Wayland
- Correct bogus export of private symbols from chrome_crashpad_handler executable
  * add another section and note to chromium-102-compiler.patch
  * add rdynamic.patch

-------------------------------------------------------------------
Wed May  3 20:28:49 UTC 2023 - Bruno Pitrus <brunopitrus@hotmail.com>
- New upstream release 22.3.8
  * Fixed crash when executing eval in the utility process.
- Drop ‘Revert-e2c4acd-apply-csp-correctly-when-contextIsolation-false.patch’ due to proper upstream fix in this release.

-------------------------------------------------------------------
Fri Apr 28 20:52:27 UTC 2023 - Bruno Pitrus <brunopitrus@hotmail.com>
- Fix unresolvable build on Fedora 38 

-------------------------------------------------------------------
Wed Apr 26 20:43:42 UTC 2023 - Bruno Pitrus <brunopitrus@hotmail.com>
- New upstream release 22.3.7
  * Fixed an issue which made defaultFontFamily in webPreferences have no effect
  * Fixed broken defaults in shell.openExternal() options.
  * v8: Make Error.captureStackTrace() a no-op for global object (CVE-2023-2033)
  * Blink: Use ScriptState::Scope instead of setting HandleScope. (CVE-2023-2133)
  * Blink: Stop supporting { handleEvent }. (CVE-2023-2134)
  * Dev tools: Retain DevToolsAgentHost after ForceDetachAllSessions() (CVE-2023-2135)
  * Skia: Enforce program stack limits on function parameters (CVE-2023-2136)

-------------------------------------------------------------------
Wed Apr 26 16:58:54 UTC 2023 - Bruno Pitrus <brunopitrus@hotmail.com>
- Disable thread_annotations-fix-build-with-system-abseil.patch on Tumbleweed to fix FTBFS with Abseil 20230125.

-------------------------------------------------------------------
Mon Apr 17 15:43:58 UTC 2023 - Bruno Pitrus <brunopitrus@hotmail.com>
- Add Revert-e2c4acd-apply-csp-correctly-when-contextIsolation-false.patch
  * revert changes causing crash of VSCode: https://github.com/microsoft/vscode/pull/179991

-------------------------------------------------------------------
Sat Apr 15 11:33:42 UTC 2023 - Bruno Pitrus <brunopitrus@hotmail.com>
- New upstream release 22.3.6
  * Fixed an issue with Content-Security-Policy not being correctly enforced when sandbox: false and contextIsolation: false. (CVE-2023-23623)
  * Fixed a memory leak in v8.serialize() when running Node.js within Electron. 
  * Viz: Add CHECKs in HostFrameSinkManager (CVE-2023-1810)
  * Blink: Move the edit commands to an on stack variable (CVE-2023-1811)
- Fix download tarball script wrongly setting GPU_LISTS_VERSION to zero
- Change 647d3d2.patch to fix FTBFS on aarch64 Fedora
- Fix unresolvable build on Fedora 37

-------------------------------------------------------------------
Mon Apr  3 15:36:21 UTC 2023 - Guillaume GARDET <guillaume.gardet@opensuse.org>

- Add upstream patches to fix build on aarch64:
  * d0aa9ad.patch
  * 647d3d2.patch

-------------------------------------------------------------------
Thu Mar 30 12:51:54 UTC 2023 - Bruno Pitrus <brunopitrus@hotmail.com>
- New upstream release 22.3.5
  * Fixed an issue where calling port.postMessage in MessagePortMain with some invalid parameters could cause a crash.
  * Fixed canceling of bluetooth requests when no devices are returned.
  * webcodecs: Fix VP9 p2 encoding of NV12 frames
  * Fix crash in AnnotationAgentImpl
  * v8: Fix map transition chain following w/ dictionary maps (CVE-2023-1214)
  * Shutdown RtpContributingSourceCache in Dispose() (CVE-2023-1218)
  * Prevent potential integer overflow in PersistentMemoryAllocator (CVE-2023-1219)
  * hid: Handle empty input reports (CVE-2023-1529)
  * Improve checks for VideoFrame layouts (CVE-2023-1532)
  * Disable glShaderBinary in the passthrough cmd decoder (CVE-2023-1534)
- Fix build error with absl_core_headers 2023xxxx.

-------------------------------------------------------------------
Fri Mar 24 13:42:44 UTC 2023 - Bruno Pitrus <brunopitrus@hotmail.com>
- New upstream release 22.3.4
  * Improved error messages on session.cookies.set failure.
  * Vulkan: Don't close render pass if rebind to same fbo (CVE-2023-1213)
  * CSS: In Typed CSSOM, reject adding to something that is not a list. (CVE-2023-1215)
  * Fix potential out of bounds write in base::SampleVectorBase (CVE-2023-1220)
- Add services-network-optional-explicit-constructor.patch

-------------------------------------------------------------------
Sat Mar 18 18:48:36 UTC 2023 - Bruno Pitrus <brunopitrus@hotmail.com>
- ANGLE: Link libvulkan.so and libGL.so instead of dlopening it
  * angle_link_glx.patch

-------------------------------------------------------------------
Thu Mar 16 10:09:58 UTC 2023 - Bruno Pitrus <brunopitrus@hotmail.com>
- New upstream release 22.3.3
  * Fixed an issue where unhandled rejections could cause duplicate logs in some cases.
  * Fix UAF problem in AngleVulkanImageBacking (CVE-2023-0928)
  * CHECK that YUV readback finished synchronously (CVE-2023-0929)
  * Simplify WebMediaPlayerMSCompositor destruction (CVE-2023-0931)

-------------------------------------------------------------------
Fri Mar 10 05:54:55 UTC 2023 - Bruno Pitrus <brunopitrus@hotmail.com>
- New upstream release 22.3.2
  * Fixed window could not go back to maximized state when restored
  * Improved error messages for contents.takeHeapSnapshot
- Disable some debugging code
- Revert disablement of _package_note_file on Fedora
- Switch to default BFD linker on aarch64 Fedora 36
- Fix FTBFS on Rawhide
  * angle-ShaderVars-missing-uint32_t.patch
  * openscreen-gcc13-missing-headers.patch
  * perfetto-uuid-missing-uint8_t.patch
  * swiftshader-LRUCache-missing-uint64_t.patch
  * vulkan_memory_allocator-vk_mem_alloc-missing-snprintf.patch
  * profiler-missing-uintptr_t.patch
  * components-gcc13-missing-headers.patch
  * one_writer_seqlock-missing-uintptr_t.patch
  * bluetooth_uuid-missing-uint8_t.patch
  * broker_file_permission-missing-uint64_t.patch
  * net-third_party-quiche-gcc13-missing-headers.patch
  * webrtc-base64-missing-uint8_t.patch
  * ui-gcc13-missing-headers.patch
  * net-gcc13-missing-headers.patch
  * extensions-gcc13-missing-headers.patch
  * target_property-missing-uint32_t.patch
  * gpu_feature_info-missing-uint32_t.patch
  * blink-gcc13-missing-headers.patch
  * effect_paint_property_node-Wchanges-meaning.patch

-------------------------------------------------------------------
Thu Feb 23 11:33:18 UTC 2023 - Bruno Pitrus <brunopitrus@hotmail.com>
- New upstream release 22.3.1
  * no changes
- Actually fix -lz inserted in wrong place in the modules build command line

-------------------------------------------------------------------
Thu Feb 16 20:32:34 UTC 2023 - Bruno Pitrus <brunopitrus@hotmail.com>
- New upstream release 22.3.0
  * Fixed a crash when BrowserViews are present and a user
    attempts to prevent beforeunload in the renderer process.
  * Fixed an incorrect result returned when using secure as a cookies filter.
  * Fix printing of wasm-to-js frames (CVE-2023-0696)

-------------------------------------------------------------------
Mon Feb 13 13:19:38 UTC 2023 - Bruno Pitrus <brunopitrus@hotmail.com>
- Add RenderFrameHostImpl-use-after-free.patch to fix a crash reported by an user.
- Fix unnecessary libz dependency added for downstream node modules on Fedora.

-------------------------------------------------------------------
Wed Feb  8 21:17:12 UTC 2023 - Bruno Pitrus <brunopitrus@hotmail.com>
- New upstream release 22.2.1
  * Fixed audio worklet scripts failing to run when nodeIntegrationInWorker: true.
- Fix missing files in debugsource package
- Remove third_party/breakpad from tarball and drop breakpad-system-curl.patch. It has been dead code for a while.

-------------------------------------------------------------------
Wed Feb  1 20:17:35 UTC 2023 - Bruno Pitrus <brunopitrus@hotmail.com>
- New upstream release 22.2.0
  * Fixed a BrowserWindow maxWidth or maxHeight of 0 causing strange resizing behavior.
  * Fixed tray icon not showing on desktop environments that have no support for app indicator.
  * Updated Chromium to 108.0.5359.215
  * Ensure clean destruction of network::WebTransport (CVE-2023-0471)

-------------------------------------------------------------------
Thu Jan 26 08:29:33 UTC 2023 - Bruno Pitrus <brunopitrus@hotmail.com>
- New upstream release 22.1.0
  * Added `label` property to `Display` objects.
  * Fixed an issue where `webView`s could have an incorrect initial background color following reloads.

-------------------------------------------------------------------
Thu Jan 19 13:53:50 UTC 2023 - Bruno Pitrus <brunopitrus@hotmail.com>
- New upstream reelase 22.0.3
  * Fixed an issue where the setPermissionRequestHandler callback would be invoked twice when using navigator.getUserMedia(...)
  * Use the process cache to reduce the memory for asar file.

-------------------------------------------------------------------
Wed Jan 18 05:27:34 UTC 2023 - Bruno Pitrus <brunopitrus@hotmail.com>
- Update to 22.0.2
  * ABI break: NODE_MODULE_VERSION is now 110. Native modules may need recompiling
  * Chromium to 108.0.5359.179
  * Node v16.17.1
  * V8 v10.8
  * Added WebContents input-event event.
  * Deprecated BrowserWindow scroll-touch-* events.
  * The deprecated new-window event has been removed.
  * Added contextBridge.exposeInIsolatedWorld(worldId, key, api) to expose
    an API to an isolatedWorld within a renderer from a preload script.
  * Added webContents.close() method.
  * Added new UtilityProcess API to launch chromium child process with node integration.
  * Added new WebContents event content-bounds-updated.
  * Added support for navigator.mediaDevices.getDisplayMedia via a new
    session handler, ses.setDisplayMediaRequestHandler.
  * Added support for serialPort.forget() as well as a new event
    serial-port-revoked emitted when a given origin is revoked.
- Drop patches applied upstream
  * argument_spec-missing-isnan-isinf.patch
  * chromium-103.0.5060.53-python3-do-not-use-deprecated-mode-U.patch
  * content_language_parser-missing-string.patch
  * gtk_ui_platform_stub-incomplete-type-LinuxInputMethodContext.patch
  * node-system-libs.patch
  * pending_beacon_dispatcher-virtual-functions-cannot-be-constexpr.patch
  * std_lib_extras-missing-intptr_t.patch
  * system-abseil-missing-shims.patch
- Re-add electron_serial_delegate-ambiguous-Observer.patch due to upstream reintroducing the invalid code
- Add patches to fix build errors
  * chromium-108-abseil-shims.patch
  * crashpad-elf_image_reader-ProgramHeaderTableSpecific-expected-unqualified-id.patch
  * document_loader-private-DecodedBodyData.patch
  * first_party_set_parser-IssueWithMetadata-no-known-conversion.patch
  * print_dialog_gtk-no-kEnableOopPrintDriversJobPrint.patch
  * swiftshader-LLVMJIT-AddressSanitizerPass-dead-code-remove.patch
- Conditionally reverse upstream changes to fix build with old harfbuzz
  * harfbuzz-replace-chromium-scoped-type.patch
- Switch to bundled libjxl on Fedora 36 due to system version being too old
  
-------------------------------------------------------------------
Wed Jan 11 22:08:14 UTC 2023 - Bruno Pitrus <brunopitrus@hotmail.com>
- New upstream release 21.3.4
  * Changed HTML5 Notifications created with the requireInteraction option to not timeout
  * Fixed a BrowserWindow maxWidth or maxHeight of 0 causing strange resizing behavior.
  * Added node-api: handle no support for external buffers.
  * Security fixes: CVE-2022-4174, CVE-2022-4179, CVE-2022-4181, CVE-2022-4190,
                    CVE-2022-4436, CVE-2022-4437, CVE-2022-4438, CVE-2022-4439,
                    CVE-2022-4262.  
- Remove non-free WASM binaries from tarball
  and add disable-devtools-tests.patch to fix resultant build error.
- Add remove-date-reproducible-builds.patch to fix build nondeterminism
- Add backported shim_headers-fix-ninja.patch
- Drop Leap 15.3 support

-------------------------------------------------------------------
Mon Dec 19 16:16:22 UTC 2022 - Bruno Pitrus <brunopitrus@hotmail.com>
- Pass --gc-sections to linker. Upstream build process expects this to be done,
  and it MASSIVELY reduces size of non-LTO builds.
- Switch to GNU bfd linker on ix86 and arm now that it works correctly.
- Enable debuginfo generation on ix86 and arm now that it works correctly.
- Fix build on Leap 15.5

-------------------------------------------------------------------
Tue Dec  6 17:20:10 UTC 2022 - Bruno Pitrus <brunopitrus@hotmail.com>
- Add backported CVE-2022-43548.patch
  * inspector: DNS rebinding in --inspect via invalid octal IP
    (bsc#1205119, CVE-2022-43548)
- Fix vaapi build error in the arm port and reenable vaapi.

-------------------------------------------------------------------
Fri Dec  2 23:40:14 UTC 2022 - Bruno Pitrus <brunopitrus@hotmail.com>
- New upstream release 21.3.2
  * Updated Chromium to 106.0.5249.199
- Drop common.gypi-cpp-version.patch applied upstream
- Use gcc12 also on Leap as it's available now.
  * that way we use the same compiler version everywhere
- correct optflags not being applied for assembler files compiled wih gcc
  * add gcc-asmflags.patch
- correct a compiler warning in system-libbsd.patch
- remove more dead code

-------------------------------------------------------------------
Sat Nov 26 20:30:28 UTC 2022 - Bruno Pitrus <brunopitrus@hotmail.com>
- Re-enable optimization of js code compiled into chromium (optimize_webui)
  which seems to have been disabled by mistake.
- Remove some more dead-in-Electron chromium code
- Switch back to default GNU bfd linker on x64.
- Fix FTBFS on Rawhide (rhbz#2148612)

-------------------------------------------------------------------
Thu Nov 17 14:10:47 UTC 2022 - Bruno Pitrus <brunopitrus@hotmail.com>
- New upstream release 21.3.0
  * Added an app.getPreferredSystemLanguages() API to return the user's system languages.
  * Updated Chromium to 106.0.5249.181

-------------------------------------------------------------------
Wed Nov  9 21:11:43 UTC 2022 - Bruno Pitrus <brunopitrus@hotmail.com>
- New upstream release 21.2.3
  * No user-visible changes.
- Remove upstream's tinkering with optlevel of modules compiled against nodejs-electron-devel.
  * add common.gypi-remove-fno-omit-frame-pointer.patch

-------------------------------------------------------------------
Sat Nov  5 18:03:39 UTC 2022 - Bruno Pitrus <brunopitrus@hotmail.com>
- Conditionally add backported node-upgrade-llhttp-to-8.patch to adjust to LLHTTP api changes
  * fixes FTBFS on Fedora Rawhide
- Add disable-webspeech.patch ported from QtWebengine
  * Remove some useless-in-Electron code which adds a dependency on libFLAC.

-------------------------------------------------------------------
Sat Nov  5 11:02:33 UTC 2022 - Bruno Pitrus <brunopitrus@hotmail.com>
- New upstream release 21.2.2
  * Remove symlinks from FileChooserImpl folder upload result (CVE-2022-3656)
  * Updated Chromium to 106.0.5249.168.
- Drop fix-no-ppapi-build.patch applied upstream.
- Do not compile Chrome's HSTS list into the binary. It is huge, and Electron is not used to access arbitrary websites.

-------------------------------------------------------------------
Tue Nov  1 20:51:32 UTC 2022 - Bruno Pitrus <brunopitrus@hotmail.com>
- New upstream release 21.2.1
  * Fixed spurious promise rejection in webContents.loadURL when navigating to a hash.
  * Updated Chromium to 106.0.5249.165.
- Add electron-version-from-env.patch to fix build error
- Add upstreamable patches fixing various erroneous C++ constructs
  * ipcz-safe_math-Wuninitialized.patch
  * passwords_counter-Wsubobject-linkage.patch
  * static_constructors-Wstrict-aliasing.patch
  * vector_math_impl-Wstrict-aliasing.patch
  * webgl_image_conversion-Wstrict-aliasing.patch
  * xr_cube_map-Wstrict-aliasing.patch

-------------------------------------------------------------------
Fri Oct 28 05:00:28 UTC 2022 - Bruno Pitrus <brunopitrus@hotmail.com>
- New upstream release 21.2.0
  * Set app's desktop file name and v8 flags according to package.json.
  * Removed support for nodeIntegrationInWorker in Service Workers and Shared Workers owing to sandboxing policies.
  * Updated Chromium to 106.0.5249.119.
- Do not compile PPAPI support since we don't use it.
  * fix-no-ppapi-build.patch
- Enable JXL imageformat support as it is exposed by element-desktop.
  * enable-jxl.patch

-------------------------------------------------------------------
Sun Oct 23 12:54:08 UTC 2022 - Bruno Pitrus <brunopitrus@hotmail.com>
- Enable LTO on x64 (Tumbleweed and Fedora only) now that it works correctly.
  * add seccomp_bpf-no-lto.patch
- Do not build some chromium features unused in Electron.
- Remove upstream's tinkering with optimization flags.
  * change chromium-102-compiler.patch
- Remove upstream's warning suppression
  * change chromium-102-compiler.patch
  * add -Wno-class-memaccess due to log spam
  * add -Wno-error=narrowing due to non-compliant generated code
- Add -DIS_SERIAL_ENABLED_PLATFORM to work around upstream C++ ODR error.
- Build main binary as PIE instead of PIC.
  * change chromium-102-compiler.patch
  * add fpic.patch
- Compile with gcc11 (was 10) on Leap now that it's available.
- Add backported patches
  * compact_enc_det_generated_tables-Wnarrowing.patch
  * half_float-Wstrict-aliasing.patch
  * ipcz-buffer_id-Wnarrowing.patch
  * select_file_dialog_linux_kde-Wodr.patch
  * string_hasher-type-pun-UB-causes-heap-corruption.patch
  * unzip-Wsubobject-linkage.patch
  * web_contents_impl-Wsubobject-linkage.patch
- Add patches to fix C++ bugs and submit them upstream
  * swiftshader-Constants-Wstrict-aliasing.patch
  * swiftshader-Half-Wstrict-aliasing.patch
  * v8_initializer-PageAllocator-fpermissive.patch

-------------------------------------------------------------------
Thu Oct 13 04:49:15 UTC 2022 - Bruno Pitrus <brunopitrus@hotmail.com>
- New upstream release 21.1.1
  * Updated Chromium to 106.0.5249.103
  * Fix a memory leak in content::ContentMainDelegate::CreateContentClient()
  * You can now import the built-in electron module via ESModule loaders, i.e. import('electron') and import 'electron' now work natively.

-------------------------------------------------------------------
Thu Oct  6 18:00:00 UTC 2022 - Bruno Pitrus <brunopitrus@hotmail.com>
- New upstream release 21.1.0
  * Added WebContents.opener to access window opener
  * Added webContents.fromFrame(frame) to get the WebContents corresponding to a WebFrameMain instance
  * Provided display_id for desktopCapturer on Linux
  * Updated Chromium to 106.0.5249.91
- Add backported argument_spec-missing-isnan-isinf.patch
- Add partition_alloc-no-lto.patch
  * LTO is still broken but this gets us past the build error

-------------------------------------------------------------------
Tue Oct  4 20:58:18 UTC 2022 - Bruno Pitrus <brunopitrus@hotmail.com>
- New upstream release 21.0.1
  * Update Chromium to 106.0.5249.61
- Add backported patch to fix build error
  * gtk_ui_platform_stub-incomplete-type-LinuxInputMethodContext.patch

-------------------------------------------------------------------
Mon Oct  3 10:49:19 UTC 2022 - Bruno Pitrus <brunopitrus@hotmail.com>
- New upstream release 21.0.0
  * ABI break: NODE_MODULE_VERSION is now 109. Native modules may need recompiling
  * Update Chromium to 106.0.5249.51
  * Update Node to 16.16.0
  * Enabled the V8 memory cage for external buffers. See https://www.electronjs.org/blog/v8-memory-cage for more details.
  * Added app.getSystemLocale() method.
  * Added new WebContents.ipc and WebFrameMain.ipc APIs.
  * Added support for Web Bluetooth pin pairing
  * Enable missing HKDF support in Node.js crypto
  * Fixed a crash that occured when loading non-standard schemes from iframes.
  * Fixed a crash when switching origins with emulation settings set.
  * Fixed an issue where screen.getCursorScreenPoint() crashed on Wayland
    when it was called before a BrowserWindow had been created.
  * Fixed an issue where serialPort.open() failed with
    `NetworkError: Failed to open serial port.`
  * Fixed the 'length' property in UploadFile objects being ignored.
- Add -doc subpackage.
- Do not build PDF viewer as it is huge and we don't ship any apps using it.
- Intentionally break any downstream software using the @electron/fuses script during build,
  as it never actually worked with system electron and the maintainer needs to
  be alerted to possible ABI breaks.
  * add disable-fuses.patch
- Switch to vendored AVIF on 15.4 and F36 due to the system one being too old.
- Fix angle trying to load a custom libvulkan we do not ship.
- Drop patches applied upstream:
  * absl_algorithm.gn
  * absl_base.gn
  * absl_cleanup.gn
  * absl_container.gn
  * absl_debugging.gn
  * absl_flags.gn
  * absl_functional.gn
  * absl_hash.gn
  * absl_memory.gn
  * absl_meta.gn
  * absl_numeric.gn
  * absl_random.gn
  * absl_status.gn
  * absl_strings.gn
  * absl_synchronization.gn
  * absl_time.gn
  * absl_types.gn
  * absl_utility.gn
  * brotli.gn
  * crc32c.gn
  * dav1d.gn
  * double-conversion.gn
  * libaom.gn
  * libavif.gn
  * libjxl.gn
  * libXNVCtrl.gn
  * libyuv.gn
  * swiftshader-SPIRV-Headers.gn
  * swiftshader-SPIRV-Tools.gn
  * vulkan-SPIRV-Headers.gn
  * vulkan-SPIRV-Tools.gn
  * woff2.gn
  * abseil_string_number_conversions-do-not-assume-ABI.patch
  * attribution_manager_impl-missing-absl-WrapUnique.patch
  * ax_property_node-missing-unique_ptr-forward.patch
  * byteswap-constexpr2.patch
  * chromium-fix-pac-with-gcc.patch
  * content_renderer_client-invalid-application-of-sizeof-to-incomplete-type-cast_streaming-ResourceProvider.patch
  * dark_mode_types-uint8_t.patch
  * device_perf_info-missing-uint32_t.patch
  * extract_first_nonzero_index-neon64.patch
  * json_generation-missing-unique_ptr.patch
  * metrics_recorder-missing-string.patch
  * multi_channel_content_detector-missing-unique_ptr.patch
  * skia_utils-missing-uint64_t.patch
- Add backported patches to fix build errors
  * pending_beacon_dispatcher-virtual-functions-cannot-be-constexpr.patch
  * std_lib_extras-missing-intptr_t.patch
- Fix build with system abseil
  * remove abseil-remove-unused-targets.patch
  * add system-abseil-missing-shims.patch
  * add crashpad-use-system-abseil.patch
- Reverse upstream changes to fix build with system ffmpeg
  * audio_file_reader-ffmpeg-AVFrame-duration.patch
- Conditionally reverse upstream changes and add hacks in v8 headers to build with icu-69
  * intl-objects-icu71-UNUM_APPROXIMATELY_SIGN_FIELD.patch
  * v8-icu69-FormattedNumberRange-no-default-constructible.patch
  * electron-devel now requires icu-devel on old OS's
- Reverse upstream changes to build with system avif
  * avif_image_decoder-AVIF_PIXEL_FORMAT_COUNT.patch

-------------------------------------------------------------------
Thu Sep 22 20:58:12 UTC 2022 - Bruno Pitrus <brunopitrus@hotmail.com>
- New upstream release 20.2.0
  * Add webFrameMain.origin API
  * Update Chromium to 104.0.5112.124  
- Drop electron_serial_delegate-ambiguous-Observer.patch applied upstream

-------------------------------------------------------------------
Tue Sep 20 05:37:32 UTC 2022 - Bruno Pitrus <brunopitrus@hotmail.com>
- Update to 20.1.4
  * ABI break: NODE_MODULE_VERSION is now 107. Native modules may need recompiling
  * Removed the skip-taskbar feature on Linux.
  * Renderers are now sandboxed by default unless nodeIntegration: true or sandbox: false is specified.
  * Update Chromium to 104.0.5112.114
  * Update Node to 16.15.0
- Use ffmpeg-5 on Tumbleweed. Drop ffmpeg-new-channel-layout.patch on Tumbleweed and Rawhide.
- Add NumberFormat-icu71-incrementExact.patch on systems with old icu (Leap and F36).
- Use subzero also on ix86 now that it builds correctly.
- Drop patches applied upstream:
  * byteswap-constexpr.patch
  * chromium-101-libxml-unbundle.patch
  * chromium-102-fenced_frame_utils-include.patch
  * electron-16-fix-swiftshader-template.patch
- Add backported patches:
  * common.gypi-cpp-version.patch
  * content_renderer_client-invalid-application-of-sizeof-to-incomplete-type-cast_streaming-ResourceProvider.patch
  * extract_first_nonzero_index-neon64.patch
- Add upstreamable patches:
  * absl_utility.gn
  * aggregatable_attribution_utils-do-not-assume-abseil-ABI.patch
  * attribution_response_parsing-do-not-assume-abseil-ABI.patch
  * content_language_parser-missing-string.patch
  * electron_serial_delegate-ambiguous-Observer.patch
- Fix build error on armv6hl
- Add %electron_req macro to make it easier to guard against ABI breaks.

-------------------------------------------------------------------
Wed Sep 14 20:08:49 UTC 2022 - Bruno Pitrus <brunopitrus@hotmail.com>
- New upstream release 19.0.17
  * Fixed issue with history.back() in sandboxed iframes affecting parent browsing context
  * Fixed session.getBlobData never resolves with blob sizes > 65536
  * Mojo: Validate response message type (CVE-2022-3075)
- Use system nghttp2 also on Leap
- Correct mistake in licence metadata
- Change package group to a more sensible one.

-------------------------------------------------------------------
Thu Sep  8 13:42:03 UTC 2022 - Bruno Pitrus <brunopitrus@hotmail.com>
- New upstream release 19.0.16
  * Fix heap-overflow in blink::TableLayoutAlgorithmAuto::InsertSpanCell (CVE-2022-3040)
  * sqlite: Simplify the logic that converts the "1" expression in "ORDER BY 1" into a
    copy of the expression that defines the first output column. (CVE-2022-3041)
- Cleanup source tarball some more.
- Actually ship the list of third-party code included (LICENSES.chromium.html)
- Correct the RPM licence metadata per the above list.

-------------------------------------------------------------------
Tue Sep  6 13:18:29 UTC 2022 - Bruno Pitrus <brunopitrus@hotmail.com>
- Use system libaom on Tumbleweed

-------------------------------------------------------------------
Fri Sep  2 06:57:39 UTC 2022 - Bruno Pitrus <brunopitrus@hotmail.com>
- New upstream version 19.0.15
  * Fixed a potential crash on WebWorker destruction.
  * Vulkan: Fix garbage collection vs outside-RP-only flush (CVE-2022-2854)
  * Vulkan: Fix xfb buffer redefine to smaller size (CVE-2022-2855)
- Add reproducible-config.gypi.patch

-------------------------------------------------------------------
Wed Aug 24 21:56:28 UTC 2022 - Bruno Pitrus <brunopitrus@hotmail.com>
- New upstream version 19.0.14
  * Picture-In-Picture mode no longer becomes a red rectangle on hover.

-------------------------------------------------------------------
Sat Aug 20 22:23:53 UTC 2022 - Bruno Pitrus <brunopitrus@hotmail.com>
- New upstream release 19.0.13
  * Fixed crash in renderer when resuming system from sleep.
  * backported fix for CVE-2022-2618
  * backported fix for CVE-2022-2624
- New upstream release 19.0.12
  * Fixed an issue where app.relaunch loses args when execPath is specified.
  * Fixed support for Wayland client-side decorations.
  * backported fix for CVE-2022-2610
  * backported fix for CVE-2022-2615

-------------------------------------------------------------------
Fri Aug  5 13:52:55 UTC 2022 - Bruno Pitrus <brunopitrus@hotmail.com>
- New upstream release 19.0.11
  * Fixed webContents.getUserAgent() incorrectly returning an empty string unless previously set.
  * Disabled GPU acceleration on VMware on Linux.
- New upstream release 19.0.10
  * Added support for --ozone-platform-hint flag.
  * Fixed inertial scroll is broken when the scrollable element has an overlay with pointer-events: none.
- Do not use non-free closure compiler JAR during compilation.
- Use system jpeg-xl and XNVCtrl also on Tumbleweed.
- Use system libyuv on Tumbleweed.
  * libyuv.gn
- Make nodejs-electron-devel require zlib-devel instead of shipping own headers.
  * no-zlib-headers.patch
  * add -lz to LDFLAGS in electron-16-system-node-headers.patch
- Use system toolchain, incl. nasm, ply, flatc
  * flatbuffers.gn
  * system-nasm.patch
  * system-pydeps.patch
- Thorough cleanup of various other third party libraries from source tarball.
  * do-not-build-libvulkan.so.patch
  * libsecret.gn
  * node-system-icu.patch
  * skia-system-vulkan-headers.patch
  * system-six.patch
  * system-usb_ids.patch
  * Adjust system-gtest.patch to also account for the second googletest copy in electron_node
- Re-enable full debuginfo on x64 for everything except Blink and v8, which fails to build due to heavy template use.
  * adjust chromium-102-compiler.patch
  * nasm-generate-debuginfo.patch
- Fix build of EXPERIMENTAL ix86 and arm7hf ports by using the LLVM linker (lld) on these platforms.
  * Note that ix86 requires SSE2 instructions (that means Pentium 4 / Pentium M / Atom or equivalent)

-------------------------------------------------------------------
Fri Jul 22 09:58:00 UTC 2022 - Bruno Pitrus <brunopitrus@hotmail.com>
- New upstream release 19.0.9
  * Updated Chromium to 102.0.5005.167
  * Fixed a potential crash when changing window settings after initializing WCO with an invalid titleBarStyle
  * Fixed alwaysOnTop BrowserWindow option for X11.
  * Fixed an issue where printing with an invalid deviceName caused silent failures.
  * Fixed empty app_id when running under wayland.
  * Prevent brief display of "Ozone X11" in window title.
- Remove some unused huge libraries from third_party in source tarball.
- Remove process_doc_wrapper-do-not-assume-ABI.patch. The file being patched was not getting compiled for a while,
  and is now removed from the tarball.
- Add system-gtest.patch
- Add breakpad-system-curl.patch

-------------------------------------------------------------------
Tue Jul 12 17:03:39 UTC 2022 - Bruno Pitrus <brunopitrus@hotmail.com>
- Do not require SSE3 (chromium-102-compiler.patch).
  Both openSUSE and Fedora still support the original Opteron, and
  package maintainers should not unilaterally require more.
- Use system node for the typescript compiler (again).
  We do not need to force node16 (Fedora compiles fine with node18 even),
  Factory pushes a devel node version as default for a reason,
  and it accidentally broke build on RISC-V which only has node17.
- Restore full debuginfo on the C-only code parts.
- Document all other deviations from recommended compilation options.
- Remove obsolete chromium-96-CouponDB-include.patch
- Correct licence in header (Electron bundles Chromium)

-------------------------------------------------------------------
Wed Jul  6 21:57:42 UTC 2022 - Bruno Pitrus <brunopitrus@hotmail.com>
- New upstream release 19.0.8
  * Updated Chromium to 102.0.5005.148
  * Fixed an issue where DataList bounds had part of the item text cut off vertically.
- Add disable-catapult.patch
  * This nukular solution from Debian avoids building telemetry code which was causing hangs during build on Rawhide.
- Add chromium-103.0.5060.53-python3-do-not-use-deprecated-mode-U.patch
  * Fixes build with python 3.11
- Use system llhttp and HDR-Histogram on all Fedora versions
- Additionally use system abseil, aom, dav1d, spirv on Fedora 37 Rawhide
- Fix bundled crc32c headers incorrectly getting used instead of system ones.

-------------------------------------------------------------------
Sat Jul  2 09:16:30 UTC 2022 - Bruno Pitrus <brunopitrus@hotmail.com>
- Update to 19.0.7:
  * Breaking change: nativeWindowOpen removed
  * Updated Chromium to 102.0.5005.134
  * Fixed an error where setWindowOpenHandler() would crash if the callback threw an error.
  * Fixed an issue where passing { name: 'All Files', extensions: ['*'] } in the filters param of open or save dialogs on Linux would disallow choosing files without an extension.
  * Fixed missing Sec-CH-UA headers and empty navigator.userAgentData.
  * Backported fix for CVE-2022-2162.
- Move lastchange.py in create tarball script before patching for reproducibility sake
- Disable widevine — not supported by upstream and does not build anymore
- Use gcc also on aarch64 due to clang crashes while compiling
- Temporarily disable aom codec on aarch64 Tumbleweed to reduce binary size
- Fix Fedora aarch64 build
- Fix private ANGLE dlls leaking into rpm provides (bsc#1108175)
- Ship chrome_crashpad_handler — some code expects it to be there
- Do not ship libVkICD_mock_icd.so — that's a build tool (not shipped by upstream)
- Do not compile tensorflow — it is huge, and urlbar prediction is of no use in Electron
- Do not compile openscreen/chromecast — useless in Electron
- Do not compile safe browsing — useless in Electron
- Do not compile error reporter — useless for our use case
- Disable webgpu support — it is HUGE and we do not ship any apps which depend on it
- Use system freetype, icu also on 15.3 and 15.4
- Use system harfbuzz also on 15.4
- Use system libraries instead of vendored ones:
  * abseil (TW and Rawhide, GCC only)
  * avif (15.4+ and Fedora only)
  * brotli
  * crc32c (TW and Fedora only)
  * dav1d (TW and Rawhide only)
  * double-conversion
  * jsoncpp
  * jxl (Fedora only)
  * libbsd
  * nspr
  * spirv (TW only)
  * woff2
  * xxhash
  * zlib in courgette
  * lcms2, libjpeg, libpng16, openjp2, tiff in PDFium
  * cares in node
  * nghttp2 in node (TW and Fedora only)
  * XNVCtrl in angle (Fedora only)
  * llvm in swiftshader (arm64 only; intel does not use llvm)
- Replace chromium-98-compiler.patch with chromium-102-compiler.patch
- Add patches:
  * abseil_string_number_conversions-do-not-assume-ABI.patch
  * abseil-remove-unused-targets.patch
  * angle-system-xxhash.patch
  * async_shared_storage_database_impl-missing-absl-WrapUnique.patch
  * attribution_manager_impl-missing-absl-WrapUnique.patch
  * ax_property_node-missing-unique_ptr-forward.patch
  * base-system-nspr.patch
  * byteswap-constexpr.patch (thanks Debian)
  * byteswap-constexpr2.patch  (thanks Debian)
  * cares_public_headers.patch
  * chromium-101-libxml-unbundle.patch
  * chromium-102-fenced_frame_utils-include.patch
  * chromium-99-pdfium-system-libtiff.patch (thanks Mageia)
  * chromium-fix-pac-with-gcc.patch
  * chromium-remove-bundled-roboto-font.patch
  * dark_mode_types-uint8_t.patch
  * device_perf_info-missing-uint32_t.patch
  * ffmpeg-new-channel-layout.patch
  * json_generation-missing-unique_ptr.patch
  * metrics_recorder-missing-string.patch
  * multi_channel_content_detector-missing-unique_ptr.patch
  * multiplex_router-ExclusiveSyncWaitInfo-is-not-is_constructible_v-on-clang.patch
  * nested-nested-nested-nested-nested-nested-regex-patterns.patch
  * node-system-libs.patch (thanks Arch)
  * pdfium-fix-system-libs.patch (thanks Mageia)
  * process_doc_wrapper-do-not-assume-ABI.patch
  * replace_gn_files-system-libs.patch
  * skia_utils-missing-uint64_t.patch
  * support-i386.patch (thanks Debian)
  * swiftshader-use-system-llvm.patch
  * system-libbsd.patch
  * system-jsoncpp.patch (thanks Debian)
  * system-zlib.patch (thanks Debian)
  * thread_annotations-fix-build-with-system-abseil.patch
- Add GN shims (provided directly instead of as patches, but should also be submitted upstream):
  * absl_algorithm.gn
  * absl_base.gn
  * absl_cleanup.gn
  * absl_container.gn
  * absl_debugging.gn
  * absl_flags.gn
  * absl_functional.gn
  * absl_hash.gn
  * absl_memory.gn
  * absl_meta.gn
  * absl_numeric.gn
  * absl_random.gn
  * absl_status.gn
  * absl_strings.gn
  * absl_synchronization.gn
  * absl_time.gn
  * absl_types.gn
  * brotli.gn
  * crc32c.gn
  * dav1d.gn (thanks Mageia)
  * double-conversion.gn
  * libaom.gn (thanks Mageia)
  * libavif.gn
  * libjxl.gn
  * libXNVCtrl.gn
  * swiftshader-SPIRV-Headers.gn
  * swiftshader-SPIRV-Tools.gn
  * vulkan-SPIRV-Headers.gn
  * vulkan-SPIRV-Tools.gn
  * woff2.gn
- Remove chromium-disable-parallel-gold.patch as it referes to old now-unsupported systems
- Remove patches applied upstream:
  * chromium-98-MiraclePtr-gcc-ice.patch
  * chromium-98-WaylandFrameManager-check.patch
  * chromium-glibc-2.34.patch
  * electron-16-v8-missing-utility-include.patch
  * electron-17-breakpad-align-int-types.patch

-------------------------------------------------------------------
Wed May 25 19:46:26 UTC 2022 - Bruno Pitrus <brunopitrus@hotmail.com>
- New upstream release 17.4.6:
  * Fixed crash when calling navigator.serial.getPorts().

-------------------------------------------------------------------
Thu May 19 10:08:10 UTC 2022 - Bruno Pitrus <brunopitrus@hotmail.com>
- New upstream release 17.4.5:
  * Fixed a crash when calling loadExtension on an extension directory that's missing a manifest file. #34193 (Also in 16)
  * SIGUSR1 is no longer handled when the node_cli_inspect fuse is disabled.
  * Backported security fixes: CVE-2022-1637, CVE-2022-1638, CVE-2022-1639.
- Remove some spurious generated files from the tarball.

-------------------------------------------------------------------
Wed May 11 21:05:41 UTC 2022 - Bruno Pitrus <brunopitrus@hotmail.com>
- New upstream release 17.4.4:
  * Fixed an OSR crash happening when input select items were rendered.
  * Backported security fixes: CVE-2022-1477, CVE-2022-1497

-------------------------------------------------------------------
Sun May  8 18:58:12 UTC 2022 - Bruno Pitrus <brunopitrus@hotmail.com>
- Update to 17.4.3:
  * Fixed child_process.spawn ENOENT error with cwd option.
  * Apply senderFrame details to ipcMain port event.
  * Added BrowserWindow method to change the button color,
    symbol color, and height of a window with WCO enabled.
  * Fixed a potential crash in Browser.getFocusedWindow() when child windows are closed.
  * Fixed an issue where the the window bounds would incorrectly change 
    if BrowserWindow.unmaximize was called on a window whose user bounds were maximized.
  * Fixed incorrect return value of app.requestSingleInstanceLock()
    when setting non-existent user data folder.
  * Fixed issues with frameless window animations and styling.
  * Backported security fixes: CVE-2022-1478, CVE-2022-1479,
    CVE-2022-1480, CVE-2022-1482, CVE-2022-1483, CVE-2022-1485,
    CVE-2022-1492, CVE-2022-1305, CVE-2022-1308, CVE-2022-1310,
    CVE-2022-1314, CVE-2022-1364, CVE-2022-1306, CVE-2022-1134,
    CVE-2022-1138, CVE-2022-23308.

-------------------------------------------------------------------
Fri Apr 22 09:47:33 UTC 2022 - Dominik Heidler <dheidler@suse.de>

- Build against nodejs16 on tumbleweed

-------------------------------------------------------------------
Wed Apr 20 10:21:11 UTC 2022 - Bruno Pitrus <brunopitrus@hotmail.com>
- Add chromium-94.0.4606.71-InkDropHost-crash.patch
  * Fixes crashes when opening File menu in VSCode

-------------------------------------------------------------------
Sat Apr 16 11:40:14 UTC 2022 - Bruno Pitrus <brunopitrus@hotmail.com>
- Re-enable reduced debuginfo (-g1) like Fedora's chromium package

-------------------------------------------------------------------
Tue Apr 12 11:52:13 UTC 2022 - Dominik Heidler <dheidler@suse.de>

- Help fedora to choose dependencies

-------------------------------------------------------------------
Tue Apr 12 10:41:39 UTC 2022 - Dominik Heidler <dheidler@suse.de>

- Use nodejs16 on 15.3

-------------------------------------------------------------------
Mon Apr 11 11:11:47 UTC 2022 - thod_@gmx.de

- Update to version 17.3.1
  * https://github.com/electron/electron/releases/tag/v17.3.1
  * https://github.com/electron/electron/releases/tag/v17.3.0
  * https://github.com/electron/electron/releases/tag/v17.2.0

-------------------------------------------------------------------
Wed Apr  6 11:11:49 UTC 2022 - Dominik Heidler <dheidler@suse.de>

- Change npm BuildRequires to npm-default

-------------------------------------------------------------------
Thu Mar 10 07:36:16 UTC 2022 - Andreas Schneider <asn@cryptomilk.org>

- Update to version 17.1.2
  * https://github.com/electron/electron/releases/tag/v17.1.2
  * https://github.com/electron/electron/releases/tag/v17.1.1
  * https://github.com/electron/electron/releases/tag/v17.1.0
  * Added electron-17-breakpad-align-int-types.patch
  * Added chromium-98-compiler.patch
  * Added chromium-98-MiraclePtr-gcc-ice.patch
  * Added chromium-98-WaylandFrameManager-check.patch
  * Added chromium-98-EnumTable-crash.patch
  * Added chromium-ffmpeg-first-dts.patch
  * Added system-libdrm.patch
  * Removed chromium-94-ffmpeg-roll.patch
  * Removed chromium-95-compiler.patch
  * Removed chromium-96-CommandLine-include.patch
  * Removed chromium-96-DrmRenderNodePathFinder-include.patch
  * Removed chromium-96-RestrictedCookieManager-tuple.patch
  * Removed electron-16-node-fix-python3.10-import.patch

-------------------------------------------------------------------
Thu Feb 24 20:27:36 UTC 2022 - Andreas Schneider <asn@cryptomilk.org>

- Fix building with gcc-12
  * Added electron-16-fix-swiftshader-template.patch
  * Added electron-16-v8-missing-utility-include.patch
- Fix building on Fedora 36 and newer
- Updated ffmpeg patches

-------------------------------------------------------------------
Thu Feb 17 08:45:42 UTC 2022 - Andreas Schneider <asn@cryptomilk.org>

- Fix webpack-4 with OpenSSL 3.0
  * Added electron-16-webpack-fix-openssl-3.patch

-------------------------------------------------------------------
Thu Feb 17 08:24:23 UTC 2022 - Andreas Schneider <asn@cryptomilk.org>

- Add missing #include <utility>
  * Added electron-16-third_party-symbolize-missing-include.patch

-------------------------------------------------------------------
Wed Feb 16 19:09:22 UTC 2022 - Andreas Schneider <asn@cryptomilk.org>

- Fix building with newer gn
  * Added electron-16-freetype-visibility-list.patch

-------------------------------------------------------------------
Wed Feb 16 17:39:31 UTC 2022 - Andreas Schneider <asn@cryptomilk.org>

- Update to version 16.0.9
  * https://github.com/electron/electron/releases/tag/v16.0.9

-------------------------------------------------------------------
Thu Feb  3 06:41:18 UTC 2022 - Andreas Schneider <asn@cryptomilk.org>

- Update to version 16.0.8
  * https://github.com/electron/electron/releases/tag/v16.0.8

-------------------------------------------------------------------
Fri Jan 28 13:15:25 UTC 2022 - Andreas Schneider <asn@cryptomilk.org>

- Fix build on Fedora
  * Added electron-16-node-fix-python3.10-import.patch

-------------------------------------------------------------------
Thu Jan 27 08:07:59 UTC 2022 - Andreas Schneider <asn@cryptomilk.org>

- Add devel package with node headers (e.g. for node-gyp)
  * Added electron-16-system-node-headers.patch
- Fix building on Fedora and openSUSE Leap

-------------------------------------------------------------------
Wed Jan 19 18:09:33 UTC 2022 - Andreas Schneider <asn@cryptomilk.org>

- Package pgo profiles

-------------------------------------------------------------------
Tue Jan 18 08:58:39 UTC 2022 - Andreas Schneider <asn@cryptomilk.org>

- Update to version 16.0.7
  * https://github.com/electron/electron/releases/tag/v16.0.7
- Removed chromium-93-blink.patch
- Removed harfbuzz_roll.patch
- Removed skia_harfbuzz_api.patch
- Removed skia_harfbuzz_roll.patch
- Added chromium-96-CommandLine-include.patch
- Added chromium-96-CouponDB-include.patch
- Added chromium-96-DrmRenderNodePathFinder-include.patch
- Added chromium-96-RestrictedCookieManager-tuple.patch
- Added electron-16-std-vector-non-const.patch

-------------------------------------------------------------------
Fri Dec 17 14:17:26 UTC 2021 - Andreas Schneider <asn@cryptomilk.org>

- Update to version 15.3.3
  * https://github.com/electron/electron/releases/tag/v15.3.3
- Added chromium-93-blink.patch
- Added chromium-93-ffmpeg-4.4.patch
- Added chromium-94-ffmpeg-roll.patch
- Added chromium-95-compiler.patch
- Removed a9831f1cbf93fb18dd951453635f488037454ce9.patch
- Removed chromium-88-gcc-fix-swiftshader-libEGL-visibility.patch
- Removed chromium-91-GCC_fix_vector_types_in_pcscan.patch
- Removed chromium-91-compiler.patch
- Removed chromium-91-system-icu.patch
- Removed chromium-freetype-2.11.patch
- Removed chromium-glibc-2.33.patch
- Removed chromium-lp152-missing-includes.patch
- Removed electron-13-gcc-fix-v8-nodiscard.patch

-------------------------------------------------------------------
Mon Dec 13 11:06:00 UTC 2021 - Guillaume GARDET <guillaume.gardet@opensuse.org>

- Do not build on 32-bit arm

-------------------------------------------------------------------
Mon Dec 13 10:03:11 UTC 2021 - Guillaume GARDET <guillaume.gardet@opensuse.org>

- Update _constraints to build aarch64 only on powerful workers
  (checks for asimdrdm)

-------------------------------------------------------------------
Mon Dec 13 07:50:42 UTC 2021 - Andreas Schneider <asn@cryptomilk.org>

- Update to version 13.6.3
  https://github.com/electron/electron/releases/tag/v13.6.3

-------------------------------------------------------------------
Wed Dec  8 23:33:01 UTC 2021 - Dominik Heidler <dheidler@suse.de>

- Fix harfbuzz 3.0.0 related build fails
  https://github.com/electron/electron/issues/31129
  * Added skia_harfbuzz_roll.patch
  * Added skia_harfbuzz_api.patch
  * Added harfbuzz_roll.patch

-------------------------------------------------------------------
Mon Nov 29 13:21:24 UTC 2021 - Guillaume GARDET <guillaume.gardet@opensuse.org>

- Fix build on aarch64:
  * Use clang
  * Add patch: chromium-glibc-2.34.patch 

-------------------------------------------------------------------
Tue Nov 23 17:01:09 UTC 2021 - Andreas Schneider <asn@cryptomilk.org>

- Update to version 13.6.2
  https://github.com/electron/electron/releases/tag/v13.6.2
- Fix for CVE-2021-37998
- Fix for CVE-2021-38001
- Fix for CVE-2021-38002
- Fix for CVE-2021-38003
- Fixed building on Tumbleweed

-------------------------------------------------------------------
Wed Nov 10 06:53:45 UTC 2021 - Andreas Schneider <asn@cryptomilk.org>

- Do not build with H264
- Removed electron-13-openh264-format-security.patch

-------------------------------------------------------------------
Wed Nov  3 14:21:25 UTC 2021 - Dominique Leuenberger <dimstar@opensuse.org>

- Do not build for i586: code is not compatible.

-------------------------------------------------------------------
Tue Nov  2 14:18:41 UTC 2021 - Andreas Schneider <asn@cryptomilk.org>

- Update to version 13.6.1
  https://github.com/electron/electron/releases/tag/v13.6.1
- Fix for CVE-2021-37981
- Fix for CVE-2021-37984
- Fix for CVE-2021-37987
- Fix for CVE-2021-37989
- Fix for CVE-2021-37992
- Fix for CVE-2021-37996

-------------------------------------------------------------------
Tue Oct  5 15:36:48 UTC 2021 - Andreas Schneider <asn@cryptomilk.org>

- Update to version 13.5.1
  https://github.com/electron/electron/releases/tag/v13.5.1
- Bundle icu for systems which don't provide icu >= 68
- Avoid listing files twice (swiftshader)

-------------------------------------------------------------------
Tue Sep 28 18:02:29 UTC 2021 - Andreas Schneider <asn@cryptomilk.org>

- Update to version 13.5.0
  https://github.com/electron/electron/releases/tag/v13.5.0
- Fix for CVE-2021-30627
- Fix for CVE-2021-30631
- Fix for CVE-2021-30632
- Fix for CVE-2021-30625
- Fix for CVE-2021-30626
- Fix for CVE-2021-30628
- Fix for CVE-2021-30630
- Fix for CVE-2021-30633
- Removed linux_sandbox_return_enosys_for_clone3.patch
- Removed linux_sandbox_update_syscall_numbers_for_all_platforms.patch

-------------------------------------------------------------------
Sat Sep 25 23:46:53 UTC 2021 - Marcus Rueckert <mrueckert@suse.de>

- fixes to make it work with glibc 2.34 
  a9831f1cbf93fb18dd951453635f488037454ce9.patch
  linux_sandbox_return_enosys_for_clone3.patch
  linux_sandbox_update_syscall_numbers_for_all_platforms.patch

-------------------------------------------------------------------
Tue Sep 21 21:12:57 UTC 2021 - Dominik Heidler <dheidler@suse.de>

- Version 13.4.0

-------------------------------------------------------------------
Tue Aug 10 12:18:01 UTC 2021 - Andreas Schneider <asn@cryptomilk.org>

- Update to version 13.1.8
  * https://github.com/electron/electron/releases/tag/v13.1.8
- Removed chromium-90-compiler.patch
- Added chromium-91-compiler.patch
- Added chromium-freetype-2.11.patch

-------------------------------------------------------------------
Mon Jul 26 04:49:50 UTC 2021 - Andreas Schneider <asn@cryptomilk.org>

- Update to version 13.1.7
  * https://github.com/electron/electron/releases/tag/v13.1.7

-------------------------------------------------------------------
Mon Jul 12 06:20:09 UTC 2021 - Andreas Schneider <asn@cryptomilk.org>

- Fix build on Fedora
  * Added electron-13-openh264-format-security.patch

-------------------------------------------------------------------
Fri Jul  9 20:42:43 UTC 2021 - thod_@gmx.de

- Strip the debugging and symbol information

-------------------------------------------------------------------
Fri Jul  9 08:55:57 UTC 2021 - Andreas Schneider <asn@cryptomilk.org>

- Update to version 13.1.6
  * https://github.com/electron/electron/releases/tag/v13.1.6
  * https://github.com/electron/electron/releases/tag/v13.1.5

-------------------------------------------------------------------
Tue Jun 29 07:01:44 UTC 2021 - Andreas Schneider <asn@cryptomilk.org>

- Fix build on openSUSE 15.3
- Allow to build on Fedora (not fully working yet)

-------------------------------------------------------------------
Fri Jun 25 15:10:42 UTC 2021 - Andreas Schneider <asn@cryptomilk.org>

- Build with gcc
  * add chromium-91-GCC_fix_vector_types_in_pcscan.patch
  * add electron-13-gcc-fix-v8-nodiscard.patch
  * add electron-13-blink-gcc-ambiguous-nodestructor.patch
  * add chromium-gcc11.patch
  * This fixes speed issues

-------------------------------------------------------------------
Fri Jun 25 11:14:11 UTC 2021 - Andreas Schneider <asn@cryptomilk.org>

- Update to version 13.1.4
  * https://github.com/electron/electron/releases/tag/v13.1.4
  * https://github.com/electron/electron/releases/tag/v13.1.3

-------------------------------------------------------------------
Tue Jun 22 19:45:31 UTC 2021 - Andreas Schneider <asn@cryptomilk.org>

- Build with vaapi support

-------------------------------------------------------------------
Mon Jun 21 12:10:36 UTC 2021 - Andreas Schneider <asn@cryptomilk.org>

- Install missing vk_swiftshader_icd.json
- Add a version file

-------------------------------------------------------------------
Sat Jun 19 10:39:25 UTC 2021 - Andreas Schneider <asn@cryptomilk.org>

- Update to version 13.1.2
  * https://github.com/electron/electron/releases/tag/v13.1.2
- Improved tarball creation
- Added chromium-88-gcc-fix-swiftshader-libEGL-visibility.patch
- Added chromium-90-compiler.patch
- Added chromium-91-java-only-allowed-in-android-builds.patch
- Added chromium-91-system-icu.patch
- Added chromium-disable-parallel-gold.patch
- Added chromium-glibc-2.33.patch
- Added chromium-lp152-missing-includes.patch
- Added chromium-norar.patch
- Added chromium-system-libusb.patch
- Added electron-13-fix-sql-virtualcursor-type.patch
- Added gcc-enable-lto.patch
- Added electron-13-fix-use-thin-lto.patch
- Added electron-13-fix-base-check-nomerge.patch

-------------------------------------------------------------------
Wed May  5 12:39:32 UTC 2021 - Dominik Heidler <dheidler@suse.com>

- Initial Checkin
