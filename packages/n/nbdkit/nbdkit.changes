-------------------------------------------------------------------
Wed Oct 25 19:34:49 UTC 2023 - jfehlig@suse.com

- Update to version 1.36.1:
  * Version 1.36.1.
  * python: Document nbdkit.disconnect(force) helper function
  * python: List helper functions in alphabetical order
  * python: Clarify possible handle values returned by open() method
  * tests: Fix incorrect comment in tests
  * docs: Remove references to -U - when it is implicit

-------------------------------------------------------------------
Fri Sep 29 17:40:05 UTC 2023 - jfehlig@suse.com

- Update to version 1.36.0:
  * Version 1.36.0.
  * evil: Fix typo in man page
  * tests: Rename test-curl-options.sh and add more tests
  * docs: Finalize release notes for release tomorrow
  * curl: Use new curl_multi_get_handles API to simplify code
  * curl: Store pointer from curl easy handle to our struct curl_handle
  * README: Recommend new syntax for ASAN_OPTIONS
  * fuzzing/README: Remove advice to set ASAN_OPTIONS
  * docs: Small tweaks to the release notes
  * docs: Add outline release notes for forthcoming nbdkit 1.36
  * tests: Add some consistency checks of the tests themselves
  * tests/test-evil-cosmic.sh: Use requires_nbdcopy
  * tests/test-nozero.sh: Test uses nbdsh -u but does not declare requirement
  * tests: Fix a couple more tests that are missing requires_run
  * docs: Expand Network Block Device (for NBD) in title

-------------------------------------------------------------------
Thu Oct 13 21:21:00 UTC 2022 - jfehlig@suse.com

- Update to version 1.32.2:
  * Version 1.32.2.
  * file: Avoid leaking h->fd on an error path
  * common/utils/exit-with-parent.c: Use nbdkit_shutdown instead of exit
  * tests: Use GNU cut in tests
  * tests: Use GNU stat in tests
  * tests/test-vddk-real.sh: Remove requires stat
  * tests: Add requires stat --version to a few more tests
  * tests/test-python-thread-model.sh: Skip test on non-parallel platforms
  * tests/test-retry-request-mirror.c: Skip this test if 'disk' was not built
  * tests/test-ocaml-errorcodes.c: Skip this test on macOS
  * Revert "tests/test-python-thread-model.sh: Skip test on non-parallel platforms"
  * tests: nbd: Skip all nbd plugin tests on macOS
  * tests/test-nozero.sh: Test requires GNU stat
  * tests/test-layers.c: Fix test for platforms without pipe2
  * nbd: Ignore warnings about deprecated sem_* functions on macOS
  * tests/test-layers.c: Don't link with exit-with-parent code.
  * docs: Suggest a couple more packages to enhance macOS support
  * tests: luks: Skip tests on macOS
  * tests/test-memory-allocator-malloc-mlock.sh: Fix test requires
  * tests: Fix more tests using truncate instead of $TRUNCATE
  * tests/pki: Use GnuTLS certtool on macOS
  * tests/test-python-thread-model.sh: Skip test on non-parallel platforms
  * server: Further simplification of --exit-with-parent on macOS
  * eval, sh: Better error message when we get EPIPE from script
  * server: Simplify --exit-with-parent implementation for macOS
  * server: Implement --exit-with-parent for macOS
  * tests/test-exit-with-parent.c: Don't link with server code
  * tests/test-exit-with-parent.c: Correct PIDs in debug messages
  * tests/test-exit-with-parent.c: Fix bogus early exit from the test
  * tests/test-exit-with-parent.c: Fix missing local variable initialization
  * tests/test-exit-with-parent.c: Add a bunch of debugging to this test
  * common: Move exit-with-parent code from include/ to utils/
  * tests/test-exit-with-parent.c: Include <signal.h> for kill(2)
  * Version 1.32.1.
  * docs: Add macOS support to 1.32 release notes
  * tests: Skip some nbdkit-cc-plugin OCaml tests on macOS
  * tests: Fix miscellaneous test requires lines for macOS.
  * example4, S3: Use $(SED) instead of sed.
  * tests: Prefer GNU sed if available in several tests
  * tests/test-exitwhen*sh: Fix sleep command on macOS
  * tests: Move definition of $TRUNCATE to functions.sh.in
  * ondemand: Fix plugin and tests on macOS
  * wrapper: Set DYLD_LIBRARY_PATH for dynamic library path on macOS
  * docs: Further fix relative links in README.md
  * docs: Fix relative links in README.md
  * build: Document macOS support in the README file
  * tests/test-exitwhen-pipe-closed.c: Skip this test on macOS
  * tests/test-read-password-interactive.sh: Skip test on macOS
  * cc: Ignore undefined symbols on macOS
  * build: Check for truncate / gtruncate
  * tests/test-blocksize.sh: Add requires qemu-io
  * stats: Use -std=c++11
  * stats: Fix C++ syntax on clang 13 / macOS
  * exitwhen: Fix some warnings on macOS
  * exitwhen: Include <signal.h> for kill(2)
  * file: Fix some warnings on macOS
  * build: Disable linker script by default on macOS
  * build: ./configure --disable-linker-script now disables all linker scripts
  * server/public.c: Fix uid_t/gid_t bounds check on macOS
  * server: vsock: Use fallback path for creating socket without SOCK_CLOEXEC
  * common/utils: On macOS remove error about incomplete atomic CLOEXEC support
  * rust: Add resolver feature
  * server/sockets.c: Don't fail to start if ipv6.disable=1
  * server/sockets.c: Save errno from EADDINUSE error
  * common/utils: Fix generated windows-errors.c line endings
  * common/replacements/get_current_dir_name.c: Include <string.h> for strlen
  * build: Check for ranlib (AC_PROG_RANLIB)
  * ci: Expire artifacts after 1 week
  * server: Use ansi-colours.h header
  * common/include: Move ANSI colours to separate library
  * tests/make-pki.sh: Use Subject Alternative Name for server certificate
  * docs: Suggest using Subject Alternative Name for server certificates
  * Version 1.32.0.
  * tests/test-tls.sh: Skip test if GnuTLS doesn't support verifying peers
  * docs: Review nbdkit-plugin(3) page
  * docs: Update authors list
  * Version 1.31.15.
  * docs: Add outline release notes for nbdkit 1.32
  * build: Document gmake instead of make on *BSD, macOS
  * server: Fail early if --tls-verify-peer is used on non-supported platforms
  * tests: Avoid bash namerefs, for RHEL 7
  * tests: Better quoting for cleanup_fn
  * Version 1.31.14.
  * tests: Fix TESTS line for root tests
  * docs, tests: Fix client/server key mix-up and document
  * tests: Add interop tests with nbd-client (the kernel client)
  * tests/functions.sh.in: Copy requires_not and requires_root from libnbd
  * checkwrite: Add working example using qemu-img convert
  * tests: Hoist some EXTRA_DIST out of automake conditionals
  * Version 1.31.13.
  * checkwrite: Add an assertion that we checked the whole region
  * tests: Add a regression test for bounds error in checkwrite filter
  * checkwrite: Fix bounds error
  * Version 1.31.12.
  * configure: Document --with-* flags that require a parameter
  * S3: Fix "E713 test for membership should be 'not in'"
  * plugins/S3.py: correctly handle listing contents of empty buckets.
  * server: Silence Coverity false positive
  * server: Avoid Coverity warning on volatile variable
  * multi-conn: Free memory on failure and unload
  * floppy: Don't leak string along error path
  * curl: Correctly check for errors when using getline
  * cc: Use 'error' after it was assigned
  * luks: Avoid memory leak on error path
  * luks: Avoid potential overflow when computing key material offset and length
  * luks: Check return values from malloc more carefully
  * delay: Fix bounds check when parsing delay parameters
  * Version 1.31.11.
  * configure: Use printf to print $ISOPROG
  * configure: Print the version of curl, libnbd and libssh
  * configure: Make the 'feature' function print the dots
  * tests/test-protect.c: Fix typo in previous commit
  * tests/test-protect.c: Skip test if "disk" was not created
  * common/include: Rename BUILD_BUG_ON_ZERO to something more meaningful
  * common/include/test-array-size.c: Avoid Clang warning
  * vddk: Demote another "phone home" error message to debug
  * Use ARRAY_SIZE macro in various places in nbdkit
  * common/include: Add ARRAY_SIZE macro
  * Version 1.31.10.
  * tests/test-parallel-sh.sh: Skip test under valgrind + debuginfod
  * tests/test-parallel-sh.sh: Small cleanups
  * tests/test-S3: Fix Python formatting
  * server: Work around incorrect include in gnutls/socket.h
  * server: Display kTLS setting in debug output
  * exitwhen: Check nbdkit doesn't exit before the pipe is closed
  * valgrind: Update comment about valgrind bug affecting OCaml
  * ocaml: Add further valgrind suppression
  * ocaml: Add valgrind suppression for OCaml 4.14 bug
  * perl: Move GCC diagnostic ignored earlier
  * docs/nbdkit-protocol.pod: block size support was added in 1.30
  * Version 1.31.9.
  * s3: catch and handle network timeout exceptions.
  * s3: added TRIM and ZERO support to S3 plugin.
  * s3: group connection-serving related code into a class.
  * s3: move configuration settings into a class.
  * tests: Add dummy botocore.exceptions module for S3 tests
  * exitwhen: Link to example of how to use exit-when-pipe-closed
  * s3: Fix concurrency bug when writing non-aligned data.
  * rate: Allow burstiness to be controlled
  * rate: Miscellaneous enhancements to comments and debug messages
  * tests: Add a regression test for LUKS zeroing crash
  * ext2: Improve comments
  * eval: Provide default for .can_cache
  * eval: Always end scripts in newline
  * tests: Add regression test for NBDKIT_EMULATE_CACHE fix
  * server: Fix NBDKIT_CACHE_EMULATE
  * server: Fix NBDKIT_ZERO_EMULATE from filters
  * tests: Give sensible name to test sockets
  * Version 1.31.8.
  * linuxdisk: Add new subdir/.gitignore to EXTRA_DIST
  * tests: Fix test-disk2data.sh use of $PYTHON
  * blocksize: Test of aligned writes vs. RMW race
  * blocksize: Avoid losing aligned writes to RMW race
  * linuxdisk: Reduce size of test
  * Change README to use markdown (fixed)
  * Change README to use markdown
  * multi-conn: Fix test with newer libnbd
  * docs: Enhance podwrapper to detect trailing whitespace
  * docs: Fix POD verbatim paragraphs
  * docs: Remove trailing whitespace from POD file
  * rust: Logically group example code
  * docs: Fix whitespace to logically group C code examples together
  * data: Small clarification to the manual
  * Revert "ci: Try to force Rawhide to use the nodebug kernels"
  * Version 1.31.7.
  * ci: Try to force Rawhide to use the nodebug kernels
  * scripts, vddk: Remove VDDK wrapper scripts
  * vddk: advise user on obscure thumbprint mismatch error condition
  * scan: Fix bound so we don't try to prefetch beyond end of disk
  * S3: use mocked boto3 module when running unit tests
  * scripts: Split VDDK open script so we can open ESXi or vCenter
  * ssh: Don't reference readahead or scan filters from this plugin
  * Version 1.31.6.
  * scan: Small typographical fix in manual
  * scan: Remove condition variable
  * New filter: scan
  * stats: Enable C++ warnings
  * stats: Fix various warnings in the filter
  * curl: Don't document curl plugin + readahead filter
  * cache: Fix cross-reference nbdkit-readahead-filter
  * todo: Remove S3 items
  * configure: Fix incorrect comment about supported VDDK version
  * Version 1.31.5.
  * .gitignore: Ignore __pycache__ directory wherever it occurs
  * Improve S3 unit tests
  * S3 plugin: add support for accessing multiple objects
  * Configure VS Code to wrap comments at the right column.
  * maint: List stats under optional filters in configure output
  * S3: Older boto3 didn't have head_object, fall back to get_object
  * vddk: Demote another useless phone-home error message to debug
  * nbd: Hide some state machine debugging behind a debug flag
  * Add nbdkit.parse_size() Python function.
  * Enable flake8 linting within VS Code.
  * Don't retrieve entire object just to get its size.
  * Remove pointless 'global' declarations.
  * Use RuntimeError instead of Exception
  * Drop pointless error check.
  * Version 1.31.4.
  * tests: luks: Reduce time taken to run these tests
  * luks: Refactor the filter
  * luks: Link with libcompat on Windows
  * luks: Various fixes for Clang
  * luks: Disable filter with old GnuTLS in Debian 10
  * Keep track of alignment bits for each block size.
  * New filter: luks
  * Version 1.31.3.
  * build: Add VS code files to EXTRA_DIST
  * Make length of block size histogram configurable.
  * Avoid pointless copy of block size histogram map.
  * Don't crash stats filter when running out of memory.
  * Use unordered_map instead of map to track block size statistics.
  * Add VS Code settings matching existing formatting.
  * Track request block sizes in stats filter.
  * tests: Print a warning if nbdkit does not start after 30 seconds
  * file: Fix leaked file descriptor on error path
  * eval: Fix memory leak on error path
  * multi-conn: Fix memory leak on error path
  * Version 1.31.2.
  * docs: Document how to run nbdkit from inetd or xinetd
  * pause: Delete control socket on server shutdown
  * rust: Use a local filename for the test socket
  * Update to nix 0.24.1
  * rust: Use correct char type for characters
  * readahead: Fix test
  * readahead: Rewrite this filter so it prefetches using .cache
  * readahead: Simplify the test replacing use of sh plugin
  * readahead: Simplify the test by inlining some files
  * torrent: Don't attempt to rm -rf (null) on unload
  * Version 1.31.1.
  * ssh: Allow the remote file to be created
  * readahead: Minor whitespace changes
  * ssh: Move and document thread model declaration
  * docs/nbdkit-filter.pod: Fix invalid use of E<> in verbatim section

-------------------------------------------------------------------
Sun Jul 10 22:10:54 UTC 2022 - jfehlig@suse.com

- Update to version 1.30.7:
  * Version 1.30.7.
  * configure: Use printf to print $ISOPROG
  * configure: Print the version of curl, libnbd and libssh
  * configure: Make the 'feature' function print the dots
  * tests/test-protect.c: Fix typo in previous commit
  * tests/test-protect.c: Skip test if "disk" was not created
  * common/include: Rename BUILD_BUG_ON_ZERO to something more meaningful
  * common/include/test-array-size.c: Avoid Clang warning
  * vddk: Demote another "phone home" error message to debug
  * Use ARRAY_SIZE macro in various places in nbdkit
  * common/include: Add ARRAY_SIZE macro
  * tests/test-parallel-sh.sh: Skip test under valgrind + debuginfod
  * tests/test-parallel-sh.sh: Small cleanups
  * server: Work around incorrect include in gnutls/socket.h
  * server: Display kTLS setting in debug output
  * exitwhen: Check nbdkit doesn't exit before the pipe is closed
  * valgrind: Update comment about valgrind bug affecting OCaml
  * ocaml: Add further valgrind suppression
  * ocaml: Add valgrind suppression for OCaml 4.14 bug
  * perl: Move GCC diagnostic ignored earlier
  * docs/nbdkit-protocol.pod: block size support was added in 1.30
- Enable linuxdisk plugin

-------------------------------------------------------------------
Fri Jul 08 18:08:16 UTC 2022 - jfehlig@suse.com

- Update to version 1.30.6:
  * Version 1.30.6.
  * exitwhen: Link to example of how to use exit-when-pipe-closed
  * rate: Miscellaneous enhancements to comments and debug messages
  * ext2: Improve comments
  * eval: Provide default for .can_cache
  * eval: Always end scripts in newline
  * tests: Add regression test for NBDKIT_EMULATE_CACHE fix
  * server: Fix NBDKIT_CACHE_EMULATE
  * server: Fix NBDKIT_ZERO_EMULATE from filters
  * tests: Give sensible name to test sockets
  * linuxdisk: Add new subdir/.gitignore to EXTRA_DIST
  * tests: Fix test-disk2data.sh use of $PYTHON
  * blocksize: Test of aligned writes vs. RMW race
  * blocksize: Avoid losing aligned writes to RMW race
  * linuxdisk: Reduce size of test
  * multi-conn: Fix test with newer libnbd
  * data: Small clarification to the manual
  * vddk: advise user on obscure thumbprint mismatch error condition
  * configure: Fix incorrect comment about supported VDDK version
  * Version 1.30.5.
  * .gitignore: Ignore __pycache__ directory wherever it occurs
  * vddk: Demote another useless phone-home error message to debug
  * nbd: Hide some state machine debugging behind a debug flag
  * Remove pointless 'global' declarations.
  * Use RuntimeError instead of Exception
  * Drop pointless error check.
  * tests: Print a warning if nbdkit does not start after 30 seconds
  * file: Fix leaked file descriptor on error path
  * eval: Fix memory leak on error path
  * multi-conn: Fix memory leak on error path
  * Version 1.30.4.
  * pause: Delete control socket on server shutdown
  * rust: Use a local filename for the test socket
  * Update to nix 0.24.1
  * rust: Use correct char type for characters
  * readahead: Simplify the test replacing use of sh plugin
  * readahead: Simplify the test by inlining some files
  * torrent: Don't attempt to rm -rf (null) on unload
  * readahead: Minor whitespace changes
  * ssh: Move and document thread model declaration
  * docs/nbdkit-filter.pod: Fix invalid use of E<> in verbatim section
  * Version 1.30.3.
  * tests: ssh: Don't run unused sshd
  * ocaml: Declare that we use caml_-namespaced symbols, for OCaml 4.14
  * tests/test-cache-max-size.sh: Fix tests in locales with different date format
  * common: Add hexdigit.h containing common functions for handling hex
  * data: Fix typo in comment
  * tests: web-server: Avoid rare race in shutdown
  * server, tests: Prefix both uses of perror ("accept")
  * data: Check failure from some <(...) scripts
  * curl: scripts: Multiple fixes
  * python: Also plug leak on error case
  * tests/test-protect-ranges.sh: Don't try to use port 10809
  * python: Avoid memory leak in .list_exports and .extents
  * fuzzing: Recommend combining fuzzing with ASAN
  * configure: Add --disable-linker-script flag
  * configure: Disable linker script for server when using libfuzzer
  * configure: Reorganise USE_LINKER_SCRIPT_FOR_SERVER conditional
  * configure: Report --enable-libfuzzer flag in summary output
  * Version 1.30.2.
  * server: Improve error message for --dump-plugin when plugin name is missing
  * docs: Use I<> to quote command line flag
  * tests: Skip vsock tests unless the vsock_loopback module is loaded
  * build: Fix GCC diagnostics for GCC 4.4 in RHEL 6
  * podwrapper: Don't add the =encoding header for RHEL 6-era POD
  * podwrapper: Verify that all man pages are valid UTF-8
  * podwrapper: Add suggestion for debugging Perl scripts
  * docs: Document how to write plugins/filters in C++
  * vddk: Don't use uninitialized values when computing preferred block size
  * Update Nix to 0.23.0
  * Update Mockall to 0.11.0
  * fuzzing: Document alternate method for AFL++ using clang-LTO
  * server: Export __afl_* symbols for American Fuzzy Lop
  * tests: Fix some failing tests in RHEL / CentOS / AlmaLinux 8
  * tests: Generally prefer nbdinfo over qemu-img info
  * tests: Remove unnecessary 'requires qemu-img --version'
  * tests: Add regression test that nbdkit isn't linked to OpenSSL
  * Version 1.30.1.
  * ci: Add perl-dev back to Alpine
  * ci: Regenerate CI files using latest libvirt-ci/lcitool
  * ci/manifest.yml: Add PERL skip variables
  * Use new string-vector and const-string-vector types
  * common/utils: Add new string vector types
  * common/utils/nbdkit-string.h: Rename header guards
  * cc: Rename misnamed string_vector to params_vector
  * ci: Rename centos-8 to almalinux-8
  * ci: Remove fedora-34 tests
  * plugins/sh: Add ENOEXEC fallback for inline scripts
  * tests/functions.sh.in: Add comment about enabling vsock in tests
  * ci: Skip perl on clang targets
  * ci/build.sh: Combine mingw cases
  * ci: alpine: Include perl-dev package to build perl plugin
  * data: Remove bash-ism from <(...) script
  * docs, tests: Remove bash-ism from --run parameter
  * ci: Temporarily remove check-valgrind, dist tests
  * ci: Install 'dnf-command(config-manager)' first
  * ci: Use almalinux-8 instead of centos-8
  * Add CI for GitLab
  * tests: Check that /dev/loop-control is accessible when needed
  * libssh: Check also for SSH_OPTIONS_DELAY
  * test-sh-errors: Allow for more variation of error messages
  * Fix libraries for mingw32 builds
  * test-delay-shutdown: Do not assume 124 as timeout's exit code and rather probe for it
  * test-exportname: Only check exportname.out contents if it exists
  * tests: Explicitly run $(plugin) under sh in expect scripts
  * test-swap: Only run with proper capability
  * plugins/rust: Run more tests
  * golang: Make sure used golang version supports modules
  * Only use vsock if VMADDR_CID_ANY is defined
  * Include sys/vsock.h only if it exists
  * plugins/file: Include linux/fs.h only if it exists
  * ocaml: Minor simplification of set_field function
  * todo: Suggest new thread model numbering in API V3
  * Version 1.30.0.
  * docs: Final release notes for 1.30
  * sh: Use new string type instead of reallocing return buffers
  * common/utils: Add extensible string, based on vector
  * todo: Drop item about minimum request size
  * todo: Document possibility of extending .block_size in API v3
  * blocksize: Default internal block size based on plugin
  * blocksize: Defer per-handle initialization to .prepare
  * blocksize: Refactor to per-handle constraints
  * vddk: Use nested MAX macros
  * common/include: Fix MIN and MAX macros so they can be nested
  * common/include: Change unique-name macros to use __COUNTER__
  * blocksize: Minor doc improvements
  * windows: tests/test-foreground.sh: Skip this test
  * windows: Skip some nbdkit-cow-filter tests
  * windows: tests: Add requires_run for some tests
  * windows: server/debug.c: Call close_memstream instead of fclose
  * windows: server/debug.c: Don't crash if open_memstream fails
  * windows: Add replacement posix_memalign function
  * windows: Add replacement for sysconf() POSIX function
  * swab: Implement .block_size callback
  * windows: blocksize-policy: Don't use reserved word ERROR
  * todo: Remove retry filter suggestion which was already implemented
  * blocksize: Don't open-code is_power_of_2
  * log: Implement .block_size callback
  * docs: Fix typo & line too long in nbdkit-release-notes-1.30.pod
  * docs: Update release notes for nbdkit 1.30
  * blocksize: Export block size constraints
  * cache, cow: Export block size constraints
  * cc: Implement .block_size callback
  * vddk: Export block size information for this plugin
  * Version 1.29.16.
  * blocksize-policy: Check the correct policy
  * server/plugins.c: Simplify error handling of .block_size callback
  * python: Implement .block_size callback
  * ocaml: Implement .block_size callback
  * nbd: In error messages, just display nbd_get_error()
  * nbd: Implement .block_size callback
  * New filter: nbdkit-blocksize-policy-filter
  * nbd: Use lowercase in error message
  * tests: Add a simple test for block size constraints
  * eval, sh: Implement block_size method
  * server: Add new plugin/filter .block_size callback
  * tls-fallback: Enhance comments about required callbacks
  * Version 1.29.15.
  * vddk: Document our current thinking on VMware out of memory errors
  * nbd: Opt in to libnbd pread_initialize speedup
  * error: Tweak filter name for easier debugging
  * zero: Fix doc typo
  * plugins: python: Make threading model explicit
  * plugins: python: Add error example
  * common/allocators: Always align mlock buffer
  * common/utils: Add vector_reserve_page_aligned
  * tests: Use a larger buffer for mlock test
  * common/allocators/malloc.c: Avoid calling munlock (NULL, ...)
  * Rename top level directory bash -> bash-completion
  * docs: Add preliminary outline release notes for 1.30
  * docs: Add link to nbdkit-release-notes-1.28 to main manual page
  * Version 1.29.14.
  * server/sockets: get rid of AI_ADDRCONFIG
  * server/sockets: supply trailing newline for gai_strerror() format string
  * tests: Fix VDDK tests
  * vddk: Allow create-hwversion to be specified as a number
  * vddk: Fix documentation of new create flag
  * vddk: Implement VMDK creation
  * Version 1.29.13.
  * ocaml: Pass count parameter of pread as OCaml int
  * ocaml: Use int64 as the OCaml type for counts
  * ocaml: Convert offset values correctly in several callbacks
  * common/replacements/poll.h: Fix redefinition of poll
  * common/replacements: Use _get_osfhandle correctly
  * info: Add info_address=yes if mode=address is supported
  * valgrind: Fix suppressions for dlopen
  * info, ip: Make this plugin and filter work without inet_ntop/inet_pton
  * gzip: Don't try calling set_cloexec on Windows
  * exportname: Use replacement open_memstream
  * exitwhen: Remove some Windows warnings
  * cow: Include assert.h and call abort instead of assert (false)
  * split: Remove some unused variables when compiling on Windows
  * server/sockets.c: Remove variable-length array in Windows-only code
  * server, common, filters: Include "strndup.h" in places which use strndup
  * server: Remove some dead code when compiling on Windows
  * server: Use replacement open_memstream function
  * common/include/unique-name.h: Rename UNIQUE_NAME macro
  * server: Use ATTRIBUTE_FORMAT_PRINTF instead of __attribute__((printf))
  * include: Disable printf format warnings on platforms that don't support %m
  * Version 1.29.12.
  * ocaml: NBDKit.set_field should not be @@noalloc
  * ocaml: Use magic_config_key in the example
  * python: More precise Python parameter passing
  * tests/test-python-plugin.py: Allow test to use large disks
  * tests: python: Use Python unittest function descriptions consistently
  * ocaml: Document the version string in the example
  * plugins/python: Fix extents() count format string
  * Version 1.29.11.
  * tests: Add configure --disable-libguestfs-tests flag
  * tests: Use mke2fs -d to create ext4 test image
  * Version 1.29.10.
  * windows: Link plugins/filters that use utils + pread/pwrite with libcompat
  * windows: Use replacement pread and pwrite functions
  * windows: Replace vector .size with .len in a few places
  * file: Fix implementation of cache=none for writes

-------------------------------------------------------------------
Fri Nov 05 08:27:15 UTC 2021 - rpm@fthiessen.de

- Update to version 1.29.4:
  * Remove deprecated nbdkit-streaming-plugin
  * Added retry-request-filter, an alternative, more lightweight,
    filter with different trade-offs for nbdkit-retry-filter.
  * cc: Document how to create OCaml plugin scripts
  * cc: Add binding for .cleanup
  * docs: Document NBDKIT_VERSION_* macros

-------------------------------------------------------------------
Wed Aug 25 23:03:26 UTC 2021 - jfehlig@suse.com

- Update to version 1.27.8:
  * boo#1189634
  * Version 1.27.8.
  * data: Simplify some of the Python code in test cases
  * data: Fix optimization of inlined lists
  * data: Optimize slices of some constant expressions
  * data: Add a test that expected optimizations are being performed
  * data: Get rid of EXPR_EXPR
  * data: New functions new_node/get_node with simpler usage
  * vector: Add vector_duplicate function
  * cow: Clarify documentation for new cow-block-size option
  * docs: Fix title of nbdkit-client man page
  * server: reset meta context replies on starttls
  * Version 1.27.7.
  * cow: Ship cow.h header
  * Version 1.27.6.
  * server: CVE-2021-3716 reset structured replies on starttls
  * cow: Make the block size configurable
  * vddk: Add stats about the amount of time spent in VDDK calls
  * vddk: Replace DEBUG_CALL with bracketed VDDK_CALL_START/END macros
  * cow: Remove #include <sys/ioctl.h> which appears to be unused
  * cow: Make cow_on_cache static
  * maint: Mention online gpg keyring for security use
  * data: Missed optimization: ( fill ) => fill
  * data: Optimize strings with repeated characters into fills
  * data: When possible, combine adjacent list elements
  * common/utils: Fix off-by-one error in <vector>_remove
  * tests/test-data-extents.sh: Remove some bogus tests of zero extents
  * common/allocators/zstd.c: Handle zeroing unallocated space
  * data: Optimize single element lists containing a single byte
  * data: Remove redundant redefinition of APPEND_EXPR macro
  * data: Use common EXPR_NULL
  * data: Add a new EXPR_FILL expression type to optimize <byte>*N
  * maint: Also ignore signature files
  * Version 1.27.5.
  * maint: Modernize configure.ac to silence autoreconf warnings
  * maint: Update to latest ax_pthread.m4
  * maint: Default to probing valgrind at runtime
  * tests/test-data-format.sh: Reenable valgrind
  * common/allocators/malloc.c: Remove bogus kernel hints
  * delay: Test delay-open and delay-close
  * delay: Fix delay-close
  * server: nanosleep: Change error for early end of sleep
  * server: Return from nbdkit_nanosleep early if the socket closes
  * delay: Improve parsing and representation of delay times
  * tests/test-debug-flags.sh: Don't use port 10809 during test
  * cow: Add some more debugging especially for blk_read_multiple and cow-on-read
  * tests: Check that cache-min-block-size works properly
  * data: Improve the example with a diagram
  * example4: Do the parameter checking in config_complete
  * example4: Use get_ready instead of config_complete to allocate the disk
  * cache: Move plugin-args in synopsis earlier
  * cow: General revision and updates to the manual
  * server: Make debug messages atomic
  * Version 1.27.4.
  * cache, cow: Fix data corruption in zero and trim on unaligned tail
  * docs: Grammar fix for .cache
  * python: Implement .cleanup() method
  * cache, cow: More links to related filters in documentation
  * delay: Add delay-open and delay-close
  * cow: Implement cow-on-read
  * tests: cache: Test cache-on-read option really caches
  * tests: cache: Simplify test-cache-on-read.sh
  * cow: Improve documentation of cow-on-cache option
  * docs: Improve documentation of .can_cache and .cache methods
  * cache: Fix misleading LRU diagram and comment
  * cache: Refactor printing state into new function
  * cache, cow: Use a 64K block size by default
  * cache: Add cache-min-block-size parameter
  * cache: Implement cache-on-read=/PATH
  * cache, cow: Use full pread/pwrite operations
  * cache, cow: Add blk_read_multiple function
  * cache: Reduce verbosity of debugging
  * cow: Fix assert failure in cow_extents
  * Version 1.27.3.
  * ocaml: Change thread model in examples to SERIALIZE_ALL_REQUESTS
  * docs: Correct --selinux-label example
  * data: Include byte-swapping.h
  * wrapper: Use vector type instead of realloc
  * ocaml: Fix comment on plugin .pread field
  * ocaml: tests: Add .after_fork method to test plugin
  * ocaml: Add binding for new .cleanup method
  * ocaml: Rearrange the callbacks
  * ocaml: tests: Actually call .get_ready method in test plugin
  * tests: Add a better test of real VDDK
  * vddk: Implement can_flush and can_fua
  * Version 1.27.2.
  * ocaml: Fix valgrinding by only ignoring caml_stat_alloc* functions
  * ocaml: Call caml_shutdown when unloading the plugin
  * cow: Reduce verbosity of debugging
  * docs: Remove nbd-client '-b 512' flag from documentation
  * docs: Use I<> consistently around command line options
  * ssh: Drop srv_pubkey entirely
  * plugins/ssh: remove pointless code fetching SHA1 fingerprint
  * floppy: Note that nbdkit-cow-filter can be used
  * floppy: support FAT FSes with unused space.
  * python: Remove documentation related to Python 2 and nbdkit <= 1.14
  * data: Add le<NN>: and be<NN>: prefixes for little and big endian words
  * data: Rearrange cases in switch statement
  * maint: Untabify configure.ac
  * Version 1.27.1.
  * tests/test-cow-extents1.sh: Fix this for new output of nbdinfo
  * tests: Skip tests/test-file-readonly.sh if run as root
  * wrapper: Unset DEBUGINFOD_URLS
  * tests: Test --run + --tls + $uri + $tls
  * server: Add $tls shell variable for captive nbdkit
  * server: When --tls is used, set captive $uri variable to nbds://...

-------------------------------------------------------------------
Thu Jul 01 12:24:31 UTC 2021 - rpm@fthiessen.de

- Update to version 1.27.1:
  * server: Add $tls shell variable for captive nbdkit
  * server: When --tls is used, set captive $uri variable to nbds://...
  * valgrind: Add OCaml suppression

-------------------------------------------------------------------
Wed Jun 09 19:46:17 UTC 2021 - jfehlig@suse.com

- Update to version 1.26.0:
  * Version 1.26.0.
  * docs: Get release notes ready for a release today
  * valgrind: Add OCaml suppression
  * docs: List release notes in reverse order
  * tests/test-ondemand-list.sh: Skip test on OpenBSD
  * server: Use struct sockpeercred instead of ucred on OpenBSD
  * tests: Don't break if libssh is installed but not ssh-keygen
  * docs: Add outline release notes for 1.26 release
  * Version 1.25.9.
  * tests/test-debug-flags.sh: Add a positive test of debug flags

-------------------------------------------------------------------
Sat May 08 15:25:09 UTC 2021 - rpm@fthiessen.de

- Update to version 1.25.7:
  * tar: Add comment about why we use LANG=C
  * python: Split up the large python.c file into smaller
    compilation units
  * Some documentation and test fixes
- Use correct upstream and not github mirror

-------------------------------------------------------------------
Mon Apr 26 17:50:56 UTC 2021 - rpm@fthiessen.de

- Update to version 1.25.6:
  * Improved documentation.
  * iso: Pick xorriso in preference to genisoimage or mkisofs.
  * vddk: VDDK 6.7 was the first version supporting extents.
  * Removed deprecated tar plugin
- Added multi-conn filter

-------------------------------------------------------------------
Sun Mar 14 18:03:50 UTC 2021 - Jan Engelhardt <jengelh@inai.de>

- Drop ExclusiveArch. This builds on i586 just fine.
- Trim bias and redundant information from descriptions,
  and adjust descriptions for grammar.

-------------------------------------------------------------------
Fri Feb 26 00:19:44 UTC 2021 - James Fehlig <jfehlig@suse.com>

- spec: Fix license

-------------------------------------------------------------------
Wed Jan 27 03:57:21 UTC 2021 - James Fehlig <jfehlig@suse.com>

- Initial packaging of nbdkit 1.25.1
