Index: neatvnc-0.8.0+git20241008.b539421/src/enc/h264/ffmpeg-impl.c
===================================================================
--- neatvnc-0.8.0+git20241008.b539421.orig/src/enc/h264/ffmpeg-impl.c
+++ neatvnc-0.8.0+git20241008.b539421/src/enc/h264/ffmpeg-impl.c
@@ -224,8 +224,10 @@ static int h264_encoder__init_buffersrc(
 	params->sample_aspect_ratio = (AVRational){1, 1};
 	params->time_base = self->timebase;
 	params->hw_frames_ctx = self->hw_frames_ctx;
+#if LIBAVFILTER_VERSION_INT >= AV_VERSION_INT(10,1,100)
 	params->color_space = AVCOL_SPC_RGB;
 	params->color_range = AVCOL_RANGE_JPEG;
+#endif
 
 	rc = av_buffersrc_parameters_set(self->filter_in, params);
 	assert(rc == 0);
Index: neatvnc-0.8.0+git20241008.b539421/meson.build
===================================================================
--- neatvnc-0.8.0+git20241008.b539421.orig/meson.build
+++ neatvnc-0.8.0+git20241008.b539421/meson.build
@@ -54,7 +54,7 @@ libturbojpeg = dependency('libturbojpeg'
 gnutls = dependency('gnutls', required: get_option('tls'))
 nettle = dependency('nettle', required: get_option('nettle'))
 hogweed = dependency('hogweed', required: get_option('nettle'))
-gmp = dependency('gmp', required: get_option('nettle'))
+gmp = cc.find_library('gmp')
 zlib = dependency('zlib')
 gbm = dependency('gbm', required: get_option('gbm'))
 libdrm = dependency('libdrm', required: get_option('h264'))
