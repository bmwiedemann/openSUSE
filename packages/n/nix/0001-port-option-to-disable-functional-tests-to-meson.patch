From 6180476e03a8d77c8e75c71f6816e32a5ef9b7ef Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Marcus=20R=C3=BCckert?= <darix@nordisch.org>
Date: Sun, 29 Dec 2024 19:44:52 +0100
Subject: [PATCH 1/3] port option to disable functional tests to meson

---
 meson.build       |  2 ++
 meson_options.txt | 12 ++++++++++++
 2 files changed, 14 insertions(+)
 create mode 100644 meson_options.txt

Index: nix-2.33.0/meson.build
===================================================================
--- nix-2.33.0.orig/meson.build
+++ nix-2.33.0/meson.build
@@ -59,7 +59,9 @@ if get_option('unit-tests')
   subproject('libexpr-tests')
   subproject('libflake-tests')
 endif
+if get_option('functional-tests').enabled()
 subproject('nix-functional-tests')
+endif
 if get_option('json-schema-checks')
   subproject('json-schema-checks')
 endif
Index: nix-2.33.0/meson.options
===================================================================
--- nix-2.33.0.orig/meson.options
+++ nix-2.33.0/meson.options
@@ -41,3 +41,9 @@ option(
   value : true,
   description : 'Check JSON schema validity of schemas and examples (requires jv)',
 )
+
+option(
+  'functional-tests',
+  type : 'feature',
+  value : 'disabled',
+  description : 'run nix-perl tests')
