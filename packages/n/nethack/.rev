<revisionlist>
  <revision rev="1" vrev="1">
    <srcmd5>e09846110d30f36d5f75731b9e0e0f6a</srcmd5>
    <version>3.4.3</version>
    <time>1735769071</time>
    <user>anag+factory</user>
    <comment>NetHack is one of the classic games on Unix. I updated the orphaned package games:nethack to build again and it cleaned up overall. I'd like to have it added to openSUSE:Factory to make it available in our distributions. Devel project will be games:nethack.</comment>
    <requestid>1233796</requestid>
  </revision>
  <revision rev="2" vrev="2">
    <srcmd5>199d88790fe6256f68f0df065de9923a</srcmd5>
    <version>3.4.3</version>
    <time>1736087380</time>
    <user>anag+factory</user>
    <comment></comment>
    <requestid>1234671</requestid>
  </revision>
  <revision rev="3" vrev="3">
    <srcmd5>fe2b49be2c500915948bde4c27ff1251</srcmd5>
    <version>3.4.3</version>
    <time>1736279622</time>
    <user>anag+factory</user>
    <comment>- Mark NetHack's record and logfile file with %config(noreplace), so
  that package updates do not overwrite existing highscores and
  information about previous games. Also list the various state files
  individually instead of lumping them together.
- Install 'logfile' instead of 'log' in NetHack's state directory. The
  file contains information about earlier played games.
- Avoid race around dlb.o (boo#1102408)
</comment>
    <requestid>1235499</requestid>
  </revision>
  <revision rev="4" vrev="4">
    <srcmd5>d62bb21e3599312d6fcf313e2b37a441</srcmd5>
    <version>3.4.3</version>
    <time>1736431773</time>
    <user>anag+factory</user>
    <comment>- Add nethack-escape-char.patch: Split off from nethack-misc.patch,
  this patch contains a fix for input handling.
- Add nethack-secure.patch: Improve support for SECURE in recover
  utility. Does not affect the game binary. Taken from nethack-misc.patch.
- Modify nethack-config.patch: When patching Makefiles, also fix the
  paths in the documentation to match openSUSE systems.
- Drop nethack-misc.patch: The patch has been split and its content
  moved to other patch files.
- Modify nethack-gzip.patch: Point COMPRESS to /usr/bin/gzip and avoid
  the symlink /bin. The top-level /bin directory is supposed to go away.
- Modify nethack-config.patch: The patch enabled building a number of
  files for X11, which we don't support. Remove them from the build.
- Drop nethack-syscall.patch: The patch only affects builds with GNOME
  support, which we don't do.
- Add nethack-reproducible.patch: Same as reproducible.patch, but
  follows patch-nameing conventions. There's now also a short patch
  description in the spec file.
- Drop reproducible.patch: Renamed to nethack-reproducible.patch.
- Modify nethack-syscall.patch: Refresh to account for offset changes.
- Modify nethack-gzip.patch: Refresh to account for offset changes.
- Modify nethack-config: Enable panic logging. This records serious
  errors in the file panic log in the game's state directory. Helps
  with debugging.
</comment>
    <requestid>1235878</requestid>
  </revision>
  <revision rev="5" vrev="5">
    <srcmd5>0ffac25920c96b63aa9530bff0860f08</srcmd5>
    <version>3.4.3</version>
    <time>1736959379</time>
    <user>anag+factory</user>
    <comment>- Add an interesting and meaningful description to the package.
- Clarify package summary.
- Link to HTTPS URL.
- Filter no-%check-section rpmlint warnings. There are no test cases
  for NetHack. (W: no-%check-section)
- Filter zero-length rpmlint warnings. Several files are required to
  by empty. Filter them from the RPM linter. (E: zero-length)
- Do not install documentation files. We package these files from the
  dource directory No need to copy them into the build root.
- Set file attributes in %files section. It is not possible to use
  'make install' for this package, so we have to install all files
  manually. Resolve the hodgepotch of install and %attr commands by
  setting all file attributes in the %files section.
- Do not install /etc/nethack directory. We do not packaged it and it
  does not contain any files.
</comment>
    <requestid>1237881</requestid>
  </revision>
  <revision rev="6" vrev="6">
    <srcmd5>c23351d529ed1e4997aec0f638c23d80</srcmd5>
    <version>3.4.3</version>
    <time>1742147938</time>
    <user>dimstar_suse</user>
    <comment>- Add nethack-escapes-revamp.patch: Fix possible privilege escalation
  when parsing config file. Taken from upstream commit 612755bfb
  (&quot;escapes() revamp&quot;). (boo#1239138 CVE-2020-5253)
</comment>
    <requestid>1253402</requestid>
  </revision>
  <revision rev="7" vrev="7">
    <srcmd5>df48aeae4db0943a67899cfce4df788f</srcmd5>
    <version>3.4.3</version>
    <time>1742246359</time>
    <user>anag+factory</user>
    <comment></comment>
    <requestid>1253889</requestid>
  </revision>
  <revision rev="8" vrev="8">
    <srcmd5>f047ec7a98705646b5a71d465bae5305</srcmd5>
    <version>3.4.3</version>
    <time>1752074869</time>
    <user>anag_factory</user>
    <comment>Fixes to make NetHack build with gcc15:

- Add nethack-WINCHAIN-a-framework-allowing-multiple-processors-be.patch:
  Define preprocessor token UNUSED to mark unused variables. (boo#1245527)
- Add nethack-address-H4266-build-problem-with-clang-Modules.patch: Fix
  passing an incorrect function signature for signal handling.
  allmain.c: In function ‘newgame’:
  allmain.c:507:31: error: passing argument 2 of ‘signal’ from incompatible pointer type [-Wincompatible-pointer-types]
  507 |         (void) signal(SIGINT, (SIG_RET_TYPE) done1);
      |                               ^~~~~~~~~~~~~~~~~~~~
      |                               |
      |                               void (*)(void)
  The patch from upstream changes a number of things for OSX support,
  but we only take the fixes to signal handling. (boo#1245527)
- Add nethack-tty-xputc.patch: tputs() wants a callback that returns
  an integer. Backport upstream fix. (boo#1245527)
- Add nethack-gcc15-1.patch: Adopt upstream fix for NetHack 3.6 to
  the code base to make it build with Gcc 15. Reference avalable at
  https://nethack.org/v367/bugmore/gcc15-1.diff. (boo#1245527)
- Refresh patches on top of upstream backports.
- Start listing patches specific to openSUSE at offset 50. This leaves
  room for backports in the range below.</comment>
    <requestid>1291315</requestid>
  </revision>
  <revision rev="9" vrev="9">
    <srcmd5>09d143f1db4e44056e3a9c1d968c8f30</srcmd5>
    <version>3.4.3</version>
    <time>1752847112</time>
    <user>anag_factory</user>
    <comment>Switch to %autosetup:

- Apply patches with %autosetup. Rpm's %autosetup applies all listed
  patches automatically and avoids manual patch specification via
  %patch.
- Patches taken for git commits require -p1 to apply cleanly. Change
  the formatting of several existing patches to contain the nethack
  build directory, so that all patches apply with -p1. Enables
  %autosetup. No functional changes to existing patch.
</comment>
    <requestid>1294012</requestid>
  </revision>
  <revision rev="10" vrev="1">
    <srcmd5>8656633ff7d11cda80710c532ab8f7f5</srcmd5>
    <version>3.6.7</version>
    <time>1764584095</time>
    <user>anag_factory</user>
    <comment>Update NetHack to the latest release 3.6.7. This is a major version upgrade. Information about 3.6.7 is available at [1]. A long list of changes in the 3.6 series is available at [2].

[1] https://github.com/NetHack/NetHack/blob/NetHack-3.6/doc/fixes36.7
[2] https://github.com/NetHack/NetHack/blob/NetHack-3.6/doc/fixes36.
- Add nethack-367-src.tgz: Update NetHack to version 3.6.7.
- Modify nethack-config.patch: NetHack 3.6 uses improved build scripts
  that allow for configuration in a few dedicated files. Avoid patching
  various Makefiles and headers in favor of the new system. Set build
  configuration in sys/unix/hints/linux.
- Modfify nethack-gcc15-1.patch: Pick upstream Gcc 15 fix for NetHack
  3.6.7.
- Disable parallel builds. There are complex dependencies among
  NetHack's source files and build utils, which makes parallel building
  complicated. Current attempts at parallel building have always been a
  hack that tries to order dependencies where necessary. Actual
  suport for parallel builds would require a rewrite of NetHack's
  Makefile structure.
- Remove nethack-343-src.tar.bz2: The source code of NetHack 3.4.3 is
  no longer needed.
- Remove nethack-gzip.patch: Setup of gzip is now handled in
  network-config.patch.
- Remove nethack-WINCHAIN-a-framework-allowing-multiple-processors-be.patch:
  Not needed for NetHack 3.6.7
- Remove nethack-address-H4266-build-problem-with-clang-Modules.patch: Not
  needed for NetHack 3.6.7
- Remove nethack-tty-xputc.patch: Not needed for NetHack 3.6.7
- Remove nethack-escapes-revamp.patch: Nethack 3.6.0 and later already
  include the bug fix.
</comment>
    <requestid>1320663</requestid>
  </revision>
</revisionlist>
