Index: desktop-3.5.1/cmake/modules/DefineCompilerFlags.cmake
===================================================================
--- desktop-3.5.1.orig/cmake/modules/DefineCompilerFlags.cmake
+++ desktop-3.5.1/cmake/modules/DefineCompilerFlags.cmake
@@ -45,15 +45,6 @@ if (${CMAKE_C_COMPILER_ID} MATCHES "(GNU
         set(CMAKE_C_FLAGS "${CMAKE_C_FLAGS} -fstack-protector")
     endif (WITH_STACK_PROTECTOR AND NOT WIN32)
 
-    if (CMAKE_BUILD_TYPE)
-        string(TOLOWER "${CMAKE_BUILD_TYPE}" CMAKE_BUILD_TYPE_LOWER)
-        if (CMAKE_BUILD_TYPE_LOWER MATCHES "(release|relwithdebinfo|minsizerel)")
-            check_c_compiler_flag("-Wp,-D_FORTIFY_SOURCE=2" WITH_FORTIFY_SOURCE)
-            if (WITH_FORTIFY_SOURCE)
-                set(CMAKE_C_FLAGS "${CMAKE_C_FLAGS} -Wp,-D_FORTIFY_SOURCE=2")
-            endif (WITH_FORTIFY_SOURCE)
-        endif()
-    endif()
 endif (${CMAKE_C_COMPILER_ID} MATCHES "(GNU|Clang)")
 
 if (UNIX AND NOT WIN32)
Index: desktop-3.5.1/src/CMakeLists.txt
===================================================================
--- desktop-3.5.1.orig/src/CMakeLists.txt
+++ desktop-3.5.1/src/CMakeLists.txt
@@ -32,8 +32,6 @@ if(NOT MSVC)
 
   string(TOLOWER "${CMAKE_BUILD_TYPE}" CMAKE_BUILD_TYPE_LOWER)
   if(CMAKE_BUILD_TYPE_LOWER MATCHES "(release|relwithdebinfo|minsizerel)")
-    set(CMAKE_C_FLAGS "${CMAKE_C_FLAGS} -D_FORTIFY_SOURCE=2")
-    set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -D_FORTIFY_SOURCE=2")
   endif()
 
   if (CMAKE_CXX_COMPILER MATCHES "Clang")
