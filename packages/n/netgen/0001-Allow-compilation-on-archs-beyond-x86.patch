From 186c2500c4dc03dbdfce79a1935c83a59fd8f1dc Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Stefan=20Br=C3=BCns?= <stefan.bruens@rwth-aachen.de>
Date: Thu, 21 Mar 2019 23:08:42 +0100
Subject: [PATCH] Allow compilation on archs beyond x86

---
 libsrc/general/ngsimd.hpp | 6 +++++-
 1 file changed, 5 insertions(+), 1 deletion(-)

diff --git a/libsrc/general/ngsimd.hpp b/libsrc/general/ngsimd.hpp
index 97e9205..d180416 100644
--- a/libsrc/general/ngsimd.hpp
+++ b/libsrc/general/ngsimd.hpp
@@ -6,7 +6,6 @@
 /* Date:   25. Mar. 16                                                    */
 /**************************************************************************/
 
-#include <immintrin.h>
 #include <tuple>
 #include <ostream>
 #include <stdexcept>
@@ -16,6 +15,7 @@
 #ifdef WIN32
 #ifndef AVX_OPERATORS_DEFINED
 #define AVX_OPERATORS_DEFINED
+#include <immintrin.h>
 NG_INLINE __m128d operator- (__m128d a) { return _mm_xor_pd(a, _mm_set1_pd(-0.0)); }
 NG_INLINE __m128d operator+ (__m128d a, __m128d b) { return _mm_add_pd(a,b); }
 NG_INLINE __m128d operator- (__m128d a, __m128d b) { return _mm_sub_pd(a,b); }
@@ -59,6 +59,10 @@ namespace ngsimd
 #endif
 #endif
 
+#ifdef __SSE__
+#include <immintrin.h>
+#warning using SIMD intrinsics
+#endif
   
   constexpr int GetDefaultSIMDSize() {
 #if defined __AVX512F__
-- 
2.21.0

