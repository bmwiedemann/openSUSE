From 1cf85fa3e79524cea3bcf7743a95584ae95a3bda Mon Sep 17 00:00:00 2001
From: Christopher Lackner <clackner@cerbsim.com>
Date: Wed, 14 Sep 2022 10:14:08 +0200
Subject: [PATCH] fix building with new ffmpeg

---
 ng/encoding.hpp | 5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)

diff --git a/ng/encoding.hpp b/ng/encoding.hpp
index 66261989..9ea2ffb5 100644
--- a/ng/encoding.hpp
+++ b/ng/encoding.hpp
@@ -5,6 +5,7 @@
 
 extern "C" {
 #include <libavutil/avassert.h>
+#include <libavcodec/avcodec.h>
 #include <libavutil/channel_layout.h>
 #include <libavutil/opt.h>
 #include <libavutil/mathematics.h>
@@ -137,11 +138,11 @@ class Mpeg {
 //         oc->preload= (int)(0.5*AV_TIME_BASE);
         oc->max_delay= (int)(0.7*AV_TIME_BASE);
 
-        fmt = oc->oformat;
+        fmt = (AVOutputFormat*) oc->oformat;
 
         if (fmt->video_codec != AV_CODEC_ID_NONE) {
             /* find the encoder */
-            video_codec = avcodec_find_encoder(fmt->video_codec);
+            video_codec = (AVCodec*) avcodec_find_encoder(fmt->video_codec);
             if (!(video_codec)) {
                 cerr << "Could not find encoder for '" << avcodec_get_name(fmt->video_codec) << "'" << endl;
                 return 1;
-- 
2.37.3

