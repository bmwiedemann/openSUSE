-------------------------------------------------------------------
Sun Feb 16 12:45:00 UTC 2025 - Jan Baier <jbaier@suse.com>

- update to 0.7.6
  * Change: Reduce D0xx usage where possible by @glx22 in #326
  * Update: Python versions for regression by @glx22 in #331
  * Fix nearby_tile_same_grf, nearby_tile_other_grf and nearby_tile_original_gfx, they all compared to wrong constants by @ahyangyi in #330
  * Codechange: Reduce register usage for BinOp by @glx22 in #308
  * Change: Remove road stops variable random_bits by @JGRennison in #329
  * Add: Support for station variable 6B by @glx22 in #320
  * Change: Unreachable range for default only switch should target CB_FAILED by @JGRennison in #328
  * Add: Constants and varact2 variable associated with road waypoints by @JGRennison in #327
  * Change: reduce register consumption for spritelayouts by @glx22 in #306
  * Add: 'const' keyword to allow users to define new constants by @glx22 in #302
  * Add: Support for station property 1E by @glx22 in #333
  * Fix 749aa73: station property 0A should be an extended byte by @glx22 in #334
  * Fix #337: Station 'availability' is a purchase callback by @glx22 in #338
  * Change: Support for 8 bit station tile types. by @PeterN in #339
  * Add: Support for station properties 0E and 0F by @glx22 in #335
  * Add: Basic range check for replace() by @glx22 in #324
  * Fix #340: Always use raw strings for token regex by @glx22 in #341
  * Change: Use extended Action1s by @glx22 in #309
  * Change: cargo class bits 13 and 14 now define potable and non-potable… by @andythenorth in #343
  * Update: Python version for testing by @glx22 in #347
  * Add: --list-unused-strings to list the unused strings by @glx22 in #348
  * Add: Support for Action5 type 19 road waypoints by @zephyris in #351
  * Fix: [Actions] Install missing deps for PyPy by @glx22 in #353
  * Fix: Properly check number of varaction2 ranges by @glx22 in #352
  * Fix: incorrect start values for roadstop var 43/44 by @WenSimEHRP in #349
  * Fix #354: Improve length check for string literal properties by @glx22 in #355
  * Fix: Include information about relevant block in ScriptError message by @Pixel-Tony in #321
  * Change: add vehicle 'refit' callback (cb 0x163) and cargo class filter prop (0x28 for trains etc) by @andythenorth in #344
  * Codefix: There's a new version of 'black' by @glx22 in #361
  * Fix: 'pip install nml' fails to build from source by @glx22 in #362
  * Change: [Actions] Use cibuildwheel for releases by @glx22 in #363
  * Update: changelog for 0.7.6 by @glx22 in #346
- Run regression test during %check phase
- Remove reproducible.patch

-------------------------------------------------------------------
Sat Mar  2 14:38:06 UTC 2024 - Jan Baier <jbaier@suse.com>

- update to 0.7.5
  * Change: add constants GROUNDSPRITE_ROAD_X and GROUNDSPRITE_ROAD_Y by @andythenorth in https://github.com/OpenTTD/nml/pull/307
  * Fix: Register named parameters earlier by @glx22 in https://github.com/OpenTTD/nml/pull/301
  * Add: Support for build probability action CB 162 var10 0 (reverse rail vehicle) by @PeterN in https://github.com/OpenTTD/nml/pull/313
  * Fix cleanup leaving generated files behind by @matthijskooijman in https://github.com/OpenTTD/nml/pull/312
  * Change: Allow creating 32bpp-only NewGRFs by @PeterN in https://github.com/OpenTTD/nml/pull/314
  * Fix a9a1a3e: Don't use station properties 1C/1D for IDs 00-FF by @glx22 in https://github.com/OpenTTD/nml/pull/305
  * Add: [Dependabot] introduce Dependabot to keep our workflows up-to-date by @glx22 in https://github.com/OpenTTD/nml/pull/316
  * Upgrade: [Actions] Bump the actions group with 4 updates by @dependabot in https://github.com/OpenTTD/nml/pull/317
  * Add: Support for faster ship speed 23 and acceleration 24 (OTTD #10734) by @zephyris in https://github.com/OpenTTD/nml/pull/315
  * Update: changelog for 0.7.5 by @glx22 in https://github.com/OpenTTD/nml/pull/319
  * Add: Support town_production_effect and town_production_multiplier. by @PeterN in https://github.com/OpenTTD/nml/pull/318
  * Change: add --no-palette-validation optional arg by @andythenorth in https://github.com/OpenTTD/nml/pull/322
  * Update: changelog for 0.7.5 by @glx22 in https://github.com/OpenTTD/nml/pull/323

-------------------------------------------------------------------
Thu Feb 22 14:12:19 UTC 2024 - Dominique Leuenberger <dimstar@opensuse.org>

- Use %autosetup macro. Allows to eliminate the usage of deprecated
  %patchN

-------------------------------------------------------------------
Thu Dec 21 03:12:40 UTC 2023 - Bernhard Wiedemann <bwiedemann@suse.com>

- Add reproducible.patch to not write non-deterministic .pyc files

-------------------------------------------------------------------
Wed Jun 28 20:43:13 UTC 2023 - Jan Baier <jbaier@suse.com>

- update to 0.7.4
  * Change: Use a single replacenew-type 'SIGNALS' instead of 3 different constants. by @frosch123 in https://github.com/OpenTTD/nml/pull/297
  * Fix #295: Adjust version_openttd for OpenTTD >= 12.0. by @frosch123 in https://github.com/OpenTTD/nml/pull/296
  * Fix dfb4499: incomplete read only checks (again) by @glx22 in https://github.com/OpenTTD/nml/pull/292
  * Change: Support extended DCxx string range, and station names for IDs > 255 by @glx22 in https://github.com/OpenTTD/nml/pull/293
  * Support for roadtype direction markings (OTTD #10282) by @FLHerne in https://github.com/OpenTTD/nml/pull/274
  * Update: changelog for 0.7.4 by @glx22 in https://github.com/OpenTTD/nml/pull/298

-------------------------------------------------------------------
Mon May 22 09:44:03 UTC 2023 - Jan Baier <jbaier@suse.com>

- update to 0.7.3
  * Change: Extend vehicle random bits to 16. by @PeterN in #288
  * Support extended object/station/roadstop limits (draft) by @andythenorth in #287
  * Codechange: [Actions] Use 'gh' to upload release assets by @glx22 in #284
  * Add: STAT_ALL_TILES constant for use instead of 0xFF by @Brickblock1 in #283
  * Fix: [Actions] nmlc version could not be determined during regression by @glx22 in #285
  * Add: Support for {FORCE} string command by @glx22 in #289
  * Add: --no-32bpp and --no-extra-zoom option to skip some alternative sprites by @glx22 in #286
  * Update: changelog for 0.7.3 by @glx22 in #291

-------------------------------------------------------------------
Tue Apr 18 00:55:51 UTC 2023 - Jan Baier <jbaier@suse.com>

- update to 0.7.2
  * Feature: support for variant_group action 0 prop for vehicles by @andythenorth in #272
  * Add: 'tunnels' callback for road- and tramtypes by @glx22 in #273
  * Feature: Engine name callback by @michicc in #276
  * Update: reformat source with black 23.1 by @frosch123 in #278
  * Fix: By default there is no ELRL railtype. by @frosch123 in #277
  * Update: [Actions] Bump used actions versions by @glx22 in #280
  * Add: Road stops (feature 0x14) by @JGRennison in #279
  * Optimise variational action2 trivial cases by @JGRennison in #281
  * Update: changelog for 0.7.2 by @glx22 in #282

-------------------------------------------------------------------
Sun Dec 11 18:17:20 UTC 2022 - Dirk Müller <dmueller@suse.com>

- update to 0.7.1:
  * Fix action0properties.py
  * Minor improvements to examples
  * Change: use an array of cargoes for cargo_random_triggers
  * Change: disabled_platforms/length is now bitmask(1-8)>>1
  * Change: replace nearby_tile_platform_type with nearby_tile_tile_type.
  * Fix: Station animation triggers every 250 ticks, not 256.
  * Fix #256: Objects have a 'colour' in var 47.
  * Change: allow any expression for station (purchase_)prepare_layout
  * Update: changelog for 0.7.1
  * Fix: [Actions] release workflow issues
  * More issues in release workflow

-------------------------------------------------------------------
Mon Nov 14 16:11:33 UTC 2022 - Andrea Manzini <andrea.manzini@suse.com>

- update to 0.7.0
  This release adds the long awaited support for stations.

  Support for NewGRF additions of OpenTTD 13.0:
  - Add: Map seed in patch variable 0x17.

  Support for NewGRF additions of OpenTTD 1.11:
  - Change: provide nml vars for industry var 0x47 - GameScript control status

  Other changes and fixes:
  - Add: show an error if a required property is not set for objects (feature 0F) (#236)
  - Fix: Reject empty arrays of expressions (#224)
  - Fix #209: Cargo 'profit' callback applied a unit conversion, when there was no unit. (#220)
  - Change: adjust sound name constants to match OpenTTD
  - Fix #253: Produce a more efficient NFO code for abs() builtin function (#255)

-------------------------------------------------------------------
Thu Oct 21 14:07:16 UTC 2021 - Jan Baier <jbaier@suse.com>

- update to 0.6.1
  - Support for NewGRF additions of OpenTTD 12.0:
  - Update: Increase number of OTTD_GUI sprites to 191 (#253)
  - Switches can now be used as functions inside expressions
  - Switches can now define parameters, which are passed by callers for usage inside the switch
  - NML now applies optimisations to switches and chains of switches
  - optimisation and deprecation warnings can be suppressed with nmlc flags, see 'nmlc --help' (#230)
  - Add: rail vehicle property and callback 'curve_speed_mod' (rail vehicle property 0x2E) (#222)
  - Update: Increase number of OTTD_GUI sprites to 186 (#183)
  - Add: Industry spec_flag 'IND_FLAG_DO_NOT_CLAMP_PASSENGER_PRODUCTION' (#183)
  - Add: Vehicle variables 'tile_(supports|powers|is)_(rail|road|tram)type' (#183)
  - Add: Vehicle variable 'tile_has_catenary' (#183)
  - Add: General variable 'inflation', which reports the game setting (#183)
  - Add: Alternative string constants introduced in OpenTTD/OpenTTD#8392 (#176)
  - Add: industry variable for 'town_index' (var 0x41)
  - Add: constants GROUNDSPRITE_GRASS, GROUNDSPRITE_DESERT_2_2, GROUNDSPRITE_GRASS_1_3, GROUNDSPRITE_GRASS_2_3, GROUNDSPRITE_GRASS_3_3
  - Add: builtin functions for round() and sqrt()
  - Add: plural form 14 for Romanian
  - Change: Check that user code doesn't try to use reserved registers (#189)
  - Change: warn when a deprecated constant is used
  - Change: progress display shows input filename when reading files
  - Change: improve error message when invalid features are used
  - Add: More-obvious error for trailing '.' in a string id (#145)
  - Change: Clean up language definitions (#208)
  - Fix #184: Share townname bits when possible (#185)
  - Fix: Compatibility with Pillow 8.1.0 (#182)
  - Fix #180: No proper error message was given, if an unreferenced String was unable to allocate an id (#181)
  - Fix: Access to persistent-storage of towns  (#173)
  - Fix: Don't suppress errors for incorrect `hide_sprite` values (#168)
  - Fix: Remove trailing whitespaces in NFO output (#164)
  - Fix: town_euclidean_dist was returning incorrect value (#206)
  - Fix: rename MAP_TYPE_RECTANGULAR to MAP_TYPE_SQUARE (#201)
  - Fix: LZ77 compatibility with Python 3.9+ (#215, #228)
  - Fix: access to persistent-storage of towns was broken (#173)
  - Fix: use most likely defined position when reporting error (#226)
  - Update: VS generation script syntax (#233)
- remove upstreamed pcx images

-------------------------------------------------------------------
Tue Mar 16 22:36:46 UTC 2021 - Antoine Belvire <antoine.belvire@opensuse.org>

- Backport corrected pcx images to fix tests with Pillow 8.1.0
  (gh#OpenTTD/nml!188, deb#980641):
  * arctic_railwagons.pcx
  * opengfx_generic_trams1.pcx
  * opengfx_trains_start.pcx

-------------------------------------------------------------------
Fri Jan  1 13:56:04 UTC 2021 - Matthias Mailänder <mailaender@opensuse.org>

- Update to version 0.5.3
- Drop python-pillow-version.patch
- Drop 0001-Fix-52-time.clock-has-been-removed-in-python-3.8-53.patch

-------------------------------------------------------------------
Tue Mar 24 17:28:15 UTC 2020 - Christophe Giboudeaux <christophe@krop.fr>

- Add upstream patch to fix the python 3.8 compatibility:
  * 0001-Fix-52-time.clock-has-been-removed-in-python-3.8-53.patch


-------------------------------------------------------------------
Mon May 27 14:41:43 UTC 2019 - Jon Brightwell <jon@moozaad.co.uk>

- Removed nml-python341.diff - python bug, fixed python upstream (3.4.2rc1).
- Removed nml-0.4.2-pillow.diff - superceded upstream
- added python-pillow-version.patch - fixes incorrect version number query https://github.com/OpenTTD/nml/pull/29

- update to 0.4.5
  - Feature: increase cargo ID range from 32 to 64, to support 64 cargos in OpenTTD 11ab3c4ea2f6a6d29efda8c9ba2af04194621ea7
  - Change: Support more DCxx strings for OpenTTD r27769.
  - Add: Properties for vehicle sprite stack.
  - Add: CB_FLAG_MORE_SPRITES, PALETTE_IDENTITY
  - Add: String command 9A 1E CARGO_NAME.
  - Add: CB_RESULT_IND_NO_TEXT_NO_AMOUNT
  - Codechange: Store textids without offset in string_ranges
  - Fix: String encoding with cases was non-deterministic and resulted in differing md5sums for the NewGRF.
  - Fix: Rearrange order of string id assignment to keep compatibility.
  - Fix: When some IDs depleted, an internal NML error was raised instead of the intended error message.
  - Fix: most_common_refit was reading the wrong bits in var 42; read the write bits and rename it to most_common_cargo_type
       as it's more accurate; also add most_common_cargo_subtype which also reads var 42 and was previously missing
  - Fix: Switch from :r format code to !r conversion flag to avoid crashes.

- 0.4.4 (2016-01-07)
  - Fix/Revert: Stripping one path level is not enough

- 0.4.3 (2016-01-07)
  - Add: prob_map_gen as alternative name for the mapgen industry probability property
  - Fix: Stripping one path level is enough
  - Fix: Compatibility with newer versions of pillow.
  - Fix: Vehicle 'sort' function caused internal error when an empty list was passed.
  - Fix: motion_counter is 24 bits, not 4.

-------------------------------------------------------------------
Sun Nov 15 12:58:04 UTC 2015 - opensuse@dstoecker.de

- update to 0.4.2
- add fix for new Pillow (nml-0.4.2-pillow.diff) taken from pyglet
  issue 677

-------------------------------------------------------------------
Fri Oct 23 13:24:12 UTC 2015 - lnussel@suse.de

- lift requirement on python3-devel and add nml-python341.diff to
  fix build on Leap

-------------------------------------------------------------------
Sat Jun  6 07:39:09 UTC 2015 - mailaender@opensuse.org

- don't run the regression tests twice
- install the man page
- avoid a runtime dependency on setuptools

-------------------------------------------------------------------
Wed May 20 08:42:46 UTC 2015 - dimstar@opensuse.org

- Add python3-setuptools requires: nml makes use of pkg_resources
  during runtime
  from openttd-opengfx build log:
  /usr/bin/nmlc -c -p DOS --grf ogfxt_toyland.grf ogfxt_toyland.nml
  Traceback (most recent call last):
     File "/usr/bin/nmlc", line 5, in <module>
      from pkg_resources import load_entry_point
        ImportError: No module named 'pkg_resources'
- Manually install the nml directory into python3_sitelib: python
  setup.py forgets to install this, resulting in nmlc not being able
  to be started (failed to import nml).

-------------------------------------------------------------------
Sun Apr 26 13:22:43 UTC 2015 - mailaender@opensuse.org

- update to 0.4.1 (drops support for Python 2)
  - improved performance and NewGRF support

-------------------------------------------------------------------
Sat Jun 14 17:40:16 UTC 2014 - mailaender@opensuse.org

- update to 0.3.1 (drops support for Python version 2.5)

-------------------------------------------------------------------
Sat Dec 29 10:50:06 UTC 2012 - suse@ammler.ch

- update to 0.2.4 (OpenGFX 0.4.6.1)
  (check changelog.txt)

-------------------------------------------------------------------
Sat Oct 27 11:14:52 UTC 2012 - suse@ammler.ch

- downgrade to 0.2.3
  OpenGFX 0.4.5 builds with NML 0.2.3 only

-------------------------------------------------------------------
Sun Oct 14 22:31:27 UTC 2012 - suse@ammler.ch

- update to 0.2.4 (bugfix release)

-------------------------------------------------------------------
Fri Mar  2 10:40:08 UTC 2012 - cfarrell@suse.com

- license update: GPL-2.0+
  No evidence of GPL-2.0 (only) files in the package

-------------------------------------------------------------------
Fri Mar  2 08:41:15 UTC 2012 - saschpe@suse.de

- Cleaned up macro usage

-------------------------------------------------------------------
Mon Feb 20 10:35:59 UTC 2012 - suse@ammler.ch

- upstream update 0.2.3
- Add: Action5 for tunnel portals
- Fix: Properly catch out-of-bounds image reads (issue #3666)
- Fix: Character code 0xA0 (NBSP) is used for an up arrow in TTD, so
       don't write it as ascii. Force unicode instead (issue #3643)

-------------------------------------------------------------------
Mon Feb  6 10:47:12 UTC 2012 - suse@ammler.ch

- upstream update 0.2.2

-------------------------------------------------------------------
Sat Dec 31 13:36:26 UTC 2011 - suse@ammler.ch

- upstream update 0.2.1
- required for opengfx 0.4

-------------------------------------------------------------------
Sun Jun 19 00:09:34 UTC 2011 - ammler@openttdcoop.org

- upstream update 0.1.1
- rpmlintrc to suppress python name policy

-------------------------------------------------------------------
Thu Apr 14 14:29:12 UTC 2011 - ammler@openttdcoop.org

- initial setup

