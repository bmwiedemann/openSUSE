-------------------------------------------------------------------
Tue May  5 08:54:01 UTC 2020 - Dan Čermák <dcermak@suse.com>

- Add missing BuildRequire info and drop obsoleted macros:
  %install_info, %install_info_prereq and %install_info_delete were deprecated
  in favor of file triggers => drop these from the spec

-------------------------------------------------------------------
Wed Mar 11 09:13:41 UTC 2020 - Dan Čermák <dcermak@suse.com>

- Improve Python 3.8 workaround:
  silence python warnings emitted by gdb instead of skipping tests

-------------------------------------------------------------------
Tue Mar 10 15:57:03 UTC 2020 - Dan Čermák <dcermak@suse.com>

- Add workaround for Python 3.8 + GDB 8

-------------------------------------------------------------------
Mon Jan  6 22:49:12 UTC 2020 - Ondřej Súkup <mimi.vx@gmail.com>

- drop python2 subpackages
- don't BuildRequires python3-devel, isn't needed

-------------------------------------------------------------------
Thu Nov 28 10:14:18 UTC 2019 - Dan Čermák <dcermak@suse.com>

- New upstream release 0.29.3

  Disable python-notmuch building following upstream with the Debian package

  General
  -------

  Fix for use-after-free in notmuch_config_list_{key,val}.

  Fix for double close of file in notmuch-dump.

-------------------------------------------------------------------
Mon Oct 21 07:59:45 UTC 2019 - Dan Čermák <dcermak@suse.com>

- New upstream release 0.29.2

  * Fix for file descriptor leak when opening gzipped mail files. Thanks to
    James Troup for the bug report and the fix.

  Update notmuch.keyring (David Bremner's public key changed)

-------------------------------------------------------------------
Fri Oct  4 12:39:15 UTC 2019 - Dan Čermák <dcermak@suse.com>

- Only run the testsuite when debugging symbols are available
  This fixes the issue reported in boo#1152451

-------------------------------------------------------------------
Thu Jun 20 09:50:39 UTC 2019 - Dan Čermák <dcermak@suse.com>

- Update to notmuch 0.29.1:
  * Fix for installation failure with `configure --without-emacs`.

-------------------------------------------------------------------
Tue Jun 11 10:09:18 UTC 2019 - Adam Majer <adam.majer@suse.de>

- Cleanup specfile
  + expand Sources to be more human parseable
  + use signature of upstream tarball instead

-------------------------------------------------------------------
Fri Jun  7 15:00:17 UTC 2019 - Chris Coutinho <chrisbcoutinho@gmail.com>

- Update source to notmuch 0.29
  * Add "body:" field to allow searching for terms that occur only
    in the message body. Users will need to reindex their mail
    to take advantage of this feature.
  * Add support for indexing user specified headers (e.g. List-Id).
    See notmuch-config(1)
  * Add support for gzip compressed mail messages
  * Notmuch is now capable of indexing, searching and rendering
    cryptographically-protected Subject: headers
  * emacs:
    + Bind B to browse URLs in current message.
    + Bind g to refresh the current notmuch buffer.
    + Forwarded messages are now tagged as +forwarded
    + Add references header to link forwarded message to thread of
      original message.
    + The minimum supported major version of Emacs is now 24.
    + Support for GNU Emacs older than 25.1 is deprecated
- Switch to .xz upstream archive
- Bump minimum dependency for gmime to 3.0, thus dropping support for
  openSUSE Leap 42.3 

-------------------------------------------------------------------
Wed May  8 11:09:32 UTC 2019 - Adam Majer <adam.majer@suse.de>

- Remove checksum file as upstream is not using detached signatures
  and it's confusing. Signed checksum is in the signature file.

-------------------------------------------------------------------
Sun May  5 20:16:05 UTC 2019 - Chris Coutinho <chrisbcoutinho@gmail.com>

- Upgrade to notmuch 0.28.4
  * Fix a spurious error when using `notmuch show --raw` on messages
    whose size is a multiple of the internal buffer size.
- dropped 0001-CLI-reindex-fix-memory-leak.patch: upstreamed

-------------------------------------------------------------------
Tue Apr 16 12:53:03 UTC 2019 - Adam Majer <adam.majer@suse.de>

- Update unnecessarily specific BuildRequires

-------------------------------------------------------------------
Tue Apr 16 09:41:39 UTC 2019 - Dan Čermák <dcermak@suse.com>

- Add 0001-CLI-reindex-fix-memory-leak.patch:
  Fix a memory leak in the reindexing code,
  taken from the message ID: 20190416014616.31623-2-david@tethera.net

-------------------------------------------------------------------
Thu Apr 11 10:16:28 UTC 2019 - Dan Čermák <dcermak@suse.com>

- Install the info pages, run the tests during build

-------------------------------------------------------------------
Thu Mar  7 13:01:19 UTC 2019 - Chris Coutinho <c.coutinho@redstack.nl>

What's new in notmuch 0.28.3
=========================

Library
-------

Fix a bug with the internal data structure _notmuch_string_map_t used
by message properties.

Build System
------------

Serialize calls to sphinx-build to avoid race condition.

-------------------------------------------------------------------
Sun Feb 24 23:58:47 UTC 2019 - Chris Coutinho <chrisbcoutinho@gmail.com>

- Update to 0.28.2
  * Pull in latest release from notmuchmail.org

From the NEWS file, this version reports the following:

    Emacs
    -----

    Invoke gpg with --batch and --no-tty.

    Python Bindings
    ---------------

    Fix documentation build with Python 3.7. Note that Python >= 3.3 is
    now needed to build this documentation.

-------------------------------------------------------------------
Sat Mar 10 22:33:22 UTC 2018 - carmen@carmenbianca.eu

- update to 0.26
  * Add python3-Sphinx to unconditional BuildRequires
  - Support indexing cleartext of encrypted e-mails
  - Python bindings specific Debian packaging is removed
  - cli:
    + Support for re-indexing existing messages
    + Support maildir synced tags in new.tags
    + Support /regex/ in new.ignore
  - Library changes:
    + Indexing files with duplicate message-id
    + New functions to count files
    + New function to remove properties
    + Change return value of notmuch_thread_get_authors from NULL to empty string
    + Transition notmuch_database_add_message to notmuch_database_index_file

-------------------------------------------------------------------
Thu Oct 19 10:18:40 UTC 2017 - mimi.vx@gmail.com

- update to 0.25.1
  - disable handling x-display in text/enriched messages

-------------------------------------------------------------------
Thu Sep 14 15:53:43 UTC 2017 - zaitor@opensuse.org

- Add conditional for pkgconfig(gmime-2.6) and new
  pkgconfig(gmime-3.0) BuildRequires: adjust to whats available in
  Tumbleweed and what the source supports.

-------------------------------------------------------------------
Tue Sep  5 14:26:36 UTC 2017 - abhishek.lekshmanan@suse.com

- version 0.25
  * use sha256 files for checksum & gpg signatures
  * Add notmuch-emacs-mua binary
  - Add regexp searching for mid, paths, and tags.
  - Skip HTML tags when indexing
  - cli:
    + Bash completion is now installed to /usr/share by default.
    + Allow space as separator for keyword arguments.
  - emacs:
    + Support for stashing message timestamp in show and tree views
    + Don't use 'function' as variable name
  - Library changes:
    + Add workaround for date parsing of bad input in older GMime
    + Replace deprecated functions with status returning versions
    + Add support for building against GMime 3.0.
    + Rename libutil.a to libnotmuch_util.a.
    + libnotmuch SONAME is incremented to libnotmuch.so.5.

- version 0.24.2
  - Fix output from `notmuch dump --include=properties` to not include tags.
  - emacs: Fix filename stashing in tree view.

- version 0.24.1
  - Fix regressions in non-regexp search for `from:` and `subject:`
  - Fix several memory leaks in `notmuch show`
  - Fix bug in dump header
  - Fix a read-after-free in the library.

- version 0.24
  - Regular expression searches supported for `from:` and `subject:`
  - Run external `notmuch-` prefixed commands as subcommands
  - New default output format to 3
  - emacs:
    + Postpone and resume messages in `notmuch-message-mode` (composition)
    + Address Completion improvements
    + A configurable Tag jump menu
    + Single command to refresh all buffers with `M-=`
    + Stop display of `application/*` parts
    + Small change in the api for notmuch-search-tag
    + Bugfix for sending messages with very long headers
    + `notmuch emacs-mua` command installed with the Emacs interface
    + Notmuch Emacs desktop integration
  - Library changes:
    + `notmuch_query_count_messages` is now non-destructive
    + Improved handling of DatabaseModifiedError

- version 0.23.6
  - fix read-after-free bug in `notmuch new`

-------------------------------------------------------------------
Thu Feb 23 20:05:08 UTC 2017 - mvetter@suse.com

- Update to version 0.23.5:
  * Fix quoting bug in configure. This had introduced a RUNPATH into the
    notmuch binary in cases where it was not not needed.

-------------------------------------------------------------------
Mon Dec 26 12:35:50 UTC 2016 - hzhr+os@mailbox.org

- version 0.23.4
  - Improve error handling in notmuch insert
  - Restore autoload cookie for notmuch-search

-------------------------------------------------------------------
Sat Dec 10 15:55:52 UTC 2016 - hzhr+os@mailbox.org
- version 0.23.3
  - Treat disappearing files during notmuch new as non-fatal
  - Fix incompatibility (related to signature size) with gnupg 2.1.16
- version 0.23.2
  - Fix notmuch-interesting-buffer and notmuch-cycle-notmuch-buffers
  - Restore compatibility with Emacs 23
- version 0.23.1
  - Require Xapian >= 1.2.6
  - Fix default colours for unread and flagged messages
  - Fix test failure with Emacs 25.1
- version 0.23
  - Compiling against Xapian 1.4 enables several new features
  - Support for single argument date: queries
  - Support for blocking opens
  - Support for named queries
  - Message property API
  - Bug fix for `notmuch_directory_set_mtime`
  - Support for compile time options
  - Dump/Restore support for configuration information and properties
  - Make notmuch-message-mode use insert for fcc
  - Make internal address completion customizable
  - Allow internal address completion on an individual basis
  - Resend messages
  - Face customization is easier
  - Add support for `notmuch_database_get_all_tags`
  - Go bindings moved to contrib
  - Add support for `notmuch_threads_t` and `notmuch_thread_t`
  - Fixed constant values so they are not all zero anymore
- version 0.22.2
  - Silence gdb more
  - Hardcode fingerprint in PGP/MIME tests

-------------------------------------------------------------------
Thu Aug 25 15:02:19 UTC 2016 - mimi.vx@gmail.com

- version 0.22.1
  - Correct the definition of LIBNOTMUCH_CHECK_VERSION.
  - Document the (lack of) operations permitted on a closed database.
  - Fix race condition in dump / restore tests.
  - Notmuch-mutt: Use env to locate perl.
  - Emacs: Tell message-mode mode that outgoing messages are mail
  - Emacs: This makes message-mode configuration behave more predictably.
  - Respect charset of MIME parts when reading them
  - Fix previous assumption that everyone uses UTF-8.

-------------------------------------------------------------------
Sat Jun 18 10:04:44 UTC 2016 - lmb@suse.com

- version 0.22
  - Xapian 1.3 support
  - Limited support for S/MIME messages
  - Fix for threading bug involving deleting and re-adding messages. 
  - Fix for case-sensitive content disposition headers.
  - Fix handling of 1 character directory names at top level.
  - Emacs: Notmuch replies now include all parts shown in the show view
  - Emacs: Filtering or Limiting messages is now bound to `l` in the
    search view
  - Emacs: `F` forwards all open messages in a thread
  - Emacs: Preferred content type can be determined from the message
    content
- version 0.21
  - Notmuch now requires gmime >= 2.6.7. The gmime 2.4 series is no
    longer supported.
  - Database revision tracking: `lastmod:` queries
  - Date queries now support `date:<expr>..!` shorthand for
    `date:<expr>..<expr>`
  - Notmuch database upgrade to support `lastmod:` queries
  - The `notmuch address` command supports new deduplication schemes
  
-------------------------------------------------------------------
Thu Jul  9 00:00:00 CEST 2015 - dsterba@suse.cz

- version 0.20.2
  - Emacs: Bug fix for marking messages read in notmuch-tree mode
- version 0.20.1
  - test suite fixes
- version 0.20
  - There is a new mimetype: search prefix
  - Path to gpg is now configurable
  - Notmuch-Mutt: Support messages without Message-IDs.
  - Undeprecate single message mboxes
  - Contrib: notmuch-deliver is removed
  - Improved notmuch-search-terms.7

-------------------------------------------------------------------
Wed Feb  4 21:14:54 UTC 2015 - mvyskocil@opensuse.org

- workaround a source checker issue by moving bcond macros behind
  Name and Version tag

-------------------------------------------------------------------
Fri Jan 30 00:00:01 CET 2015 - dsterba@suse.cz

- readd the signature file and update keyring

-------------------------------------------------------------------
Fri Jan 30 00:00:00 CET 2015 - dsterba@suse.cz

- spec updates
  - remove gpg checks (broken) and the related files
  - define lib version
- version 0.19
  - Stopped notmuch dump failing if someone writes to the database
  - notmuch insert requires succesful message indexing for success status
  - notmuch insert has gained support for post-insert hook
  - notmuch deliver is deprecated
  - notmuch search now supports --duplicate=N option with --output=messages
  - Added notmuch address subcommand
- versions 0.18.1, 0.18.2
  - This is a bug fix and portability release
  - Resurrect support for single-message mbox files
- version 0.18
  - The folder: search prefix now requires an exact match
  - There is a new path: search prefix
  - Notmuch database upgrade due to folder: and path: changes
  - Support for indexing mbox files has been dropped
  - notmuch dump now defaults to batch-tag format
  - notmuch new has a --quiet option
  - notmuch insert respects maildir.synchronize_flags config option
- version 0.17
  - Incompatible change in SHA1 computation
  - New options to better support handling duplicate messages
  - Improved notmuch new performance for unchanged folders
  - notmuch reply --format=text RFC 2047-encodes headers
  - notmuch compact command
  - emacs interface:
    - notmuch-tree (formerly notmuch-pick) has been added to mainline
    - The notmuch-tag function now requires a list of tag changes
    - Fixed notmuch-reply putting reply in primary selection
    - Fixed notmuch-mua-reply point placement when signature involved
- version 0.16
  - Support for delivering messages to Maildir
  - notmuch count --batch option
  - notmuch tag option to remove all tags from matching messages
  - Decrypting commands explicitly expect a gpg-agent
  - Bash command-line completion
  - many emacs interface updates

-------------------------------------------------------------------
Mon Feb 18 15:46:41 UTC 2013 - mvyskocil@suse.com

- remove zsh completion, it's part of zsh itself 

-------------------------------------------------------------------
Mon Feb 18 14:12:35 UTC 2013 - mvyskocil@suse.com

- drop contrib from installed files
- install zsh to correct location
- instal notmuch.el as notmuch-emacs package like Debian do

-------------------------------------------------------------------
Mon Feb 18 08:38:41 UTC 2013 - mvyskocil@suse.com

- initial packaging of notmuch 0.15.2 for SUSE
  * including python/python3 bindings
  * and notmuchmail (the original emacs lisp based
    email client for notmuch library)

