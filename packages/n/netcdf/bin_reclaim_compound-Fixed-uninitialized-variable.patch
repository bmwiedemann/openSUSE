From: Egbert Eich <eich@suse.com>
Date: Sat Jul 10 09:48:22 2021 +0200
Subject: bin_reclaim_compound(): Fixed uninitialized variable
Patch-mainline: Not yet
Git-repo: https://github.com/Unidata/netcdf-c
Git-commit: f6180b1fb32d8e90eee27250e343effc99f734f1
References: 

'arraycount' never got initialized before being multiplied.

Signed-off-by: Egbert Eich <eich@suse.com>
Signed-off-by: Egbert Eich <eich@suse.de>
---
 ncgen/bindata.c | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)
diff --git a/ncgen/bindata.c b/ncgen/bindata.c
index 583ef501..d053b7e0 100644
--- a/ncgen/bindata.c
+++ b/ncgen/bindata.c
@@ -566,7 +566,7 @@ bin_reclaim_compound(Symbol* tsym, Reclaim* reclaimer)
 {
     int stat = NC_NOERR;
     int nfields;
-    size_t fid, i, arraycount;
+    size_t fid, i;
     ptrdiff_t saveoffset;
 
     reclaimer->offset = read_alignment(reclaimer->offset,tsym->typ.cmpdalign);
@@ -577,6 +577,7 @@ bin_reclaim_compound(Symbol* tsym, Reclaim* reclaimer)
     for(fid=0;fid<nfields;fid++) {
 	Symbol* field = listget(tsym->subnodes,fid);
 	int ndims = field->typ.dimset.ndims;
+	size_t arraycount = ndims > 0 ? 1 : 0;
 	/* compute the total number of elements in the field array */
 	for(i=0;i<ndims;i++) arraycount *= field->typ.dimset.dimsyms[i]->dim.declsize;
 	reclaimer->offset = read_alignment(reclaimer->offset,field->typ.alignment);
