From: Egbert Eich <eich@suse.com>
Date: Sat Jul 10 09:54:03 2021 +0200
Subject: Fix type punning in xxdrntohdouble() by using memcpy instead of assignment
Patch-mainline: Not yet
Git-repo: https://github.com/Unidata/netcdf-c
Git-commit: a284dee6d8aa042e010c25d228dc49db90bb6ebc
References: 

gcc11 explicitly warned about this strict aliasing violation:
xxdr.c: In function 'xxdrntohdouble':
xxdr.c:505:19: warning: dereferencing type-punned pointer will break strict-aliasing rules [-Wstrict-aliasing]
  505 |     if(dp) *dp = *(double*)ii;
      |                   ^~~~~~~~~~~

Signed-off-by: Egbert Eich <eich@suse.com>
Signed-off-by: Egbert Eich <eich@suse.de>
---
 oc2/xxdr.c | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)
diff --git a/oc2/xxdr.c b/oc2/xxdr.c
index 1ac74b0f..1bc3973a 100644
--- a/oc2/xxdr.c
+++ b/oc2/xxdr.c
@@ -502,7 +502,8 @@ xxdrntohdouble(char* c8, double* dp)
 	ii[0] = ii[1];
 	ii[1] = tmp;
     }
-    if(dp) *dp = *(double*)ii;
+    /* use memcpy avoid type punning */
+    if(dp) memcpy(dp, ii, sizeof(double));
 }
 
 void
