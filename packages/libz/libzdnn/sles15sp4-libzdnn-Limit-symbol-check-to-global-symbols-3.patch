From 15cde2ca92be6d15276ec0eae0f0314fb203109f Mon Sep 17 00:00:00 2001
From: Andreas Krebbel <krebbel@linux.ibm.com>
Date: Thu, 21 Oct 2021 12:57:27 +0200
Subject: [PATCH 1/2] Limit symbol check to global symbols (#3)

Signed-off-by: Andreas Krebbel <krebbel@linux.ibm.com>
---
 zdnn/sym_checker.awk | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/zdnn/sym_checker.awk b/zdnn/sym_checker.awk
index ba8170d..7459a23 100644
--- a/zdnn/sym_checker.awk
+++ b/zdnn/sym_checker.awk
@@ -283,7 +283,7 @@ fi == fi_dyn && NF >= 8 {
 	else
 	    dbg(1, "Skipping UND symbol: "dyn_name)
 	next
-    } else if ($7 ~ /[0-9]+/) {
+    } else if ($5 == "GLOBAL" && $7 ~ /[0-9]+/) {
 	# 'zdnn_sub@@ZDNN_1.0' => 'zdnn_sub' and return > 0 if "@" was found
 	dyn_sym=dyn_name
 	if (sub("@.*", "", dyn_sym) == 0) {
-- 
2.26.2

