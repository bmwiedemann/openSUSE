-------------------------------------------------------------------
Thu Apr 18 13:25:02 UTC 2024 - Fridrich Strba <fstrba@suse.com>

- Update to upstream tag jdk-21.0.3+9 (April 2024 CPU)
  * Security fixes
    + JDK-8315708, CVE-2024-21012, bsc#1222987: Enhance HTTP/2
      client usage
    + JDK-8318340: Improve RSA key implementations
    + JDK-8319851, CVE-2024-21011, bsc#1222979: Improve exception
      logging
    + JDK-8322122, CVE-2024-21068, bsc#1222983: Enhance generation
      of addresses
  * Other changes
    + JDK-6928542: Chinese characters in RTF are not decoded
    + JDK-8009550: PlatformPCSC should load versioned so
    + JDK-8077371: Binary files in JAXP test should be removed
    + JDK-8169475: WheelModifier.java fails by timeout
    + JDK-8209595: MonitorVmStartTerminate.java timed out
    + JDK-8210410: Refactor java.util.Currency:i18n shell tests to
      plain java tests
    + JDK-8261837: SIGSEGV in ciVirtualCallTypeData::translate_from
    + JDK-8263256: Test java/net/Inet6Address/serialize/
      /Inet6AddressSerializationTest.java fails due to dynamic
      reconfigurations of network interface during test
    + JDK-8264899: C1: -XX:AbortVMOnException does not work if all
      methods in the call stack are compiled with C1 and there are
      no exception handlers
    + JDK-8274122: java/io/File/createTempFile/SpecialTempFile.java
      fails in Windows 11
    + JDK-8295343: sun/security/pkcs11 tests fail on Linux RHEL 8.6
      and newer
    + JDK-8296631: NSS tests failing on OL9 linux-aarch64 hosts
    + JDK-8301310: The SendRawSysexMessage test may cause a JVM
      crash
    + JDK-8304020: Speed up test/jdk/java/util/zip/ZipFile/
      /TestTooManyEntries.java and clarify its purpose
    + JDK-8304292: Memory leak related to
      ClassLoader::update_class_path_entry_list
    + JDK-8305962: update jcstress to 0.16
    + JDK-8305971: NPE in JavacProcessingEnvironment for missing
      enum constructor body
    + JDK-8306922: IR verification fails because IR dump is chopped
      up
    + JDK-8307408: Some jdk/sun/tools/jhsdb tests don't pass test
      JVM args to the debuggee JVM
    + JDK-8309109: AArch64: [TESTBUG] compiler/intrinsics/sha/cli/
      /TestUseSHA3IntrinsicsOptionOnSupportedCPU.java fails on
      Neoverse N2 and V1
    + JDK-8309203: C2: remove copy-by-value of GrowableArray for
      InterfaceSet
    + JDK-8309302: java/net/Socket/Timeouts.java fails with
      AssertionError on test temporal post condition
    + JDK-8309697: [TESTBUG] Remove "@requires vm.flagless" from
      jtreg vectorization tests
    + JDK-8310031: Parallel: Implement better work distribution for
      large object arrays in old gen
    + JDK-8310238: [test bug] javax/swing/JTableHeader/6889007/
      /bug6889007.java fails
    + JDK-8310308: IR Framework: check for type and size of vector
      nodes
    + JDK-8310629: java/security/cert/CertPathValidator/OCSP/
      /OCSPTimeout.java fails with RuntimeException
      Server not ready
    + JDK-8310631: test/jdk/sun/nio/cs/TestCharsetMapping.java is
      spuriously passing
    + JDK-8310807: java/nio/channels/DatagramChannel/Connect.java
      timed out
    + JDK-8310844: [AArch64] C1 compilation fails because monitor
      offset in OSR buffer is too large for immediate
    + JDK-8310919: runtime/ErrorHandling/
      /TestAbortVmOnException.java times out due to core dumps
      taking a long time on OSX
    + JDK-8310923: Refactor Currency tests to use JUnit
    + JDK-8311081: KeytoolReaderP12Test.java fail on localized
      Windows platform
    + JDK-8311279: TestStressIGVNAndCCP.java failed with different
      IGVN traces for the same seed
    + JDK-8311581: Remove obsolete code and comments in TestLVT.java
    + JDK-8311588: C2: RepeatCompilation compiler directive does
      not choose stress seed randomly
    + JDK-8311663: Additional refactoring of Locale tests to JUnit
    + JDK-8311893: Interactive component with ARIA role 'tabpanel'
      does not have a programmatically associated name
    + JDK-8311986: Disable runtime/os/TestTracePageSizes.java for
      ShenandoahGC
    + JDK-8311992: Test java/lang/Thread/virtual/
      /JfrEvents::testVirtualThreadPinned failed
    + JDK-8312136: Modify runtime/ErrorHandling/TestDwarf.java to
      split dwarf and decoder testing
    + JDK-8312416: Tests in Locale should have more descriptive
      names
    + JDK-8312428: PKCS11 tests fail with NSS 3.91
    + JDK-8312916: Remove remaining usages of -Xdebug from
      test/hotspot/jtreg
    + JDK-8313082: Enable CreateCoredumpOnCrash for testing in
      makefiles
    + JDK-8313229: DHEKeySizing.java should be modified to use TLS
      versions TLSv1, TLSv1.1, TLSv1.2
    + JDK-8313507: Remove pkcs11/Cipher/TestKATForGCM.java from
      ProblemList
    + JDK-8313621: test/jdk/jdk/internal/math/FloatingDecimal/
      /TestFloatingDecimal should use RandomFactory
    + JDK-8313638: Add test for dump of resolved references
    + JDK-8313670: Simplify shared lib name handling code in some
      tests
    + JDK-8313720: C2 SuperWord: wrong result with
      -XX:+UseVectorCmov -XX:+UseCMoveUnconditionally
    + JDK-8313816: Accessing jmethodID might lead to spurious
      crashes
    + JDK-8313854: Some tests in serviceability area fail on
      localized Windows platform
    + JDK-8314164: java/net/HttpURLConnection/
      /HttpURLConnectionExpectContinueTest.java fails intermittently
      in timeout
    + JDK-8314220: Configurable InlineCacheBuffer size
    + JDK-8314283: Support for NSS tests on aarch64 platforms
    + JDK-8314320: Mark runtime/CommandLine/ tests as flagless
    + JDK-8314333: Update com/sun/jdi/ProcessAttachTest.java to use
      ProcessTools.createTestJvm(..)
    + JDK-8314513: [IR Framework] Some internal IR Framework tests
      are failing after JDK-8310308 on PPC and Cascade Lake
    + JDK-8314578: Non-verifiable code is emitted when two guards
      declare pattern variables in colon-switch
    + JDK-8314610: hotspot can't compile with the latest of gtest
      because of <iomanip>
    + JDK-8314612: TestUnorderedReduction.java fails with
      -XX:MaxVectorSize=32 and -XX:+AlignVector
    + JDK-8314629: Generational ZGC: Clearing All SoftReferences
      log line lacks GCId
    + JDK-8314829: serviceability/sa/jmap-hprof/
      /JMapHProfLargeHeapTest.java ignores vm flags
    + JDK-8314830: runtime/ErrorHandling/ tests ignore external VM
      flags
    + JDK-8314831: NMT tests ignore vm flags
    + JDK-8314835: gtest wrappers should be marked as flagless
    + JDK-8314837: 5 compiled/codecache tests ignore VM flags
    + JDK-8314838: 3 compiler tests ignore vm flags
    + JDK-8314990: Generational ZGC: Strong OopStorage stats
      reported as weak roots
    + JDK-8315034: File.mkdirs() occasionally fails to create
      folders on Windows shared folder
    + JDK-8315042: NPE in PKCS7.parseOldSignedData
    + JDK-8315097: Rename createJavaProcessBuilder
    + JDK-8315241: (fs) Move toRealPath tests in
      java/nio/file/Path/Misc.java to separate JUnit 5 test
    + JDK-8315406: [REDO] serviceability/jdwp/
      /AllModulesCommandTest.java ignores VM flags
    + JDK-8315594: Open source few headless Swing misc tests
    + JDK-8315600: Open source few more headless Swing misc tests
    + JDK-8315602: Open source swing security manager test
    + JDK-8315611: Open source swing text/html and tree test
    + JDK-8315680: java/lang/ref/ReachabilityFenceTest.java should
      run with -Xbatch
    + JDK-8315721: CloseRace.java#id0 fails transiently on libgraal
    + JDK-8315726: Open source several AWT applet tests
    + JDK-8315731: Open source several Swing Text related tests
    + JDK-8315761: Open source few swing JList and JMenuBar tests
    + JDK-8315891: java/foreign/TestLinker.java failed with "error
      occurred while instantiating class TestLinker: null"
    + JDK-8315986: [macos14] javax/swing/JMenuItem/4654927/
      /bug4654927.java: component must be showing on the screen to
      determine its location
    + JDK-8315988: Parallel: Make TestAggressiveHeap use
      createTestJvm
    + JDK-8316001: GC: Make TestArrayAllocatorMallocLimit use
      createTestJvm
    + JDK-8316028: Update FreeType to 2.13.2
    + JDK-8316106: Open source few swing JInternalFrame and
      JMenuBar tests
    + JDK-8316132: CDSProtectionDomain::get_shared_protection_domain
      should check for exception
    + JDK-8316229: Enhance class initialization logging
    + JDK-8316309: AArch64: VMError::print_native_stack() crashes
      on Java native method frame
    + JDK-8316319: Generational ZGC: The SoftMaxHeapSize might be
      wrong when CDS decreases the MaxHeapSize
    + JDK-8316392: compiler/interpreter/
      /TestVerifyStackAfterDeopt.java failed with SIGBUS in
      PcDescContainer::find_pc_desc_internal
    + JDK-8316410: GC: Make TestCompressedClassFlags use
      createTestJvm
    + JDK-8316445: Mark com/sun/management/HotSpotDiagnosticMXBean/
      /CheckOrigin.java as vm.flagless
    + JDK-8316446: 4 sun/management/jdp tests ignore VM flags
    + JDK-8316447: 8 sun/management/jmxremote tests ignore VM flags
    + JDK-8316462: sun/jvmstat/monitor/MonitoredVm/
      /MonitorVmStartTerminate.java ignores VM flags
    + JDK-8316464: 3 sun/tools tests ignore VM flags
    + JDK-8316562: serviceability/sa/jmap-hprof/
      /JMapHProfLargeHeapTest.java times out after JDK-8314829
    + JDK-8316594: C2 SuperWord: wrong result with hand unrolled
      loops
    + JDK-8316661: CompilerThread leaks CodeBlob memory when
      dynamically stopping compiler thread in non-product
    + JDK-8316693: Simplify at-requires checkDockerSupport()
    + JDK-8316947: Write a test to check textArea triggers
      MouseEntered/MouseExited events properly
    + JDK-8316961: Fallback implementations for 64-bit
      Atomic::{add,xchg} on 32-bit platforms
    + JDK-8316973: GC: Make TestDisableDefaultGC use createTestJvm
    + JDK-8317042: G1: Make TestG1ConcMarkStepDurationMillis use
      createTestJvm
    + JDK-8317144: Exclude sun/security/pkcs11/sslecc/
      /ClientJSSEServerJSSE.java on Linux ppc64le
    + JDK-8317188: G1: Make  TestG1ConcRefinementThreads use
      createTestJvm
    + JDK-8317218: G1: Make TestG1HeapRegionSize use createTestJvm
    + JDK-8317228: GC: Make TestXXXHeapSizeFlags use createTestJvm
    + JDK-8317300: javac erroneously allows "final" in front of a
      record pattern
    + JDK-8317307: test/jdk/com/sun/jndi/ldap/
      /LdapPoolTimeoutTest.java fails with ConnectException:
      Connection timed out: no further information
    + JDK-8317316: G1: Make TestG1PercentageOptions use
      createTestJvm
    + JDK-8317317: G1: Make TestG1RemSetFlags use createTestJvm
    + JDK-8317343: GC: Make TestHeapFreeRatio use createTestJvm
    + JDK-8317347: Parallel: Make TestInitialTenuringThreshold use
      createTestJvm
    + JDK-8317358: G1: Make TestMaxNewSize use createTestJvm
    + JDK-8317522: Test logic for BODY_CF in
      AbstractThrowingSubscribers.java is wrong
    + JDK-8317535: Shenandoah: Remove unused code
    + JDK-8317771: [macos14] Expand/collapse a JTree using keyboard
      freezes the application in macOS 14 Sonoma
    + JDK-8317804: com/sun/jdi/JdwpAllowTest.java fails on Alpine
      3.17 / 3.18
    + JDK-8318039: GHA: Bump macOS and Xcode versions
    + JDK-8318082: ConcurrentModificationException from IndexWriter
    + JDK-8318154: Improve stability of WheelModifier.java test
    + JDK-8318157: RISC-V: implement ensureMaterializedForStackWalk
      intrinsic
    + JDK-8318158: RISC-V: implement roundD/roundF intrinsics
    + JDK-8318410: jdk/java/lang/instrument/BootClassPath/
      /BootClassPathTest.sh fails on Japanese Windows
    + JDK-8318468: compiler/tiered/LevelTransitionTest.java fails
      with -XX:CompileThreshold=100 -XX:TieredStopAtLevel=1
    + JDK-8318490: Increase timeout for JDK tests that are close to
      the limit when run with libgraal
    + JDK-8318590: JButton ignores margin when painting HTML text
    + JDK-8318603: Parallelize sun/java2d/marlin/ClipShapeTest.java
    + JDK-8318607: Enable parallelism in vmTestbase/nsk/stress/jni
      tests
    + JDK-8318608: Enable parallelism in
      vmTestbase/nsk/stress/threads tests
    + JDK-8318613: ChoiceFormat patterns are not well tested
    + JDK-8318689: jtreg is confused when folder name is the same
      as the test name
    + JDK-8318696: Do not use LFS64 symbols on Linux
    + JDK-8318737: Fallback linker passes bad JNI handle
    + JDK-8318809: java/util/concurrent/ConcurrentLinkedQueue/
      /WhiteBox.java shows intermittent failures on linux ppc64le
      and aarch64
    + JDK-8318964: Fix build failures caused by 8315097
    + JDK-8318971: Better Error Handling for Jar Tool When
      Processing Non-existent Files
    + JDK-8318983: Fix comment typo in PKCS12Passwd.java
    + JDK-8319103: Popups that request focus are not shown on Linux
      with Wayland
    + JDK-8319124: Update XML Security for Java to 3.0.3
    + JDK-8319128: sun/security/pkcs11 tests fail on OL 7.9 aarch64
    + JDK-8319136: Skip pkcs11 tests on linux-aarch64
    + JDK-8319137: release _object in ObjectMonitor dtor to avoid
      races
    + JDK-8319213: Compatibility.java reads both stdout and stderr
      of JdkUtils
    + JDK-8319314: NMT detail report slow or hangs for large number
      of mappings
    + JDK-8319372: C2 compilation fails with "Bad immediate
      dominator info"
    + JDK-8319382: com/sun/jdi/JdwpAllowTest.java shows failures on
      AIX if prefixLen of mask is larger than 32 in IPv6 case
    + JDK-8319456: jdk/jfr/event/gc/collection/
      /TestGCCauseWith[Serial|Parallel].java : GC cause 'GCLocker
      Initiated GC' not in the valid causes
    + JDK-8319548: Unexpected internal name for Filler array klass
      causes error in VisualVM
    + JDK-8319569: Several java/util tests should be updated to
      accept VM flags
    + JDK-8319633: runtime/posixSig/TestPosixSig.java intermittent
      timeouts on UNIX
    + JDK-8319668: Fixup of jar filename typo in BadFactoryTest.sh
    + JDK-8319777: Zero: Support 8-byte cmpxchg
    + JDK-8319879: Stress mode to randomize incremental inlining
      decision
    + JDK-8319883: Zero: Use atomic built-ins for 64-bit accesses
    + JDK-8319897: Move StackWatermark handling out of
      LockStack::contains
    + JDK-8319938: TestFileChooserSingleDirectorySelection.java
      fails with "getSelectedFiles returned empty array"
    + JDK-8320052: Zero: Use __atomic built-ins for atomic RMW
      operations
    + JDK-8320145: Compiler should accept final variable in Record
      Pattern
    + JDK-8320168: handle setsocktopt return values
    + JDK-8320206: Some intrinsics/stubs missing vzeroupper on
      x86_64
    + JDK-8320208: Update Public Suffix List to b5bf572
    + JDK-8320300: Adjust hs_err output in malloc/mmap error cases
    + JDK-8320303: Allow PassFailJFrame to accept single window
      creator
    + JDK-8320309: AIX: pthreads created by foreign test library
      don't work as expected
    + JDK-8320383: refresh libraries cache on AIX in VMError::report
    + JDK-8320582: Zero: Misplaced CX8 enablement flag
    + JDK-8320798: Console read line with zero out should zero out
      underlying buffer
    + JDK-8320807: [PPC64][ZGC] C1 generates wrong code for atomics
    + JDK-8320830: [AIX] Dont mix os::dll_load() with direct
      dlclose() calls
    + JDK-8320877: Shenandoah: Remove
      ShenandoahUnloadClassesFrequency support
    + JDK-8320888: Shenandoah: Enable ShenandoahVerifyOptoBarriers
      in debug builds
    + JDK-8320890: [AIX] Find a better way to mimic dl handle
      equality
    + JDK-8320898: exclude compiler/vectorapi/reshape/
      /TestVectorReinterpret.java on ppc64(le) platforms
    + JDK-8320907: Shenandoah: Remove ShenandoahSelfFixing flag
    + JDK-8320921: GHA: Parallelize hotspot_compiler test jobs
    + JDK-8320937: support latest VS2022 MSC_VER in
      abstract_vm_version.cpp
    + JDK-8320943: Files/probeContentType/Basic.java fails on
      latest Windows 11 - content type mismatch
    + JDK-8321120: Shenandoah: Remove ShenandoahElasticTLAB flag
    + JDK-8321122: Shenandoah: Remove
      ShenandoahLoopOptsAfterExpansion flag
    + JDK-8321131: Console read line with zero out should zero out
      underlying buffer in JLine
    + JDK-8321151: JDK-8294427 breaks Windows L&F on all older
      Windows versions
    + JDK-8321164: javac with annotation processor throws
      AssertionError: Filling jrt:/... during JarFileObject[/...]
    + JDK-8321215: Incorrect x86 instruction encoding for VSIB
      addressing mode
    + JDK-8321269: Require platforms to define
      DEFAULT_CACHE_LINE_SIZE
    + JDK-8321374: Add a configure option to explicitly set
      CompanyName property in VersionInfo resource for Windows
      exe/dll
    + JDK-8321408: Add Certainly roots R1 and E1
    + JDK-8321409: Console read line with zero out should zero out
      underlying buffer in JLine (redux)
    + JDK-8321410: Shenandoah: Remove ShenandoahSuspendibleWorkers
      flag
    + JDK-8321480: ISO 4217 Amendment 176 Update
    + JDK-8321542: C2: Missing ChaCha20 stub for x86_32 leads to
      crashes
    + JDK-8321582: yield <primitive-type>.class not parsed
      correctly.
    + JDK-8321599: Data loss in AVX3 Base64 decoding
    + JDK-8321619: Generational ZGC: ZColorStoreGoodOopClosure is
      only valid for young objects
    + JDK-8321894: Bump update version for OpenJDK: 21.0.3
    + JDK-8321972: test runtime/Unsafe/InternalErrorTest.java
      timeout on linux-riscv64 platform
    + JDK-8321974: Crash in ciKlass::is_subtype_of because
      TypeAryPtr::_klass is not initialized
    + JDK-8322040: Missing array bounds check in
      ClassReader.parameter
    + JDK-8322098: os::Linux::print_system_memory_info enhance the
      THP output with
      /sys/kernel/mm/transparent_hugepage/hpage_pmd_size
    + JDK-8322142: JFR: Periodic tasks aren't orphaned between
      recordings
    + JDK-8322159: ThisEscapeAnalyzer crashes for erroneous code
    + JDK-8322255: Generational ZGC: ZPageSizeMedium should be set
      before MaxTenuringThreshold
    + JDK-8322279: Generational ZGC: Use ZFragmentationLimit and
      ZYoungCompactionLimit as percentage instead of multiples
    + JDK-8322282: Incorrect LoaderConstraintTable::add_entry after
      JDK-8298468
    + JDK-8322321: Add man page doc for -XX:+VerifySharedSpaces
    + JDK-8322417: Console read line with zero out should zero out
      when throwing exception
    + JDK-8322418: Problem list gc/TestAllocHumongousFragment.java
      subtests for 8298781
    + JDK-8322512: StringBuffer.repeat does not work correctly
      after toString() was called
    + JDK-8322583: RISC-V: Enable fast class initialization checks
    + JDK-8322725: (tz) Update Timezone Data to 2023d
    + JDK-8322750: Test "api/java_awt/interactive/
      /SystemTrayTests.html" failed because A blue ball icon is
      added outside of the system tray
    + JDK-8322772: Clean up code after JDK-8322417
    + JDK-8322783: prioritize /etc/os-release over
      /etc/SuSE-release in hs_err/info output
    + JDK-8322790: RISC-V: Tune costs for shuffles with no
      conversion
    + JDK-8322957: Generational ZGC: Relocation selection must join
      the STS
    + JDK-8323008: filter out harmful -std* flags added by autoconf
      from CXX
    + JDK-8323021: Shenandoah: Encountered reference count always
      attributed to first worker thread
    + JDK-8323065: Unneccesary CodeBlob lookup in
      CompiledIC::internal_set_ic_destination
    + JDK-8323086: Shenandoah: Heap could be corrupted by oom
      during evacuation
    + JDK-8323101: C2: assert(n->in(0) == nullptr) failed:
      divisions with zero check should already have bailed out
      earlier in split-if
    + JDK-8323154: C2: assert(cmp != nullptr && cmp->Opcode() ==
      Op_Cmp(bt)) failed: no exit test
    + JDK-8323243: JNI invocation of an abstract instance method
      corrupts the stack
    + JDK-8323331: fix typo hpage_pdm_size
    + JDK-8323428: Shenandoah: Unused memory in regions compacted
      during a full GC should be mangled
    + JDK-8323515: Create test alias "all" for all test roots
    + JDK-8323637: Capture hotspot replay files in GHA
    + JDK-8323640: [TESTBUG]testMemoryFailCount in
      jdk/internal/platform/docker/TestDockerMemoryMetrics.java
      always fail because OOM killed
    + JDK-8323659: LinkedTransferQueue add and put methods call
      overridable offer
    + JDK-8323664: java/awt/font/JNICheck/FreeTypeScalerJNICheck.java
      still fails with JNI warning on some Windows configurations
    + JDK-8323667: Library debug files contain non-reproducible
      full gcc include paths
    + JDK-8323671: DevKit build gcc libraries contain full paths to
      source location
    + JDK-8323717: Introduce test keyword for tests that need
      external dependencies
    + JDK-8323964: runtime/Thread/ThreadCountLimit.java fails
      intermittently on AIX
    + JDK-8324050: Issue store-store barrier after re-materializing
      objects during deoptimization
    + JDK-8324280: RISC-V: Incorrect implementation in
      VM_Version::parse_satp_mode
    + JDK-8324347: Enable "maybe-uninitialized" warning for
      FreeType 2.13.1
    + JDK-8324514: ClassLoaderData::print_on should print address
      of class loader
    + JDK-8324598: use mem_unit when working with sysinfo memory
      and swap related information
    + JDK-8324637: [aix] Implement support for reporting swap space
      in jdk.management
    + JDK-8324647: Invalid test group of lib-test after JDK-8323515
    + JDK-8324659: GHA: Generic jtreg errors are not reported
    + JDK-8324753: [AIX] adjust os_posix after JDK-8318696
    + JDK-8324858: [vectorapi] Bounds checking issues when
      accessing memory segments
    + JDK-8324874: AArch64: crypto pmull based CRC32/CRC32C
      intrinsics clobber V8-V15 registers
    + JDK-8324937: GHA: Avoid multiple test suites per job
    + JDK-8325074: ZGC fails assert(index == 0 ||
      is_power_of_2(index)) failed: Incorrect load shift: 11
    + JDK-8325096: Test java/security/cert/CertPathBuilder/akiExt/
      /AKISerialNumber.java is failing
    + JDK-8325150: (tz) Update Timezone Data to 2024a
    + JDK-8325194: GHA: Add macOS M1 testing
    + JDK-8325254: CKA_TOKEN private and secret keys are not
      necessarily sensitive
    + JDK-8325444: GHA: JDK-8325194 causes a regression
    + JDK-8325470: [AIX] use fclose after fopen in read_psinfo
    + JDK-8325496: Make TrimNativeHeapInterval a product switch
    + JDK-8325672: C2: allocate PhaseIdealLoop::_loop_or_ctrl from
      C->comp_arena()
    + JDK-8325876: crashes in docker container tests on
      Linuxppc64le Power8 machines
    + JDK-8326000: Remove obsolete comments for class
      sun.security.ssl.SunJSSE
    + JDK-8327391: Add SipHash attribution file
    + JDK-8329838: [21u] Remove designator
      DEFAULT_PROMOTED_VERSION_PRE=ea for release 21.0.3
- Modified patches:
  * disable-doclint-by-default.patch
  * fips.patch
  * java-21-openjdk.spec
  * java-atk-wrapper-security.patch
  * loadAssistiveTechnologies.patch
  * memory-limits.patch
  * multiple-pkcs11-library-init.patch
  * system-pcsclite.patch
  * zero-ranges.patch
    + rediff to apply without fuzz

-------------------------------------------------------------------
Mon Apr  1 07:12:05 UTC 2024 - Fridrich Strba <fstrba@suse.com>

- Added patch:
  * reproducible-jlink.patch
    + make the timestamp in jmods reproducible

-------------------------------------------------------------------
Thu Mar  7 12:44:28 UTC 2024 - Fridrich Strba <fstrba@suse.com>

- Removed patch:
  * alternative-tzdb_dat.patch
    + Remove the possibility to use the system timezone-java. It
      creates more problems then it solves (bsc#1213470)

-------------------------------------------------------------------
Tue Feb 20 15:37:20 UTC 2024 - Fridrich Strba <fstrba@suse.com>

- Use %patch -P N instead of deprecated %patchN.

-------------------------------------------------------------------
Wed Feb  7 13:59:23 UTC 2024 - Fridrich Strba <fstrba@suse.com>

- Recommend mozilla-nss-sysinit in order to have available the
  /etc/pki/nssdb directory and its content, required in fips mode
  (bsc#1219662)
- Do not install our crafted nss.fips.cfg file, but use the one that
  the build produces with our fips.patch applied
- Removed patch:
  * nss-security-provider.patch
    + this DISABLED nss security provider was not used for years and
      is largely rendered obsolete by the NSS-FIPS provider
- Modified patch:
  * fips.patch
    + adapt to the removal of the nss security provider

-------------------------------------------------------------------
Wed Jan 24 08:16:42 UTC 2024 - Fridrich Strba <fstrba@suse.com>

- Add JPackage base provides for SLE15 too (bsc#1219115)

-------------------------------------------------------------------
Wed Jan 17 13:18:39 UTC 2024 - Fridrich Strba <fstrba@suse.com>

- Update to upstream tag jdk-21.0.2+13 (January 2024 CPU)
  * CVEs
    + CVE-2024-20918, bsc#1218907
    + CVE-2024-20919, bsc#1218903 
    + CVE-2024-20921, bsc#1218905
    + CVE-2024-20945, bsc#1218909
    + CVE-2024-20952, bsc#1218911
  * Security fixes
    + JDK-8308204: Enhanced certificate processing
    + JDK-8314295: Enhance verification of verifier
    + JDK-8314307: Improve loop handling
    + JDK-8314468: Improve Compiler loops
    + JDK-8316976: Improve signature handling
    + JDK-8317547: Enhance TLS connection support
  * Other changes
    + JDK-8038244: (fs) Check return value of malloc in
      Java_sun_nio_fs_AixNativeDispatcher_getmntctl()
    + JDK-8161536: sun/security/pkcs11/sslecc/
      /ClientJSSEServerJSSE.java fails with ProviderException
    + JDK-8219652: [aix] Tests failing with JNI attach problems.
    + JDK-8225377: type annotations are not visible to javac
      plugins across compilation boundaries
    + JDK-8232839: JDI AfterThreadDeathTest.java failed due to
      "FAILED: Did not get expected IllegalThreadStateException on
      a StepRequest.enable()"
    + JDK-8267502: JDK-8246677 caused 16x performance regression in
      SynchronousQueue
    + JDK-8267509: Improve IllegalAccessException message to
     include the cause of the exception
    + JDK-8268916: Tests for AffirmTrust roots
    + JDK-8286757: adlc tries to build with /pathmap but without
      /experimental:deterministic
    + JDK-8294156: Allow PassFailJFrame.Builder to create test UI
    + JDK-8294158: HTML formatting for PassFailJFrame instructions
    + JDK-8294427: Check boxes and radio buttons have rendering
      issues on Windows in High DPI env
    + JDK-8294535: Add screen capture functionality to
      PassFailJFrame
    + JDK-8295068: SSLEngine throws NPE parsing CertificateRequests
    + JDK-8295555: Primitive wrapper caches could be `@Stable`
    + JDK-8299614: Shenandoah: STW mark should keep nmethod/oops
      referenced from stack chunk alive
    + JDK-8300663: java/util/concurrent/SynchronousQueue/
      /Fairness.java failed with "Error: fair=true i=0 j=1"
    + JDK-8301247: JPackage app-image exe launches multiple exe's
      in JDK 17+
    + JDK-8301341: LinkedTransferQueue does not respect timeout for
      poll()
    + JDK-8301457: Code in SendPortZero.java is uncommented even
      after JDK-8236852 was fixed
    + JDK-8301489: C1: ShortLoopOptimizer might lift instructions
      before their inputs
    + JDK-8301846: Invalid TargetDataLine after screen lock when
      using JFileChooser or COM library
    + JDK-8303737: C2: Load can bypass subtype check that enforces
      it's from the right object type
    + JDK-8306561: Possible out of bounds access in
      print_pointer_information
    + JDK-8308103: Massive (up to ~30x) increase in C2 compilation
      time since JDK 17
    + JDK-8308452: Extend internal Architecture enum with byte
      order and address size
    + JDK-8308479: [s390x] Implement alternative fast-locking scheme
    + JDK-8308592: Framework for CA interoperability testing
    + JDK-8308593: Add KEEPALIVE Extended Socket Options Support
      for Windows
    + JDK-8309209: C2 failed "assert(_stack_guard_state ==
      stack_guard_reserved_disabled) failed: inconsistent state"
    + JDK-8309305: sun/security/ssl/SSLSocketImpl/
      /BlockedAsyncClose.java fails with jtreg test timeout
    + JDK-8309545: Thread.interrupted from virtual thread
      needlessly resets interrupt status
    + JDK-8309663: test fails "assert(check_alignment(result))
      failed: address not aligned: 0x00000008baadbabe"
    + JDK-8309778: java/nio/file/Files/CopyAndMove.java fails when
      using second test directory
    + JDK-8309974: some JVMCI tests fail when VM options include
      -XX:+EnableJVMCI
    + JDK-8310239: Add missing cross modifying fence in nmethod
      entry barriers
    + JDK-8310512: Cleanup indentation in jfc files
    + JDK-8310596: Utilize existing method
      frame::interpreter_frame_monitor_size_in_bytes()
    + JDK-8310982: jdk/internal/util/ArchTest.java fails after
      JDK-8308452 failed with Method isARM()
    + JDK-8311261: [AIX] TestAlwaysPreTouchStacks.java fails due to
      java.lang.RuntimeException: Did not find expected NMT output
    + JDK-8311514: Incorrect regex in TestMetaSpaceLog.java
    + JDK-8311585: Add JRadioButtonMenuItem to bug8031573.java
    + JDK-8311591: Add SystemModulesPlugin test case that splits
      module descriptors with new local variables defined by
      DedupSetBuilder
    + JDK-8311630: [s390] Implementation of Foreign Function &
      Memory API (Preview)
    + JDK-8311631: When multiple users run tools/jpackage/share/
      /LicenseTest.java, Permission denied for writing
      /var/tmp/*.files
    + JDK-8311680: Update the release version after forking Oct
      CPU23_10
    + JDK-8311681: Update the Jan CPU24_01 release date in master
      branch after forking Oct CPU23_10
    + JDK-8311813: C1: Uninitialized PhiResolver::_loop field
    + JDK-8311938: Add default cups include location for configure
      on AIX
    + JDK-8312078: [PPC] JcmdScale.java Failing on AIX
    + JDK-8312126: NullPointerException in CertStore.getCRLs after
      8297955
    + JDK-8312166: (dc) DatagramChannel's socket adaptor does not
      release carrier thread when blocking in receive
    + JDK-8312174: missing JVMTI events from vthreads parked during
      JVMTI attach
    + JDK-8312191: ColorConvertOp.filter for the default
      destination is too slow
    + JDK-8312433: HttpClient request fails due to connection being
      considered idle and closed
    + JDK-8312434: SPECjvm2008/xml.transform with CDS fails with
      "can't seal package nu.xom"
    + JDK-8312440: assert(cast != nullptr) failed: must have added
      a cast to pin the node
    + JDK-8312466: /bin/nm  usage in AIX makes needs -X64 flag
    + JDK-8312467: relax the builddir check in
      make/autoconf/basic.m4
    + JDK-8312592: New parentheses warnings after HarfBuzz 7.2.0
      update
    + JDK-8312612: handle WideCharToMultiByte return values
    + JDK-8313164: src/java.desktop/windows/native/libawt/windows/
      /awt_Robot.cpp GetRGBPixels adjust releasing of resources
    + JDK-8313167: Update to use jtreg 7.3
    + JDK-8313206: PKCS11 tests silently skip execution
    + JDK-8313244: NM flags handling in configure process
    + JDK-8313252: Java_sun_awt_windows_ThemeReader_paintBackground
      release resources in early returns
    + JDK-8313322: RISC-V: implement MD5 intrinsic
    + JDK-8313368: (fc) FileChannel.size returns 0 on block special
      files
    + JDK-8313575: Refactor PKCS11Test tests
    + JDK-8313616: support loading library members on AIX in
      os::dll_load
    + JDK-8313643: Update HarfBuzz to 8.2.2
    + JDK-8313656: assert(!JvmtiExport::can_support_virtual_threads())
      with -XX:-DoJVMTIVirtualThreadTransitions
    + JDK-8313756: [BACKOUT] 8308682: Enhance AES performance
    + JDK-8313760: [REDO] Enhance AES performance
    + JDK-8313779: RISC-V: use andn / orn in the MD5 instrinsic
    + JDK-8313781: Add regression tests for large page logging and
      user-facing error messages
    + JDK-8313782: Add user-facing warning if THPs are enabled but
      cannot be used
    + JDK-8313792: Verify 4th party information in
      src/jdk.internal.le/share/legal/jline.md
    + JDK-8313873: java/nio/channels/DatagramChannel/
      /SendReceiveMaxSize.java fails on AIX due to small default
      RCVBUF size and different IPv6 Header interpretation
    + JDK-8314045: ArithmeticException in GaloisCounterMode
    + JDK-8314094: java/lang/ProcessHandle/InfoTest.java fails on
      Windows when run as user with Administrator privileges
    + JDK-8314120: Add tests for FileDescriptor.sync
    + JDK-8314121: test tools/jpackage/share/
      /RuntimePackageTest.java#id0 fails on RHEL8
    + JDK-8314191: C2 compilation fails with "bad AD file"
    + JDK-8314226: Series of colon-style fallthrough switch cases
      with guards compiled incorrectly
    + JDK-8314242: Update applications/scimark/Scimark.java to
      accept VM flags
    + JDK-8314246: javax/swing/JToolBar/4529206/bug4529206.java
      fails intermittently on Linux
    + JDK-8314263: Signed jars triggering Logger finder recursion
      and StackOverflowError
    + JDK-8314330: java/foreign tests should respect vm flags when
      start new processes
    + JDK-8314476: TestJstatdPortAndServer.java failed with
      "java.rmi.NoSuchObjectException: no such object in table"
    + JDK-8314495: Update to use jtreg 7.3.1
    + JDK-8314551: More generic way to handshake GC threads with
      monitor deflation
    + JDK-8314580: PhaseIdealLoop::transform_long_range_checks
      fails with assert "was tested before"
    + JDK-8314632: Intra-case dominance check fails in the presence
      of a guard
    + JDK-8314759: VirtualThread.parkNanos timeout adjustment when
      pinned should be replaced
    + JDK-8314883: Java_java_util_prefs_FileSystemPreferences_lockFile0
      write result errno in missing case
    + JDK-8314935: Shenandoah: Unable to throw OOME on back-to-back
      Full GCs
    + JDK-8315026: ProcessHandle implementation listing processes
      on AIX should use getprocs64
    + JDK-8315062: [GHA] get-bootjdk action should return the
      abolute path
    + JDK-8315082: [REDO] Generational ZGC: Tests crash with
      assert(index == 0 || is_power_of_2(index))
    + JDK-8315088: C2: assert(wq.size() - before ==
      EMPTY_LOOP_SIZE) failed: expect the EMPTY_LOOP_SIZE nodes of
      this body if empty
    + JDK-8315195: RISC-V: Update hwprobe query for new extensions
    + JDK-8315206: RISC-V: hwprobe query is_set return wrong value
    + JDK-8315213: java/lang/ProcessHandle/TreeTest.java test
      enhance output of children
    + JDK-8315214: Do not run sun/tools/jhsdb tests concurrently
    + JDK-8315362: NMT: summary diff reports threads count
      incorrectly
    + JDK-8315377: C2: assert(u->find_out_with(Op_AddP) == nullptr)
      failed: more than 2 chained AddP nodes?
    + JDK-8315383: jlink SystemModulesPlugin incorrectly parses the
      options
    + JDK-8315415: OutputAnalyzer.shouldMatchByLine() fails in some
      cases
    + JDK-8315437: Enable parallelism in
      vmTestbase/nsk/monitoring/stress/classload tests
    + JDK-8315442: Enable parallelism in
      vmTestbase/nsk/monitoring/stress/thread tests
    + JDK-8315452: Erroneous AST missing modifiers for partial input
    + JDK-8315499: build using devkit on Linux ppc64le RHEL puts
      path to devkit into libsplashscreen
    + JDK-8315545: C1: x86 cmove can use short branches
    + JDK-8315549: CITime misreports code/total nmethod sizes
    + JDK-8315554: C1: Replace "cmp reg, 0" with "test reg, reg" on
      x86
    + JDK-8315578: PPC builds are broken after JDK-8304913
    + JDK-8315579: SPARC64 builds are broken after JDK-8304913
    + JDK-8315606: Open source few swing text/html tests
    + JDK-8315612: RISC-V: intrinsic for unsignedMultiplyHigh
    + JDK-8315644: increase timeout of
      sun/security/tools/jarsigner/Warning.java
    + JDK-8315651: Stop hiding AIX specific multicast socket errors
      via NetworkConfiguration (aix)
    + JDK-8315683: Parallelize
      java/util/concurrent/tck/JSR166TestCase.java
    + JDK-8315684: Parallelize
      sun/security/util/math/TestIntegerModuloP.java
    + JDK-8315688: Update jdk21u fix version to 21.0.2
    + JDK-8315692: Parallelize
      gc/stress/TestStressRSetCoarsening.java test
    + JDK-8315696: SignedLoggerFinderTest.java test failed
    + JDK-8315702: jcmd Thread.dump_to_file slow with millions of
      virtual threads
    + JDK-8315706: com/sun/tools/attach/warnings/
      /DynamicLoadWarningTest.java real fix for failure on AIX
    + JDK-8315735: VerifyError when switch statement used with
      synchronized block
    + JDK-8315751: RandomTestBsi1999 fails often with timeouts on
      Linux ppc64le
    + JDK-8315766: Parallelize
      gc/stress/TestStressIHOPMultiThread.java test
    + JDK-8315770: serviceability/sa/TestJmapCoreMetaspace.java
      should run with -XX:-VerifyDependencies
    + JDK-8315774: Enable parallelism in vmTestbase/gc/g1/unloading
      tests
    + JDK-8315863: [GHA] Update checkout action to use v4
    + JDK-8315869: UseHeavyMonitors not used
    + JDK-8315920: C2: "control input must dominate current
      control" assert failure
    + JDK-8315931: RISC-V: xxxMaxVectorTestsSmokeTest fails when
      using RVV
    + JDK-8315936: Parallelize gc/stress/TestStressG1Humongous.java
      test
    + JDK-8315937: Enable parallelism in
      vmTestbase/nsk/stress/numeric tests
    + JDK-8315942: Sort platform enums and definitions after
      JDK-8304913 follow-ups
    + JDK-8315960: test/jdk/java/io/File/TempDirDoesNotExist.java
      leaves test files behind
    + JDK-8315971: ProblemList containers/docker/
      /TestMemoryAwareness.java on linux-all
    + JDK-8316003: Update FileChooserSymLinkTest.java to HTML
      instructions
    + JDK-8316017: Refactor timeout handler in PassFailJFrame
    + JDK-8316025: Use testUI() method of PassFailJFrame.Builder in
      FileChooserSymLinkTest.java
    + JDK-8316030: Update Libpng to 1.6.40
    + JDK-8316031: SSLFlowDelegate should not log from synchronized
      block
    + JDK-8316060: test/hotspot/jtreg/runtime/reflect/
      /ReflectOutOfMemoryError.java may fail if heap is huge
    + JDK-8316087: Test SignedLoggerFinderTest.java is still failing
    + JDK-8316113: Infinite permission checking loop in java/net/spi/
      /InetAddressResolverProvider/RuntimePermissionTest
    + JDK-8316123: ProblemList
      serviceability/dcmd/gc/RunFinalizationTest.java on AIX
    + JDK-8316130: Incorrect control in
      LibraryCallKit::inline_native_notify_jvmti_funcs
    + JDK-8316142: Enable parallelism in
      vmTestbase/nsk/monitoring/stress/lowmem tests
    + JDK-8316156: ByteArrayInputStream.transferTo causes
      MaxDirectMemorySize overflow
    + JDK-8316178: Better diagnostic header for CodeBlobs
    + JDK-8316179: Use consistent naming for lightweight locking in
      MacroAssembler
    + JDK-8316181: Move the fast locking implementation out of the
      .ad files
    + JDK-8316199: Remove sun/tools/jstatd/TestJstatd* tests from
      problemlist for Windows.
    + JDK-8316206: Test StretchedFontTest.java fails for Baekmuk
      font
    + JDK-8316304: (fs) Add support for
      BasicFileAttributes.creationTime() for Linux
    + JDK-8316337: (bf) Concurrency issue in
      DirectByteBuffer.Deallocator
    + JDK-8316341: sun/security/pkcs11/PKCS11Test.java needs
      adjustment on Linux ppc64le Ubuntu 22
    + JDK-8316387: Exclude more failing multicast tests on AIX
      after JDK-8315651
    + JDK-8316396: Endless loop in C2 compilation triggered by
      AddNode::IdealIL
    + JDK-8316399: Exclude
      java/net/MulticastSocket/Promiscuous.java on AIX
    + JDK-8316400: Exclude jdk/jfr/event/runtime/
      /TestResidentSetSizeEvent.java on AIX
    + JDK-8316401: sun/tools/jhsdb/JStackStressTest.java failed
      with "InternalError: We should have found a thread that owns
      the anonymous lock"
    + JDK-8316411: compiler/compilercontrol/
      /TestConflictInlineCommands.java fails intermittent with force
      inline by CompileCommand missing
    + JDK-8316414: C2: large byte array clone triggers "failed:
      malformed control flow" assertion failure on linux-x86
    + JDK-8316415: Parallelize
      sun/security/rsa/SignedObjectChain.java subtests
    + JDK-8316418: containers/docker/TestMemoryWithCgroupV1.java
      get OOM killed with Parallel GC
    + JDK-8316436: ContinuationWrapper uses unhandled nullptr oop
    + JDK-8316461: Fix: make test outputs TEST SUCCESS after
      unsuccessful exit
    + JDK-8316468: os::write incorrectly handles partial write
    + JDK-8316514: Better diagnostic header for VtableStub
    + JDK-8316540: StoreReproducibilityTest fails on some locales
    + JDK-8316566: RISC-V: Zero extended narrow oop passed to
      Atomic::cmpxchg
    + JDK-8316581: Improve performance of Symbol::print_value_on()
    + JDK-8316585: [REDO] runtime/InvocationTests spend a lot of
      time on dependency verification
    + JDK-8316645: RISC-V: Remove dependency on libatomic by adding
      cmpxchg 1b
    + JDK-8316648: jrt-fs.jar classes not reproducible between
      standard and bootcycle builds
    + JDK-8316659: assert(LockingMode != LM_LIGHTWEIGHT || flag ==
      CCR0) failed: bad condition register
    + JDK-8316671: sun/security/ssl/SSLSocketImpl/
      /SSLSocketCloseHang.java test fails intermittent with Read
      timed out
    + JDK-8316679: C2 SuperWord: wrong result, load should not be
      moved before store if not comparable
    + JDK-8316710: Exclude java/awt/font/Rotate/RotatedTextTest.java
    + JDK-8316719: C2 compilation still fails with "bad AD file"
    + JDK-8316735: Print LockStack in hs_err files
    + JDK-8316741: BasicStroke.createStrokedShape miter-limits
      failing on small shapes
    + JDK-8316743: RISC-V: Change UseVectorizedMismatchIntrinsic
      option result to warning
    + JDK-8316746: Top of lock-stack does not match the unlocked
      object
    + JDK-8316778: test hprof lib: invalid array element type from
      JavaValueArray.elementSize
    + JDK-8316859: RISC-V: Disable detection of V through HWCAP
    + JDK-8316879: RegionMatches1Tests fails if CompactStrings are
      disabled after JDK-8302163
    + JDK-8316880: AArch64: "stop: Header is not fast-locked" with
      -XX:-UseLSE since JDK-8315880
    + JDK-8316894: make test  TEST="jtreg:test/jdk/..."  fails on
      AIX
    + JDK-8316906: Clarify TLABWasteTargetPercent flag
    + JDK-8316929: Shenandoah: Shenandoah degenerated GC and full
      GC need to cleanup old OopMapCache entries
    + JDK-8316933: RISC-V: compiler/vectorapi/
      /VectorCastShape128Test.java fails when using RVV
    + JDK-8316935: [s390x] Use consistent naming for lightweight
      locking in MacroAssembler
    + JDK-8316958: Add test for unstructured locking
    + JDK-8316967: Correct the scope of vmtimer in
      UnregisteredClasses::load_class
    + JDK-8317039: Enable specifying the JDK used to run jtreg
    + JDK-8317136: [AIX] Problem List
      runtime/jni/terminatedThread/TestTerminatedThread.java
    + JDK-8317257: RISC-V: llvm build broken
    + JDK-8317262: LockStack::contains(oop) fails
      "assert(t->is_Java_thread()) failed: incorrect cast to
      JavaThread"
    + JDK-8317294: Classloading throws exceptions over already
      pending exceptions
    + JDK-8317327: Remove JT_JAVA dead code in jib-profiles.js
    + JDK-8317331: Solaris build failed with "declaration can not
      follow a statement (E_DECLARATION_IN_CODE)"
    + JDK-8317335: Build on windows fails after 8316645
    + JDK-8317336: Assertion error thrown during 'this' escape
      analysis
    + JDK-8317340: Windows builds are not reproducible if MS VS
      compiler install path differs
    + JDK-8317373: Add Telia Root CA v2
    + JDK-8317374: Add Let's Encrypt ISRG Root X2
    + JDK-8317439: Updating RE Configs for BUILD REQUEST 21.0.2+1
    + JDK-8317507: C2 compilation fails with "Exceeded _node_regs
      array"
    + JDK-8317510: Change Windows debug symbol files naming to
      avoid losing info when an executable and a library share the
      same name
    + JDK-8317581: [s390x] Multiple test failure with LockingMode=2
    + JDK-8317601: Windows build on WSL broken after JDK-8317340
    + JDK-8317603: Improve exception messages thrown by
      sun.nio.ch.Net native methods (win)
    + JDK-8317692: jcmd GC.heap_dump performance regression after
      JDK-8292818
    + JDK-8317705: ProblemList sun/tools/jstat/jstatLineCountsX.sh
      on linux-ppc64le and aix due to JDK-8248691
    + JDK-8317706: Exclude java/awt/Graphics2D/DrawString/
      /RotTransText.java on linux
    + JDK-8317711: Exclude gtest/GTestWrapper.java on AIX
    + JDK-8317736: Stream::handleReset locks twice
    + JDK-8317751: ProblemList ConsumeForModalDialogTest.java,
      MenuItemActivatedTest.java &
      MouseModifiersUnitTest_Standard.java for windows
    + JDK-8317772: NMT: Make peak values available in release builds
    + JDK-8317790: Fix Bug entry for exclusion of
      runtime/jni/terminatedThread/TestTerminatedThread.java on AIX
    + JDK-8317803: Exclude java/net/Socket/asyncClose/Race.java on
      AIX
    + JDK-8317807: JAVA_FLAGS removed from jtreg running in
      JDK-8317039
    + JDK-8317818: Combinatorial explosion during 'this' escape
      analysis
    + JDK-8317834: java/lang/Thread/IsAlive.java timed out
    + JDK-8317839: Exclude java/nio/channels/Channels/
      /SocketChannelStreams.java on AIX
    + JDK-8317920: JDWP-agent sends broken exception event with
      onthrow option
    + JDK-8317959: Check return values of malloc in native
      java.base coding
    + JDK-8317964: java/awt/Mouse/MouseModifiersUnitTest/
      /MouseModifiersUnitTest_Standard.java fails on macosx-all
      after JDK-8317751
    + JDK-8317967: Enhance test/jdk/javax/net/ssl/TLSCommon/
      /SSLEngineTestCase.java to handle default cases
    + JDK-8317987: C2 recompilations cause high memory footprint
    + JDK-8318078: ADLC: pass ASSERT and PRODUCT flags
    + JDK-8318089: Class space not marked as such with NMT when CDS
      is off
    + JDK-8318137: Change milestone to fcs for all releases
    + JDK-8318144: Match on enum constants with body compiles but
      fails with MatchException
    + JDK-8318183: C2: VM may crash after hitting node limit
    + JDK-8318240: [AIX] Cleaners.java test failure
    + JDK-8318415: Adjust describing comment of os_getChildren
      after 8315026
    + JDK-8318474: Fix memory reporter for thread_count
    + JDK-8318525: Atomic gtest should run as TEST_VM to access VM
      capabilities
    + JDK-8318528: Rename TestUnstructuredLocking test
    + JDK-8318540: make test cannot run .jasm tests directly
    + JDK-8318562: Computational test more than 2x slower when AVX
      instructions are used
    + JDK-8318587: refresh libraries cache on AIX in print_vm_info
    + JDK-8318591: avoid leaks in loadlib_aix.cpp reload_table()
    + JDK-8318669: Target OS detection in 'test-prebuilt' makefile
      target is incorrect when running on MSYS2
    + JDK-8318705: [macos] ProblemList
      java/rmi/registry/multipleRegistries/MultipleRegistries.java
    + JDK-8318736: com/sun/jdi/JdwpOnThrowTest.java failed with
      "transport error 202: bind failed: Address already in use"
    + JDK-8318759: Add four DigiCert root certificates
    + JDK-8318889: C2: add bailout after assert Bad graph detected
      in build_loop_late
    + JDK-8318895: Deoptimization results in incorrect lightweight
      locking stack
    + JDK-8318951: Additional negative value check in JPEG decoding
    + JDK-8318953: RISC-V: Small refactoring for
      MacroAssembler::test_bit
    + JDK-8318955: Add ReleaseIntArrayElements in
      Java_sun_awt_X11_XlibWrapper_SetBitmapShape XlbWrapper.c to
      early return
    + JDK-8318957: enhance agentlib:jdwp help output by info about
      allow option
    + JDK-8318961: increase javacserver connection timeout values
      and max retry attempts
    + JDK-8318981: compiler/compilercontrol/
      /TestConflictInlineCommands.java fails intermittent with
      'disallowed by CompileCommand' missing from stdout/stderr
    + JDK-8319104: GtestWrapper crashes with SIGILL in
      AsyncLogTest::test_asynclog_raw on AIX opt
    + JDK-8319120: Unbound ScopedValue.get() throws the wrong
      exception
    + JDK-8319184: RISC-V: improve MD5 intrinsic
    + JDK-8319187: Add three eMudhra emSign roots
    + JDK-8319195: Move most tier 1 vector API regression tests to
      tier 3
    + JDK-8319268: Build failure with GCC8.3.1 after 8313643
    + JDK-8319339: Internal error on spurious markup in a hybrid
      snippet
    + JDK-8319436: Proxy.newProxyInstance throws NPE if loader is
      null and interface not visible from class loader
    + JDK-8319525: RISC-V: Rename *_riscv64.ad files to *_riscv.ad
      under riscv/gc
    + JDK-8319532: jshell - Non-sealed declarations sometimes break
      a snippet evaluation
    + JDK-8319542: Fix boundaries of region to be tested with
      os::is_readable_range
    + JDK-8319700: [AArch64] C2 compilation fails with "Field too
      big for insn"
    + JDK-8319828: runtime/NMT/VirtualAllocCommitMerge.java may
      fail if mixing interpreted and compiled native invocations
    + JDK-8319922: libCreationTimeHelper.so fails to link in JDK 21
    + JDK-8319958: test/jdk/java/io/File/libGetXSpace.c does not
      compile on Windows 32-bit
    + JDK-8319961: JvmtiEnvBase doesn't zero _ext_event_callbacks
    + JDK-8320001: javac crashes while adding type annotations to
      the return type of a constructor
    + JDK-8320053: GHA: Cross-compile gtest code
    + JDK-8320209: VectorMaskGen clobbers rflags on x86_64
    + JDK-8320280: RISC-V: Avoid passing t0 as temp register to
      MacroAssembler::lightweight_lock/unlock
    + JDK-8320363: ppc64 TypeEntries::type_unknown logic looks
      wrong, missed optimization opportunity
    + JDK-8320597: RSA signature verification fails on signed data
      that does not encode params correctly
    + JDK-8320601: ProblemList java/lang/invoke/lambda/
      /LambdaFileEncodingSerialization.java on linux-all
    + JDK-8321067: Unlock experimental options in EATests.java
    + JDK-8322883: [BACKOUT] 8225377: type annotations are not
      visible to javac plugins across compilation boundaries
    + JDK-8322985: [BACKOUT] 8318562: Computational test more than
      2x slower when AVX instructions are used

-------------------------------------------------------------------
Thu Dec 14 13:24:11 UTC 2023 - Fridrich Strba <fstrba@suse.com>

- Modified patch:
  * fips.patch
    + use the system crypto-policies provided configuration file
      by default (bsc#1218061)

-------------------------------------------------------------------
Fri Oct 27 05:18:42 UTC 2023 - Fridrich Strba <fstrba@suse.com>

- Set priority and make it the preferred JDK

-------------------------------------------------------------------
Wed Oct 25 09:26:09 UTC 2023 - Fridrich Strba <fstrba@suse.com>

- Upgrade to upstream tag jdk-21.0.1+12 (October 2023 CPU)
  * Security fixes:
    + JDK-8286503: Enhance security classes
    + JDK-8308204: Enhanced certificate processing
    + JDK-8309966, CVE-2023-22081, bsc#1216374: Enhanced TLS
      connections
    + JDK-8312248: Enhanced archival support redux
    + JDK-8314649: Enhanced archival support redux
    + JDK-8317121, CVE-2023-22025, bsc#1216339: vector_masked_load
      instruction is moved too early after JDK-8286941
  * Other changes:
    + JDK-8240567: MethodTooLargeException thrown while creating a
      jlink image
    + JDK-8284772: GHA: Use GCC Major Version Dependencies Only
    + JDK-8293114: JVM should trim the native heap
    + JDK-8296581: Better system proxy support
    + JDK-8297856: Improve handling of Bidi characters
    + JDK-8299658: C1 compilation crashes in
      LinearScan::resolve_exception_edge
    + JDK-8302017: Allocate BadPaddingException only if it will be
      thrown
    + JDK-8303815: Improve Metaspace test speed
    + JDK-8304954: SegmentedCodeCache fails when using large pages
    + JDK-8307766: Linux: Provide the option to override the timer
      slack
    + JDK-8308042: [macos] Developer ID Application Certificate not
      picked up by jpackage if it contains UNICODE characters
    + JDK-8308047: java/util/concurrent/ScheduledThreadPoolExecutor/
      /BasicCancelTest.java timed out and also had jcmd pipe errors
    + JDK-8308184: Launching java with large number of jars in
      classpath with java.protocol.handler.pkgs system property set
      can lead to StackOverflowError
    + JDK-8308474: DSA does not reset SecureRandom when initSign is
      called again
    + JDK-8308609: java/lang/ScopedValue/StressStackOverflow.java
      fails with "-XX:-VMContinuations"
    + JDK-8309032: jpackage does not work for module projects
      unless --module-path is specified
    + JDK-8309088: security/infra/java/security/cert/
      /CertPathValidator/certification/AmazonCA.java fails
    + JDK-8309214: sun/security/pkcs11/KeyStore/
      /CertChainRemoval.java fails after 8301154
    + JDK-8309475: Test java/foreign/TestByteBuffer.java fails: a
      problem with msync (aix)
    + JDK-8309502: RISC-V: String.indexOf intrinsic may produce
      misaligned memory loads
    + JDK-8309591: Socket.setOption(TCP_QUICKACK) uses wrong level
    + JDK-8309746: Reconfigure check should include
      make/conf/version-numbers.conf
    + JDK-8309889: [s390] Missing return statement after calling
      jump_to_native_invoker method in
      generate_method_handle_dispatch.
    + JDK-8310106: sun.security.ssl.SSLHandshake
      .getHandshakeProducer() incorrectly checks handshakeConsumers
    + JDK-8310171: Bump version numbers for 21.0.1
    + JDK-8310211: serviceability/jvmti/thread/GetStackTrace/
      /getstacktr03/getstacktr03.java failing
    + JDK-8310233: Fix THP detection on Linux
    + JDK-8310268: RISC-V: misaligned memory access in
      String.Compare intrinsic
    + JDK-8310321: make JDKOPT_CHECK_CODESIGN_PARAMS more verbose
    + JDK-8310586: ProblemList java/lang/ScopedValue/
      /StressStackOverflow.java#default with virtual threads on
      linux-all
    + JDK-8310687: JDK-8303215 is incomplete
    + JDK-8310873: Re-enable locked_create_entry symbol check in
      runtime/NMT/CheckForProperDetailStackTrace.java for RISC-V
    + JDK-8311026: Some G1 specific tests do not set -XX:+UseG1GC
    + JDK-8311033: [macos] PrinterJob does not take into account
      Sides attribute
    + JDK-8311160: [macOS, Accessibility] VoiceOver: No
      announcements on JRadioButtonMenuItem and JCheckBoxMenuItem
    + JDK-8311249: Remove unused MemAllocator::obj_memory_range
    + JDK-8311285: report some fontconfig related environment
      variables in hs_err file
    + JDK-8311511: Improve description of NativeLibrary JFR event
    + JDK-8311592: ECKeySizeParameterSpec causes too many
      exceptions on third party providers
    + JDK-8311682: Change milestone to fcs for all releases
    + JDK-8311862: RISC-V: small improvements to shift immediate
      instructions
    + JDK-8311917: MAP_FAILED definition seems to be obsolete in
      src/java.desktop/unix/native/common/awt/fontpath.c
    + JDK-8311921: Inform about MaxExpectedDataSegmentSize in case
      of pthread_create failures on AIX
    + JDK-8311923: TestIRMatching.java fails on RISC-V
    + JDK-8311926: java/lang/ScopedValue/StressStackOverflow.java
      takes 9mins in tier1
    + JDK-8311955: c++filt is now ibm-llvm-cxxfilt when using xlc17
      / clang on AIX
    + JDK-8311981: Test gc/stringdedup/
      /TestStringDeduplicationAgeThreshold.java#ZGenerational timed
      out
    + JDK-8312127: FileDescriptor.sync should temporarily increase
      parallelism
    + JDK-8312180: (bf) MappedMemoryUtils passes incorrect
      arguments to msync (aix)
    + JDK-8312182: THPs cause huge RSS due to thread start timing
      issue
    + JDK-8312394: [linux] SIGSEGV if kernel was built without
      hugepage support
    + JDK-8312395: Improve assertions in growableArray
    + JDK-8312401: SymbolTable::do_add_if_needed hangs when called
      in InstanceKlass::add_initialization_error path with
      requesting length exceeds max_symbol_length
    + JDK-8312489: Increase jdk.jar.maxSignatureFileSize default
      which is too low for JARs such as WhiteSource/Mend unified
      agent jar
    + JDK-8312525: New test runtime/os/
      /TestTrimNative.java#trimNative is failing: did not see the
      expected RSS reduction
    + JDK-8312535: MidiSystem.getSoundbank() throws unexpected
      SecurityException
    + JDK-8312555: Ideographic characters aren't stretched by
      AffineTransform.scale(2, 1)
    + JDK-8312573: Failure during CompileOnly parsing leads to
      ShouldNotReachHere
    + JDK-8312585: Rename DisableTHPStackMitigation flag to
      THPStackMitigation
    + JDK-8312591: GCC 6 build failure after JDK-8280982
    + JDK-8312619: Strange error message when switching over long
    + JDK-8312620: WSL Linux build crashes after JDK-8310233
    + JDK-8312625: Test serviceability/dcmd/vm/TrimLibcHeapTest.java
      failed: RSS use increased
    + JDK-8312909: C1 should not inline through interface calls
      with non-subtype receiver
    + JDK-8312976: MatchResult produces
      StringIndexOutOfBoundsException for groups outside match
    + JDK-8312984: javac may crash on a record pattern with too few
      components
    + JDK-8313081: MonitoringSupport_lock should be unconditionally
      initialized after 8304074
    + JDK-8313248: C2: setScopedValueCache intrinsic exposes
      nullptr pre-values to store barriers
    + JDK-8313262: C2:  Sinking node may cause required cast to be
      dropped
    + JDK-8313307: java/util/Formatter/Padding.java fails on some
      Locales
    + JDK-8313312: Add missing classpath exception copyright header
    + JDK-8313323: javac -g on a java file which uses unnamed
      variable leads to ClassFormatError when launching that class
    + JDK-8313402: C1: Incorrect LoadIndexed value numbering
    + JDK-8313428: GHA: Bump GCC versions for July 2023 updates
    + JDK-8313576: GCC 7 reports compiler warning in bundled
      freetype 2.13.0
    + JDK-8313602: increase timeout for
      jdk/classfile/CorpusTest.java
    + JDK-8313626: C2 crash due to unexpected exception control flow
    + JDK-8313657: com.sun.jndi.ldap.Connection.cleanup does not
      close connections on SocketTimeoutErrors
    + JDK-8313676: Amend TestLoadIndexedMismatch test to target
      intrinsic directly
    + JDK-8313678: SymbolTable can leak Symbols during cleanup
    + JDK-8313691: use close after failing os::fdopen in vmError
      and ciEnv
    + JDK-8313701: GHA: RISC-V should use the official repository
      for bootstrap
    + JDK-8313707: GHA: Bootstrap sysroots with --variant=minbase
    + JDK-8313752: InstanceKlassFlags::print_on doesn't print the
      flag names
    + JDK-8313765: Invalid CEN header (invalid zip64 extra data
      field size)
    + JDK-8313796: AsyncGetCallTrace crash on unreadable
      interpreter method pointer
    + JDK-8313874: JNI NewWeakGlobalRef throws exception for null
      arg
    + JDK-8313901: [TESTBUG] test/hotspot/jtreg/compiler/codecache/
      /CodeCacheFullCountTest.java fails with
      java.lang.VirtualMachineError
    + JDK-8313904: [macos] All signing tests which verifies
    unsigned app images are failing
    + JDK-8314020: Print instruction blocks in byte units
    + JDK-8314024: SIGSEGV in
      PhaseIdealLoop::build_loop_late_post_work due to bad immediate
      dominator info
    + JDK-8314063: The socket is not closed in
      Connection::createSocket when the handshake failed for LDAP
      connection
    + JDK-8314117: RISC-V: Incorrect VMReg encoding in
      RISCV64Frame.java
    + JDK-8314118: Update JMH devkit to 1.37
    + JDK-8314139: TEST_BUG: runtime/os/
      /THPsInThreadStackPreventionTest.java could fail on machine
      with large number of cores
    + JDK-8314144: gc/g1/ihop/TestIHOPStatic.java fails due to
      extra concurrent mark with -Xcomp
    + JDK-8314216: Case enumConstant, pattern compilation fails
    + JDK-8314262: GHA: Cut down cross-compilation sysroots deeper
    + JDK-8314423: Multiple patterns without unnamed variables
    + JDK-8314426: runtime/os/TestTrimNative.java is failing on
      slow machines
    + JDK-8314501: Shenandoah: sun/tools/jhsdb/heapconfig/
      /JMapHeapConfigTest.java fails
    + JDK-8314517: some tests fail in case ipv6 is disabled on the
      machine
    + JDK-8314618: RISC-V: -XX:MaxVectorSize does not work as
      expected
    + JDK-8314656: GHA: No need for Debian ports keyring
      installation after JDK-8313701
    + JDK-8314679: SA fails to properly attach to JVM after having
      just detached from a different JVM
    + JDK-8314730: GHA: Drop libfreetype6-dev transitional package
      in favor of libfreetype-dev
    + JDK-8314850: SharedRuntime::handle_wrong_method() gets called
      too often when resolving Continuation.enter
    + JDK-8314960: Add Certigna Root CA - 2
    + JDK-8315020: The macro definition for LoongArch64 zero build
      is not accurate.
    + JDK-8315051: jdk/jfr/jvm/TestGetEventWriter.java fails with
      non-JVMCI GCs
    + JDK-8315534: Incorrect warnings about implicit annotation
      processing

-------------------------------------------------------------------
Wed Oct 18 05:05:17 UTC 2023 - Fridrich Strba <fstrba@suse.com>

- Compiler flags to realign stack on ix86 (bsc#1214790)

-------------------------------------------------------------------
Thu Sep 21 11:14:41 UTC 2023 - Fridrich Strba <fstrba@suse.com>

- Added patch:
  * reproducible-properties.patch
    + use SOURCE_DATE_EPOCH for timestamp in properties files if
      it is set

-------------------------------------------------------------------
Tue Sep 19 10:46:38 UTC 2023 - Fridrich Strba <fstrba@suse.com>

- Initial packaging of OpenJDK 21 release
- Highlight of changes to OpenJDK 17 LTS
  * Additions
    + HotSpot JVM
      JEP-422: Linux/RISC-V Port (19)
       Garbage Collectors
      JEP-439: Generational ZGC (21)
       Serviceability
      JEP-451: Prepare to Disallow the Dynamic Loading of Agents (21)
    + Language
      JEP-441: Pattern Matching for switch (21)
      JEP-440: Record Patterns (21)
    + Libraries
      JEP-444: Virtual Threads (21)
       Collections
      JEP-431: Sequenced Collections (21)
       Cryptography
      JEP-452: Key Encapsulation Mechanism API (21)
       I/O
      JEP-400: UTF-8 by Default (18)
       Networking
      JEP-418: Internet-Address Resolution SPI (18)
      JEP-408: Simple Web Server (18)
       Reflection & Method Handles
      JEP-416: Reimplement Core Reflection with Method Handles (18)
    + Tools
       JavaDoc
      JEP-413: Code Snippets in Java API Documentation (18)
  * Preview & Incubating
    + Language
      JEP-430: String Templates (Preview) (21)
      JEP-445: Unnamed Classes and Instance Main Methods (Preview) (21)
      JEP-443: Unnamed Patterns and Variables (Preview) (21)
    + Libraries
      JEP-442: Foreign Function & Memory API (Third Preview) (21)
      JEP-446: Scoped Values (Preview) (21)
      JEP-453: Structured Concurrency (Preview) (21)
      JEP-448: Vector API (Sixth Incubator) (21)
  * Deprecations
    + HotSpot JVM
      JEP-449: Deprecate the Windows 32-bit x86 Port for Removal (21)
    + Libraries
      JEP-421: Deprecate Finalization for Removal (18)
