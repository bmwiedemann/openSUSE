--- configure.in.orig
+++ configure.in
@@ -5,9 +5,9 @@ AM_INIT_AUTOMAKE(jackEQ, 0.4.0)
 AM_CONFIG_HEADER(config.h)
 AM_MAINTAINER_MODE
 
-AC_ISC_POSIX
-AC_PROG_CC
-AM_PROG_CC_STDC
+AC_PROG_CC_STDC
+AC_USE_SYSTEM_EXTENSIONS
+AC_SYS_LARGEFILE
 AC_HEADER_STDC
 
 dnl Checks for libraries.
@@ -16,7 +16,9 @@ PKG_CHECK_MODULES(JACK, jack >= 0.50.0)
 
 
 PKG_CHECK_MODULES(XML, libxml-2.0 >= 2.0)
-AC_CHECK_LIB([m], [sqrt], , [AC_MSG_ERROR(Can't find libm)])
+
+AC_SEARCH_LIBS(sqrt, m)
+AC_SEARCH_LIBS(dlopen, dl)
 
 CFLAGS="$CFLAGS $JACK_CFAGS $XML_CFLAGS"
 LIBS="$LIBS $JACK_LIBS $XML_LIBS"
--- src/Makefile.am.orig
+++ src/Makefile.am
@@ -6,7 +6,6 @@ INCLUDES = \
 	@PACKAGE_CFLAGS@
 
 jackeq_CFLAGS = -g -ffast-math
-jackeq_LDFLAGS = -lm
 
 bin_PROGRAMS = jackeq
 
