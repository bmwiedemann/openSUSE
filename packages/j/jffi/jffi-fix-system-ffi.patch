diff -up jffi-jffi-1.3.9/jni/GNUmakefile.p04 jffi-jffi-1.3.9/jni/GNUmakefile
--- jffi-jffi-1.3.9/jni/GNUmakefile.p04	2022-05-11 12:10:48.933683705 +0300
+++ jffi-jffi-1.3.9/jni/GNUmakefile	2022-05-11 12:12:26.005900040 +0300
@@ -277,7 +277,7 @@ debug:
 	@echo "JFFI_BUILD_DIR=$(JFFI_BUILD_DIR)"
 	@echo "OBJS=$(OBJS)"
 
-$(LIBJFFI):  $(OBJS) $(LIBFFI_LIBS)
+$(LIBJFFI):  $(OBJS)
 	$(CC) -o $@ $(LDFLAGS) $(SOFLAGS) $(OBJS) $(LIBFFI) $(LIBS)
 	$(STRIP) $@
 ifeq ($(OS), darwin)
@@ -292,7 +292,9 @@ $(BUILD_DIR)/%.o : $(SRC_DIR)/%.S $(wild
 	@mkdir -p $(@D)
 	@$(CC) $(CFLAGS) -o $@ -c $<
 
-$(OBJS) : $(LIBFFI)
+ifneq ($(USE_SYSTEM_LIBFFI),1)
+$(OBJS) : $(LIBFFI)
+endif
 
 ifeq ($(OS), darwin)
 build_ffi = \
