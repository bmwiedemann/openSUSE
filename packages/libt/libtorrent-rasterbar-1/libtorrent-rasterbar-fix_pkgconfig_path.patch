From ad3bb12b4a05e3efd7bc3fbc692109203e5c9331 Mon Sep 17 00:00:00 2001
From: Luigi Baldoni <aloisio@gmx.com>
Date: Sat, 1 Aug 2020 07:44:33 +0200
Subject: [PATCH] Fix path duplication in .pc file installation

---
 cmake/Modules/GeneratePkgConfig/generate-pkg-config.cmake.in | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

Index: libtorrent-rasterbar-1.2.10/cmake/Modules/GeneratePkgConfig/generate-pkg-config.cmake.in
===================================================================
--- libtorrent-rasterbar-1.2.10.orig/cmake/Modules/GeneratePkgConfig/generate-pkg-config.cmake.in
+++ libtorrent-rasterbar-1.2.10/cmake/Modules/GeneratePkgConfig/generate-pkg-config.cmake.in
@@ -49,4 +49,4 @@ set(_interface_compile_options "${_TARGE
 string(REPLACE ";" " " _interface_compile_options "${_interface_compile_options}")
 
 configure_file("@_pkg_config_file_template_filename@" "@_generate_target_dir@/@_package_name@.pc" @ONLY)
-file(INSTALL "@_generate_target_dir@/@_package_name@.pc" DESTINATION "@CMAKE_INSTALL_PREFIX@/@CMAKE_INSTALL_LIBDIR@/pkgconfig")
+file(INSTALL "@_generate_target_dir@/@_package_name@.pc" DESTINATION "@CMAKE_INSTALL_FULL_LIBDIR@/pkgconfig")
Index: libtorrent-rasterbar-1.2.10/cmake/Modules/GeneratePkgConfig/pkg-config.cmake.in
===================================================================
--- libtorrent-rasterbar-1.2.10.orig/cmake/Modules/GeneratePkgConfig/pkg-config.cmake.in
+++ libtorrent-rasterbar-1.2.10/cmake/Modules/GeneratePkgConfig/pkg-config.cmake.in
@@ -1,7 +1,7 @@
 prefix=@CMAKE_INSTALL_PREFIX@
-libdir=${prefix}/@_INSTALL_LIBDIR@
+libdir=@_INSTALL_LIBDIR@
 
-Name: @_PROJECT_NAME@
+Name: libtorrent-rasterbar
 Description: @_PROJECT_DESCRIPTION@
 Version: @_PROJECT_VERSION@
 Libs: -L${libdir} -l@_TARGET_OUTPUT_NAME@ @_interface_link_libraries@
