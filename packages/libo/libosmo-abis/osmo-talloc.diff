From 6eda430372edbf4dcebb9181ae7ef9f4daff544e Mon Sep 17 00:00:00 2001
From: Jan Engelhardt <jengelh@inai.de>
Date: Sun, 17 Feb 2013 21:18:44 +0100
Subject: [PATCH] build: link to talloc

The source files use talloc, so link to talloc.
---
 configure.ac    |    1 +
 src/Makefile.am |    2 +-
 2 files changed, 2 insertions(+), 1 deletion(-)

diff --git a/configure.ac b/configure.ac
index 35b8328..b962cf6 100644
--- a/configure.ac
+++ b/configure.ac
@@ -59,6 +59,7 @@ AC_SUBST(SYMBOL_VISIBILITY)
 dnl Generate the output
 AM_CONFIG_HEADER(config.h)
 
+PKG_CHECK_MODULES([TALLOC], [talloc])
 PKG_CHECK_MODULES(LIBOSMOCORE, libosmocore >= 1.0.0)
 PKG_CHECK_MODULES(LIBOSMOVTY, libosmovty >= 1.0.0)
 PKG_CHECK_MODULES(LIBOSMOGSM, libosmogsm >= 1.0.0)
diff --git a/src/Makefile.am b/src/Makefile.am
index 3838a5a..0eefd22 100644
--- a/src/Makefile.am
+++ b/src/Makefile.am
@@ -7,7 +7,7 @@ TRAU_LIBVERSION=4:0:2
 AM_CPPFLAGS = $(all_includes) -I$(top_srcdir)/include -I$(top_builddir)
 AM_CFLAGS= -Wall $(LIBOSMOCORE_CFLAGS) $(LIBOSMOGSM_CFLAGS) $(LIBOSMOVTY_CFLAGS) $(LIBOSMOE1D_CFLAGS) $(COVERAGE_CFLAGS)
 AM_LDFLAGS = $(COVERAGE_LDFLAGS)
-COMMONLIBS = $(LIBOSMOCORE_LIBS) $(LIBOSMOGSM_LIBS) $(LIBOSMOVTY_LIBS) $(LIBOSMOE1D_LIBS)
+COMMONLIBS = $(TALLOC_LIBS) $(LIBOSMOCORE_LIBS) $(LIBOSMOGSM_LIBS) $(LIBOSMOVTY_LIBS) $(LIBOSMOE1D_LIBS)
 
 lib_LTLIBRARIES = libosmoabis.la libosmotrau.la
 
