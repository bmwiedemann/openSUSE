From 6eda430372edbf4dcebb9181ae7ef9f4daff544e Mon Sep 17 00:00:00 2001
From: Jan Engelhardt <jengelh@inai.de>
Date: Sun, 17 Feb 2013 21:18:44 +0100
Subject: [PATCH] build: link to talloc

The source files use talloc, so link to talloc.
---
 configure.ac    |    1 +
 src/Makefile.am |    2 +-
 2 files changed, 2 insertions(+), 1 deletion(-)

Index: libosmo-abis-1.0.1/configure.ac
===================================================================
--- libosmo-abis-1.0.1.orig/configure.ac
+++ libosmo-abis-1.0.1/configure.ac
@@ -69,6 +69,7 @@ PKG_CHECK_MODULES(LIBOSMOVTY, libosmovty
 PKG_CHECK_MODULES(LIBOSMOGSM, libosmogsm >= 1.4.0)
 PKG_CHECK_MODULES(LIBOSMOCODEC, libosmocodec >= 1.4.0)
 PKG_CHECK_MODULES(ORTP, ortp >= 0.22.0)
+PKG_CHECK_MODULES([TALLOC], [talloc])
 
 AC_ARG_ENABLE([dahdi],
 	      AC_HELP_STRING([--disable-dahdi],
Index: libosmo-abis-1.0.1/src/Makefile.am
===================================================================
--- libosmo-abis-1.0.1.orig/src/Makefile.am
+++ libosmo-abis-1.0.1/src/Makefile.am
@@ -7,7 +7,7 @@ TRAU_LIBVERSION=5:0:3
 AM_CPPFLAGS = $(all_includes) -I$(top_srcdir)/include -I$(top_builddir)
 AM_CFLAGS= -Wall $(LIBOSMOCORE_CFLAGS) $(LIBOSMOGSM_CFLAGS) $(LIBOSMOVTY_CFLAGS) $(LIBOSMOE1D_CFLAGS) $(LIBOSMOCODEC_CFLAGS) $(COVERAGE_CFLAGS)
 AM_LDFLAGS = $(COVERAGE_LDFLAGS)
-COMMONLIBS = $(LIBOSMOCORE_LIBS) $(LIBOSMOGSM_LIBS) $(LIBOSMOVTY_LIBS) $(LIBOSMOE1D_LIBS) # libosmocodec not [yet] needed here
+COMMONLIBS = ${TALLOC_LIBS} $(LIBOSMOCORE_LIBS) $(LIBOSMOGSM_LIBS) $(LIBOSMOVTY_LIBS) $(LIBOSMOE1D_LIBS) # libosmocodec not [yet] needed here
 
 lib_LTLIBRARIES = libosmoabis.la libosmotrau.la
 
