diff -Nur old/src/vm.c new/src/vm.c
--- old/src/vm.c	2023-02-15 19:48:53.507676314 +0100
+++ new/src/vm.c	2023-02-15 19:49:00.159805055 +0100
@@ -2280,9 +2280,9 @@
           }
           if (ci->cci > CINFO_NONE) {
             ci = cipop(mrb);
+            mrb->exc = (struct RObject*)break_new(mrb, RBREAK_TAG_BREAK, proc, v);
             mrb_gc_arena_restore(mrb, ai);
             mrb->c->vmexec = FALSE;
-            mrb->exc = (struct RObject*)break_new(mrb, RBREAK_TAG_BREAK, proc, v);
             mrb->jmp = prev_jmp;
             MRB_THROW(prev_jmp);
           }
