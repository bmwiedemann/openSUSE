From 334e1381d3dbe8a5c9a5f3336a763a7820d734c6 Mon Sep 17 00:00:00 2001
From: Shawn W Dunn <sfalken@opensuse.org>
Date: Fri, 3 Oct 2025 15:32:45 -0700
Subject: [PATCH] Disable boost_system

No longer used in Boost > 1.66
---
 CMakeLists.txt                               | 2 +-
 examples/mir_demo_server/CMakeLists.txt      | 1 -
 src/core/CMakeLists.txt                      | 5 -----
 src/platforms/common/server/CMakeLists.txt   | 1 -
 tests/CMakeLists.txt                         | 2 --
 tests/integration-tests/CMakeLists.txt       | 1 -
 tests/mir_test_doubles/CMakeLists.txt        | 1 -
 tests/mir_test_framework/CMakeLists.txt      | 1 -
 tests/unit-tests/CMakeLists.txt              | 2 --
 tests/window_management_tests/CMakeLists.txt | 1 -
 10 files changed, 1 insertion(+), 16 deletions(-)

diff --git a/CMakeLists.txt b/CMakeLists.txt
index fcdfd24..d851137 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -164,7 +164,7 @@ enable_testing()
 find_package(PkgConfig)
 
 # Check for boost
-find_package(Boost 1.48.0 COMPONENTS system program_options filesystem iostreams REQUIRED)
+find_package(Boost 1.48.0 COMPONENTS program_options filesystem iostreams REQUIRED)
 
 add_compile_definitions(EGL_NO_X11)
 
diff --git a/examples/mir_demo_server/CMakeLists.txt b/examples/mir_demo_server/CMakeLists.txt
index 07c71d0..9e5f3db 100644
--- a/examples/mir_demo_server/CMakeLists.txt
+++ b/examples/mir_demo_server/CMakeLists.txt
@@ -26,5 +26,4 @@ mir_add_wrapped_executable(mir_demo_server
 target_link_libraries(mir_demo_server
   example-shell-lib
   exampleserverconfig
-  Boost::system
 )
diff --git a/src/core/CMakeLists.txt b/src/core/CMakeLists.txt
index 0173996..321da21 100644
--- a/src/core/CMakeLists.txt
+++ b/src/core/CMakeLists.txt
@@ -36,11 +36,6 @@ target_include_directories(mircore
 )
 
 
-target_link_libraries(mircore
-  PRIVATE
-    Boost::system
-)
-
 set(symbol_map ${CMAKE_CURRENT_SOURCE_DIR}/symbols.map)
 
 set_target_properties(mircore
diff --git a/src/platforms/common/server/CMakeLists.txt b/src/platforms/common/server/CMakeLists.txt
index fb39e34..69baa3b 100644
--- a/src/platforms/common/server/CMakeLists.txt
+++ b/src/platforms/common/server/CMakeLists.txt
@@ -33,6 +33,5 @@ target_link_libraries(server_platform_common
     mircommon
     mircore
     ${KMS_UTILS_STATIC_LIBRARY}
-    Boost::system
     PkgConfig::WAYLAND_SERVER
 )
diff --git a/tests/CMakeLists.txt b/tests/CMakeLists.txt
index ea67414..b7e44f4 100644
--- a/tests/CMakeLists.txt
+++ b/tests/CMakeLists.txt
@@ -138,7 +138,6 @@ PUBLIC
   mir-public-test-doubles
   mir-public-test-framework
 
-  Boost::system
   ${GTEST_BOTH_LIBRARIES}
 PRIVATE
   ${GMOCK_MAIN_LIBRARY}
@@ -152,7 +151,6 @@ PUBLIC
   mir-protected-test-framework
   mir-protected-test-doubles
 
-  Boost::system
   ${GTEST_BOTH_LIBRARIES}
 PRIVATE
   ${GMOCK_MAIN_LIBRARY}
diff --git a/tests/integration-tests/CMakeLists.txt b/tests/integration-tests/CMakeLists.txt
index 4b26a41..a3f0cbb 100644
--- a/tests/integration-tests/CMakeLists.txt
+++ b/tests/integration-tests/CMakeLists.txt
@@ -56,7 +56,6 @@ target_link_libraries(
 
   ${MIR_PLATFORM_REFERENCES}
   ${MIR_SERVER_REFERENCES}
-  Boost::system
   # GBM platform dependencies
   PkgConfig::DRM
   # Shared platform dependencies
diff --git a/tests/mir_test_doubles/CMakeLists.txt b/tests/mir_test_doubles/CMakeLists.txt
index aecb201..206e1e8 100644
--- a/tests/mir_test_doubles/CMakeLists.txt
+++ b/tests/mir_test_doubles/CMakeLists.txt
@@ -130,7 +130,6 @@ target_link_libraries(mir-test-doubles-static
   mir-protected-test-doubles
   mir-test-framework-static
 
-  Boost::system
   ${GMOCK_LIBRARIES}
   ${GMOCK_MAIN_LIBRARY}
   ${CMAKE_THREAD_LIBS_INIT} # Link in pthread.
diff --git a/tests/mir_test_framework/CMakeLists.txt b/tests/mir_test_framework/CMakeLists.txt
index 906d9bb..8be0cb9 100644
--- a/tests/mir_test_framework/CMakeLists.txt
+++ b/tests/mir_test_framework/CMakeLists.txt
@@ -116,7 +116,6 @@ target_link_libraries(mir-test-framework-static
   mir-stub-input-platform
   mir-protected-test-framework
   mir-public-test
-  Boost::system
   ${GTEST_BOTH_LIBRARIES}
   ${GMOCK_LIBRARIES}
   PkgConfig::UMOCKDEV
diff --git a/tests/unit-tests/CMakeLists.txt b/tests/unit-tests/CMakeLists.txt
index b7d27bc..8efb463 100644
--- a/tests/unit-tests/CMakeLists.txt
+++ b/tests/unit-tests/CMakeLists.txt
@@ -184,7 +184,6 @@ target_link_libraries(
 
   mircommon
 
-  Boost::system
   PkgConfig::LIBINPUT
   PkgConfig::WAYLAND_SERVER
   ${MIR_SERVER_REFERENCES}
@@ -218,7 +217,6 @@ target_link_libraries(
   mir-test-framework-static
   mir-umock-test-framework
 
-  Boost::system
   PkgConfig::UMOCKDEV
   PkgConfig::LIBINPUT
   ${MIR_SERVER_REFERENCES}
diff --git a/tests/window_management_tests/CMakeLists.txt b/tests/window_management_tests/CMakeLists.txt
index 6815209..7ef239b 100644
--- a/tests/window_management_tests/CMakeLists.txt
+++ b/tests/window_management_tests/CMakeLists.txt
@@ -30,7 +30,6 @@ target_link_libraries(mir_window_management_tests
   mircommon
   miral
 
-  Boost::system
   # GBM platform dependencies
   PkgConfig::DRM
   # Shared platform dependencies
-- 
2.51.0

