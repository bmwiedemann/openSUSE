Index: mercurial-7.1.1/doc/hgmanpage.py
===================================================================
--- mercurial-7.1.1.orig/doc/hgmanpage.py
+++ mercurial-7.1.1/doc/hgmanpage.py
@@ -53,8 +53,19 @@ from docutils import (
 
 try:
     import roman
+
+    to_roman = roman.toRoman
 except ImportError:
-    from docutils.utils import roman
+    try:
+        from docutils.utils import roman
+
+        to_roman = roman.toRoman
+    except ImportError:
+        # docutils 0.22
+        from docutils.utils._roman_numerals import RomanNumeral
+
+        to_roman = lambda ordinal: RomanNumeral(ordinal).to_uppercase()
+
 
 FIELD_LIST_INDENT = 7
 DEFINITION_LIST_INDENT = 7
@@ -349,7 +360,7 @@ class Translator(nodes.NodeVisitor):
                 elif self._style in ('loweralpha', 'upperalpha'):
                     return "%c." % self._cnt
                 elif self._style.endswith('roman'):
-                    res = roman.toRoman(self._cnt) + '.'
+                    res = to_roman(self._cnt) + '.'
                     if self._style.startswith('upper'):
                         return res.upper()
                     return res.lower()
