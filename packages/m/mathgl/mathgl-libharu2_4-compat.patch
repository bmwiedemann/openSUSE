---
 src/prc.cpp |    8 +++++++-
 1 file changed, 7 insertions(+), 1 deletion(-)

Index: mathgl-8.0.3/src/prc.cpp
===================================================================
--- mathgl-8.0.3.orig/src/prc.cpp
+++ mathgl-8.0.3/src/prc.cpp
@@ -36,6 +36,7 @@
 #include <hpdf.h>
 #include <hpdf_u3d.h>
 #include <hpdf_annotation.h>
+#include <hpdf_version.h>
 #endif // MGL_HAVE_PDF
 
 
@@ -959,7 +960,12 @@ void MGL_EXPORT mgl_write_prc(HMGL gr, c
 		HPDF_U3D_SetDefault3DView(u3d, "DefaultView");
 
 		//	Create annotation
-		annot = HPDF_Page_Create3DAnnot (page, rect, u3d );
+		annot
+#if HPDF_VERSION_ID >= 20400
+		= HPDF_Page_Create3DAnnot (page, rect, HPDF_FALSE, HPDF_FALSE, u3d, NULL);
+#else
+		= HPDF_Page_Create3DAnnot (page, rect, u3d);
+#endif
 //		annot = HPDF_Page_Create3DAnnot (page, rect, 0, 0, u3d, 0 );	for the new version ???
 
 		//  Enable toolbar
