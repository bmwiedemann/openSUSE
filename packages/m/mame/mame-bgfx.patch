diff -Pdpru mame-mame0252.orig/src/osd/modules/render/bgfx/shadermanager.cpp mame-mame0252/src/osd/modules/render/bgfx/shadermanager.cpp
--- mame-mame0252.orig/src/osd/modules/render/bgfx/shadermanager.cpp	2023-02-21 20:59:53.000000000 +0300
+++ mame-mame0252/src/osd/modules/render/bgfx/shadermanager.cpp	2023-03-30 12:59:56.277101437 +0300
@@ -85,7 +85,6 @@ std::string shader_manager::make_path_st
 	shader_path += PATH_SEPARATOR "shaders" PATH_SEPARATOR;
 	switch (bgfx::getRendererType())
 	{
-		case bgfx::RendererType::Noop:
 		case bgfx::RendererType::Direct3D9:
 			shader_path += "dx9";
 			break;
@@ -103,6 +102,7 @@ std::string shader_manager::make_path_st
 			shader_path += "metal";
 			break;
 
+		case bgfx::RendererType::Noop:
 		case bgfx::RendererType::OpenGL:
 			shader_path += "glsl";
 			break;
diff -Pdpru mame-mame0252.orig/src/osd/sdl/osdsdl.cpp mame-mame0252/src/osd/sdl/osdsdl.cpp
--- mame-mame0252.orig/src/osd/sdl/osdsdl.cpp	2023-02-21 20:59:53.000000000 +0300
+++ mame-mame0252/src/osd/sdl/osdsdl.cpp	2023-03-30 13:02:28.937468880 +0300
@@ -269,8 +269,13 @@ void sdl_osd_interface::init(running_mac
 	}
 
 	// bgfx does not work with wayland
-	if ((strcmp(SDL_GetCurrentVideoDriver(), "wayland") == 0) && ((strcmp(options().video(), "auto") == 0) || (strcmp(options().video(), "bgfx") == 0)))
-		fatalerror("Error: BGFX video does not work with wayland videodriver. Please change either of the options.");
+	if ((strcmp(SDL_GetCurrentVideoDriver(), "wayland") == 0) && (strcmp(options().video(), "bgfx") == 0))
+	{
+		osd_printf_verbose("BGFX does not work with wayland, overriding SDL videodriver to '%s' ...\n", "x11");
+		SDL_QuitSubSystem(SDL_INIT_VIDEO);
+		osd_setenv(SDLENV_VIDEODRIVER, "x11", 1);
+		SDL_InitSubSystem(SDL_INIT_VIDEO);
+	}
 
 	osd_sdl_info();
 
