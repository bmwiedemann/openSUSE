-------------------------------------------------------------------
Thu Jan  7 16:07:56 UTC 2021 - Martin Hauke <mardnh@gmx.de>

- Update to version 4.2
  Major bug fix and feature release. Support for static routes and
  improved configuration support for IGMP.
  Changes
  * Support for controlling IGMP Last Member Query Count using
    the igmp-robustness setting in mrouted.conf, default 2.
  * Support for tuning the IGMP Last Member Query Interval using
    a new setting igmp-query-last-member-interval <1-1024>.
  * Support for static multicast routing (*,G), similar to SMCRoute
  * New phyint static-group GROUP setting in mrouted.conf
  * multiplestatements supported, but no ranges (yet).
  * Proper tracking of lower-version host members (IGMP), when a
    lower version host is detected for a group, a timer is set
    according to RFC3376, and while in this compat mode
    higher-version IGMP is not allowed to change state. E.g., in
    IGMPv1 compat, IGMPv2 LEAVE is * ignored for the group,
    similar to the phyint being in igmpv1 mode.
  * Allow IGMP reports from source address 0.0.0.0, required as
    per RFC3376, sec. 4.2.13, not supported until now. This
    should greatly improve interop with IGMP snooping switches and
    DHCP clients that have not yet received a lease
  * Improved support for running mroutectl under watch(1). No more
    artifacts due to unknown ANSI escape sequences to probe width
  * Delayed PID file creation until after initial startup delay,
    there is nobody home until after that delay, so no point in
    announcing availability until after that
  Fixes
  *IGMPv3 membership reports were parsed incorrectly.
    The problem affects users that use source specific multicast
    join, i.e., (S,G) join/leave using IGMPv3. Support for
    IGMPv3 was introduced in mrouted v4.0
  * Malformed group-specific IGMP query. The IGMP header no longer
    had the group field set, despite the query being addressed to
    a specific group. Regression introduced in v4.0
  * The optional phyint flag igmpv3 did not work.
  * Fix buffer overrun in descriptor poll() handling
  * Fix double-close on SIGHUP, Linux systems only
  * Various non-critical memory leak fixes, critical for no-MMU
    systems

-------------------------------------------------------------------
Fri Oct  2 15:47:42 UTC 2020 - Martin Hauke <mardnh@gmx.de>

- Update to version 4.1
  Changes
  * Automatically detect and add `altnet` to interfaces with
    multiple addresses, possible thanks to work on.
  * Reduce number of exposed aliases to debug sub-systems in
    online help text and man page. Only primary name, as of
    mrouted v3.9-beta3.
  * Removed noisy `timer` sub-system from `-d all`, use
    `-d all, timer`.
  Fixes
  * Fix update of `mrouted.genid` on SIGHUP and reboot.  mrouted
    replaced contents with the value zero (0), causing a zero
    genid in DVMRP as well, which likely caused peering issues
    with some implementations
  * Workaround for older autoconf without `--runstatedir` support
  * Fix double free in `pidfile()`
  * Cannot disable multicast routing in kernel: Permission denied
    when starting up.
  * Refactor interface probing and bringup. Fixes issue with the
    `no phyint` config option not working, introduced in v4.0.
  * Fix bad path for mrouted.genid, should be in `/var/lib/misc`
    on Linux and `/var/db` on *BSD.
  * Document and improve error message when running out of IGMP
    groups on Linux.
  * Detect and warn if multicast ingresses an unknown vif

-------------------------------------------------------------------
Wed Jun 10 14:41:41 UTC 2020 - Martin Hauke <mardnh@gmx.de>

- Update to version 4.0
  Major release with full IGMPv3 (ASM) support and a new
  mroutectl tool.
  Note: command line options have been changed!
  Changes
  * Support for IGMPv3, both sending queries and accepting
    membership reports.
  * Support for configurable IGMP query interval.
  * Support for configurable IGMP robustness variable.
  * Incompatible command line option refactor.
  * New directive in mrouted.conf: no phyint, reverses the default
    behavior of mrouted. Interfaces can then selectively be enabled
  * Support for disabling the IP router-alert option
    md unit file.
  * Introduce mroutectl, a helpful tool to interact with mrouted.
    This completely replaces mrouted.cache and mrouted.dump,
    including SIGUSR1 and SIGUSR2 signals, which are now ignored.
  * The mrouted.pid file, and the new mrouted.sock file, are now
    located in /var/run
  * Major cleanup of logging directives read from the command line,
    and from mroutectl. Use -d ?, and -l ? to list alternatives.
  Fixes
  * Fix #20: Replace obsolete gethostbyname() w/ getaddrinfo()
  * Fix #25: Save mrouted.genid to persistent store in /var/lib
    instead of /var/run
  * Fixed libc portability issues, e.g. GNU:isms like %m etc.
  * Import OpenBSD fix to daemon() equivalent, use /dev/null for
    stdin, stdout and stderr.
  * Use clock_gettime(), with monotonic clock, instead of the
    unsafe gethostbyname(), for all non-date-printing code paths.
    Only for mrouted, other tools have not been changed.
  * Fix lots of invalid format specifiers
  * Fix memory leaks in mrouted on SIGHUP.
- Package systemd service file

-------------------------------------------------------------------
Fri Jun 29 12:08:45 UTC 2018 - mardnh@gmx.de

- Fix license

-------------------------------------------------------------------
Mon Jun 18 13:18:09 UTC 2018 - mardnh@gmx.de

- Initial package, version 3.9.8
