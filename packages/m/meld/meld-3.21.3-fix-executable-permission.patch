From 710972cf25b5b677f862e781b7e058ef828c3cd4 Mon Sep 17 00:00:00 2001
From: Kai Willadsen <kai.willadsen@gmail.com>
Date: Fri, 19 Aug 2022 07:41:25 +1000
Subject: [PATCH] Fix shebang normalisation to maintain script mode

---
 meson_shebang_normalisation.py | 3 +++
 1 file changed, 3 insertions(+)

diff --git a/meson_shebang_normalisation.py b/meson_shebang_normalisation.py
index 4cf18754..e126d8fb 100755
--- a/meson_shebang_normalisation.py
+++ b/meson_shebang_normalisation.py
@@ -15,6 +15,9 @@ def main():
     lines[0] = "".join(lines[0].split("env "))
     out_path.write_text("".join(lines))
 
+    stat = in_path.stat()
+    out_path.chmod(stat.st_mode)
+
 
 if __name__ == "__main__":
     main()
-- 
GitLab

