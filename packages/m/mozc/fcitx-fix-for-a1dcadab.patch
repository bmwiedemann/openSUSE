diff --git a/src/unix/fcitx/eim.cc b/src/unix/fcitx/eim.cc
index ce3e205..10e21e1 100644
--- a/src/unix/fcitx/eim.cc
+++ b/src/unix/fcitx/eim.cc
@@ -94,7 +94,7 @@ static void* FcitxMozcCreate(FcitxInstance* instance)
     char argv0[] = "fcitx_mozc";
     char *_argv[] = {  argv0 };
     char **argv = _argv;
-    mozc::InitMozc(argv[0], &argc, &argv, true);
+    mozc::InitMozc(argv[0], &argc, &argv);
     mozcState->mozc = new mozc::fcitx::FcitxMozc(
         instance,
         mozc::fcitx::MozcConnection::CreateMozcConnection(),
diff --git a/src/unix/fcitx/surrounding_text_util.cc b/src/unix/fcitx/surrounding_text_util.cc
index d6ccc34..9911e5f 100644
--- a/src/unix/fcitx/surrounding_text_util.cc
+++ b/src/unix/fcitx/surrounding_text_util.cc
@@ -229,12 +229,11 @@ bool GetSurroundingText(FcitxInstance* instance,
 
     const size_t selection_start = std::min(cursor_pos, anchor_pos);
     const size_t selection_length = std::abs(info->relative_selected_length);
-    Util::SubStringPiece(surrounding_text, 0, selection_start)
-       .CopyToString(&info->preceding_text);
-    Util::SubStringPiece(surrounding_text, selection_start, selection_length)
-       .CopyToString(&info->selection_text);
-    Util::SubStringPiece(surrounding_text, selection_start + selection_length)
-       .CopyToString(&info->following_text);
+    const auto &selection_start_it = surrounding_text.begin() + selection_start;
+    const auto &selection_end_it = selection_start_it + selection_length;
+    info->preceding_text.assign(surrounding_text.begin(), selection_start_it);
+    info->selection_text.assign(selection_start_it, selection_end_it);
+    info->following_text.assign(selection_end_it, surrounding_text.end());
     return true;
 }
 
