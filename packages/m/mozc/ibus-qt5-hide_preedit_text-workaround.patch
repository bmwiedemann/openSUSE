--- mozc-2.16.2037.102/unix/ibus/preedit_handler.cc.org	2015-03-04 15:36:31.902548226 +0900
+++ mozc-2.16.2037.102/unix/ibus/preedit_handler.cc	2015-09-22 23:14:48.097972613 +0900
@@ -123,13 +123,12 @@ PreeditHandler::~PreeditHandler() {
 
 bool PreeditHandler::Update(IBusEngine *engine,
                             const commands::Output &output) {
-  if (!output.has_preedit()) {
-    ibus_engine_hide_preedit_text(engine);
-    return true;
-  }
+  // Send an empty IBusText if has_preedit() is false
+  // because Qt5 does not support hide_preedit_text
   IBusText *text = ComposePreeditText(output.preedit());
   ibus_engine_update_preedit_text_with_mode(engine, text, CursorPos(output),
-                                            TRUE, IBUS_ENGINE_PREEDIT_COMMIT);
+                                            output.has_preedit(),
+                                            IBUS_ENGINE_PREEDIT_COMMIT);
   // |text| is released by ibus_engine_update_preedit_text.
   return true;
 }
