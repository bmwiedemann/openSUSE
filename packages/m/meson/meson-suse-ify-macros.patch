Index: meson-0.51.0/data/macros.meson
===================================================================
--- meson-0.51.0.orig/data/macros.meson
+++ meson-0.51.0/data/macros.meson
@@ -1,6 +1,8 @@
 %__meson %{_bindir}/meson
 %__meson_wrap_mode nodownload
 %__meson_auto_features enabled
+%_vpath_srcdir .
+%_vpath_builddir build
 
 %_smp_mesonflags %([ -z "$MESON_BUILD_NCPUS" ] \\\
 	&& MESON_BUILD_NCPUS="`/usr/bin/getconf _NPROCESSORS_ONLN`"; \\\
@@ -9,7 +11,11 @@
         if [ "$MESON_BUILD_NCPUS" -gt 1 ]; then echo "--num-processes $MESON_BUILD_NCPUS"; fi)
 
 %meson \
-    %set_build_flags \
+    export LANG=C.UTF-8                      \
+    export CFLAGS="${CFLAGS:-%optflags}"     \
+    export CXXFLAGS="${CXXFLAGS:-%optflags}" \
+    export FFLAGS="${FFLAGS:-%optflags}"     \
+    export FCFLAGS="${FCFLAGS:-%optflags}"   \
     %{shrink:%{__meson} \
         --buildtype=plain \
         --prefix=%{_prefix} \
@@ -31,12 +37,15 @@
 	%{nil}}
 
 %meson_build \
+    export LANG=C.UTF-8                      \
     %ninja_build -C %{_vpath_builddir}
 
 %meson_install \
+    export LANG=C.UTF-8                      \
     %ninja_install -C %{_vpath_builddir}
 
 %meson_test \
+    export LANG=C.UTF-8                      \
     %{shrink: %{__meson} test \
         -C %{_vpath_builddir} \
         %{?_smp_mesonflags} \
