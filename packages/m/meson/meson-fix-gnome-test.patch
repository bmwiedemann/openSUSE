From 5157ef0f2c8ca4074d91e345b53abe60f014b543 Mon Sep 17 00:00:00 2001
From: Mike Gorse <mgorse@suse.com>
Date: Fri, 26 Jun 2020 11:45:30 -0500
Subject: [PATCH] test: fix enum generation for GNOME

Fixes: #7252
---
 test cases/frameworks/7 gnome/mkenums/meson.build | 8 ++++++++
 1 file changed, 8 insertions(+)

diff --git a/test cases/frameworks/7 gnome/mkenums/meson.build b/test cases/frameworks/7 gnome/mkenums/meson.build
index af4a9017e..3d7adf052 100644
--- a/test cases/frameworks/7 gnome/mkenums/meson.build	
+++ b/test cases/frameworks/7 gnome/mkenums/meson.build	
@@ -126,6 +126,14 @@ enums5 = gnome.mkenums_simple('enums5', sources : 'meson-sample.h',
                               install_header : true,
                               decorator : 'MESON_EXPORT',
                               header_prefix : '#include "meson-decls.h"')
+
+conf = configuration_data()
+conf.set('ENUM_FILE', 'enums5.h')
+main = configure_file(
+  input : 'main.c',
+  output : 'main5.c',
+  configuration : conf)
+
 enumexe5 = executable('enumprog5', main, enums5, dependencies : gobj)
 
 # Generate template then use as input to mkenums
-- 
2.27.0

