Index: mesa-22.3.5/meson.build
===================================================================
--- mesa-22.3.5.orig/meson.build
+++ mesa-22.3.5/meson.build
@@ -2141,9 +2141,11 @@ if with_platform_x11
     endif
   endif
   if with_any_vk or with_egl or (with_glx == 'dri' and with_dri_platform == 'drm')
+    dep_x11_xcb = dependency('x11-xcb')
     dep_xcb_dri2 = dependency('xcb-dri2', version : '>= 1.8')
 
     if with_dri3
+      dep_xcb = dependency('xcb')
       dep_xcb_dri3 = dependency('xcb-dri3')
       dep_xcb_present = dependency('xcb-present')
       # until xcb-dri3 has been around long enough to make a hard-dependency:
Index: mesa-22.3.5/src/loader/meson.build
===================================================================
--- mesa-22.3.5.orig/src/loader/meson.build
+++ mesa-22.3.5/src/loader/meson.build
@@ -28,7 +28,7 @@ if with_platform_x11 and with_dri3
     include_directories : [inc_include, inc_src],
     dependencies : [
       dep_libdrm, dep_xcb_dri3, dep_xcb_present, dep_xcb_sync, dep_xshmfence,
-      dep_xcb_xfixes, dep_xcb_xrandr,
+      dep_xcb_xfixes, dep_xcb_xrandr, dep_xcb,
     ],
     build_by_default : false,
   )
