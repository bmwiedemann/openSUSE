Index: mesa-23.1.1/meson.build
===================================================================
--- mesa-23.1.1.orig/meson.build
+++ mesa-23.1.1/meson.build
@@ -1966,9 +1966,11 @@ if with_platform_x11
     endif
   endif
   if with_any_vk or with_egl or (with_glx == 'dri' and with_dri_platform == 'drm')
+    dep_x11_xcb = dependency('x11-xcb')
     dep_xcb_dri2 = dependency('xcb-dri2', version : '>= 1.8')
 
     if with_dri3
+      dep_xcb = dependency('xcb')
       dep_xcb_dri3 = dependency('xcb-dri3')
       dep_xcb_present = dependency('xcb-present')
       # until xcb-dri3 has been around long enough to make a hard-dependency:
Index: mesa-23.1.1/src/loader/meson.build
===================================================================
--- mesa-23.1.1.orig/src/loader/meson.build
+++ mesa-23.1.1/src/loader/meson.build
@@ -46,6 +46,6 @@ libloader = static_library(
   c_args : loader_c_args,
   gnu_symbol_visibility : 'hidden',
   include_directories : [inc_include, inc_src, inc_util],
-  dependencies : [dep_libdrm, dep_thread, dep_xcb_xrandr],
+  dependencies : [dep_libdrm, dep_thread, dep_xcb_xrandr, dep_xcb],
   build_by_default : false,
 )
