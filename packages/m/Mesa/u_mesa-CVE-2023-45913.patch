 src/glx/dri2_glx.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)
--- a/src/glx/dri2_glx.c
+++ b/src/glx/dri2_glx.c
@@ -1399,7 +1399,7 @@ dri2GetGlxDrawableFromXDrawableId(Displa
    struct dri2_display *pdp = (struct dri2_display *) d->dri2Display;
    __GLXDRIdrawable *pdraw;
 
-   if (__glxHashLookup(pdp->dri2Hash, id, (void *) &pdraw) == 0)
+   if (pdp && __glxHashLookup(pdp->dri2Hash, id, (void *) &pdraw) == 0)
       return pdraw;
 
    return NULL;
