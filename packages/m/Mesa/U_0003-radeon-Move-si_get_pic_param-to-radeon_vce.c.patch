From b7f975980916d670dcfc280af1678f4439a59d2f Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Timur=20Krist=C3=B3f?= <timur.kristof@gmail.com>
Date: Tue, 21 Jan 2020 16:04:33 +0100
Subject: [PATCH] radeon: Move si_get_pic_param to radeon_vce.c
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

Signed-off-by: Timur Kristóf <timur.kristof@gmail.com>
Reviewed-by: Marek Olšák <marek.olsak@amd.com>
Part-of: <https://gitlab.freedesktop.org/mesa/mesa/merge_requests/3488>
---
 src/gallium/drivers/radeon/radeon_vce.c | 4 ++++
 src/gallium/drivers/radeon/radeon_vce.h | 4 ----
 2 files changed, 4 insertions(+), 4 deletions(-)

diff --git a/src/gallium/drivers/radeon/radeon_vce.c b/src/gallium/drivers/radeon/radeon_vce.c
index 84d3c1e2fa4..652b4250654 100644
--- a/src/gallium/drivers/radeon/radeon_vce.c
+++ b/src/gallium/drivers/radeon/radeon_vce.c
@@ -48,6 +48,10 @@
 #define FW_52_8_3 ((52 << 24) | (8 << 16) | (3 << 8))
 #define FW_53 (53 << 24)
 
+/* version specific function for getting parameters */
+static void (*si_get_pic_param)(struct rvce_encoder *enc,
+                                struct pipe_h264_enc_picture_desc *pic) = NULL;
+
 /**
  * flush commands to the hardware
  */
diff --git a/src/gallium/drivers/radeon/radeon_vce.h b/src/gallium/drivers/radeon/radeon_vce.h
index cf625e6fed7..b5cfe178061 100644
--- a/src/gallium/drivers/radeon/radeon_vce.h
+++ b/src/gallium/drivers/radeon/radeon_vce.h
@@ -437,10 +437,6 @@ void si_vce_50_init(struct rvce_encoder *enc);
 /* init vce fw 52 specific callbacks */
 void si_vce_52_init(struct rvce_encoder *enc);
 
-/* version specific function for getting parameters */
-void (*si_get_pic_param)(struct rvce_encoder *enc,
-                      struct pipe_h264_enc_picture_desc *pic);
-
 /* get parameters for vce 40.2.2 */
 void si_vce_40_2_2_get_param(struct rvce_encoder *enc,
 			     struct pipe_h264_enc_picture_desc *pic);
-- 
2.16.4

