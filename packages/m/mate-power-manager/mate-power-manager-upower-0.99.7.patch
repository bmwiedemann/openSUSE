--- a/configure.ac
+++ b/configure.ac
@@ -77,7 +77,7 @@ LIBPANEL_REQUIRED=1.17.0
 XRANDR_REQUIRED=1.3.0
 XPROTO_REQUIRED=7.0.15
 CANBERRA_REQUIRED=0.10
-UPOWER_REQUIRED=0.99.8
+UPOWER_REQUIRED=0.99.7
 
 dnl ---------------------------------------------------------------------------
 dnl - Check library dependencies
--- a/src/gpm-engine.c
+++ b/src/gpm-engine.c
@@ -536,7 +536,12 @@ gpm_engine_coldplug_idle_cb (GpmEngine *
 	gpm_engine_recalculate_state (engine);
 
 	/* add to database */
+#if UP_CHECK_VERSION(0, 99, 8)
 	array = up_client_get_devices2 (engine->priv->client);
+#else
+	array = up_client_get_devices (engine->priv->client);
+	g_ptr_array_set_free_func (array, (GDestroyNotify) g_object_unref);
+#endif
 	for (i=0;i<array->len;i++) {
 		device = g_ptr_array_index (array, i);
 		gpm_engine_device_add (engine, device);
--- a/src/gpm-prefs-core.c
+++ b/src/gpm-prefs-core.c
@@ -807,7 +807,12 @@ gpm_prefs_init (GpmPrefs *prefs)
 	brightness = gpm_brightness_new ();
 	prefs->priv->has_lcd = gpm_brightness_has_hw (brightness);
 	g_object_unref (brightness);
+#if UP_CHECK_VERSION(0, 99, 8)
 	devices = up_client_get_devices2 (prefs->priv->client);
+#else
+	devices = up_client_get_devices (prefs->priv->client);
+	g_ptr_array_set_free_func (devices, (GDestroyNotify) g_object_unref);
+#endif
 	for (i=0; i<devices->len; i++) {
 		device = g_ptr_array_index (devices, i);
 		g_object_get (device,
--- a/src/gpm-statistics.c
+++ b/src/gpm-statistics.c
@@ -1764,7 +1764,12 @@ main (int argc, char *argv[])
 
 	wakeups = up_wakeups_new ();
 	g_signal_connect (wakeups, "data-changed", G_CALLBACK (gpm_stats_data_changed_cb), NULL);
+#if UP_CHECK_VERSION(0, 99, 8)
 	devices = up_client_get_devices2 (client);
+#else
+	devices = up_client_get_devices (client);
+	g_ptr_array_set_free_func (devices, (GDestroyNotify) g_object_unref);
+#endif
 
 	/* add devices in visually pleasing order */
 	for (j=0; j<UP_DEVICE_KIND_LAST; j++) {
