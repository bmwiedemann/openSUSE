From 954e094faacdacad6d82905d2f0a674c3e37fbec Mon Sep 17 00:00:00 2001
From: Simone Caronni <scaronni@nvidia.com>
Date: Thu, 19 Sep 2024 16:00:09 +0200
Subject: [PATCH 8/9] Add ICD json file

---
 src/10_nvidia_wayland.json | 6 ++++++
 src/meson.build            | 3 +++
 2 files changed, 9 insertions(+)
 create mode 100644 src/10_nvidia_wayland.json

diff --git a/src/10_nvidia_wayland.json b/src/10_nvidia_wayland.json
new file mode 100644
index 0000000..c08a641
--- /dev/null
+++ b/src/10_nvidia_wayland.json
@@ -0,0 +1,6 @@
+{
+    "file_format_version" : "1.0.0",
+    "ICD" : {
+        "library_path" : "libnvidia-egl-wayland.so.1"
+    }
+}
diff --git a/src/meson.build b/src/meson.build
index 704632b..1f1ca34 100644
--- a/src/meson.build
+++ b/src/meson.build
@@ -86,3 +86,6 @@ egl_wayland = library('nvidia-egl-wayland',
     version : meson.project_version(),
     install : true,
 )
+
+install_data('10_nvidia_wayland.json',
+    install_dir: '@0@/egl/egl_external_platform.d'.format(get_option('datadir')))
-- 
2.43.0

