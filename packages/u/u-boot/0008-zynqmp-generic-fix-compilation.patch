From c34095d98fe8d6422ea8a71e8f1df9e5a7caf2c0 Mon Sep 17 00:00:00 2001
From: Matthias Brugger <mbrugger@suse.com>
Date: Tue, 5 Mar 2019 18:09:04 +0100
Subject: [PATCH] zynqmp: generic: fix compilation

Fix compilation by enabling the corresponding
configuration options.

Signed-off-by: Matthias Brugger <mbrugger@suse.com>
---
 configs/xilinx_zynqmp_generic_defconfig | 2 ++
 include/configs/xilinx_zynqmp_generic.h | 5 -----
 2 files changed, 2 insertions(+), 5 deletions(-)

diff --git a/configs/xilinx_zynqmp_generic_defconfig b/configs/xilinx_zynqmp_generic_defconfig
index ea2be0c9cc..0910feaa3c 100644
--- a/configs/xilinx_zynqmp_generic_defconfig
+++ b/configs/xilinx_zynqmp_generic_defconfig
@@ -78,7 +78,9 @@ CONFIG_USB_DWC3_GADGET=y
 CONFIG_USB_ULPI_VIEWPORT=y
 CONFIG_USB_ULPI=y
 CONFIG_USB_STORAGE=y
+CONFIG_USB_DWC3_GENERIC=y
 CONFIG_USB_GADGET=y
+CONFIG_USB_GADGET_DOWNLOAD=y
 CONFIG_USB_GADGET_MANUFACTURER="Xilinx"
 CONFIG_USB_GADGET_VENDOR_NUM=0x03FD
 CONFIG_USB_GADGET_PRODUCT_NUM=0x0300
diff --git a/include/configs/xilinx_zynqmp_generic.h b/include/configs/xilinx_zynqmp_generic.h
index 5e3a1240c6..1ab2370c2a 100644
--- a/include/configs/xilinx_zynqmp_generic.h
+++ b/include/configs/xilinx_zynqmp_generic.h
@@ -11,11 +11,6 @@
 #ifndef __CONFIG_ZYNQMP_GENERIC_H
 #define __CONFIG_ZYNQMP_GENERIC_H
 
-/* This file should disappear as soon as xhci is converted to DT enumerated */
-
-#define CONFIG_ZYNQMP_XHCI_LIST {ZYNQMP_USB0_XHCI_BASEADDR, \
-				 ZYNQMP_USB1_XHCI_BASEADDR}
-
 #include <configs/xilinx_zynqmp.h>
 
 #endif /* __CONFIG_ZYNQMP_GENERIC_H */
