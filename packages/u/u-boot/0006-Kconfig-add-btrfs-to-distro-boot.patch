From e8c616bd70a9b1bc9a087c9832c9ee2c77e51806 Mon Sep 17 00:00:00 2001
From: Guillaume Gardet <guillaume.gardet@arm.com>
Date: Wed, 5 Apr 2023 14:25:29 +0200
Subject: [PATCH] Kconfig: add btrfs to distro boot

Some distributions use btrfs as the default file system.
Enable btrfs support by default when using distro boot for all
architectures but riscv, as it breaks compilation due to size problems.

Signed-off-by: Matthias Brugger <mbrugger@suse.com>
---
 boot/Kconfig | 1 +
 1 file changed, 1 insertion(+)

diff --git a/boot/Kconfig b/boot/Kconfig
index a643a3d128..d180dd2a9c 100644
--- a/boot/Kconfig
+++ b/boot/Kconfig
@@ -875,6 +875,7 @@ config DISTRO_DEFAULTS
 	select CMD_SYSBOOT
 	select HUSH_PARSER
 	select SYS_LONGHELP
+	imply CMD_BTRFS if !RISCV && !MIPS
 	help
 	  Select this to enable various options and commands which are suitable
 	  for building u-boot for booting general purpose Linux distributions.
