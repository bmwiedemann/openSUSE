From: Jiri Slaby <jslaby@suse.cz>
Date: Tue, 19 Mar 2024 09:54:52 +0100
Subject: compat: add deprecated KVM IOCTL definitions
Git-repo: https://github.com/jirislaby/trinity
Git-commit: 13ad68f3d5be5980c3ce3e91eca4dfd7533192b6
Patch-mainline: submitted, https://github.com/kernelslacker/trinity/pull/48
References: kernel 6.8 & 6.9

They were dropped in 6.8 by commit a5d3df8ae13f (KVM: remove deprecated
UAPIs).

Signed-off-by: Jiri Slaby <jslaby@suse.cz>
---
 include/compat.h | 24 ++++++++++++++++++++++++
 1 file changed, 24 insertions(+)

diff --git a/include/compat.h b/include/compat.h
index 05cf3b01..33132e22 100644
--- a/include/compat.h
+++ b/include/compat.h
@@ -1049,6 +1049,30 @@ struct kvm_ppc_pvinfo {
 #ifndef KVM_ASSIGN_SET_INTX_MASK
 #define KVM_ASSIGN_SET_INTX_MASK  _IOW(KVMIO,  0xa4, struct kvm_assigned_pci_dev)
 #endif
+#ifndef KVM_ASSIGN_PCI_DEVICE
+#define KVM_ASSIGN_PCI_DEVICE     _IOR(KVMIO,  0x69, struct kvm_assigned_pci_dev)
+#endif
+#ifndef KVM_ASSIGN_IRQ
+#define KVM_ASSIGN_IRQ            _IOR(KVMIO, 0x70, struct kvm_assigned_irq)
+#endif
+#ifndef KVM_ASSIGN_DEV_IRQ
+#define KVM_ASSIGN_DEV_IRQ        _IOW(KVMIO, 0x70, struct kvm_assigned_irq)
+#endif
+#ifndef KVM_DEASSIGN_PCI_DEVICE
+#define KVM_DEASSIGN_PCI_DEVICE   _IOW(KVMIO,  0x72, struct kvm_assigned_pci_dev)
+#endif
+#ifndef KVM_ASSIGN_SET_MSIX_NR
+#define KVM_ASSIGN_SET_MSIX_NR    _IOW(KVMIO,  0x73, struct kvm_assigned_msix_nr)
+#endif
+#ifndef KVM_ASSIGN_SET_MSIX_ENTRY
+#define KVM_ASSIGN_SET_MSIX_ENTRY _IOW(KVMIO,  0x74, struct kvm_assigned_msix_entry)
+#endif
+#ifndef KVM_DEASSIGN_DEV_IRQ
+#define KVM_DEASSIGN_DEV_IRQ      _IOW(KVMIO,  0x75, struct kvm_assigned_irq)
+#endif
+#ifndef KVM_DEBUG_GUEST
+#define KVM_DEBUG_GUEST           _IOW(KVMIO, 0x87, int)
+#endif
 
 #ifndef KVM_GET_DEBUGREGS
 struct kvm_debugregs {
-- 
2.45.0

