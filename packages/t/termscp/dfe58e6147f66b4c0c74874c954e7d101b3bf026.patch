From dfe58e6147f66b4c0c74874c954e7d101b3bf026 Mon Sep 17 00:00:00 2001
From: veeso <christian.visintin@veeso.dev>
Date: Mon, 22 Jul 2024 10:36:16 +0200
Subject: [PATCH] fix: tokio rt builder

---
 Cargo.toml                  | 2 +-
 src/filetransfer/builder.rs | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/Cargo.toml b/Cargo.toml
index cba5502c..f958faee 100644
--- a/Cargo.toml
+++ b/Cargo.toml
@@ -76,7 +76,7 @@ simplelog = "^0.12"
 ssh2-config = "^0.2"
 tempfile = "^3.4"
 thiserror = "^1"
-tokio = { version = "1", features = ["rt"] }
+tokio = { version = "=1.38.1", features = ["rt"] }
 toml = "^0.8"
 tui-realm-stdlib = "^1.3.1"
 tuirealm = "^1.9.1"
diff --git a/src/filetransfer/builder.rs b/src/filetransfer/builder.rs
index 041683f9..b4ae69d0 100644
--- a/src/filetransfer/builder.rs
+++ b/src/filetransfer/builder.rs
@@ -113,7 +113,7 @@ impl Builder {
     /// Build kube client
     fn kube_client(params: KubeProtocolParams) -> KubeFs {
         let rt = Arc::new(
-            tokio::runtime::Builder::new_multi_thread()
+            tokio::runtime::Builder::new_current_thread()
                 .worker_threads(1)
                 .enable_all()
                 .build()
