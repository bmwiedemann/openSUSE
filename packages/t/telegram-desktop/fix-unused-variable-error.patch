diff -Nur tdesktop-3.7.3-full/Telegram/ThirdParty/dispatch/src/BlocksRuntime/runtime.c new/Telegram/ThirdParty/dispatch/src/BlocksRuntime/runtime.c
--- tdesktop-3.7.3-full/Telegram/ThirdParty/dispatch/src/BlocksRuntime/runtime.c	2021-09-17 06:54:52.000000000 +0200
+++ new/Telegram/ThirdParty/dispatch/src/BlocksRuntime/runtime.c	2022-05-02 19:30:46.128231255 +0200
@@ -468,7 +468,6 @@
 // Old compiler SPI
 static void _Block_byref_release(const void *arg) {
     struct Block_byref *byref = (struct Block_byref *)arg;
-    int32_t refcount;
 
     // dereference the forwarding pointer since the compiler isn't doing this anymore (ever?)
     byref = byref->forwarding;
@@ -478,8 +477,7 @@
     if ((byref->flags & BLOCK_BYREF_NEEDS_FREE) == 0) {
         return; // stack or GC or global
     }
-    refcount = byref->flags & BLOCK_REFCOUNT_MASK;
-	os_assert(refcount);
+    os_assert(byref->flags & BLOCK_REFCOUNT_MASK);
     if (latching_decr_int_should_deallocate(&byref->flags)) {
         if (byref->flags & BLOCK_BYREF_HAS_COPY_DISPOSE) {
             struct Block_byref_2 *byref2 = (struct Block_byref_2 *)(byref+1);
