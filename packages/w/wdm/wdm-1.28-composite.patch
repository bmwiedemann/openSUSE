--- src/wdmLogin/Login.c
+++ src/wdmLogin/Login.c
@@ -1190,6 +1190,9 @@
 	rattr.render_mode = render_mode;
 	rattr.colors_per_channel = cpc;
 	/* use of scr->screen is temporary hack */
+	rattr.flags |= RC_VisualID;
+        rattr.visualid = DefaultVisual(WMScreenDisplay(scr), scr->screen)->visualid;
+	
 	rcontext = RCreateContext(WMScreenDisplay(scr), scr->screen, &rattr);
 	if(rcontext == NULL)
 	{
