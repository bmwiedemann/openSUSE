From dd8c9d7b00eebe28770fa0e2cd96126791765ea7 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Michal=20=C4=8Ciha=C5=99?= <michal@cihar.com>
Date: Wed, 17 Dec 2025 08:48:29 +0100
Subject: [PATCH] fix(vcs): use GIT_SSH_COMMAND to override ssh command

This has priority over GIT_SSH and the configuration, so is better
alternative for us, we don't want outside GIT_SSH_COMMAND or
configuration to override Weblate behavior.
---
 weblate/vcs/base.py | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/weblate/vcs/base.py b/weblate/vcs/base.py
index f0fd60d462d5..edd54c113b6d 100644
--- a/weblate/vcs/base.py
+++ b/weblate/vcs/base.py
@@ -190,7 +190,7 @@ def _getenv(environment: dict[str, str] | None = None) -> dict[str, str]:
             # Avoid Git traversing outside the data dir
             "GIT_CEILING_DIRECTORIES": data_path("vcs").as_posix(),
             # Use ssh wrapper
-            "GIT_SSH": SSH_WRAPPER.filename.as_posix(),
+            "GIT_SSH_COMMAND": SSH_WRAPPER.filename.as_posix(),
             "SVN_SSH": SSH_WRAPPER.filename.as_posix(),
         }
         if environment:
