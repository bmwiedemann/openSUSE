-------------------------------------------------------------------
Wed Aug 12 03:34:28 UTC 2020 - Bernhard Wiedemann <bwiedemann@suse.com>

- Add rspamd-gcc10-buildfix.patch for Factory
- Skip rspamd-moonjit.patch on SLE to fix build

-------------------------------------------------------------------
Thu Apr 16 20:49:12 UTC 2020 - Hans-Peter Jansen <hpj@urpla.net>

- apply rspamd-moonjit.patch in order to allow using moonjit

-------------------------------------------------------------------
Wed Apr  1 21:48:03 UTC 2020 - Wolfgang Rosenauer <wr@rosenauer.org>

- update to 2.5
  https://rspamd.com/announce/2020/04/01/rspamd-2.5.html

-------------------------------------------------------------------
Fri Feb 28 06:41:59 UTC 2020 - Wolfgang Rosenauer <wr@rosenauer.org>

- update to 2.4
  https://rspamd.com/announce/2020/02/26/rspamd-2.4.html

-------------------------------------------------------------------
Sun Feb  9 17:09:51 UTC 2020 - Wolfgang Rosenauer <wr@rosenauer.org>

- update to 2.3
  https://rspamd.com/announce/2020/02/04/rspamd-2.3.html

-------------------------------------------------------------------
Thu Nov 28 16:22:35 UTC 2019 - Marcus Rueckert <mrueckert@suse.de>

- only use hyperscan on x86_64

-------------------------------------------------------------------
Thu Nov 28 15:11:52 UTC 2019 - Marcus Rueckert <mrueckert@suse.de>

- update to 2.2
  https://rspamd.com/announce/2019/11/19/rspamd-2.2.html

-------------------------------------------------------------------
Mon Oct 28 16:52:41 UTC 2019 - Marcus Rueckert <mrueckert@suse.de>

- update to 2.1
  https://rspamd.com/announce/2019/10/28/rspamd-2.1.html
- dropped rspamd-fix-crash-on-startup.patch

-------------------------------------------------------------------
Sun Oct 13 20:30:34 UTC 2019 - Wolfgang Rosenauer <wr@rosenauer.org>

- update to 2.0
  https://rspamd.com/announce/2019/10/11/rspamd-2.0.html
  Please verify the upgrade notes for incompatible changes:
  https://rspamd.com/doc/migration.html#migration-to-rspamd-20
- changed build requires
- added rspamd-fix-crash-on-startup.patch to fix startup crash
  (https://github.com/rspamd/rspamd/issues/3079)

-------------------------------------------------------------------
Thu Jun  6 12:50:16 UTC 2019 - Wolfgang Rosenauer <wr@rosenauer.org>

- update to 1.9.4
  https://rspamd.com/changes.html#release-194-23-may-2019
  https://rspamd.com/announce/2019/05/13/rspamd-1.9.3.html

-------------------------------------------------------------------
Fri Apr 19 15:42:58 UTC 2019 - Michael Ströder <michael@stroeder.com>

- update to 1.9.2
  https://rspamd.com/announce/2019/04/16/rspamd-1.9.2.html
  https://rspamd.com/announce/2019/04/05/rspamd-1.9.1.html

-------------------------------------------------------------------
Wed Mar 13 17:03:30 UTC 2019 - Marcus Rueckert <mrueckert@suse.de>

- update to 1.9.0
  https://rspamd.com/announce/2019/03/12/rspamd-1.9.0.html

-------------------------------------------------------------------
Wed Jan 23 16:14:21 UTC 2019 - Marcus Rueckert <mrueckert@suse.de>

- overrides.d should be override.d, this might require changes to
  your configuration, please verify.

-------------------------------------------------------------------
Wed Jan 23 16:10:28 UTC 2019 - Marcus Rueckert <mrueckert@suse.de>

-  update to 1.8.3
   - [CritFix] Make flags mutually exclusive for mime parts
   - [CritFix] Strictly deny unencoded bad utf8 sequences in
     headers
   - [Feature] Add Kaspersky antivirus support
   - [Feature] Add method to get dkim results
   - [Feature] Add more words regexp classes
   - [Feature] Allow to choose words format in `rspamadm mime`
   - [Feature] Allow to get all types of words from Lua
   - [Feature] Allow to get task flags in C expressions
   - [Feature] Allow to require encryption when accepting
     connections
   - [Feature] Ignore bogus whitespaces in the words
   - [Feature] Implement more strict configuration tests
   - [Feature] Improve SPF results in Authentication-Results
   - [Feature] Support ClickHouse database
   - [Fix] Add failsafety for utf8 regexps
   - [Fix] Do not trigger BROKEN_CONTENT_TYPE on innocent text
     parts
   - [Fix] Emit error if connection has been terminated with no
     stop pattern
   - [Fix] Fix boundaries checks in embedded messages
   - [Fix] Fix double free
   - [Fix] Perform policy downgrade on sample out, add tests
   - [Fix] Properly escape utf8 regexps in hyperscan mode
   - [Fix] Selectors - attachments args condition
   - [Fix] Some fixes for raw parts
   - [Fix] Treat learning errors as non-fatal
   - [Fix] Use tld when looking for DKIM domains
   - [Project] Words unicode structure rework
   - [Project] Add preliminary Redis Sentinel support
   - [Project] Improve Authentication-Results header
   - [Project] Rework DKIM checks results
   - [Project] Use more generalised API to produce meta words

-------------------------------------------------------------------
Mon Nov 19 13:17:01 UTC 2018 - Marcus Rueckert <mrueckert@suse.de>

- update to 1.8.2
  - [Conf] Add DWL support in the default configuration
  - [Conf] Disable rspamd_update by default (again)
  - [Conf] Fix configuration sample for ratelimit
  - [CritFix] Disable broken url tags by default
  - [CritFix] Fix \0 processing when doing RSA sign
  - [CritFix] Fix adding symbols to their primary groups
  - [Feature] Add `rspamadm cookie` utility
  - [Feature] Add specialised functions for generating encrypted cookies
  - [Feature] Add support of cookies in replies module
  - [Feature] Add support of words regexps
  - [Feature] Allow to add 3rd party clang plugins
  - [Feature] Allow to create lua regexps from glob or plain patterns
  - [Feature] Allow to set custom limits for upstream lists
  - [Feature] Detect orphaned parts and attach them to message
  - [Feature] Filter tokens in bayes
  - [Feature] Fold b= value when doing arc sealing
  - [Feature] Ignore cookies in the future and too old in the past
  - [Feature] Skip stop words in statistics
  - [Feature] Store stop words and allow to query them
  - [Feature] Support query arguments in controller's custom commands
  - [Feature] Tune upstream limits in Rspamd proxy
  - [Feature] Use different callback symbols for different uribls
  - [Feature] Write DKIM selector in dkim allow/reject symbols
  - [Fix] Add obs_fws state support to eoh state machine
  - [Fix] Add sanity check when applying mime boundaries heuristic
  - [Fix] Antivirus - virus names with 0 were recognized as tables
  - [Fix] Disable headernames in bayes temporarily
  - [Fix] Do not allow syntax errors in include files...
  - [Fix] Do not allow to merge an object with an array (or vice versa)
  - [Fix] Don't perform forged recipients check for missing recipients
  - [Fix] Fix DKIM based RBLs
  - [Fix] Fix actrie implementation (sync from upstream), fixed OOB read
  - [Fix] Fix explicit methods call in selectors
  - [Fix] Fix extraction of additional parts
  - [Fix] Fix finalization for internal plugins
  - [Fix] Fix override_defaults function
  - [Fix] Fix squeezed symbols when using settings
  - [Fix] Fix urls insertion in Clickhouse module
  - [Fix] Furhter fixes to ratelimits logic
  - [Fix] Ignore signatures when looking for boundaries
  - [Fix] Properly set learned count
  - [Fix] Really fix ratelimits configuration and work
  - [Fix] Remove ambigious format flag from printf
  - [Fix] Restore URLs exporting in ClickHouse plugin
  - [Fix] Rework bayes calculations...
  - [Fix] Switch from chi-square to naive for large Fisher value
  - [Fix] Treat normal password as enable password if there is no enable password
  - [Fix] Use proper syntax for making DNS requests
  - [Fix] Various fixes in embedded plugins
  - [Project] Change fuzzy check selection logic to lua_fuzzy library
  - [Project] Rework async events and symbols
  - [Project] Move all metatokens in Bayes to lua_stat from C
  - [WebUI] Add history rows per page control
- somehow the Patch/%patch lines for
  rspamd-after-redis-target.patch were missing, adding them back.

-------------------------------------------------------------------
Sat Oct 27 01:54:35 UTC 2018 - Marcus Rueckert <mrueckert@suse.de>

- simplify the feature conditionals:
  mostly to enable luajit and torch on more platforms
- add -fopenmp to the CFLAGS to fix a warning in torch

-------------------------------------------------------------------
Fri Oct 19 18:20:09 UTC 2018 - Marcus Rueckert <mrueckert@suse.de>

- update to 1.8.1
  - [CritFix] Fix options insertion
  - [CritFix] Fix words decay one more time (affects long messages)
  - [CritFix] Increase default words_decay
  - [CritFix] Plug memory leak in redis pool
  - [Feature] Add `check_violation` feature to DKIM/ARC signing
  - [Feature] Add only unique elements to Clickhouse url arrays
  - [Feature] Allow `g+:` and `g-:` composite atoms
  - [Feature] Allow dkim domains check in surbl
  - [Feature] Allow maps with HTTP auth
  - [Feature] Allow to disable actions by users settings
  - [Feature] Extend whitelisting options
  - [Feature] Store url object in images
  - [Feature] Use verdict instead of the plain action in plugins
  - [Fix] Allow to call fstring append with NULL string
  - [Fix] DCC - luacheck
  - [Fix] Do not load torch on each rspamadm invocation
  - [Fix] Fix boundaries detection and rework stop words algorithm
  - [Fix] Fix dependencies for DNS_SIGNED symbol
  - [Fix] Fix errors when dealing with dynamic rates/bursts in
    Ratelimit
  - [Fix] Fix groups mess
  - [Fix] Fix groups mess
  - [Fix] Fix parsing address with comments
  - [Fix] Fix resolving in DMARC reports
  - [Fix] Fix various issues with parsing of the received headers
  - [Fix] Fix watchers issue in lua_tcp when doing no resolving
  - [Fix] Plug memory leak in language detector (affects reloads)
  - [Fix] Remove one letter stop words
  - [Fix] Slashing: backport chunk logic from libucl
  - [Fix] Stop libevent from using cached time in rspamadm
  - [Fix] Try to fix watchers chaining
  - [Fix] Various fixes in redis sync interface
  - [Fix] ip_score - respect check_authed and check_local settings
    from config
  - [Project] Rework passthrough actions
  - [Project] Clustering module
  - [Rework] Always create result for a task
  - [Rework] Completely rewrite DMARC checks logic
  - [Rework] Rework and fix whitelist plugin
  - [WebUI] Add symbols sorting buttons
  - [WebUI] Change symbols order without updating history
  - [WebUI] Colorize symbols
  - [WebUI] Do not display password form when secure_ip is set
  - [WebUI] Fix symbol description tooltips display
  - [WebUI] History: add sorting by symbol score value
- drop 5093631ddd4d3389cddaaa95865dc4a23143a10f.patch

-------------------------------------------------------------------
Mon Oct  1 14:48:13 UTC 2018 - Marcus Rueckert <mrueckert@suse.de>

- backport 5093631ddd4d3389cddaaa95865dc4a23143a10f.patch:
  can be removed in 1.8.1

-------------------------------------------------------------------
Mon Sep 24 22:39:44 UTC 2018 - Marcus Rueckert <mrueckert@suse.de>

- update to 1.8.0
  The most important features and fixes
  - New selectors framework
    This framework allows to combine and process different data
    extracted from messages and use that in different plugins, such
    as multimap, reputation or ratelimits. It is also possible to
    use data extracted in Rspamd regular expressions.
  - Coroutines API support in Lua
    Now you can write code in a usual imperative manner but you
    still will not block any other tasks. Each potentially blocking
    operation creates a yielding-point. In turn, this means the
    code is suspended until the operation is done (just like
    blocking) and resumes only when there is some result.
    Meanwhile, other tasks are processed as usual.
  - Clickhouse optimization
    Rspamd now uses a flat table to optimize ClickHouse SQL
    requests. In fact, joins are not recommended by the ClickHouse
    developers as multiple joins have proven to be slow. Hence,
    Rspamd has moved all data to a single table. Schema migration
    is done automatically, however, please read the migration notes
    in case of any doubts. Old data is not migrated nor deleted
    automatically.
    There is now optional data retention support in the ClickHouse
    module. You can set retention policies for the data stored in
    Clickhouse to conform different regulations (e.g. GDPR).
  - Unicode processing improvements
    Rspamd now normalizes all unicode data using NFKC schema prior
    to processing. This helps to prevent “glyph” attacks used by
    some spammers nowadays. Unicode conversion has also been
    improved to continue on bad symbols instead of giving up and
    working with raw data.
  - Language detection improvements
    We have reworked the language detector to use stop-words and
    rely on unicode glyphs more extensively. As the result of this
    work, the speed of language detection has been increased
    significantly (by 10 times in some cases). The preciseness of
    the detection has also been improved.
  - Fixed various bugs in sesssions handling
    We have located and fixed various hidden issues caused by async
    rules chaining. It might cause inconsistencies in the
    dependencies processing, crashes in rare cases and other “bad
    things”.
  - Various Web Interface improvements and fixes
    There are multiple improvements and fixes in the Web Interface.
    In particular, the issues with cluster support and aggregation
    have been addressed.

  For all the fixes see
  https://rspamd.com/announce/2018/09/24/rspamd-1.8.0.html
- drop patch 66ffcdfa880daeb3b50c7ef3bcb5511abb6d92f6.patch
  included in update

-------------------------------------------------------------------
Thu Aug 30 14:06:44 UTC 2018 - Marcus Rueckert <mrueckert@suse.de>

- add conflicts on rspamd-client to ease switching between the 2
  modes

-------------------------------------------------------------------
Thu Aug 30 13:48:21 UTC 2018 - Marcus Rueckert <mrueckert@suse.de>

- undo the split by guarding it with split_out_client:
  osc build --with=split_out_client if you want to build with it

-------------------------------------------------------------------
Thu Aug 30 13:39:03 UTC 2018 - Marcus Rueckert <mrueckert@suse.de>

- replace our copy of rspamd.conf with a patch rspamd-conf.patch:
  currently we only replace the logging to rspamd.conf with console
  and set systemd mode

-------------------------------------------------------------------
Wed Aug 29 15:53:10 UTC 2018 - Marcus Rueckert <mrueckert@suse.de>

- split out rspamc and rspamadm into a rspamd-client package.
  the main package will still require it so nothing would change
  from this perspective.

  This allows administration and training from other machines
  without installing the whole stack.

-------------------------------------------------------------------
Wed Aug 29 15:52:31 UTC 2018 - Marcus Rueckert <mrueckert@suse.de>

- added rspamd-after-redis-target.patch:
  make sure we start rspamd after redis.target

-------------------------------------------------------------------
Wed Aug  8 08:09:26 UTC 2018 - iippolitov@gmail.com

- updated version to 1.7.8
  https://github.com/vstakhov/rspamd/releases/tag/1.7.9
- patch included to fix lua builds on i586
  https://github.com/vstakhov/rspamd/commit/66ffcdfa880daeb3b50c7ef3bcb5511abb6d92f6.patch
- 2338.patch is removed: included in the upstream tarball

-------------------------------------------------------------------
Fri Jul 13 16:42:32 UTC 2018 - mrueckert@suse.de

- updated version to 1.7.8
  https://github.com/vstakhov/rspamd/releases/tag/1.7.7
  https://github.com/vstakhov/rspamd/releases/tag/1.7.8
- added https://github.com/vstakhov/rspamd/pull/2338.patch

-------------------------------------------------------------------
Fri Jul 13 16:37:41 UTC 2018 - mrueckert@suse.de

- limit pcre2 to 15.0 and newer

-------------------------------------------------------------------
Fri Jul 13 16:09:32 UTC 2018 - mrueckert@suse.de

- we had a buildrequires for libfann but the cmake flag was in a
  conditional. removed the conditional.
- enable pcre2 support
- prepare building utils but they are broken atm
- enable hyperscan for TW and newer
- enable openblas for 15.0 and newer
- gd library had a BR but was not enabled

-------------------------------------------------------------------
Wed Jun 20 12:00:00 UTC 2018 - iippolitov@gmail.com

- changed default configuration to match current rules
  https://rspamd.com/doc/workers/

-------------------------------------------------------------------
Tue Jun 19 12:00:00 UTC 2018 - iippolitov@gmail.com

- updated version to 1.7.6
  https://github.com/vstakhov/rspamd/releases/tag/1.7.6

-------------------------------------------------------------------
Mon Apr 30 16:52:25 UTC 2018 - pieter@hollants.com

- updated version to 1.7.3
  https://github.com/vstakhov/rspamd/releases/tag/1.7.3
- removed obsolete protocol.c.patch (incorporated into 1.7.3)

-------------------------------------------------------------------
Tue Mar 27 17:20:28 UTC 2018 - iippolitov@gmail.com

- updated version to 1.7.2
  https://github.com/vstakhov/rspamd/releases/tag/1.7.2
- fix for https://github.com/vstakhov/rspamd/issues/2120 included

-------------------------------------------------------------------
Thu Mar 22 07:07:35 UTC 2018 - iippolitov@gmail.com

- updated version to 1.7.1
  https://github.com/vstakhov/rspamd/releases/tag/1.7.1 
- fixed ix86 build
  conditional jemalloc, luajit, external hiredis and torch build
- fixed build without LUA JIT 
  https://github.com/vstakhov/rspamd/pull/2100
- fixed Leap 42.1 build (cmake used wrong ASM compiler)

-------------------------------------------------------------------
Mon Mar 19 18:33:42 UTC 2018 - iippolitov@gmail.com

- updated version to 1.7.0
  https://github.com/vstakhov/rspamd/releases/tag/1.7.0
- disabled ENABLE_OPTIMIZE for Leap due to old GCC
  https://github.com/vstakhov/rspamd/issues/2091
- luajit enabled by default (required by torch)

-------------------------------------------------------------------
Mon Mar 12 11:57:47 UTC 2018 - asn@cryptomilk.org

- Add missing runtime requirement for lua-lpeg

-------------------------------------------------------------------
Thu Mar  8 23:03:46 UTC 2018 - mrueckert@suse.de

- BR libnsl to fix build on suse_version >= 1500

-------------------------------------------------------------------
Sat Feb 17 09:10:30 UTC 2018 - thomas@cupracer.de

- updated version to 1.6.6
  https://github.com/vstakhov/rspamd/releases/tag/1.6.6

-------------------------------------------------------------------
Thu Jul 27 12:15:45 UTC 2017 - iippolitov@gmail.com

- updated version to 1.6.3
  https://github.com/vstakhov/rspamd/releases/tag/1.6.3

-------------------------------------------------------------------
Tue Jul 11 08:36:19 UTC 2017 - iippolitov@gmail.com

- updated version to 1.6.2 
  https://github.com/vstakhov/rspamd/releases/tag/1.6.2

-------------------------------------------------------------------
Wed Jun 14 18:34:59 UTC 2017 - iippolitov@gmail.com

- updated version to 1.6.1

-------------------------------------------------------------------
Tue Jun 13 10:10:53 UTC 2017 - iippolitov@gmail.com

- updated version to 1.6.0
- rspamd.conf with logging to console added to sources

-------------------------------------------------------------------
Tue Jun  6 17:30:00 UTC 2017 - iippolitov@gmail.com

- updated version to 1.5.9

-------------------------------------------------------------------
Mon Apr  3 18:48:46 UTC 2017 - jengelh@inai.de

- Ensure description is neutral. Replace unnecessary
  %__-type macro indirections.

-------------------------------------------------------------------
Fri Mar 17 16:08:17 UTC 2017 - asn@cryptomilk.org

- Update to version 1.5.3
  https://rspamd.com/announce/2017/03/17/rspamd-1.5.3.html

-------------------------------------------------------------------
Wed Mar 15 08:22:49 UTC 2017 - asn@cryptomilk.org

- Update to version 1.5.2
  https://rspamd.com/announce/2017/03/01/rspamd-1.5.0.html

-------------------------------------------------------------------
Thu Dec  1 08:35:40 UTC 2016 - asn@cryptomilk.org

- Update to version 1.4.1

-------------------------------------------------------------------
Tue Nov 29 13:02:36 UTC 2016 - asn@cryptomilk.org

- Update to version 1.4.0

-------------------------------------------------------------------
Wed Jul 27 22:04:41 UTC 2016 - mrueckert@suse.de

- initial package

