Index: build/parseBuildInstallClean.c
===================================================================
--- build/parseBuildInstallClean.c.orig
+++ build/parseBuildInstallClean.c
@@ -46,7 +46,22 @@ int parseBuildInstallClean(rpmSpec spec,
     } else if (rc < 0) {
 	goto exit;
     }
-    
+
+    if (parsePart == PART_BUILD) {
+        char* buf = strdup(
+            "ref=/usr/lib/rpm\n"
+            "for s in guess sub; do\n"
+            "    for c in $(find -maxdepth 8 -name \"config.$s\"); do\n"
+            "         grep -q config-patches@ $c || continue\n"
+            "         grep -q aarch64 $c || install -m 755 $ref/config.$s $c\n"
+            "         grep -q ppc64le $c || install -m 755 $ref/config.$s $c\n"
+            "     done\n"
+            "done\n"
+        );
+        appendLineStringBuf(*sbp, buf);
+        free(buf);
+    }
+
     while (! (nextPart = isPart(spec->line))) {
 	appendStringBuf(*sbp, spec->line);
 	if ((rc = readLine(spec, STRIP_NOTHING)) > 0) {
