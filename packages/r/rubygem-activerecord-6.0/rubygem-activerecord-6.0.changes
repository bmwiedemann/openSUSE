-------------------------------------------------------------------
Fri Dec 20 04:23:04 UTC 2019 - Manuel Schnitzer <mschnitzer@suse.com>

- updated to version 6.0.2.1

  * no changes

-------------------------------------------------------------------
Sat Dec 14 00:05:39 UTC 2019 - Manuel Schnitzer <mschnitzer@suse.com>

- updated to version 6.0.2

  *   Share the same connection pool for primary and replica databases in the
      transactional tests for the same database.

      *Edouard Chin*

  *   Fix the preloader when one record is fetched using `after_initialize`
      but not the entire collection.

      *Bradley Price*

  *   Fix collection callbacks not terminating when `:abort` is thrown.

      *Edouard Chin*, *Ryuta Kamizono*

  *   Correctly deprecate `where.not` working as NOR for relations.

      12a9664 deprecated where.not working as NOR, however
      doing a relation query like `where.not(relation: { ... })`
      wouldn't be properly deprecated and `where.not` would work as
      NAND instead.

      *Edouard Chin*

  *   Fix `db:migrate` task with multiple databases to restore the connection
      to the previous database.

      The migrate task iterates and establish a connection over each db
      resulting in the last one to be used by subsequent rake tasks.
      We should reestablish a connection to the connection that was
      established before the migrate tasks was run

      *Edouard Chin*

  *   Fix multi-threaded issue for `AcceptanceValidator`.

      *Ryuta Kamizono*

-------------------------------------------------------------------
Tue Nov 12 13:32:40 UTC 2019 - Manuel Schnitzer <mschnitzer@suse.com>

- updated to version 6.0.1

  *    Common Table Expressions are allowed on read-only connections.

       *Chris Morris*

  *    New record instantiation respects `unscope`.

       *Ryuta Kamizono*

  *    Fixed a case where `find_in_batches` could halt too early.

       *Takayuki Nakata*

  *    Autosaved associations always perform validations when a custom validation
       context is used.

       *Tekin Suleyman*

  *    `sql.active_record` notifications now include the `:connection` in
       their payloads.

       *Eugene Kenny*

  *    A rollback encountered in an `after_commit` callback does not reset
       previously-committed record state.

       *Ryuta Kamizono*

  *    Fixed that join order was lost when eager-loading.

       *Ryuta Kamizono*

  *   `DESCRIBE` queries are allowed on read-only connections.

      *Dylan Thacker-Smith*

  *   Fixed that records that had been `inspect`ed could not be marshaled.

      *Eugene Kenny*

  *   The connection pool reaper thread is respawned in forked processes. This
      fixes that idle connections in forked processes wouldn't be reaped.

      *John Hawthorn*

  *   The memoized result of `ActiveRecord::Relation#take` is properly cleared
      when `ActiveRecord::Relation#reset` or `ActiveRecord::Relation#reload`
      is called.

      *Anmol Arora*

  *   Fixed the performance regression for `primary_keys` introduced MySQL 8.0.

      *Hiroyuki Ishii*

  *   `insert`, `insert_all`, `upsert`, and `upsert_all` now clear the query cache.

      *Eugene Kenny*

  *   Call `while_preventing_writes` directly from `connected_to`.

      In some cases application authors want to use the database switching middleware and make explicit calls with `connected_to`. It's possible for an app to turn off writes and not turn them back on by the time we call `connected_to(role: :writing)`.

      This change allows apps to fix this by assuming if a role is writing we want to allow writes, except in the case it's explicitly turned off.

      *Eileen M. Uchitelle*

  *   Improve detection of ActiveRecord::StatementTimeout with mysql2 adapter in the edge case when the query is terminated during filesort.

      *Kir Shatrov*

-------------------------------------------------------------------
Sat Aug 17 20:51:27 UTC 2019 - Manuel Schnitzer <mschnitzer@suse.com>

- updated to version 6.0.0

  *   Preserve user supplied joins order as much as possible.

      Fixes #36761, #34328, #24281, #12953.

      *Ryuta Kamizono*

  *   Make the DATABASE_URL env variable only affect the primary connection. Add new env variables for multiple databases.

      *John Crepezzi*, *Eileen Uchitelle*

  *   Add a warning for enum elements with 'not_' prefix.

          class Foo
            enum status: [:sent, :not_sent]
          end

      *Edu Depetris*

  *   Make currency symbols optional for money column type in PostgreSQL

      *Joel Schneider*

-------------------------------------------------------------------
Mon Jul 22 21:32:20 UTC 2019 - Manuel Schnitzer <mschnitzer@suse.com>

- updated to version 6.0.0.rc2

  *   Add database_exists? method to connection adapters to check if a database exists.

      *Guilherme Mansur*

  *   PostgreSQL: Fix GROUP BY with ORDER BY virtual count attribute.

      Fixes #36022.

      *Ryuta Kamizono*

  *   Make ActiveRecord `ConnectionPool.connections` method thread-safe.

      Fixes #36465.

      *Jeff Doering*

  *   Fix sqlite3 collation parsing when using decimal columns.

      *Martin R. Schuster*

  *   Fix invalid schema when primary key column has a comment.

      Fixes #29966.

      *Guilherme Goettems Schneider*

  *   Fix table comment also being applied to the primary key column.

      *Guilherme Goettems Schneider*

  *   Fix merging left_joins to maintain its own `join_type` context.

      Fixes #36103.

      *Ryuta Kamizono*

-------------------------------------------------------------------
Sun Jun 30 09:33:29 UTC 2019 - Manuel Schnitzer <mschnitzer@suse.com>

- disable 'disable_docs' option temporarily until we get an updated
  gem2rpm and ruby-common package in our devel project.

-------------------------------------------------------------------
Sat May  4 23:50:44 UTC 2019 - Marcus Rueckert <mrueckert@suse.de>

- update to version 6.0.0.rc1:
  https://weblog.rubyonrails.org/2019/4/27/this-week-in-rails-rails-6-0-0-rc1-is-here-say-hi-at-railsconf/

-------------------------------------------------------------------
Thu Mar 14 03:49:29 UTC 2019 - Marcus Rueckert <mrueckert@suse.de>

- update to version 6.0.0.beta3:
  https://weblog.rubyonrails.org/2019/3/13/Rails-4-2-5-1-5-1-6-2-have-been-released/
  CVE-2019-5418 CVE-2019-5419 CVE-2019-5420

-------------------------------------------------------------------
Sat Jan 19 19:51:01 UTC 2019 - Marcus Rueckert <mrueckert@suse.de>

- rb_build_ruby_abi needs to be rb_build_ruby_abis

-------------------------------------------------------------------
Sat Jan 19 00:15:01 UTC 2019 - Marcus Rueckert <mrueckert@suse.de>

- initial package
