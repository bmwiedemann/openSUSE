Index: xserver-1.20.7+0/hw/dmx/config/dmxconfig.c
===================================================================
--- xserver-1.20.7+0.orig/hw/dmx/config/dmxconfig.c
+++ xserver-1.20.7+0/hw/dmx/config/dmxconfig.c
@@ -72,7 +72,6 @@ typedef struct DMXConfigCmdStruct {
     DMXConfigList *xinputs;
 } DMXConfigCmd, *DMXConfigCmdPtr;
 
-DMXConfigEntryPtr dmxConfigEntry;
 static DMXConfigCmd dmxConfigCmd;
 
 static int dmxDisplaysFromCommandLine;
Index: xserver-1.20.7+0/hw/dmx/config/xdmxconfig.c
===================================================================
--- xserver-1.20.7+0.orig/hw/dmx/config/xdmxconfig.c
+++ xserver-1.20.7+0/hw/dmx/config/xdmxconfig.c
@@ -65,7 +65,6 @@ extern FILE *yyin;
 #define DMX_CANVAS_WIDTH  400
 #define DMX_CANVAS_HEIGHT 500
 
-DMXConfigEntryPtr dmxConfigEntry;
 static DMXConfigVirtualPtr dmxConfigCurrent, dmxConfigNewVirtual;
 static DMXConfigDisplayPtr dmxConfigCurrentDisplay, dmxConfigNewDisplay;
 static int dmxConfigGrabbed, dmxConfigGrabbedFine;
Index: xserver-1.20.7+0/hw/dmx/glxProxy/glxext.c
===================================================================
--- xserver-1.20.7+0.orig/hw/dmx/glxProxy/glxext.c
+++ xserver-1.20.7+0/hw/dmx/glxProxy/glxext.c
@@ -47,8 +47,6 @@
 #include "extinit.h"
 #include "glx_extinit.h"
 
-int noGlxExtension;
-
 /*
 ** Forward declarations.
 */
Index: xserver-1.20.7+0/hw/xwayland/Makefile.am
===================================================================
--- xserver-1.20.7+0.orig/hw/xwayland/Makefile.am
+++ xserver-1.20.7+0/hw/xwayland/Makefile.am
@@ -3,6 +3,7 @@ bin_PROGRAMS = Xwayland
 Xwayland_CFLAGS =				\
 	-I$(top_srcdir)/glamor			\
 	-I$(top_srcdir)/dri3			\
+	-I$(top_srcdir)/hw/xfree86/common       \
 	-DHAVE_DIX_CONFIG_H			\
 	$(XWAYLANDMODULES_CFLAGS)		\
 	$(DIX_CFLAGS)				\
Index: xserver-1.20.7+0/hw/xwayland/xwayland.c
===================================================================
--- xserver-1.20.7+0.orig/hw/xwayland/xwayland.c
+++ xserver-1.20.7+0/hw/xwayland/xwayland.c
@@ -40,7 +40,7 @@
 
 #ifdef XF86VIDMODE
 #include <X11/extensions/xf86vmproto.h>
-_X_EXPORT Bool noXFree86VidModeExtension;
+#include "xf86Extensions.h"
 #endif
 
 void
Index: xserver-1.20.7+0/test/xi1/protocol-xchangedevicecontrol.c
===================================================================
--- xserver-1.20.7+0.orig/test/xi1/protocol-xchangedevicecontrol.c
+++ xserver-1.20.7+0/test/xi1/protocol-xchangedevicecontrol.c
@@ -37,7 +37,6 @@
 
 #include "protocol-common.h"
 
-ClientRec client_window;
 static ClientRec client_request;
 
 static void
Index: xserver-1.20.7+0/test/xi2/protocol-common.c
===================================================================
--- xserver-1.20.7+0.orig/test/xi2/protocol-common.c
+++ xserver-1.20.7+0/test/xi2/protocol-common.c
@@ -48,6 +48,8 @@ void *global_userdata;
 int enable_GrabButton_wrap = 1;
 int enable_XISetEventMask_wrap = 1;
 
+void (*reply_handler) (ClientPtr client, int len, char *data, void *userdata);
+
 static void
 fake_init_sprite(DeviceIntPtr dev)
 {
@@ -310,8 +312,6 @@ __wrap_dixLookupWindow(WindowPtr *win, X
     return __real_dixLookupWindow(win, id, client, access);
 }
 
-extern ClientRec client_window;
-
 int
 __wrap_dixLookupClient(ClientPtr *pClient, XID rid, ClientPtr client,
                        Mask access)
Index: xserver-1.20.7+0/test/xi2/protocol-common.h
===================================================================
--- xserver-1.20.7+0.orig/test/xi2/protocol-common.h
+++ xserver-1.20.7+0/test/xi2/protocol-common.h
@@ -99,7 +99,7 @@ extern void *global_userdata;
  * The reply handler called from WriteToClient. Set this handler if you need
  * to check the reply values.
  */
-void (*reply_handler) (ClientPtr client, int len, char *data, void *userdata);
+extern void (*reply_handler) (ClientPtr client, int len, char *data, void *userdata);
 
 /**
  * The default screen used for the windows. Initialized by init_simple().
@@ -154,4 +154,6 @@ Bool __wrap_AddResource(XID id, RESTYPE
 int __wrap_dixLookupClient(ClientPtr *c, XID id, ClientPtr client, Mask access);
 int __real_dixLookupClient(ClientPtr *c, XID id, ClientPtr client, Mask access);
 
+extern ClientRec client_window;
+
 #endif                          /* PROTOCOL_COMMON_H */
Index: xserver-1.20.7+0/test/xi2/protocol-xigetclientpointer.c
===================================================================
--- xserver-1.20.7+0.orig/test/xi2/protocol-xigetclientpointer.c
+++ xserver-1.20.7+0/test/xi2/protocol-xigetclientpointer.c
@@ -46,7 +46,6 @@ static struct {
     int win;
 } test_data;
 
-ClientRec client_window;
 static ClientRec client_request;
 
 static void
Index: xserver-1.20.7+0/test/xi2/protocol-xigetselectedevents.c
===================================================================
--- xserver-1.20.7+0.orig/test/xi2/protocol-xigetselectedevents.c
+++ xserver-1.20.7+0/test/xi2/protocol-xigetselectedevents.c
@@ -60,8 +60,6 @@ static struct {
     int mask_len;
 } test_data;
 
-ClientRec client_window;
-
 /* AddResource is called from XISetSEventMask, we don't need this */
 Bool
 __wrap_AddResource(XID id, RESTYPE type, void *value)
Index: xserver-1.20.7+0/test/xi2/protocol-xipassivegrabdevice.c
===================================================================
--- xserver-1.20.7+0.orig/test/xi2/protocol-xipassivegrabdevice.c
+++ xserver-1.20.7+0/test/xi2/protocol-xipassivegrabdevice.c
@@ -41,7 +41,6 @@
 
 #include "protocol-common.h"
 
-ClientRec client_window;
 static ClientRec client_request;
 
 #define N_MODS 7
Index: xserver-1.20.7+0/test/xi2/protocol-xiquerydevice.c
===================================================================
--- xserver-1.20.7+0.orig/test/xi2/protocol-xiquerydevice.c
+++ xserver-1.20.7+0/test/xi2/protocol-xiquerydevice.c
@@ -54,8 +54,6 @@ struct test_data {
     int num_devices_in_reply;
 };
 
-ClientRec client_window;
-
 static void reply_XIQueryDevice_data(ClientPtr client, int len, char *data,
                                      void *closure);
 static void reply_XIQueryDevice(ClientPtr client, int len, char *data,
Index: xserver-1.20.7+0/test/xi2/protocol-xiquerypointer.c
===================================================================
--- xserver-1.20.7+0.orig/test/xi2/protocol-xiquerypointer.c
+++ xserver-1.20.7+0/test/xi2/protocol-xiquerypointer.c
@@ -41,7 +41,6 @@
 
 #include "protocol-common.h"
 
-ClientRec client_window;
 static ClientRec client_request;
 static void reply_XIQueryPointer_data(ClientPtr client, int len,
                                       char *data, void *closure);
Index: xserver-1.20.7+0/test/xi2/protocol-xiqueryversion.c
===================================================================
--- xserver-1.20.7+0.orig/test/xi2/protocol-xiqueryversion.c
+++ xserver-1.20.7+0/test/xi2/protocol-xiqueryversion.c
@@ -58,8 +58,6 @@ struct test_data {
     int minor_expected;
 };
 
-ClientRec client_window;
-
 static void
 reply_XIQueryVersion(ClientPtr client, int len, char *data, void *closure)
 {
Index: xserver-1.20.7+0/test/xi2/protocol-xiselectevents.c
===================================================================
--- xserver-1.20.7+0.orig/test/xi2/protocol-xiselectevents.c
+++ xserver-1.20.7+0/test/xi2/protocol-xiselectevents.c
@@ -62,8 +62,6 @@
 
 static unsigned char *data[4096 * 20];  /* the request data buffer */
 
-ClientRec client_window;
-
 int
 __real_XISetEventMask(DeviceIntPtr dev, WindowPtr win, ClientPtr client,
                       int len, unsigned char *mask);
Index: xserver-1.20.7+0/test/xi2/protocol-xisetclientpointer.c
===================================================================
--- xserver-1.20.7+0.orig/test/xi2/protocol-xisetclientpointer.c
+++ xserver-1.20.7+0/test/xi2/protocol-xisetclientpointer.c
@@ -48,7 +48,6 @@
 
 #include "protocol-common.h"
 
-ClientRec client_window;
 static ClientRec client_request;
 
 static void
Index: xserver-1.20.7+0/test/xi2/protocol-xiwarppointer.c
===================================================================
--- xserver-1.20.7+0.orig/test/xi2/protocol-xiwarppointer.c
+++ xserver-1.20.7+0/test/xi2/protocol-xiwarppointer.c
@@ -44,8 +44,6 @@
 static int expected_x = SPRITE_X;
 static int expected_y = SPRITE_Y;
 
-ClientRec client_window;
-
 /**
  * This function overrides the one in the screen rec.
  */
Index: xserver-1.20.7+0/test/misc.c
===================================================================
--- xserver-1.20.7+0.orig/test/misc.c
+++ xserver-1.20.7+0/test/misc.c
@@ -33,7 +33,6 @@
 
 #include "tests-common.h"
 
-ScreenInfo screenInfo;
 
 static void
 dix_version_compare(void)
