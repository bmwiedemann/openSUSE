Index: iterm/lib/src/unix/tty/ttyio.c
===================================================================
--- iterm.orig/lib/src/unix/tty/ttyio.c
+++ iterm/lib/src/unix/tty/ttyio.c
@@ -22,7 +22,6 @@
 #include <fcntl.h>
 #include <stdlib.h>
 #include <unistd.h>
-#include <stropts.h>
 
 #include <string.h>
 #include <strings.h>
@@ -195,29 +194,6 @@ static int open_slave(int master_fd, cha
     return -1;
   }
 
-  if ( ioctl(fd,I_FIND,"ptem") == 0)
-      if ( ioctl(fd,I_PUSH,"ptem") < 0 )
-      {
-        close(master_fd);
-        close(fd);
-        return -1;
-      }
-  
-  if ( ioctl(fd,I_FIND,"ldterm") == 0)
-      if ( ioctl(fd,I_PUSH,"ldterm") < 0 )
-      {
-        close(master_fd);
-        close(fd);
-        return -1;
-      }
-
-  if ( ioctl(fd,I_FIND,"ttcompat") == 0)
-      if ( ioctl(fd,I_PUSH,"ttcompat") < 0 )
-      {
-        close(master_fd);
-        close(fd);
-        return -1;
-      }
   close(master_fd);
   return fd;
 }
