-------------------------------------------------------------------
Tue Dec  6 14:30:52 UTC 2022 - Stefan Dirsch <sndirsch@suse.com>

- U_0007-xkb-reset-the-radio_groups-pointer-to-NULL-after-fre.patch
  * XkbGetKbdByName use-after-free (ZDI-CAN-19530, CVE-2022-4283,
    bsc#1206017)

-------------------------------------------------------------------
Wed Nov 30 15:02:57 UTC 2022 - Stefan Dirsch <sndirsch@suse.com>

- U_0001-Xtest-disallow-GenericEvents-in-XTestSwapFakeInput.patch
  * Server XTestSwapFakeInput stack overflow (ZDI-CAN 19265,
    CVE-2022-46340, bsc#1205874)
- U_0002-Xi-return-an-error-from-XI-property-changes-if-verif.patch
  * Xi: return an error from XI property changes if verification
    failed (no ZDI-CAN id, no CVE id, bsc#1205875)
- U_0003-Xi-avoid-integer-truncation-in-length-check-of-ProcX.patch
  * Server XIChangeProperty out-of-bounds access (ZDI-CAN 19405,
    CVE-2022-46344, bsc#1205876)
- U_0004-Xi-disallow-passive-grabs-with-a-detail-255.patch
  * Server XIPassiveUngrabDevice out-of-bounds access (ZDI-CAN 19381,
    CVE-2022-46341, bsc#1205877)
- U_0005-Xext-free-the-screen-saver-resource-when-replacing-i.patch
  * Server ScreenSaverSetAttributes use-after-free (ZDI-CAN 19404,
    CVE-2022-46343, bsc#1205878)
- U_0006-Xext-free-the-XvRTVideoNotify-when-turning-off-from-.patch
  * Server XvdiSelectVideoNotify use-after-free (ZDI-CAN 19400,
    CVE-2022-46342, bsc#1205879)

-------------------------------------------------------------------
Wed Nov  2 11:27:06 UTC 2022 - Stefan Dirsch <sndirsch@suse.com>

- Update to version 22.1.5
  * This is a follow-up release to address a couple of regressions
    which found their way into the recent xwayland-22.1.4 release,
    namely:
    + Double scroll wheel events with some Wayland compositors
      https://gitlab.freedesktop.org/xorg/xserver/-/issues/1392
    + Key keeps repeating when a window is closed while a key is pressed
      https://gitlab.freedesktop.org/xorg/xserver/-/issues/1395
- supersedes U_Do-not-ignore-leave-events.patch

-------------------------------------------------------------------
Mon Oct 24 13:50:22 UTC 2022 - Stefan Dirsch <sndirsch@suse.com>

- U_Do-not-ignore-leave-events.patch
  * fixes xwayland issue#1397, issue#1395

-------------------------------------------------------------------
Thu Oct 20 11:50:17 UTC 2022 - Stefan Dirsch <sndirsch@suse.com>

- Update to version 22.1.4
  * xwayland: Aggregate scroll axis events to fix kinetic scrolling
  * Forbid server grabs by non-WM on *rootless* XWayland
  * xkb: Avoid length-check failure on empty strings.
  * ci: remove redundant slash in libxcvt repository url
  * dix: Skip more code in SetRootClip for ROOT_CLIP_INPUT_ONLY
  * dix: Fix overzealous caching of ResourceClientBits()
  * xwayland: Prevent Xserver grabs with rootless
  * xwayland: Delay wl_surface destruction
  * build: Bump wayland requirement to 1.18
  * xwayland: set tag on our surfaces
  * xwayland: Clear the "xwl-window" tag on unrealize
  * xwayland: correct the type for the discrete scroll events
  * xkb: fix some possible memleaks in XkbGetKbdByName
  * xkb: length-check XkbGetKbdByName before accessing the fields
  * xkb: length-check XkbListComponents before accessing the fields
  * xkb: proof GetCountedString against request length attacks
- supersedes security patches:
  * U_xkb-fix-some-possible-memleaks-in-XkbGetKbdByName.patch
  * U_xkb-proof-GetCountedString-against-request-length-at.patch

-------------------------------------------------------------------
Wed Oct 19 11:19:40 UTC 2022 - Stefan Dirsch <sndirsch@suse.com>

- U_xkb-proof-GetCountedString-against-request-length-at.patch
  * security update for CVE-2022-3550 (bsc#1204412)
- U_xkb-fix-some-possible-memleaks-in-XkbGetKbdByName.patch
  * security update for CVE-2022-3551 (bsc#1204416)

-------------------------------------------------------------------
Tue Jul 12 14:22:22 UTC 2022 - Stefan Dirsch <sndirsch@suse.com>

- Update to version 22.1.3
  * os: print <signal handler called> if unw_is_signal_frame()
  * os: print registers in the libunwind version of xorg_backtrace()
  * xwayland/present: Do not send two idle notify events for flip pixmaps
  * xwayland: Fix check logic in sprite_check_lost_focus()
  * xwayland: Change randr_output status when call xwl_output_remove()
  * xkb: switch to array index loops to moving pointers
  * xkb: swap XkbSetDeviceInfo and XkbSetDeviceInfoCheck
  * xkb: add request length validation for XkbSetGeometry

-------------------------------------------------------------------
Wed May 25 10:03:50 UTC 2022 - Stefan Dirsch <sndirsch@suse.com>

- Update to version 22.1.2
  * randr: Add "RANDR Emulation" property
  * xwayland/output: Set the "RANDR Emulation" property
  * xwayland: Fix invalid pointer access in drm_lease_device_handle_released.

-------------------------------------------------------------------
Thu Mar 31 09:21:36 UTC 2022 - Stefan Dirsch <sndirsch@suse.com>

- Update to version 22.1.1
  * xwayland: Clear timer_armed in xwl_present_unrealize_window
  * xwayland: Always hook up frame_callback_list in xwl_present_queue_vblank
  * Xwayland: Do not map the COW by default when rootless
  * xwayland/present: Fix use-after-free in xwl_unrealize_window()

-------------------------------------------------------------------
Wed Feb 16 15:39:59 UTC 2022 - Stefan Dirsch <sndirsch@suse.com>

- Update to version 22.1.0
  * xwayland: Fix cursor color

-------------------------------------------------------------------
Thu Feb  3 04:48:43 UTC 2022 - Bjørn Lie <bjorn.lie@gmail.com>

- Update to version 22.0.99.902
  * render: Fix build with gcc 12

-------------------------------------------------------------------
Thu Jan 20 17:59:50 UTC 2022 - Bjørn Lie <bjorn.lie@gmail.com>

- Update to version 22.0.99.901
  * DRM lease support
  * Enables sRGB fbconfigs in GLX
  * Requires libxcvt
  * Refactoring of the present code in Xwayland
  * Implements support for touchpad gestures
  * Support for xfixes's ClientDisconnectMode and optional
    terminate delay
- Add pkgconfig(libxcvt) BuildRequires: New dependency.
- Add xwayland.keyring, use url for sources, validate sig.
- Move man pages from devel to main binary package.
- Enable LTO, no longer disable LTO via macro.

-------------------------------------------------------------------
Tue Dec 14 15:44:46 UTC 2021 - Stefan Dirsch <sndirsch@suse.com>

- Update to version 21.1.4
  * Fixes for multiple input validation failures in X server extensions:
    + CVE-2021-4008/ZDI-CAN-14192 SProcRenderCompositeGlyphs out-of-bounds access (boo#1193030)
    + CVE-2021-4009/ZDI-CAN 14950 SProcXFixesCreatePointerBarrier out-of-bounds access (boo#1190487)
    + CVE-2021-4010/ZDI-CAN-14951 SProcScreenSaverSuspend out-of-bounds access (boo#1190488)
    + CVE-2021-4011/ZDI-CAN-14952 SwapCreateRegister out-of-bounds access (boo#1190489)
  * This release also includes other fixes such as:
    + Store EGLcontext to avoid superfluous eglMakeCurrent() calls
    + Prefer EGLStream with NVIDIA proprietary driver if both GBM and EGLstream are available

-------------------------------------------------------------------
Mon Nov  8 11:45:16 UTC 2021 - Stefan Dirsch <sndirsch@suse.com>

- Update to version 21.1.3
  * Most notable change is a fix for the GBM backend to work with
    the Nvidia driver series 495.
- supersedes U_glamor-Fix-handling-of-1-bit-pixmaps.patch

-------------------------------------------------------------------
Thu Oct  7 12:22:22 UTC 2021 - Joan Torres <joan.torres@suse.com>

- Specfile cleanup

-------------------------------------------------------------------
Tue Sep 28 16:22:32 UTC 2021 - Stefan Dirsch <sndirsch@suse.com>

- U_glamor-Fix-handling-of-1-bit-pixmaps.patch
  * glamor: Fix handling of 1-bit pixmaps; fixes e.g. issues with
    gimp on Wayland (which needs Xwayland) (boo#1189310)

-------------------------------------------------------------------
Mon Sep 27 11:56:41 UTC 2021 - Stefan Dirsch <sndirsch@suse.com>

- covers jira#SLE/SLE-18653

-------------------------------------------------------------------
Thu Jul 15 18:24:01 UTC 2021 - Macie McKitrick <macie.mckitrick@protonmail.com>

- xwayland pc is required for S390x and S390

-------------------------------------------------------------------
Fri Jul  9 11:19:50 UTC 2021 - Stefan Dirsch <sndirsch@suse.com>

- Update to version 21.1.2
  * The only change compared to the release candidate is a fix for
    a long standing issue where Xwayland wouldn't send events to
    notify clients of RandR configuration changes in some cases.

-------------------------------------------------------------------
Thu Jul  1 10:16:22 UTC 2021 - Stefan Dirsch <sndirsch@suse.com>

- Update to version 21.1.1.901 (21.1.2 RC1)
  * It's a bit special, as most of the changes are not the usual 
    stable branch fixes material, but are needed for HW accelerated
    direct rendering with the Nvidia 470 driver (which is currently
    in open beta).
  * changes are mostly specific to the EGLStream backend and do not
    affect the GBM backend. And they make a big difference for users
    of the EGLStream backend.
  * See
      https://lists.fedoraproject.org/archives/list/desktop@lists.fedoraproject.org/thread/BBZVDNST67I2AQOCPSHKYAY6D5Z66JIP/ 
    for more information about testing the EGLStream changes
- enabled Wayland eglstreams (needs new packages egl-wayland and
  eglexternalplatform)

-------------------------------------------------------------------
Tue Apr 13 15:21:03 UTC 2021 - Stefan Dirsch <sndirsch@suse.com>

- Update to version 21.1.1
  * Fix XChangeFeedbackControl() request underflow (CVE-2021-3472,
    ZDI-CAN-1259, bsc#1180128)

-------------------------------------------------------------------
Mon Apr 12 18:01:05 UTC 2021 - Tobias Klausmann <tobias.klausmann@freenet.de>

- Additionally to not packing /usr/lib64/xorg/protocol.txt, delete it to fix 
  the build 

-------------------------------------------------------------------
Mon Apr 12 10:48:11 UTC 2021 - Callum Farmer <gmbr3@opensuse.org>

- Make vendor name the same as xorg-x11-server

-------------------------------------------------------------------
Mon Apr 12 09:22:12 UTC 2021 - Stefan Dirsch <sndirsch@suse.com>

- removed conflicting /usr/lib64/xorg/protocol.txt (already in
  xorg-x11-server package)

-------------------------------------------------------------------
Wed Apr  7 08:55:57 UTC 2021 - Stefan Dirsch <sndirsch@suse.com>

- added summary for -devel package 
- some cleanup

-------------------------------------------------------------------
Wed Mar 17 21:20:29 UTC 2021 - Tobias Klausmann <tobias.klausmann@freenet.de>

- Update to version 21.1.0:
  * meson: Make sure XKM_OUTPUT_DIR has a trailing slash
  * xwayland: Fix LeaveNotify for relative pointer
- Highlights compared to xserver 1.20.10:
  * Xwayland's XVideo support (via glamor) now supports NV12
  * glamor can now accelerate some more RENDER extension formats
  * Xwayland's GLX provider now uses the EGL implementation instead of Mesa's
    swrast_dri.so directly
  * Xwayland can now use the wp_viewport Wayland protocol for up-scaling of
    fullscreen applications setting lower resolutions via the RandR / 
    XFree86-VidModeExtension extensions
  * Xwayland now alternates between multiple buffers for all Wayland surfaces,
    making it less of a special case compared to other Wayland clients
  * Xwayland can now use memfd_create for creating buffers shared with the
    Wayland compositor when glamor hardware acceleration is disabled
  * Xwayland has better support for clients using relative mouse input and 
    keyboard grabs
  * An Xwayland.1 manpage is now installed
  * Xwayland now supports -listenfd, -version and -verbose command line options
  * Xwayland now installs an xwayland.pc file which helps discovering the path
    of the installed Xwayland binary and the features it supports
  * Only meson is supported for building
  * Only Xwayland and Xvfb can be built, only Xwayland can be installed

-------------------------------------------------------------------
Thu Mar  4 09:49:25 UTC 2021 - Stefan Dirsch <sndirsch@suse.com>

- update to 21.0.99.902
  * second release candidate for the standalone Xwayland 21.1.0 release 
  * meson.build: Keep the protocol version looking like xserver 1.20.x did
  * xwayland: Delay cursor visibility update

-------------------------------------------------------------------
Fri Feb 26 10:25:41 UTC 2021 - Stefan Dirsch <sndirsch@suse.com>

- added Buildrequires to pkgconfig(glproto) and pkgconfig(gl) to 
  fix build on Leap

-------------------------------------------------------------------
Fri Feb 19 13:22:04 UTC 2021 - Tobias Klausmann <tobias.klausmann@freenet.de>

- Initial stand-alone Xwayland package version 21.0.99.901 (boo#1182677)
