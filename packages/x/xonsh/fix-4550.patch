From 4e6508aa6bc338770f7c14b660ff39cb31ca061d Mon Sep 17 00:00:00 2001
From: Noortheen Raja <jnoortheen@gmail.com>
Date: Sat, 20 Nov 2021 19:26:57 +0530
Subject: [PATCH] fix: docs build fail on tracer calls without spec

---
 xonsh/tracer.py | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/xonsh/tracer.py b/xonsh/tracer.py
index 3457f241b..859ad090d 100644
--- a/xonsh/tracer.py
+++ b/xonsh/tracer.py
@@ -222,9 +222,9 @@ def build(self):
         return parser
 
     def __call__(self, *args, **kwargs):
-        spec = kwargs["spec"]
+        spec = kwargs.get("spec")
         usecolor = (
-            spec.captured not in xpp.STDOUT_CAPTURE_KINDS
+            spec and (spec.captured not in xpp.STDOUT_CAPTURE_KINDS)
         ) and sys.stdout.isatty()
         tracer.color_output(usecolor)
         return super().__call__(*args, **kwargs)
