From: Egbert Eich <eich@suse.com>
Date: Mon May 13 14:29:25 2019 +0200
Subject: zypper install: Fix dbpath for newer versions of SUSE Linux
Patch-mainline: Not yet
Git-commit: 268150a7519d4e3fe0884fd2760fecfe5996f8a8
References: 

Signed-off-by: Egbert Eich <eich@suse.com>
---
 .../singularity/internal/pkg/build/sources/conveyorPacker_zypper.go     | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)
diff --git a/src/github.com/sylabs/singularity/internal/pkg/build/sources/conveyorPacker_zypper.go b/src/github.com/sylabs/singularity/internal/pkg/build/sources/conveyorPacker_zypper.go
index d441096..0e6f00a 100644
--- a/src/github.com/sylabs/singularity/internal/pkg/build/sources/conveyorPacker_zypper.go
+++ b/src/github.com/sylabs/singularity/internal/pkg/build/sources/conveyorPacker_zypper.go
@@ -230,7 +230,7 @@ func rpmPathCheck() (err error) {
 		}
 	}
 
-	if rpmDBPath != `%{_var}/lib/rpm` {
+	if rpmDBPath != `%{_var}/lib/rpm` && rpmDBPath != `%{_usr}/lib/sysimage/rpm` {
 		return fmt.Errorf("RPM database is using a non-standard path: %s\n"+
 			"There is a way to work around this problem:\n"+
 			"Create a file at path %s/.rpmmacros.\n"+
