fixup-2-gdb-rhbz1553104-s390x-arch12-test

---
 gdb/testsuite/gdb.arch/s390x-arch12.exp | 14 ++++++++++++++
 1 file changed, 14 insertions(+)

diff --git a/gdb/testsuite/gdb.arch/s390x-arch12.exp b/gdb/testsuite/gdb.arch/s390x-arch12.exp
index 246c1e1c69a..7939a2d6932 100644
--- a/gdb/testsuite/gdb.arch/s390x-arch12.exp
+++ b/gdb/testsuite/gdb.arch/s390x-arch12.exp
@@ -31,4 +31,18 @@ gdb_exit
 gdb_start
 gdb_load $ofile
 
+set supported 0
+gdb_test_multiple "show arch" "" {
+    -re -wrap "\"s390:64-bit\".*" {
+	set supported 1
+    }
+    -re -wrap "" {
+    }
+}
+
+if { ! $supported } {
+    unsupported "No s390x support"
+    return -1
+}
+
 gdb_test "disas load_guarded" " <\\+28>:\tlgg\t%r1,0\\(%r1\\)\r\n\[^\r\n\]* <\\+34>:\tstg\t%r1,168\\(%r11\\)\r\n.*"
