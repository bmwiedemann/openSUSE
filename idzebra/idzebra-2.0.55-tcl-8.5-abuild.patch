Index: idzebra-2.0.55/index/mod_grs_regx.c
===================================================================
--- idzebra-2.0.55.orig/index/mod_grs_regx.c
+++ idzebra-2.0.55/index/mod_grs_regx.c
@@ -1301,8 +1301,13 @@ static void execTcl (struct lexSpec *spe
     {
     	const char *err = Tcl_GetVar(spec->tcl_interp, "errorInfo", 0);
 	yaz_log(YLOG_FATAL, "Tcl error, line=%d, \"%s\"\n%s",
-	    spec->tcl_interp->errorLine,
+#if (TCL_MAJOR_VERSION >= 8 && TCL_MINOR_VERSION >= 5)
+	    Tcl_GetErrorline(spec->tcl_interp),
+	    Tcl_GetStringResult(spec->tcl_interp),
+#else
+	    spec->tcl_interp->errorline,
 	    spec->tcl_interp->result,
+#endif
 	    err ? err : "[NO ERRORINFO]");
     }
 }
