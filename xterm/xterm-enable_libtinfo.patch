# HG changeset patch
# Parent  d2d03d4f6634a54846af7503711ed356c87b1625
# check for libtinfo before falling back to ncurses

diff --git a/aclocal.m4 b/aclocal.m4
--- a/aclocal.m4
+++ b/aclocal.m4
@@ -802,20 +802,20 @@ if test "$cf_full_tgetent" = yes ; then
 else
 	cf_test_message="tgetent"
 fi
 
 AC_CACHE_CHECK(for $cf_test_message function,cf_cv_lib_tgetent,[
 cf_save_LIBS="$LIBS"
 cf_cv_lib_tgetent=no
 if test "$cf_full_tgetent" = yes ; then
-	cf_TERMLIB="otermcap termcap termlib ncurses curses"
+	cf_TERMLIB="otermcap termcap termlib tinfo ncurses curses"
 	cf_TERMTST="buffer[[0]] == 0"
 else
-	cf_TERMLIB="termlib ncurses curses"
+	cf_TERMLIB="termlib tinfo ncurses curses"
 	cf_TERMTST="0"
 fi
 for cf_termlib in '' $cf_TERMLIB ; do
 	LIBS="$cf_save_LIBS"
 	test -n "$cf_termlib" && { CF_ADD_LIB($cf_termlib) }
 	AC_TRY_RUN([
 /* terminfo implementations ignore the buffer argument, making it useless for
  * the xterm application, which uses this information to make a new TERMCAP
diff --git a/configure b/configure
--- a/configure
+++ b/configure
@@ -6141,20 +6141,20 @@ echo "$as_me:6140: checking for $cf_test
 echo $ECHO_N "checking for $cf_test_message function... $ECHO_C" >&6
 if test "${cf_cv_lib_tgetent+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
 
 cf_save_LIBS="$LIBS"
 cf_cv_lib_tgetent=no
 if test "$cf_full_tgetent" = yes ; then
-	cf_TERMLIB="otermcap termcap termlib ncurses curses"
+	cf_TERMLIB="otermcap termcap termlib tinfo ncurses curses"
 	cf_TERMTST="buffer[0] == 0"
 else
-	cf_TERMLIB="termlib ncurses curses"
+	cf_TERMLIB="termlib tinfo ncurses curses"
 	cf_TERMTST="0"
 fi
 for cf_termlib in '' $cf_TERMLIB ; do
 	LIBS="$cf_save_LIBS"
 	test -n "$cf_termlib" && {
 cf_add_libs="-l$cf_termlib"
 # Filter out duplicates - this happens with badly-designed ".pc" files...
 for cf_add_1lib in $LIBS
