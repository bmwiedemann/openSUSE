From 1799b57f18410d62deabeee9e4ce475be2a64534 Mon Sep 17 00:00:00 2001
From: Christian Goll <cgoll@suse.de>
Date: Wed, 12 Sep 2018 11:03:14 +0200
Subject: [PATCH] xattr location

---
 robinhood-3.1/configure.ac                   | 2 +-
 robinhood-3.1/src/common/lustre_tools.c      | 2 +-
 robinhood-3.1/src/modules/lhsm.c             | 2 +-
 robinhood-3.1/src/policies/policy_matching.c | 2 +-
 robinhood-3.1/src/tests/test_forcestripe.c   | 2 +-
 robinhood-3.1/src/tools/ost_fids_remap.c     | 2 +-
 robinhood-3.1/src/tools/read_lovea.c         | 2 +-
 robinhood-3.1/src/tools/set_lovea.c          | 2 +-
 8 files changed, 8 insertions(+), 8 deletions(-)

diff --git a/robinhood-3.1/configure.ac b/robinhood-3.1/configure.ac
index 754517d..9488c5b 100644
--- a/robinhood-3.1/configure.ac
+++ b/robinhood-3.1/configure.ac
@@ -383,7 +383,7 @@ fi # end of Lustre support
 AC_SUBST(DV_CMD)
 AC_SUBST(INPUT_OPT)
 
-AC_CHECK_HEADERS([attr/xattr.h],[],[AC_MSG_ERROR([libattr-devel is not installed.])])
+AC_CHECK_HEADERS([sys/xattr.h],[],[AC_MSG_ERROR([glibc-devel is not installed.])])
 
 AC_CHECK_LIB([pthread], [pthread_getsequence_np], [have_pthread_getsequence_np="yes"],[have_pthread_getsequence_np="no"])
     test "x$have_pthread_getsequence_np" = "xyes" && AC_DEFINE(HAVE_PTHREAD_GETSEQUENCE_NP, 1, [pthread_getsequence_np function exists])
diff --git a/robinhood-3.1/src/common/lustre_tools.c b/robinhood-3.1/src/common/lustre_tools.c
index 37f1088..5cca550 100644
--- a/robinhood-3.1/src/common/lustre_tools.c
+++ b/robinhood-3.1/src/common/lustre_tools.c
@@ -32,7 +32,7 @@
 #include <fcntl.h>
 
 #ifdef _HAVE_FID
-#include <attr/xattr.h> /* needed by Lustre_GetNameParent() */
+#include <sys/xattr.h> /* needed by Lustre_GetNameParent() */
 #endif
 
 #include "lustre_extended_types.h"
diff --git a/robinhood-3.1/src/modules/lhsm.c b/robinhood-3.1/src/modules/lhsm.c
index fdab312..31d9fb7 100644
--- a/robinhood-3.1/src/modules/lhsm.c
+++ b/robinhood-3.1/src/modules/lhsm.c
@@ -31,7 +31,7 @@
 #include <stdbool.h>
 #include <glib.h>
 #include <sys/types.h>
-#include <attr/xattr.h>
+#include <sys/xattr.h>
 
 /* config block name */
 #define LHSM_BLOCK "lhsm_config"
diff --git a/robinhood-3.1/src/policies/policy_matching.c b/robinhood-3.1/src/policies/policy_matching.c
index 766dbcb..5145d05 100644
--- a/robinhood-3.1/src/policies/policy_matching.c
+++ b/robinhood-3.1/src/policies/policy_matching.c
@@ -34,7 +34,7 @@
 #include <sys/stat.h>
 #include <unistd.h>
 #include <time.h>
-#include <attr/xattr.h>
+#include <sys/xattr.h>
 
 #define POLICY_TAG "Policy"
 
diff --git a/robinhood-3.1/src/tests/test_forcestripe.c b/robinhood-3.1/src/tests/test_forcestripe.c
index b15f4ff..99755db 100644
--- a/robinhood-3.1/src/tests/test_forcestripe.c
+++ b/robinhood-3.1/src/tests/test_forcestripe.c
@@ -15,7 +15,7 @@
 #include <unistd.h>
 #include <stdlib.h>
 #include <linux/limits.h>
-#include <attr/xattr.h>
+#include <sys/xattr.h>
 
 #include "lustre_extended_types.h"
 
diff --git a/robinhood-3.1/src/tools/ost_fids_remap.c b/robinhood-3.1/src/tools/ost_fids_remap.c
index c4fb71d..d98c827 100644
--- a/robinhood-3.1/src/tools/ost_fids_remap.c
+++ b/robinhood-3.1/src/tools/ost_fids_remap.c
@@ -22,7 +22,7 @@
 
 #include <stdio.h>
 #include <sys/types.h>
-#include <attr/xattr.h>
+#include <sys/xattr.h>
 #include <stdlib.h>
 #include <sys/param.h>
 #include <search.h>
diff --git a/robinhood-3.1/src/tools/read_lovea.c b/robinhood-3.1/src/tools/read_lovea.c
index a305063..cea3f59 100644
--- a/robinhood-3.1/src/tools/read_lovea.c
+++ b/robinhood-3.1/src/tools/read_lovea.c
@@ -6,7 +6,7 @@
 #include <stdlib.h>
 #include <stdint.h>
 #include <sys/types.h>
-#include <attr/xattr.h>
+#include <sys/xattr.h>
 #include "lustre_extended_types.h"
 
 static const char * pattern2str(uint32_t pattern)
diff --git a/robinhood-3.1/src/tools/set_lovea.c b/robinhood-3.1/src/tools/set_lovea.c
index 7ff772b..dbaec16 100644
--- a/robinhood-3.1/src/tools/set_lovea.c
+++ b/robinhood-3.1/src/tools/set_lovea.c
@@ -20,7 +20,7 @@
 
 #include <stdio.h>
 #include <sys/types.h>
-#include <attr/xattr.h>
+#include <sys/xattr.h>
 #include <stdlib.h>
 #include <sys/param.h>
 
-- 
2.16.4

