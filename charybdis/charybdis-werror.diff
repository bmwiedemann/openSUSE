From: Jan Engelhardt <jengelh@inai.de>

This -Werror is totally stupid. The code below it defines a variable,
but leaves it unused, causing contemporary compilers to emit a
warning (if there's -Wall in CFLAGS), which, with the -Werror just
above it, is upgraded to an error. So it always looks like
export-dynamic is not supported, ircd is built without it, so irc
modules can never load because the symbols are not there, and
charybdis fails to start.

---
 configure.ac |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

Index: charybdis-3.4.2/configure.ac
===================================================================
--- charybdis-3.4.2.orig/configure.ac
+++ charybdis-3.4.2/configure.ac
@@ -1020,7 +1020,7 @@ if test "$shared_modules" = yes; then
 	# all symbols visible in the dynamic symbol table.
 	hold_ldflags=$LDFLAGS
 	AC_MSG_CHECKING(for the ld -export-dynamic flag)
-	LDFLAGS="${LDFLAGS} -Wl,-export-dynamic -Werror"
+	LDFLAGS="${LDFLAGS} -Wl,-export-dynamic"
 	AC_LINK_IFELSE(AC_LANG_PROGRAM([],[int i;]), found=yes, found=no)
 	LDFLAGS=$hold_ldflags
 
