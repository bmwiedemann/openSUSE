From bfef85c948cfe6bf19c78baa2d497caf7b56d81a Mon Sep 17 00:00:00 2001
From: Kyle Altendorf <sda@fstab.net>
Date: Sat, 22 Aug 2020 17:58:08 -0400
Subject: [PATCH] Update .assert_outcomes() calls for pytest 6.0

https://github.com/python-trio/pytest-trio/pull/98#issuecomment-678699693
---
 pytest_trio/_tests/test_fixture_mistakes.py | 8 ++++----
 test-requirements.txt                       | 2 +-
 2 files changed, 5 insertions(+), 5 deletions(-)

diff --git a/pytest_trio/_tests/test_fixture_mistakes.py b/pytest_trio/_tests/test_fixture_mistakes.py
index 6da6abb..5521a80 100644
--- a/pytest_trio/_tests/test_fixture_mistakes.py
+++ b/pytest_trio/_tests/test_fixture_mistakes.py
@@ -34,7 +34,7 @@ def test_sync_indirect(indirect_trio_time):
 
     result = testdir.runpytest()
 
-    result.assert_outcomes(passed=1, error=2)
+    result.assert_outcomes(passed=1, errors=2)
     result.stdout.fnmatch_lines(
         ["*: Trio fixtures can only be used by Trio tests*"]
     )
@@ -65,7 +65,7 @@ async def test_foo(self, async_class_fixture):
 
     result = testdir.runpytest()
 
-    result.assert_outcomes(error=1)
+    result.assert_outcomes(errors=1)
     result.stdout.fnmatch_lines(["*: Trio fixtures must be function-scope*"])
 
 
@@ -89,7 +89,7 @@ async def test_whatever(async_session_fixture):
 
     result = testdir.runpytest()
 
-    result.assert_outcomes(error=1)
+    result.assert_outcomes(errors=1)
     result.stdout.fnmatch_lines(["*: Trio fixtures must be function-scope*"])
 
 
@@ -113,7 +113,7 @@ def test_whatever(async_fixture):
 
     result = testdir.runpytest()
 
-    result.assert_outcomes(error=1)
+    result.assert_outcomes(errors=1)
     result.stdout.fnmatch_lines(
         ["*: Trio fixtures can only be used by Trio tests*"]
     )
diff --git a/test-requirements.txt b/test-requirements.txt
index b2be0f9..5c53c25 100644
--- a/test-requirements.txt
+++ b/test-requirements.txt
@@ -1,3 +1,3 @@
-pytest !=3.7.0, !=3.7.1  # https://github.com/python-trio/pytest-trio/pull/50#issuecomment-413124393
+pytest >= 6.0.0  # https://github.com/python-trio/pytest-trio/pull/98#issuecomment-678699693
 pytest-cov
 hypothesis>=3.64
