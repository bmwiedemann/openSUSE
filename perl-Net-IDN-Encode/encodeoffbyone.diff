--- ./lib/Net/IDN/Punycode.xs.orig	2014-07-22 13:54:38.988433322 +0000
+++ ./lib/Net/IDN/Punycode.xs	2014-07-22 13:59:25.217074100 +0000
@@ -138,7 +138,7 @@ encode_punycode(input)
 		      q = delta;
 
 		      for(k = BASE;; k += BASE) {
-			if(re_p >= re_e) {
+			if(re_p + 1 >= re_e) {
 			  length_guess = re_e - re_s + 16;
 			  re_e = SvGROW(RETVAL, length_guess);
 			  re_p = re_e + (re_p - re_s);
