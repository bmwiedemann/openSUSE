-------------------------------------------------------------------
Sun Oct  8 07:29:29 UTC 2017 - coolo@suse.com

- remove -test subspec (which ignored errors in make check anyway)
- add 50ff73f26855151910e039b8480473024ae08b8a.patch to fix tests
  with latest perl

-------------------------------------------------------------------
Sun Oct  8 07:23:09 UTC 2017 - coolo@suse.com

- updated to 1.039
   see /usr/share/doc/packages/perl-PAR-Packer/Changes

  1.039  2017-09-28
  
  - Brown paper bag: add missing t/utils.pl
  
  1.038  2017-09-27
  
  - Fix "RT#122949: PAR-Packer-1.37 executables split arguments containing whitespace"
    - on Windows, quote elements of argv array passed to spawnvp();
      algorithm stolen from Win32::ShellQuote.
  
  - introduce helper t/utils.pl to streamline tests 
  
  - require IPC::Run3 for test
  
  - make test work with "dot-less" perl and PERL_USE_UNSAFE_INC=0
  
  1.037  2017-05-28
  
  - Fix RT#121268 for PAR-Packer: error installing PAR-Packer on windows10 ( 64Bit )
    - on Windows, make dl_findfile() search first in the directory containing
      the perl executable (to avoid erroneous hits in other members of PATH)
  
  - Fix RT#120038: [PATCH] Fix build for VS2015 (VC++ 14)
    and merge pull request from Steve Hay (shay@cpan.org)
    - makes PAR::Packer work with VisualStudio 2015. Thanks, Steve!
  
  - Fix RT#120041: --exclude gets confused by missing modules
    - guard against Module::ScanDeps::_find_in_inc() returning ()
  
  - Fail early when packing with a version of Perl
    that's different frome the one PAR::Packer was built with.
  
    Scenario: User has built and installed PAR::Packer (or got it
    pre-packaged), then installs a newer version of Perl, then does
  
      pp -o foo.exe foo.pl
  
    But running foo.exe then fails with
  
      foo.exe
  
      C:\Users\jon\AppData\Local\Temp\parlzcPb.exe: Perl lib version (5.24.1) doesn't match executable 'perl.exe' version (5.24.0) at C:/Perl64/lib/Config.pm line 62.
      Compilation failed in require at C:/Perl64/lib/Errno.pm line 10.
      ...
      C:\Perl64\sitein/pp: Failed to extract a parl from 'PAR::StrippedPARL::Static' to file 'C:\Users\jon\AppData\Local\Temp\parl3swwQJc.exe' at C:/Perl64/site/lib/PAR/Packer.pm line 1184, <DATA> line 1.
  
    Now, pp will fail and with a more useful message.
  
  - Switch from Module::Install to ExtUtils::MakeMaker
  
  - Rewrite the library search (for "pp --link ...")
    - start with $Config{libpth} which is *not* the runtime loader (e.g.
      ld.so on Linux) search path, but rather the linker (ld) search path -
      but it's the best guess without having to grok /etc/ld.so.conf
    - augment that with $ENV{LD_LIBRARY_PATH} or similar
  
  - Rework how we determine the name under which a library should be installed
    - use objdump (on Linux and other ELF-based OS) and otool on Darwin
    - fall back to "chasing symlinks" otherwise
  
  - Remove PAR_ARGV_*, PAR_ARGC stuff from script/par.pl and myldr/boot.c.
    - Dunno what problem this obscure way of passing the command line arguments
      from a packed executable to the custom Perl interpreter was intended
      to fix, but arguments pass just fine through execvp (or spawnvp)
      to perl_parse.
  
  - Only set the environment variable for the shared library search path
    (e.g. LD_LIBRARY_PATH) that is relevant for the operating system
    that we're running on
  
  - Use DynaLoader::dl_findfile to locate DLLs instead of homegrown stuff.
  
  - Remove "par_base" - prebuilt .par's haven't been available for ages

-------------------------------------------------------------------
Wed Feb  1 15:01:41 UTC 2017 - josef.moellers@suse.com

- Update to 1.036:

  - Fix RT#118094: Race condition exists when building cache for pp built executables
    - guard against concurrent extraction attempts
    - bump "requires" on PAR to a version with additional guards

  - Fix RT#118903: Does not install when '.' is not in @INC
    - apply patch from Graham Ollis (PLICEASE), thanks!
    - make the Module::Install stuff work in the "author" case
      NOTE: "use lib '.'" does *not* work in this case

  - Move to GitHub. Thanks, OpenFoundry, for years of service.
    - add Perl_5 LICENSE file, make "repository" point to GitHub
    - always refer to the included LICENSE file
    - point bug reports to bug-par-packer@rt.cpan.org
    - add an empty file "inc/.author/.keep" as Git doesn't track empty
      directories

  - Fix RT #118053: Problem with packed perl archive for biber on 64-bit Cygwin
    - embed cygcrypt-0.dll since it isn't (anymore) in the set of
      default Cygwin packages

  - Upgrade to Module::Install 1.17

- Update to 1.035:

  - Fix RT#116254: Compilation error under strawberry perl 5.24 x64

    s/PP_VERSION/PAR_PACKER_VERSION/ as Strawberry Perl also defines
    PP_VERSION (in c/x86_64-w64-mingw32/include/wincrypt.h)

- Update to 1.034:

  - Fix RT#116056: Fixes for Cygwin build of PAR::Packer
    - detect whether we're using a 32-bit or 64-bit perl
    - fix elision of "-l<perl lib>" from $static_ldflags
    - add $static_ldflags back to $boot_ldflags

  - Add information to packed executable about which version
    of PAR::Packer was used to build it (suggested by Johan Vromans):
    - accessible from the packaged Perl script as $PAR::Packer::VERSION
    - by looking for the string "Packed by PAR::Packer ..." in the executable
      itself (using "strings exe | grep ..." or the like)

  - Use ldd on cygwin, too
    - NOTE: a "system lib" on cygwin is either in /usr/bin
      or a Windows "system lib"

-------------------------------------------------------------------
Fri Jun 17 22:56:24 UTC 2016 - thb@libreoffice.org

- Update to 1.033:
  - Fix RT#114229: v1.32 still won't install on strawberry perl v5.22.2
  - Drop the "re-exec myself" in myldr/internals.c
  - Really suppress generation of myldr/MYMETA.* and don't install
    man pages for myldr/{Dynamic,Static}.pm

- Update to 1.032:
  - Unbreak PAR::Packer for Perl 5.23.9 and higher
  - Fix RT#114155: Makefile.PL error - not loading ExtUtils::MakeMaker
  - extract-embedded.pl: show starting offset of embedded files

- Update to 1.031:
  - Fix RT#113618: Strange issue with not packing libperl.dylib
  - Implement namespace options for "-M" like ActiveState's perlapp
  - Fix RT#113463: Fix spelling error in manpage

- Update to 1.030:
  - Fix RT#111455: unable to use -x and -u with pp
  - Fix RT#110480: Unpacking exe: File exists
  - Fix RT#111896: PAR Question Solaris 10
  - file2c.pl: switch back from array of unsiged to (hex encoded) strings.
  - Skip a test if Archive::Unzip::Burst is detected (this messes up expected
    mtimes for extracted files).
  - Make a test work with early versions of Perl 5.8.x (x < 9) that have a bug
    with compiled regexes and the /m modifier.

- Update to 1.029:
  - Add option "-u" ("--unicode") to pp to explicitly package Unicode support
  - Remove all references to http://par.perl.org/, doesn't exist anymore
  - Remove Internals::PAR::CLEARSTACK

- Update to 1.028:
  - Fix RT#109123: v1.027 tests are not passed under windows

- Update to 1.027:
  - Add option -M Foo::Bar:: to pp (note the trailing double colon)
  - Fix RT#109110: Incompatible with Module::ScanDeps 1.20

- Update to 1.026:
  - Fix RT#101800: [PATCH] Reinstate files to inc dir if deleted by external process
  - Find the "\nPAR.pm\n" signature in a .par (or packed executable)
  - Fix RT#104635 for PAR-Packer: IO error the first time an executable built by the packer
  - Fix RT#104509: Problem signing PAR file,
    and RT#104560: [PATCH] list added files in manifest
  - Make MIME::Types work "out of the box"
  - Bump requirement on PAR (for the fix for RT #103861), add a test.
  - Update tkpp ito 1.5:
  - Make pp fail when an unknown option is encountered.
  - Remove PAR::Packer::_append_parl(), not called anywhere.
  - Add license; update repository OpenFoundry repository URL

- Update to 1.025:
  - Fix PAR::Packer "make test" problem with Strawberry Portable
  - Fix for PAR-Packer 1.024 with a nonstandard libperl.so name
    Patch from markus.jansen@ericsson.com, thanks!
  - Fix #101662: Prevent shared libs from being cached in memory on AIX
    Applied patch from Thoke@northpeak.org, thanks.
    Note: this is one half of the fix, the other is in PAR

- Update to 1.024:
  - Fix RT #99231: Problem with PAR::Packer 1.022 on Perl 5.20.1 and earlier

- Update to 1.023:
  - Fix RT #99231: Problem with PAR::Packer 1.022 on Perl 5.20.1 and earlier
  - Fix RT #63939: The behaviour of "pp --link ..." is subtly different between OSX and Linux
  - Bump required version of Module::ScanDeps,
    makes t/90-rt59710.t pass again on perl 5.21.x
  - die if a requested shared library (option -l) can't be found.
  - Add a patch rule so that Mozilla::CA finds its (extracted) cacert.pem file.
  - Upgrade to Module::Install 1.14.

- Update to 1.022:
  - Fix RT#98955: installation fails | Can't locate String/ShellQuote.pm
  - Simply enclose the filenames in double quotes, should work on both
    *nix and Windows in all reasonable scenarios.
  - Drop incorrectly specified 'Digital signature support' "feature": simply
    "recommends" the required modules.

- Update to 1.021:
  - Fix #98791: PAR-Packer fails to build with DWIMPerl/Strawberry Perl due to unquoted path name

- Update to 1.020:
  - Implement option --xargs for pp
  - Update to Module::Install 1.10

- Update to 1.019:
  - Fix RT #96288: PAR::Packer unable to build under Win32/ActivePerl v5.14.2
        RT #96739: "bsd_glob" is not defined on perl 5.14.x and earlier
        RT #97018 (Issue while upgrading PAR::Packer )
  - Fix RT #59224 (make error with version 1.006 on aix 5.3)
  - Update documentation wrt the name of the cache directory.

- Update to 1.018:
  - [DJIBEL] tkpp 1.4 : Since PAR::Packer 1.015, tkpp doesn't work
  - Use bsd_glob() instead of glob() to avoid problems with patterns that
    contain whitespace
  - Fix RT #93008: install failure with ubuntu / puppet

-------------------------------------------------------------------
Wed May 13 13:00:00 CET 2014 - tbehrens@suse.com

- Update to 1.017:
  RT #84588: OSX: incorrect detection of gcc (unsupported option '-static-libgcc')
  merged with:
  - RT #90198: PAR::Packer fails to compile in Mac OS X 10.9 Mavericks
  - RT #91086: PAR-Packer-1.016 fails to install on OSX)

  clang on OSX pretends to be gcc, but doesn't implement gcc's option "-static-libgcc" 
  - use this option only on Windows (when using the MingW toolchain).

  Drop a test that was using Inline::C just to wrap native execvp().
  - It caused failures on CPAN Testers (if accidentally Inline was
    installed) that were unrelated to PAR::Packer.

- Update to 1.016:
    RT #90870: Segmentation fault (core dumped) (MooX::Options)
    - any "die" in a packed executable causes the executable to segfault
      (at least on Linux and Perl 5.18.1)
    - remove a line from XS code that sets an internal perl variable

-------------------------------------------------------------------
Wed Nov 13 15:17:28 CET 2013 - pth@suse.de

- Update to 1.015:
  RT #82916: Terminating during unpack results in corrupted cache, 
             failure on next start
  - apply (slightly modified) patch from shutton@pobox.com, thanks!

  RT #88297 (-M crashes pp if option contains backslashes)
  - _add_file(): do _not_ use $zip->memberNamed(...) to refer to the
                 just added Archive::Zip::Member; instead use the
                 return value of $zip->addFile or $zip->addString 

  minor changes
  - use File::Spec::Functions, get rid of ugly File::Spec->... calls 
  - set $pre_res using catfile() instead of hardcoding a backslash;
    this might help on Cygwin
  - fix -Mblib option for run_with_inc.pl: we want the blib in the top 
    level directory

-------------------------------------------------------------------
Thu Sep  5 18:28:38 CEST 2013 - mls@suse.de

- add libperl_requires, as we link against libperl and thus
  need a specific version of perl

-------------------------------------------------------------------
Thu Jan 10 10:33:56 CET 2013 - ro@suse.de

- update to 1.014
  * tkpp 1.3 : --addfile option in GUI updated : 
  * Bug fixes, etc. 
- update to 1.013
  * New version of Tkpp (Version 1.2) (cf. RT #69517)
  * Bug fixes, etc.
- update to 1.012
  * Bug fixes, etc.
- update to 1.011
  * Bug fixes, etc.

-------------------------------------------------------------------
Wed May 23 07:34:14 UTC 2012 - cfarrell@suse.com

- license update: GPL-1.0+ or Artistic-1.0
  SPDX syntax (http://www.spdx.org/licenses)

-------------------------------------------------------------------
Thu Jul 14 12:16:41 CEST 2011 - pth@suse.de

- Update to 1.010
* Bug fixes, etc.

    - Adapt for changes in XSloader.pm (>= 0.14)
      The old rule in PatchContent.pm no longer works with this version; 
      this effectively disables how PAR::Packer intercepts loading of DLLs.
      Add a new rule for the code in recent XSloader.pm.
      NOTE: This problem affected all users of Perl >= 5.14.0 as this
      was the first stable release to include XSLoader 0.14.
      Also affected: Strawberry (at least) 5.12.3 which also comes
      with XSLoader 0.14.

    - RT #67681: can't write file
      During packing several temp files are created in the user's
      working directory - this will fail if the working directory is read-only.
      Fix up all calls to File::Temp::tempfile with TMPDIR => 1 
      and drop the bogus check whether cwd is writable.

      NOTE: test 32 of t/20-pp.t may fail. I have received conflicting reports 
      about this, but just wanted to make a release to get wider coverage.

-------------------------------------------------------------------
Sun May  1 10:39:19 UTC 2011 - coolo@opensuse.org

- updated to 1.009
  * Bug fixes, etc.
  
      - RT #53463: PAR::Packer 1.002 on HPUX 11.23 PA-RISC issue
        (HPUX) patch from Lars-Gunnar Taube
        - add SHLIB_PATH to ld_path_keys in myldr/mktmpdir.c
        - call "chatr +s enable ..." on the extracted custom perl
  
      - RT #65535: Unable to run perl script packaged with pp under cygwin
        on another Windows XP installation
  
        - lib/PAR/Filter/PatchContent.pm: patch AutoLoader.pm to add "cygwin"
         to the list of "is_dosish" $^O identifiers; otherwise
         AutoLoader::find_filename() will mangle filenames that start with
         a drive letter
        - script/par.pl: use PAR::Filter::PatchContent to patch any modules
         embedded in the packed excutable; this supersedes the ad hoc
         patching of XSLoader.pm and will now also patch AutoLoader.pm
        - myldr/Makefile.PL: when generating $parl_exe or $parldy_exe make
         sure that we use the PAR::* modules (e.g PAR::Filter::PatchContent)
         from the build environment rather than a possibly
         installed older version
  
      - "Fix" #64485: pp PodStrip module included
        document how to inhibit pod stripping (copied from PAR.pm POD)
  
      - bump required Module::ScanDeps to 1.01 (hopefully fixes failures
        in t/90-rt59710.t with Perl 5.13.x)
  
      - reworked the build system a bit to fix recurring problems with dmake
        on Windows and parallel makes in general:
  
        - copy myldr/{parl,parldyn} to blib/scripts from myldr/Makefile
        - myldr/Makefile was completely handcrafted; try to generate it
         using standard ExtUtils::MakeMaker tools as much as possible
        - generate myldr/{Dynamic,Static}.pm from templates {Dynamic,Static}.in
        - rename static.c to boot.c
  
      - add "configure_requires" for ExtUtils::Embed
  
      - pick up some POD spelling fixes from Debian
        (thanks, Jonathan Yu <jawnsy@cpan.org>)

-------------------------------------------------------------------
Tue Nov 23 19:07:55 CET 2010 - pth@suse.de

- Package as bz2 to have it build on SLE10.

-------------------------------------------------------------------
Tue Nov 23 16:44:08 CET 2010 - pth@suse.de

- initial package 1.008
  * created by cpanspec 1.78
- BuildRequire perl(Test::Pod).
- Don't run multiple instances of make as Makefile can't cope with it.
- Create a separate spec for running the tests.
