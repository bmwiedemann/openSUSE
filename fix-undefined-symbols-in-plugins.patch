diff --git a/plugins/auth-by-ip/CMakeLists.txt b/plugins/auth-by-ip/CMakeLists.txt
index 45260bd..e5e25d8 100644
--- a/plugins/auth-by-ip/CMakeLists.txt
+++ b/plugins/auth-by-ip/CMakeLists.txt
@@ -1,7 +1,7 @@
 include_directories(${mosquitto_SOURCE_DIR} ${mosquitto_SOURCE_DIR}/include
 			${OPENSSL_INCLUDE_DIR} ${STDBOOL_H_PATH} ${STDINT_H_PATH})
 
-add_library(mosquitto_auth_by_ip SHARED mosquitto_auth_by_ip.c)
+add_library(mosquitto_auth_by_ip MODULE mosquitto_auth_by_ip.c)
 set_target_properties(mosquitto_auth_by_ip PROPERTIES
 	POSITION_INDEPENDENT_CODE 1
 )
diff --git a/plugins/dynamic-security/CMakeLists.txt b/plugins/dynamic-security/CMakeLists.txt
index 213ea03..0e02518 100644
--- a/plugins/dynamic-security/CMakeLists.txt
+++ b/plugins/dynamic-security/CMakeLists.txt
@@ -12,7 +12,7 @@ if (CJSON_FOUND AND WITH_TLS)
 	include_directories(${CLIENT_INC})
 	link_directories(${CLIENT_DIR} ${mosquitto_SOURCE_DIR})
 
-	add_library(mosquitto_dynamic_security SHARED
+	add_library(mosquitto_dynamic_security MODULE
 		acl.c
 		auth.c
 		clients.c
diff --git a/plugins/message-timestamp/CMakeLists.txt b/plugins/message-timestamp/CMakeLists.txt
index e53a4bc..d28cb1d 100644
--- a/plugins/message-timestamp/CMakeLists.txt
+++ b/plugins/message-timestamp/CMakeLists.txt
@@ -1,7 +1,7 @@
 include_directories(${mosquitto_SOURCE_DIR} ${mosquitto_SOURCE_DIR}/include
 			${OPENSSL_INCLUDE_DIR} ${STDBOOL_H_PATH} ${STDINT_H_PATH})
 
-add_library(mosquitto_message_timestamp SHARED mosquitto_message_timestamp.c)
+add_library(mosquitto_message_timestamp MODULE mosquitto_message_timestamp.c)
 set_target_properties(mosquitto_message_timestamp PROPERTIES
 	POSITION_INDEPENDENT_CODE 1
 )
diff --git a/plugins/payload-modification/CMakeLists.txt b/plugins/payload-modification/CMakeLists.txt
index a449291..e77c870 100644
--- a/plugins/payload-modification/CMakeLists.txt
+++ b/plugins/payload-modification/CMakeLists.txt
@@ -2,7 +2,7 @@ include_directories(${mosquitto_SOURCE_DIR} ${mosquitto_SOURCE_DIR}/include
 			${OPENSSL_INCLUDE_DIR} ${STDBOOL_H_PATH} ${STDINT_H_PATH})
 link_directories(${mosquitto_SOURCE_DIR})
 
-add_library(mosquitto_payload_modification SHARED mosquitto_payload_modification.c)
+add_library(mosquitto_payload_modification MODULE mosquitto_payload_modification.c)
 set_target_properties(mosquitto_payload_modification PROPERTIES
 	POSITION_INDEPENDENT_CODE 1
 )
