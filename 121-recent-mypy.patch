From 4b0a8bf541bd9218c8704d0faea501f3811a4504 Mon Sep 17 00:00:00 2001
From: David Tucker <david@tucker.name>
Date: Tue, 15 Jun 2021 20:10:36 -0700
Subject: [PATCH 1/3] Test with mypy 0.9x

---
 tests/test_pytest_mypy.py |    2 +-
 tox.ini                   |   32 +++++++++++++++++---------------
 2 files changed, 18 insertions(+), 16 deletions(-)

--- a/tests/test_pytest_mypy.py
+++ b/tests/test_pytest_mypy.py
@@ -118,7 +118,7 @@ def test_mypy_ignore_missings_imports(te
     result.assert_outcomes(failed=mypy_checks)
     result.stdout.fnmatch_lines(
         [
-            "2: error: Cannot find *module named '{module_name}'".format(
+            "2: error: Cannot find *module named *{module_name}*".format(
                 module_name=module_name,
             ),
         ],
--- a/tox.ini
+++ b/tox.ini
@@ -3,21 +3,21 @@
 minversion = 3.20
 isolated_build = true
 envlist =
-    py35-pytest{3.5, 3.x, 4.0, 4.x, 5.0, 5.x, 6.0, 6.x}-mypy{0.50, 0.5x, 0.60, 0.6x, 0.70, 0.7x, 0.80, 0.8x}
-    py36-pytest{3.5, 3.x, 4.0, 4.x, 5.0, 5.x, 6.0, 6.x}-mypy{0.50, 0.5x, 0.60, 0.6x, 0.70, 0.7x, 0.80, 0.8x}
-    py37-pytest{3.5, 3.x, 4.0, 4.x, 5.0, 5.x, 6.0, 6.x}-mypy{0.50, 0.5x, 0.60, 0.6x, 0.70, 0.7x, 0.80, 0.8x}
-    py38-pytest{3.5, 3.x, 4.0, 4.x, 5.0, 5.x, 6.0, 6.x}-mypy{0.71, 0.7x, 0.80, 0.8x}
-    py39-pytest{3.5, 3.x, 4.0, 4.x, 5.0, 5.x, 6.0, 6.x}-mypy{0.78, 0.7x, 0.80, 0.8x}
+    py35-pytest{3.5, 3.x, 4.0, 4.x, 5.0, 5.x, 6.0, 6.x}-mypy{0.50, 0.5x, 0.60, 0.6x, 0.70, 0.7x, 0.80, 0.8x, 0.90, 0.9x}
+    py36-pytest{3.5, 3.x, 4.0, 4.x, 5.0, 5.x, 6.0, 6.x}-mypy{0.50, 0.5x, 0.60, 0.6x, 0.70, 0.7x, 0.80, 0.8x, 0.90, 0.9x}
+    py37-pytest{3.5, 3.x, 4.0, 4.x, 5.0, 5.x, 6.0, 6.x}-mypy{0.50, 0.5x, 0.60, 0.6x, 0.70, 0.7x, 0.80, 0.8x, 0.90, 0.9x}
+    py38-pytest{3.5, 3.x, 4.0, 4.x, 5.0, 5.x, 6.0, 6.x}-mypy{0.71, 0.7x, 0.80, 0.8x, 0.90, 0.9x}
+    py39-pytest{3.5, 3.x, 4.0, 4.x, 5.0, 5.x, 6.0, 6.x}-mypy{0.78, 0.7x, 0.80, 0.8x, 0.90, 0.9x}
     publish
     static
 
 [gh-actions]
 python =
-    3.5: py35-pytest{3.5, 3.x, 4.0, 4.x, 5.0, 5.x, 6.0, 6.x}-mypy{0.50, 0.5x, 0.60, 0.6x, 0.70, 0.7x, 0.80, 0.8x}
-    3.6: py36-pytest{3.5, 3.x, 4.0, 4.x, 5.0, 5.x, 6.0, 6.x}-mypy{0.50, 0.5x, 0.60, 0.6x, 0.70, 0.7x, 0.80, 0.8x}
-    3.7: py37-pytest{3.5, 3.x, 4.0, 4.x, 5.0, 5.x, 6.0, 6.x}-mypy{0.50, 0.5x, 0.60, 0.6x, 0.70, 0.7x, 0.80, 0.8x}
-    3.8: py38-pytest{3.5, 3.x, 4.0, 4.x, 5.0, 5.x, 6.0, 6.x}-mypy{0.71, 0.7x, 0.80, 0.8x}, publish, static
-    3.9: py39-pytest{3.5, 3.x, 4.0, 4.x, 5.0, 5.x, 6.0, 6.x}-mypy{0.78, 0.7x, 0.80, 0.8x}
+    3.5: py35-pytest{3.5, 3.x, 4.0, 4.x, 5.0, 5.x, 6.0, 6.x}-mypy{0.50, 0.5x, 0.60, 0.6x, 0.70, 0.7x, 0.80, 0.8x, 0.90, 0.9x}
+    3.6: py36-pytest{3.5, 3.x, 4.0, 4.x, 5.0, 5.x, 6.0, 6.x}-mypy{0.50, 0.5x, 0.60, 0.6x, 0.70, 0.7x, 0.80, 0.8x, 0.90, 0.9x}
+    3.7: py37-pytest{3.5, 3.x, 4.0, 4.x, 5.0, 5.x, 6.0, 6.x}-mypy{0.50, 0.5x, 0.60, 0.6x, 0.70, 0.7x, 0.80, 0.8x, 0.90, 0.9x}
+    3.8: py38-pytest{3.5, 3.x, 4.0, 4.x, 5.0, 5.x, 6.0, 6.x}-mypy{0.71, 0.7x, 0.80, 0.8x, 0.90, 0.9x}, publish, static
+    3.9: py39-pytest{3.5, 3.x, 4.0, 4.x, 5.0, 5.x, 6.0, 6.x}-mypy{0.78, 0.7x, 0.80, 0.8x, 0.90, 0.9x}
 
 [testenv]
 deps =
@@ -134,6 +134,8 @@ deps =
     mypy0.80: mypy >= 0.800, < 0.810
     mypy0.81: mypy >= 0.810, < 0.820
     mypy0.8x: mypy >= 0.800, < 0.900
+    mypy0.90: mypy >= 0.900, < 0.910
+    mypy0.9x: mypy >= 0.900, <= 0.999
 
     pexpect ~= 4.8.0
 
@@ -145,8 +147,8 @@ testpaths = tests
 [testenv:publish]
 passenv = TWINE_*
 deps =
-    build ~= 0.3.0
-    twine ~= 3.3.0
+    build ~= 0.4.0
+    twine ~= 3.4.0
 commands =
     {envpython} -m build --outdir {distdir} .
     twine {posargs:check} {distdir}/*
@@ -154,10 +156,10 @@ commands =
 [testenv:static]
 deps =
     bandit ~= 1.7.0
-    black ~= 20.8b
-    flake8 ~= 3.8.3
+    black ~= 21.6b
+    flake8 ~= 3.9.0
     flake8-commas ~= 2.0.0
-    mypy >= 0.810, < 0.820
+    mypy >= 0.900, < 0.910
 commands =
     black --check src setup.py tests
     flake8 src setup.py tests
