From 187fa661a347894b933be0c71c71ec7fc0e26059 Mon Sep 17 00:00:00 2001
From: derselbst <tom.mbrt@googlemail.com>
Date: Sat, 29 Dec 2018 22:27:43 +0100
Subject: [PATCH 2/2] more locking issues

---
 libinstpatch/libinstpatch/IpatchBase.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/libinstpatch/libinstpatch/IpatchBase.c b/libinstpatch/libinstpatch/IpatchBase.c
index d81c76b..9e6ae5e 100644
--- a/libinstpatch/libinstpatch/IpatchBase.c
+++ b/libinstpatch/libinstpatch/IpatchBase.c
@@ -293,7 +293,7 @@ ipatch_base_get_file (IpatchBase *base)
   IPATCH_ITEM_RLOCK (base);
   file = base->file;
   if (file) g_object_ref (file);
-  IPATCH_ITEM_RLOCK (base);
+  IPATCH_ITEM_RUNLOCK (base);
 
   return (file);
 }
@@ -337,7 +337,7 @@ ipatch_base_real_set_file_name (IpatchBase *base, const char *file_name)
       return;
     }
   ipatch_file_set_name (base->file, file_name);
-  IPATCH_ITEM_WUNLOCK (base);
+  IPATCH_ITEM_RUNLOCK (base);
 }
 
 /**
-- 
2.16.4

